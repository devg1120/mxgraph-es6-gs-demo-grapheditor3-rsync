var Fe=Object.defineProperty;var Be=(a,i,t)=>i in a?Fe(a,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[i]=t;var c=(a,i,t)=>Be(a,typeof i!="symbol"?i+"":i,t);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();class mxPoint{constructor(i,t){this.x=i??0,this.y=t??0}equals(i){return i!=null&&i.x==this.x&&i.y==this.y}clone(){return cloneObj(this)}}function cloneObj(a,i,t){t=t??!1;var e=null;if(a!=null&&typeof a.constructor=="function"){e=new a.constructor;for(var n in a)n!="mxObjectId"&&i==null&&(!t&&typeof a[n]=="object"?e[n]=cloneObj(a[n]):e[n]=a[n])}return e}class mxRectangle extends mxPoint{constructor(i,t,e,n){super(i,t),this.width=e??0,this.height=n??0}setRect(i,t,e,n){this.x=i,this.y=t,this.width=e,this.height=n}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}add(i){if(i!=null){var t=Math.min(this.x,i.x),e=Math.min(this.y,i.y),n=Math.max(this.x+this.width,i.x+i.width),s=Math.max(this.y+this.height,i.y+i.height);this.x=t,this.y=e,this.width=n-t,this.height=s-e}}intersect(i){if(i!=null){var t=this.x+this.width,e=i.x+i.width,n=this.y+this.height,s=i.y+i.height;this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.width=Math.min(t,e)-this.x,this.height=Math.min(n,s)-this.y}}grow(i){return this.x-=i,this.y-=i,this.width+=2*i,this.height+=2*i,this}getPoint(){return new mxPoint(this.x,this.y)}rotate90(){var i=(this.width-this.height)/2;this.x+=i,this.y-=i;var t=this.width;this.width=this.height,this.height=t}equals(i){return i!=null&&i.x==this.x&&i.y==this.y&&i.width==this.width&&i.height==this.height}static fromRectangle(i){return new mxRectangle(i.x,i.y,i.width,i.height)}}var z;let mxConstants$1=(z=class{},c(z,"DEFAULT_HOTSPOT",.3),c(z,"MIN_HOTSPOT_SIZE",8),c(z,"MAX_HOTSPOT_SIZE",0),c(z,"RENDERING_HINT_EXACT","exact"),c(z,"RENDERING_HINT_FASTER","faster"),c(z,"RENDERING_HINT_FASTEST","fastest"),c(z,"DIALECT_SVG","svg"),c(z,"DIALECT_VML","vml"),c(z,"DIALECT_MIXEDHTML","mixedHtml"),c(z,"DIALECT_PREFERHTML","preferHtml"),c(z,"DIALECT_STRICTHTML","strictHtml"),c(z,"NS_SVG","http://www.w3.org/2000/svg"),c(z,"NS_XHTML","http://www.w3.org/1999/xhtml"),c(z,"NS_XLINK","http://www.w3.org/1999/xlink"),c(z,"SHADOWCOLOR","gray"),c(z,"VML_SHADOWCOLOR","gray"),c(z,"SHADOW_OFFSET_X",2),c(z,"SHADOW_OFFSET_Y",3),c(z,"SHADOW_OPACITY",1),c(z,"NODETYPE_ELEMENT",1),c(z,"NODETYPE_ATTRIBUTE",2),c(z,"NODETYPE_TEXT",3),c(z,"NODETYPE_CDATA",4),c(z,"NODETYPE_ENTITY_REFERENCE",5),c(z,"NODETYPE_ENTITY",6),c(z,"NODETYPE_PROCESSING_INSTRUCTION",7),c(z,"NODETYPE_COMMENT",8),c(z,"NODETYPE_DOCUMENT",9),c(z,"NODETYPE_DOCUMENTTYPE",10),c(z,"NODETYPE_DOCUMENT_FRAGMENT",11),c(z,"NODETYPE_NOTATION",12),c(z,"TOOLTIP_VERTICAL_OFFSET",16),c(z,"DEFAULT_VALID_COLOR","#00FF00"),c(z,"DEFAULT_INVALID_COLOR","#FF0000"),c(z,"OUTLINE_HIGHLIGHT_COLOR","#00FF00"),c(z,"OUTLINE_HIGHLIGHT_STROKEWIDTH",5),c(z,"HIGHLIGHT_STROKEWIDTH",3),c(z,"HIGHLIGHT_SIZE",2),c(z,"HIGHLIGHT_OPACITY",100),c(z,"CURSOR_MOVABLE_VERTEX","move"),c(z,"CURSOR_MOVABLE_EDGE","move"),c(z,"CURSOR_LABEL_HANDLE","default"),c(z,"CURSOR_TERMINAL_HANDLE","pointer"),c(z,"CURSOR_BEND_HANDLE","crosshair"),c(z,"CURSOR_VIRTUAL_BEND_HANDLE","crosshair"),c(z,"CURSOR_CONNECT","pointer"),c(z,"HIGHLIGHT_COLOR","#00FF00"),c(z,"CONNECT_TARGET_COLOR","#0000FF"),c(z,"INVALID_CONNECT_TARGET_COLOR","#FF0000"),c(z,"DROP_TARGET_COLOR","#0000FF"),c(z,"VALID_COLOR","#00FF00"),c(z,"INVALID_COLOR","#FF0000"),c(z,"EDGE_SELECTION_COLOR","#00FF00"),c(z,"VERTEX_SELECTION_COLOR","#00FF00"),c(z,"VERTEX_SELECTION_STROKEWIDTH",1),c(z,"EDGE_SELECTION_STROKEWIDTH",1),c(z,"VERTEX_SELECTION_DASHED",!0),c(z,"EDGE_SELECTION_DASHED",!0),c(z,"GUIDE_COLOR","#FF0000"),c(z,"GUIDE_STROKEWIDTH",1),c(z,"OUTLINE_COLOR","#0099FF"),c(z,"OUTLINE_STROKEWIDTH",3),c(z,"HANDLE_SIZE",6),c(z,"LABEL_HANDLE_SIZE",4),c(z,"HANDLE_FILLCOLOR","#00FF00"),c(z,"HANDLE_STROKECOLOR","black"),c(z,"LABEL_HANDLE_FILLCOLOR","yellow"),c(z,"CONNECT_HANDLE_FILLCOLOR","#0000FF"),c(z,"LOCKED_HANDLE_FILLCOLOR","#FF0000"),c(z,"OUTLINE_HANDLE_FILLCOLOR","#00FFFF"),c(z,"OUTLINE_HANDLE_STROKECOLOR","#0033FF"),c(z,"DEFAULT_FONTFAMILY","Arial,Helvetica"),c(z,"DEFAULT_FONTSIZE",11),c(z,"DEFAULT_TEXT_DIRECTION",""),c(z,"LINE_HEIGHT",1.2),c(z,"WORD_WRAP","normal"),c(z,"ABSOLUTE_LINE_HEIGHT",!1),c(z,"DEFAULT_FONTSTYLE",0),c(z,"DEFAULT_STARTSIZE",40),c(z,"DEFAULT_MARKERSIZE",6),c(z,"DEFAULT_IMAGESIZE",24),c(z,"ENTITY_SEGMENT",30),c(z,"RECTANGLE_ROUNDING_FACTOR",.15),c(z,"LINE_ARCSIZE",20),c(z,"ARROW_SPACING",0),c(z,"ARROW_WIDTH",30),c(z,"ARROW_SIZE",30),c(z,"PAGE_FORMAT_A4_PORTRAIT",new mxRectangle(0,0,827,1169)),c(z,"PAGE_FORMAT_A4_LANDSCAPE",new mxRectangle(0,0,1169,827)),c(z,"PAGE_FORMAT_LETTER_PORTRAIT",new mxRectangle(0,0,850,1100)),c(z,"PAGE_FORMAT_LETTER_LANDSCAPE",new mxRectangle(0,0,1100,850)),c(z,"NONE","none"),c(z,"STYLE_PERIMETER","perimeter"),c(z,"STYLE_SOURCE_PORT","sourcePort"),c(z,"STYLE_TARGET_PORT","targetPort"),c(z,"STYLE_PORT_CONSTRAINT","portConstraint"),c(z,"STYLE_PORT_CONSTRAINT_ROTATION","portConstraintRotation"),c(z,"STYLE_SOURCE_PORT_CONSTRAINT","sourcePortConstraint"),c(z,"STYLE_TARGET_PORT_CONSTRAINT","targetPortConstraint"),c(z,"STYLE_OPACITY","opacity"),c(z,"STYLE_FILL_OPACITY","fillOpacity"),c(z,"STYLE_STROKE_OPACITY","strokeOpacity"),c(z,"STYLE_TEXT_OPACITY","textOpacity"),c(z,"STYLE_TEXT_DIRECTION","textDirection"),c(z,"STYLE_OVERFLOW","overflow"),c(z,"STYLE_ORTHOGONAL","orthogonal"),c(z,"STYLE_EXIT_X","exitX"),c(z,"STYLE_EXIT_Y","exitY"),c(z,"STYLE_EXIT_DX","exitDx"),c(z,"STYLE_EXIT_DY","exitDy"),c(z,"STYLE_EXIT_PERIMETER","exitPerimeter"),c(z,"STYLE_ENTRY_X","entryX"),c(z,"STYLE_ENTRY_Y","entryY"),c(z,"STYLE_ENTRY_DX","entryDx"),c(z,"STYLE_ENTRY_DY","entryDy"),c(z,"STYLE_ENTRY_PERIMETER","entryPerimeter"),c(z,"STYLE_WHITE_SPACE","whiteSpace"),c(z,"STYLE_ROTATION","rotation"),c(z,"STYLE_FILLCOLOR","fillColor"),c(z,"STYLE_POINTER_EVENTS","pointerEvents"),c(z,"STYLE_SWIMLANE_FILLCOLOR","swimlaneFillColor"),c(z,"STYLE_MARGIN","margin"),c(z,"STYLE_GRADIENTCOLOR","gradientColor"),c(z,"STYLE_GRADIENT_DIRECTION","gradientDirection"),c(z,"STYLE_STROKECOLOR","strokeColor"),c(z,"STYLE_SEPARATORCOLOR","separatorColor"),c(z,"STYLE_STROKEWIDTH","strokeWidth"),c(z,"STYLE_ALIGN","align"),c(z,"STYLE_VERTICAL_ALIGN","verticalAlign"),c(z,"STYLE_LABEL_WIDTH","labelWidth"),c(z,"STYLE_LABEL_POSITION","labelPosition"),c(z,"STYLE_VERTICAL_LABEL_POSITION","verticalLabelPosition"),c(z,"STYLE_IMAGE_ASPECT","imageAspect"),c(z,"STYLE_IMAGE_ALIGN","imageAlign"),c(z,"STYLE_IMAGE_VERTICAL_ALIGN","imageVerticalAlign"),c(z,"STYLE_GLASS","glass"),c(z,"STYLE_IMAGE","image"),c(z,"STYLE_IMAGE_WIDTH","imageWidth"),c(z,"STYLE_IMAGE_HEIGHT","imageHeight"),c(z,"STYLE_IMAGE_BACKGROUND","imageBackground"),c(z,"STYLE_IMAGE_BORDER","imageBorder"),c(z,"STYLE_FLIPH","flipH"),c(z,"STYLE_FLIPV","flipV"),c(z,"STYLE_NOLABEL","noLabel"),c(z,"STYLE_NOEDGESTYLE","noEdgeStyle"),c(z,"STYLE_LABEL_BACKGROUNDCOLOR","labelBackgroundColor"),c(z,"STYLE_LABEL_BORDERCOLOR","labelBorderColor"),c(z,"STYLE_LABEL_PADDING","labelPadding"),c(z,"STYLE_INDICATOR_SHAPE","indicatorShape"),c(z,"STYLE_INDICATOR_IMAGE","indicatorImage"),c(z,"STYLE_INDICATOR_COLOR","indicatorColor"),c(z,"STYLE_INDICATOR_STROKECOLOR","indicatorStrokeColor"),c(z,"STYLE_INDICATOR_GRADIENTCOLOR","indicatorGradientColor"),c(z,"STYLE_INDICATOR_SPACING","indicatorSpacing"),c(z,"STYLE_INDICATOR_WIDTH","indicatorWidth"),c(z,"STYLE_INDICATOR_HEIGHT","indicatorHeight"),c(z,"STYLE_INDICATOR_DIRECTION","indicatorDirection"),c(z,"STYLE_SHADOW","shadow"),c(z,"STYLE_SEGMENT","segment"),c(z,"STYLE_ENDARROW","endArrow"),c(z,"STYLE_STARTARROW","startArrow"),c(z,"STYLE_ENDSIZE","endSize"),c(z,"STYLE_STARTSIZE","startSize"),c(z,"STYLE_SWIMLANE_LINE","swimlaneLine"),c(z,"STYLE_ENDFILL","endFill"),c(z,"STYLE_STARTFILL","startFill"),c(z,"STYLE_DASHED","dashed"),c(z,"STYLE_DASH_PATTERN","dashPattern"),c(z,"STYLE_FIX_DASH","fixDash"),c(z,"STYLE_ROUNDED","rounded"),c(z,"STYLE_CURVED","curved"),c(z,"STYLE_ARCSIZE","arcSize"),c(z,"STYLE_ABSOLUTE_ARCSIZE","absoluteArcSize"),c(z,"STYLE_SOURCE_PERIMETER_SPACING","sourcePerimeterSpacing"),c(z,"STYLE_TARGET_PERIMETER_SPACING","targetPerimeterSpacing"),c(z,"STYLE_PERIMETER_SPACING","perimeterSpacing"),c(z,"STYLE_SPACING","spacing"),c(z,"STYLE_SPACING_TOP","spacingTop"),c(z,"STYLE_SPACING_LEFT","spacingLeft"),c(z,"STYLE_SPACING_BOTTOM","spacingBottom"),c(z,"STYLE_SPACING_RIGHT","spacingRight"),c(z,"STYLE_HORIZONTAL","horizontal"),c(z,"STYLE_DIRECTION","direction"),c(z,"STYLE_ANCHOR_POINT_DIRECTION","anchorPointDirection"),c(z,"STYLE_ELBOW","elbow"),c(z,"STYLE_FONTCOLOR","fontColor"),c(z,"STYLE_FONTFAMILY","fontFamily"),c(z,"STYLE_FONTSIZE","fontSize"),c(z,"STYLE_FONTSTYLE","fontStyle"),c(z,"STYLE_ASPECT","aspect"),c(z,"STYLE_AUTOSIZE","autosize"),c(z,"STYLE_FOLDABLE","foldable"),c(z,"STYLE_EDITABLE","editable"),c(z,"STYLE_BACKGROUND_OUTLINE","backgroundOutline"),c(z,"STYLE_BENDABLE","bendable"),c(z,"STYLE_MOVABLE","movable"),c(z,"STYLE_RESIZABLE","resizable"),c(z,"STYLE_RESIZE_WIDTH","resizeWidth"),c(z,"STYLE_RESIZE_HEIGHT","resizeHeight"),c(z,"STYLE_ROTATABLE","rotatable"),c(z,"STYLE_CLONEABLE","cloneable"),c(z,"STYLE_DELETABLE","deletable"),c(z,"STYLE_SHAPE","shape"),c(z,"STYLE_EDGE","edgeStyle"),c(z,"STYLE_JETTY_SIZE","jettySize"),c(z,"STYLE_SOURCE_JETTY_SIZE","sourceJettySize"),c(z,"STYLE_TARGET_JETTY_SIZE","targetJettySize"),c(z,"STYLE_LOOP","loopStyle"),c(z,"STYLE_ORTHOGONAL_LOOP","orthogonalLoop"),c(z,"STYLE_ROUTING_CENTER_X","routingCenterX"),c(z,"STYLE_ROUTING_CENTER_Y","routingCenterY"),c(z,"FONT_BOLD",1),c(z,"FONT_ITALIC",2),c(z,"FONT_UNDERLINE",4),c(z,"FONT_STRIKETHROUGH",8),c(z,"SHAPE_RECTANGLE","rectangle"),c(z,"SHAPE_ELLIPSE","ellipse"),c(z,"SHAPE_DOUBLE_ELLIPSE","doubleEllipse"),c(z,"SHAPE_RHOMBUS","rhombus"),c(z,"SHAPE_LINE","line"),c(z,"SHAPE_IMAGE","image"),c(z,"SHAPE_ARROW","arrow"),c(z,"SHAPE_ARROW_CONNECTOR","arrowConnector"),c(z,"SHAPE_LABEL","label"),c(z,"SHAPE_CYLINDER","cylinder"),c(z,"SHAPE_SWIMLANE","swimlane"),c(z,"SHAPE_CONNECTOR","connector"),c(z,"SHAPE_ACTOR","actor"),c(z,"SHAPE_CLOUD","cloud"),c(z,"SHAPE_TRIANGLE","triangle"),c(z,"SHAPE_HEXAGON","hexagon"),c(z,"ARROW_CLASSIC","classic"),c(z,"ARROW_CLASSIC_THIN","classicThin"),c(z,"ARROW_BLOCK","block"),c(z,"ARROW_BLOCK_THIN","blockThin"),c(z,"ARROW_OPEN","open"),c(z,"ARROW_OPEN_THIN","openThin"),c(z,"ARROW_OVAL","oval"),c(z,"ARROW_DIAMOND","diamond"),c(z,"ARROW_DIAMOND_THIN","diamondThin"),c(z,"ALIGN_LEFT","left"),c(z,"ALIGN_CENTER","center"),c(z,"ALIGN_RIGHT","right"),c(z,"ALIGN_TOP","top"),c(z,"ALIGN_MIDDLE","middle"),c(z,"ALIGN_BOTTOM","bottom"),c(z,"DIRECTION_NORTH","north"),c(z,"DIRECTION_SOUTH","south"),c(z,"DIRECTION_EAST","east"),c(z,"DIRECTION_WEST","west"),c(z,"TEXT_DIRECTION_DEFAULT",""),c(z,"TEXT_DIRECTION_AUTO","auto"),c(z,"TEXT_DIRECTION_LTR","ltr"),c(z,"TEXT_DIRECTION_RTL","rtl"),c(z,"DIRECTION_MASK_NONE",0),c(z,"DIRECTION_MASK_WEST",1),c(z,"DIRECTION_MASK_NORTH",2),c(z,"DIRECTION_MASK_SOUTH",4),c(z,"DIRECTION_MASK_EAST",8),c(z,"DIRECTION_MASK_ALL",15),c(z,"ELBOW_VERTICAL","vertical"),c(z,"ELBOW_HORIZONTAL","horizontal"),c(z,"EDGESTYLE_ELBOW","elbowEdgeStyle"),c(z,"EDGESTYLE_ENTITY_RELATION","entityRelationEdgeStyle"),c(z,"EDGESTYLE_LOOP","loopEdgeStyle"),c(z,"EDGESTYLE_SIDETOSIDE","sideToSideEdgeStyle"),c(z,"EDGESTYLE_TOPTOBOTTOM","topToBottomEdgeStyle"),c(z,"EDGESTYLE_ORTHOGONAL","orthogonalEdgeStyle"),c(z,"EDGESTYLE_SEGMENT","segmentEdgeStyle"),c(z,"PERIMETER_ELLIPSE","ellipsePerimeter"),c(z,"PERIMETER_RECTANGLE","rectanglePerimeter"),c(z,"PERIMETER_RHOMBUS","rhombusPerimeter"),c(z,"PERIMETER_HEXAGON","hexagonPerimeter"),c(z,"PERIMETER_TRIANGLE","trianglePerimeter"),z);class mxXmlRequest{constructor(i,t,e,n,s,l){c(this,"binary",!1);c(this,"withCredentials",!1);c(this,"request",null);c(this,"decodeSimulateValues",!1);this.url=i,this.params=t,this.method=e||"POST",this.async=n??!0,this.username=s,this.password=l}static get(i,t,e,n,s,l,r){var o=new mxXmlRequest(i,null,"GET"),h=o.setRequestHeaders;return r&&(o.setRequestHeaders=function(u,d){h.apply(this,arguments);for(var m in r)u.setRequestHeader(m,r[m])}),n!=null&&o.setBinary(n),o.send(t,e,s,l),o}static load(i){var t=new mxXmlRequest(i,null,"GET",!1);return t.send(),t}create(){var i=new XMLHttpRequest;return this.isBinary()&&i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i}isBinary(){return this.binary}setBinary(i){this.binary=i}getText(){return this.request.responseText}isReady(){return this.request.readyState==4}getDocumentElement(){var i=this.getXml();return i!=null?i.documentElement:null}getXml(){var i=this.request.responseXML;if(document.documentMode>=9||i==null||i.documentElement==null){var t=new DOMParser;i=t.parseFromString(this.request.responseText,"text/xml")}return i}getStatus(){return this.request!=null?this.request.status:null}send(i,t,e,n){this.request=this.create(),this.request!=null&&(i!=null&&(this.request.onreadystatechange=()=>{this.isReady()&&(i(this),this.request.onreadystatechange=null)}),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(document.documentMode==null||document.documentMode>9)&&window.XMLHttpRequest&&e!=null&&n!=null&&(this.request.timeout=e,this.request.ontimeout=n),this.request.send(this.params))}setRequestHeaders(i,t){t!=null&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}simulate(i,t){i=i||document;var e=null;i==document&&(e=window.onbeforeunload,window.onbeforeunload=null);var n=i.createElement("form");n.setAttribute("method",this.method),n.setAttribute("action",this.url),t!=null&&n.setAttribute("target",t),n.style.display="none",n.style.visibility="hidden";for(var s=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),l=0;l<s.length;l++){var r=s[l].indexOf("=");if(r>0){var o=s[l].substring(0,r),h=s[l].substring(r+1);this.decodeSimulateValues&&(h=decodeURIComponent(h));var u=i.createElement("textarea");u.setAttribute("wrap","off"),u.setAttribute("name",o);var i=u.ownerDocument,d=i.createTextNode(h);u!=null&&u.appendChild(d),n.appendChild(u)}}i.body.appendChild(n),n.submit(),n.parentNode!=null&&n.parentNode.removeChild(n),e!=null&&(window.onbeforeunload=e)}}var ne;let mxResources$1=(ne=class{static isLanguageSupported(i){return mxClient.languages!=null?mxClient.languages.indexOf(i)>=0:!0}static getDefaultBundle(i,t){return ne.loadDefaultBundle||!ne.isLanguageSupported(t)?i+ne.extension:null}static getSpecialBundle(i,t){if(mxClient.languages==null||!this.isLanguageSupported(t)){var e=t.indexOf("-");e>0&&(t=t.substring(0,e))}return ne.loadSpecialBundle&&ne.isLanguageSupported(t)&&t!=mxClient.defaultLanguage?i+"_"+t+ne.extension:null}static add(i,t,e){if(t=t??(mxClient.language!=null?mxClient.language.toLowerCase():mxConstants$1.NONE),t!=mxConstants$1.NONE){var n=ne.getDefaultBundle(i,t),s=ne.getSpecialBundle(i,t),l=function(){if(s!=null)if(e)mxXmlRequest.get(s,function(h){ne.parse(h.getText()),e()},function(){e()});else try{var o=mxXmlRequest.load(s);o.isReady()&&ne.parse(o.getText())}catch{}else e!=null&&e()};if(n!=null)if(e)mxXmlRequest.get(n,function(o){ne.parse(o.getText()),l()},function(){l()});else try{var r=mxXmlRequest.load(n);r.isReady()&&ne.parse(r.getText()),l()}catch{}else l()}}static parse(i){if(i!=null){for(var t=i.split(`
`),e=0;e<t.length;e++)if(t[e].charAt(0)!="#"){var n=t[e].indexOf("=");if(n>0){var s=t[e].substring(0,n),l=t[e].length;t[e].charCodeAt(l-1)==13&&l--;var r=t[e].substring(n+1,l);this.resourcesEncoded?(r=r.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),ne.resources[s]=unescape(r)):ne.resources[s]=r}}}}static get(i,t,e){var n=ne.resources[i];return n==null&&(n=e),n!=null&&t!=null&&(n=ne.replacePlaceholders(n,t)),n}static replacePlaceholders(i,t){for(var e=[],n=null,s=0;s<i.length;s++){var l=i.charAt(s);l=="{"?n="":n!=null&&l=="}"?(n=parseInt(n)-1,n>=0&&n<t.length&&e.push(t[n]),n=null):n!=null?n+=l:e.push(l)}return e.join("")}static loadResources(i){ne.add(mxClient.basePath+"/resources/editor",null,function(){ne.add(mxClient.basePath+"/resources/graph",null,i)})}},c(ne,"resources",{}),c(ne,"extension",".txt"),c(ne,"resourcesEncoded",!1),c(ne,"loadDefaultBundle",!0),c(ne,"loadSpecialBundle",!0),ne);const qt=class qt{static isBrowserSupported(){return qt.IS_SVG}static link(i,t,e,n){e=e||document;var s=e.createElement("link");s.setAttribute("rel",i),s.setAttribute("href",t),s.setAttribute("charset","UTF-8"),s.setAttribute("type","text/css"),n&&s.setAttribute("id",n);var l=e.getElementsByTagName("head")[0];l.appendChild(s)}static loadResources(i,t){var e=qt.defaultBundles.length;function n(){--e==0&&i()}for(var s=0;s<qt.defaultBundles.length;s++)mxResources$1.add(qt.defaultBundles[s],t,n)}static include(i){document.write('<script src="'+i+'"><\/script>')}};c(qt,"VERSION","@MXGRAPH-VERSION@"),c(qt,"IS_IE",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE")>=0),c(qt,"IS_IE6",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE 6")>=0),c(qt,"IS_IE11",navigator.userAgent!=null&&!!navigator.userAgent.match(/Trident\/7\./)),c(qt,"IS_EDGE",navigator.userAgent!=null&&!!navigator.userAgent.match(/Edge\//)),c(qt,"IS_QUIRKS",navigator.userAgent!=null&&navigator.userAgent.indexOf("MSIE")>=0&&(document.documentMode==null||document.documentMode==5)),c(qt,"IS_EM","spellcheck"in document.createElement("textarea")&&document.documentMode==8),c(qt,"VML_PREFIX","v"),c(qt,"OFFICE_PREFIX","o"),c(qt,"IS_NS",navigator.userAgent!=null&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0),c(qt,"IS_OP",navigator.userAgent!=null&&(navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0)),c(qt,"IS_OT",navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0),c(qt,"IS_SF",/Apple Computer, Inc/.test(navigator.vendor)),c(qt,"IS_ANDROID",navigator.appVersion.indexOf("Android")>=0),c(qt,"IS_IOS",/iP(hone|od|ad)/.test(navigator.platform)),c(qt,"IS_GC",/Google Inc/.test(navigator.vendor)),c(qt,"IS_CHROMEAPP",window.chrome!=null&&chrome.app!=null&&chrome.app.runtime!=null),c(qt,"IS_FF",typeof InstallTrigger<"u"),c(qt,"IS_MT",navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0),c(qt,"IS_VML",navigator.appName.toUpperCase()=="MICROSOFT INTERNET EXPLORER"),c(qt,"IS_SVG",navigator.appName.toUpperCase()!="MICROSOFT INTERNET EXPLORER"),c(qt,"NO_FO",!document.createElementNS||document.createElementNS("http://www.w3.org/2000/svg","foreignObject")!="[object SVGForeignObjectElement]"||navigator.userAgent.indexOf("Opera/")>=0),c(qt,"IS_WIN",navigator.appVersion.indexOf("Win")>0),c(qt,"IS_MAC",navigator.appVersion.indexOf("Mac")>0),c(qt,"IS_CHROMEOS",/\bCrOS\b/.test(navigator.appVersion)),c(qt,"IS_TOUCH","ontouchstart"in document.documentElement),c(qt,"IS_POINTER",window.PointerEvent!=null&&!(navigator.appVersion.indexOf("Mac")>0)),c(qt,"IS_LOCAL",document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0),c(qt,"defaultBundles",[]);let mxClient=qt,mxEventObject$1=class{constructor(i){c(this,"consumed",!1);this.name=i,this.properties=[];for(var t=1;t<arguments.length;t+=2)arguments[t+1]!=null&&(this.properties[arguments[t]]=arguments[t+1])}getName(){return this.name}getProperties(){return this.properties}getProperty(i){return this.properties[i]}isConsumed(){return this.consumed}consume(){this.consumed=!0}};const ye=class ye{static get(i){if(i!=null){if(i[ye.FIELD_NAME]==null)if(typeof i=="object"){var t=getFunctionName(i.constructor);i[ye.FIELD_NAME]=t+"#"+ye.counter++}else typeof i=="function"&&(i[ye.FIELD_NAME]="Function#"+ye.counter++);return i[ye.FIELD_NAME]}return null}static clear(i){(typeof i=="object"||typeof i=="function")&&delete i[ye.FIELD_NAME]}};c(ye,"FIELD_NAME","mxObjectId"),c(ye,"counter",0);let mxObjectIdentity=ye;function getFunctionName(a){var i=null;if(a!=null){if(a.name!=null)i=a.name;else if(i=a.toString().trim(),/^function\s/.test(i)){i=ltrim(i.substring(9));var t=i.indexOf("(");t>0&&(i=i.substring(0,t))}}return i}function ltrim(a,i){return i=i||"\\s",a!=null?a.replace(new RegExp("^["+i+"]+","g"),""):null}class mxDictionary{constructor(){c(this,"map",null);this.clear()}clear(){this.map={}}get(i){var t=mxObjectIdentity.get(i);return this.map[t]}put(i,t){var e=mxObjectIdentity.get(i),n=this.map[e];return this.map[e]=t,n}remove(i){var t=mxObjectIdentity.get(i),e=this.map[t];return delete this.map[t],e}getKeys(){var i=[];for(var t in this.map)i.push(t);return i}getValues(){var i=[];for(var t in this.map)i.push(this.map[t]);return i}visit(i){for(var t in this.map)i(t,this.map[t])}}var ut;let mxEvent$1=(ut=class{static removeAllListeners(i){var t=i.mxListenerList;if(t!=null)for(;t.length>0;){var e=t[0];ut.removeListener(i,e.name,e.f)}}static addGestureListeners(i,t,e,n){t!=null&&ut.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",t),e!=null&&ut.addListener(i,mxClient.IS_POINTER?"pointermove":"mousemove",e),n!=null&&ut.addListener(i,mxClient.IS_POINTER?"pointerup":"mouseup",n),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(t!=null&&ut.addListener(i,"touchstart",t),e!=null&&ut.addListener(i,"touchmove",e),n!=null&&ut.addListener(i,"touchend",n))}static removeGestureListeners(i,t,e,n){t!=null&&ut.removeListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",t),e!=null&&ut.removeListener(i,mxClient.IS_POINTER?"pointermove":"mousemove",e),n!=null&&ut.removeListener(i,mxClient.IS_POINTER?"pointerup":"mouseup",n),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(t!=null&&ut.removeListener(i,"touchstart",t),e!=null&&ut.removeListener(i,"touchmove",e),n!=null&&ut.removeListener(i,"touchend",n))}static redirectMouseEvents(i,t,e,n,s,l,r){var o=function(h){return typeof e=="function"?e(h):e};ut.addGestureListeners(i,function(h){n!=null?n(h):ut.isConsumed(h)||t.fireMouseEvent(ut.MOUSE_DOWN,new mxMouseEvent(h,o(h)))},function(h){s!=null?s(h):ut.isConsumed(h)||t.fireMouseEvent(ut.MOUSE_MOVE,new mxMouseEvent(h,o(h)))},function(h){l!=null?l(h):ut.isConsumed(h)||t.fireMouseEvent(ut.MOUSE_UP,new mxMouseEvent(h,o(h)))}),ut.addListener(i,"dblclick",function(h){if(r!=null)r(h);else if(!ut.isConsumed(h)){var u=o(h);t.dblClick(h,u!=null?u.cell:null)}})}static release(i){try{if(i!=null){ut.removeAllListeners(i);var t=i.childNodes;if(t!=null)for(var e=t.length,n=0;n<e;n+=1)ut.release(t[n])}}catch{}}static addMouseWheelListener(i,t){if(i!=null){var e=function(s){s==null&&(s=window.event),s.ctrlKey&&s.preventDefault(),-s.deltaY,(Math.abs(s.deltaX)>.5||Math.abs(s.deltaY)>.5)&&i(s,s.deltaY==0?-s.deltaX>0:-s.deltaY>0)};if(t=t??window,mxClient.IS_SF&&!mxClient.IS_TOUCH){var n=1;ut.addListener(t,"gesturestart",function(s){ut.consume(s),n=1}),ut.addListener(t,"gesturechange",function(s){ut.consume(s);var l=n-s.scale;Math.abs(l)>.2&&(i(s,l<0,!0),n=s.scale)}),ut.addListener(t,"gestureend",function(s){ut.consume(s)})}ut.addListener(t,"wheel",e)}}static disableContextMenu(i){ut.addListener(i,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})}static getSource(i){return i.srcElement!=null?i.srcElement:i.target}static isConsumed(i){return i.isConsumed!=null&&i.isConsumed}static isTouchEvent(i){return i.pointerType!=null?i.pointerType=="touch"||i.pointerType===i.MSPOINTER_TYPE_TOUCH:i.mozInputSource!=null?i.mozInputSource==5:i.type.indexOf("touch")==0}static isPenEvent(i){return i.pointerType!=null?i.pointerType=="pen"||i.pointerType===i.MSPOINTER_TYPE_PEN:i.mozInputSource!=null?i.mozInputSource==2:i.type.indexOf("pen")==0}static isMultiTouchEvent(i){return i.type!=null&&i.type.indexOf("touch")==0&&i.touches!=null&&i.touches.length>1}static isMouseEvent(i){return i.pointerType!=null?i.pointerType=="mouse"||i.pointerType===i.MSPOINTER_TYPE_MOUSE:i.mozInputSource!=null?i.mozInputSource==1:i.type.indexOf("mouse")==0}static isLeftMouseButton(i){return"buttons"in i&&(i.type=="mousedown"||i.type=="mousemove")?i.buttons==1:"which"in i?i.which===1:i.button===1}static isMiddleMouseButton(i){return"which"in i?i.which===2:i.button===4}static isRightMouseButton(i){return"which"in i?i.which===3:i.button===2}static isPopupTrigger(i){return ut.isRightMouseButton(i)||mxClient.IS_MAC&&ut.isControlDown(i)&&!ut.isShiftDown(i)&&!ut.isMetaDown(i)&&!ut.isAltDown(i)}static isShiftDown(i){return i!=null?i.shiftKey:!1}static isAltDown(i){return i!=null?i.altKey:!1}static isControlDown(i){return i!=null?i.ctrlKey:!1}static isMetaDown(i){return i!=null?i.metaKey:!1}static getMainEvent(i){return(i.type=="touchstart"||i.type=="touchmove")&&i.touches!=null&&i.touches[0]!=null?i=i.touches[0]:i.type=="touchend"&&i.changedTouches!=null&&i.changedTouches[0]!=null&&(i=i.changedTouches[0]),i}static getClientX(i){return ut.getMainEvent(i).clientX}static getClientY(i){return ut.getMainEvent(i).clientY}static org_consume(i,t,e){t=t??!0,e=e??!0,t&&(i.preventDefault?(e&&i.stopPropagation(),i.preventDefault()):e&&(i.cancelBubble=!0)),i.isConsumed=!0,i.preventDefault||(i.returnValue=!1)}static consume(i,t,e){t=t??!0,e=e??!0,t&&(i.preventDefault?(e&&i.stopPropagation(),i.type!="wheel"&&i.preventDefault()):e&&(i.cancelBubble=!0)),i.isConsumed=!0,i.preventDefault||(i.returnValue=!1)}},c(ut,"addListener",function(){var i=function(t,e,n){t.mxListenerList==null&&(t.mxListenerList=[]);var s={name:e,f:n};t.mxListenerList.push(s)};return window.addEventListener?function(t,e,n){t.addEventListener(e,n,!1),i(t,e,n)}:function(t,e,n){t.attachEvent("on"+e,n),i(t,e,n)}}()),c(ut,"removeListener",function(){var i=function(t,e,n){if(t.mxListenerList!=null){for(var s=t.mxListenerList.length,l=0;l<s;l++){var r=t.mxListenerList[l];if(r.f==n){t.mxListenerList.splice(l,1);break}}t.mxListenerList.length==0&&(t.mxListenerList=null)}};return window.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1),i(t,e,n)}:function(t,e,n){t.detachEvent("on"+e,n),i(t,e,n)}}()),c(ut,"LABEL_HANDLE",-1),c(ut,"ROTATION_HANDLE",-2),c(ut,"CUSTOM_HANDLE",-100),c(ut,"VIRTUAL_HANDLE",-1e5),c(ut,"MOUSE_DOWN","mouseDown"),c(ut,"MOUSE_MOVE","mouseMove"),c(ut,"MOUSE_UP","mouseUp"),c(ut,"ACTIVATE","activate"),c(ut,"RESIZE_START","resizeStart"),c(ut,"RESIZE","resize"),c(ut,"RESIZE_END","resizeEnd"),c(ut,"MOVE_START","moveStart"),c(ut,"MOVE","move"),c(ut,"MOVE_END","moveEnd"),c(ut,"PAN_START","panStart"),c(ut,"PAN","pan"),c(ut,"PAN_END","panEnd"),c(ut,"MINIMIZE","minimize"),c(ut,"NORMALIZE","normalize"),c(ut,"MAXIMIZE","maximize"),c(ut,"HIDE","hide"),c(ut,"SHOW","show"),c(ut,"CLOSE","close"),c(ut,"DESTROY","destroy"),c(ut,"REFRESH","refresh"),c(ut,"SIZE","size"),c(ut,"SELECT","select"),c(ut,"FIRED","fired"),c(ut,"FIRE_MOUSE_EVENT","fireMouseEvent"),c(ut,"GESTURE","gesture"),c(ut,"TAP_AND_HOLD","tapAndHold"),c(ut,"GET","get"),c(ut,"RECEIVE","receive"),c(ut,"CONNECT","connect"),c(ut,"DISCONNECT","disconnect"),c(ut,"SUSPEND","suspend"),c(ut,"RESUME","resume"),c(ut,"MARK","mark"),c(ut,"ROOT","root"),c(ut,"POST","post"),c(ut,"OPEN","open"),c(ut,"SAVE","save"),c(ut,"BEFORE_ADD_VERTEX","beforeAddVertex"),c(ut,"ADD_VERTEX","addVertex"),c(ut,"AFTER_ADD_VERTEX","afterAddVertex"),c(ut,"DONE","done"),c(ut,"EXECUTE","execute"),c(ut,"EXECUTED","executed"),c(ut,"BEGIN_UPDATE","beginUpdate"),c(ut,"START_EDIT","startEdit"),c(ut,"END_UPDATE","endUpdate"),c(ut,"END_EDIT","endEdit"),c(ut,"BEFORE_UNDO","beforeUndo"),c(ut,"UNDO","undo"),c(ut,"REDO","redo"),c(ut,"CHANGE","change"),c(ut,"NOTIFY","notify"),c(ut,"LAYOUT_CELLS","layoutCells"),c(ut,"CLICK","click"),c(ut,"SCALE","scale"),c(ut,"TRANSLATE","translate"),c(ut,"SCALE_AND_TRANSLATE","scaleAndTranslate"),c(ut,"UP","up"),c(ut,"DOWN","down"),c(ut,"ADD","add"),c(ut,"REMOVE","remove"),c(ut,"CLEAR","clear"),c(ut,"ADD_CELLS","addCells"),c(ut,"CELLS_ADDED","cellsAdded"),c(ut,"MOVE_CELLS","moveCells"),c(ut,"CELLS_MOVED","cellsMoved"),c(ut,"RESIZE_CELLS","resizeCells"),c(ut,"CELLS_RESIZED","cellsResized"),c(ut,"TOGGLE_CELLS","toggleCells"),c(ut,"CELLS_TOGGLED","cellsToggled"),c(ut,"ORDER_CELLS","orderCells"),c(ut,"CELLS_ORDERED","cellsOrdered"),c(ut,"REMOVE_CELLS","removeCells"),c(ut,"CELLS_REMOVED","cellsRemoved"),c(ut,"GROUP_CELLS","groupCells"),c(ut,"UNGROUP_CELLS","ungroupCells"),c(ut,"REMOVE_CELLS_FROM_PARENT","removeCellsFromParent"),c(ut,"FOLD_CELLS","foldCells"),c(ut,"CELLS_FOLDED","cellsFolded"),c(ut,"ALIGN_CELLS","alignCells"),c(ut,"LABEL_CHANGED","labelChanged"),c(ut,"CONNECT_CELL","connectCell"),c(ut,"CELL_CONNECTED","cellConnected"),c(ut,"SPLIT_EDGE","splitEdge"),c(ut,"FLIP_EDGE","flipEdge"),c(ut,"START_EDITING","startEditing"),c(ut,"EDITING_STARTED","editingStarted"),c(ut,"EDITING_STOPPED","editingStopped"),c(ut,"ADD_OVERLAY","addOverlay"),c(ut,"REMOVE_OVERLAY","removeOverlay"),c(ut,"UPDATE_CELL_SIZE","updateCellSize"),c(ut,"ESCAPE","escape"),c(ut,"DOUBLE_CLICK","doubleClick"),c(ut,"START","start"),c(ut,"RESET","reset"),ut);class mxCellHighlight{constructor(i,t,e,n){c(this,"keepOnTop",!1);c(this,"graph",null);c(this,"state",null);c(this,"spacing",2);c(this,"resetHandler",null);i!=null&&(this.graph=i,this.highlightColor=t??mxConstants$1.DEFAULT_VALID_COLOR,this.strokeWidth=e??mxConstants$1.HIGHLIGHT_STROKEWIDTH,this.dashed=n??!1,this.opacity=mxConstants$1.HIGHLIGHT_OPACITY,this.repaintHandler=()=>{if(this.state!=null){var s=this.graph.view.getState(this.state.cell);s==null?this.hide():(this.state=s,this.repaint())}},this.graph.getView().addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.repaintHandler),this.resetHandler=()=>{this.hide()},this.graph.getView().addListener(mxEvent$1.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent$1.UP,this.resetHandler))}setHighlightColor(i){this.highlightColor=i,this.shape!=null&&(this.shape.stroke=i)}drawHighlight(){this.shape=this.createShape(),this.repaint(),!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node&&this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)}createShape(){var i=this.graph.cellRenderer.createShape(this.state);return i.svgStrokeTolerance=this.graph.tolerance,i.points=this.state.absolutePoints,i.apply(this.state),i.stroke=this.highlightColor,i.opacity=this.opacity,i.isDashed=this.dashed,i.isShadow=!1,i.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(i.node,this.graph,this.state),this.graph.dialect!=mxConstants$1.DIALECT_SVG?i.pointerEvents=!1:i.svgPointerEvents="stroke",i}getStrokeWidth(i){return this.strokeWidth}repaint(){this.state!=null&&this.shape!=null&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),this.state.shape!=null&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||document.documentMode==8)&&(this.shape.stroke=="transparent"?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())}hide(){this.highlight(null)}highlight(i){this.state!=i&&(this.shape!=null&&(this.shape.destroy(),this.shape=null),this.state=i,this.state!=null&&this.drawHighlight())}isHighlightAt(i,t){var e=!1;if(this.shape!=null&&document.elementFromPoint!=null&&!mxClient.IS_QUIRKS)for(var n=document.elementFromPoint(i,t);n!=null;){if(n==this.shape.node){e=!0;break}n=n.parentNode}return e}destroy(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),this.shape!=null&&(this.shape.destroy(),this.shape=null)}}class mxUrlConverter{constructor(){c(this,"enabled",!0);c(this,"baseUrl",null);c(this,"baseDomain",null)}updateBaseUrl(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var i=this.baseUrl.lastIndexOf("/");i>0&&(this.baseUrl=this.baseUrl.substring(0,i+1))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}getBaseUrl(){return this.baseUrl}setBaseUrl(i){this.baseUrl=i}getBaseDomain(){return this.baseDomain}setBaseDomain(i){this.baseDomain=i}isRelativeUrl(i){return i!=null&&i.substring(0,2)!="//"&&i.substring(0,7)!="http://"&&i.substring(0,8)!="https://"&&i.substring(0,10)!="data:image"&&i.substring(0,7)!="file://"}convert(i){return this.isEnabled()&&this.isRelativeUrl(i)&&(this.getBaseUrl()==null&&this.updateBaseUrl(),i.charAt(0)=="/"?i=this.getBaseDomain()+i:i=this.getBaseUrl()+i),i}}class mxAbstractCanvas2D{constructor(){c(this,"state",null);c(this,"states",null);c(this,"path",null);c(this,"rotateHtml",!0);c(this,"lastX",0);c(this,"lastY",0);c(this,"moveOp","M");c(this,"lineOp","L");c(this,"quadOp","Q");c(this,"curveOp","C");c(this,"closeOp","Z");c(this,"pointerEvents",!1);this.converter=this.createUrlConverter(),this.reset()}createUrlConverter(){return new mxUrlConverter}reset(){this.state=this.createState(),this.states=[]}createState(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants$1.DEFAULT_FONTSIZE,fontFamily:mxConstants$1.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants$1.SHADOWCOLOR,shadowAlpha:mxConstants$1.SHADOW_OPACITY,shadowDx:mxConstants$1.SHADOW_OFFSET_X,shadowDy:mxConstants$1.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}}format(i){return Math.round(parseFloat(i))}addOp(){if(this.path!=null&&(this.path.push(arguments[0]),arguments.length>2))for(var i=this.state,t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.format((this.lastX+i.dx)*i.scale)),this.path.push(this.format((this.lastY+i.dy)*i.scale))}rotatePoint(i,t,e,n,s){var l=e*(Math.PI/180);return mxUtils$1.getRotatedPoint(new mxPoint(i,t),Math.cos(l),Math.sin(l),new mxPoint(n,s))}save(){this.states.push(this.state),this.state=mxUtils$1.clone(this.state)}restore(){this.states.length>0&&(this.state=this.states.pop())}setLink(i){}scale(i){this.state.scale*=i,this.state.strokeWidth*=i}translate(i,t){this.state.dx+=i,this.state.dy+=t}rotate(i,t,e,n,s){}setAlpha(i){this.state.alpha=i}setFillAlpha(i){this.state.fillAlpha=i}setStrokeAlpha(i){this.state.strokeAlpha=i}setFillColor(i){i==mxConstants$1.NONE&&(i=null),this.state.fillColor=i,this.state.gradientColor=null}setGradient(i,t,e,n,s,l,r,o,h){var u=this.state;u.fillColor=i,u.gradientFillAlpha=o??1,u.gradientColor=t,u.gradientAlpha=h??1,u.gradientDirection=r}setStrokeColor(i){i==mxConstants$1.NONE&&(i=null),this.state.strokeColor=i}setStrokeWidth(i){this.state.strokeWidth=i}setDashed(i,t){this.state.dashed=i,this.state.fixDash=t}setDashPattern(i){this.state.dashPattern=i}setLineCap(i){this.state.lineCap=i}setLineJoin(i){this.state.lineJoin=i}setMiterLimit(i){this.state.miterLimit=i}setFontColor(i){i==mxConstants$1.NONE&&(i=null),this.state.fontColor=i}setFontBackgroundColor(i){i==mxConstants$1.NONE&&(i=null),this.state.fontBackgroundColor=i}setFontBorderColor(i){i==mxConstants$1.NONE&&(i=null),this.state.fontBorderColor=i}setFontSize(i){this.state.fontSize=parseFloat(i)}setFontFamily(i){this.state.fontFamily=i}setFontStyle(i){i==null&&(i=0),this.state.fontStyle=i}setShadow(i){this.state.shadow=i}setShadowColor(i){i==mxConstants$1.NONE&&(i=null),this.state.shadowColor=i}setShadowAlpha(i){this.state.shadowAlpha=i}setShadowOffset(i,t){this.state.shadowDx=i,this.state.shadowDy=t}begin(){this.lastX=0,this.lastY=0,this.path=[]}moveTo(i,t){this.addOp(this.moveOp,i,t)}lineTo(i,t){this.addOp(this.lineOp,i,t)}quadTo(i,t,e,n){this.addOp(this.quadOp,i,t,e,n)}curveTo(i,t,e,n,s,l){this.addOp(this.curveOp,i,t,e,n,s,l)}arcTo(i,t,e,n,s,l,r){var o=mxUtils$1.arcToCurves(this.lastX,this.lastY,i,t,e,n,s,l,r);if(o!=null)for(var h=0;h<o.length;h+=6)this.curveTo(o[h],o[h+1],o[h+2],o[h+3],o[h+4],o[h+5])}close(i,t,e,n,s,l){this.addOp(this.closeOp)}end(){}}class mxVmlCanvas2D extends mxAbstractCanvas2D{constructor(t){super();c(this,"node",null);c(this,"textEnabled",!0);c(this,"moveOp","m");c(this,"lineOp","l");c(this,"curveOp","c");c(this,"closeOp","x");c(this,"rotatedHtmlBackground","");c(this,"vmlScale",1);this.root=t}createElement(t){return document.createElement(t)}createVmlElement(t){return this.createElement(mxClient.VML_PREFIX+":"+t)}addNode(t,e){var n=this.node,s=this.state;if(n!=null){if(n.nodeName=="shape")if(this.path!=null&&this.path.length>0)n.path=this.path.join(" ")+" e",n.style.width=this.root.style.width,n.style.height=this.root.style.height,n.coordsize=parseInt(n.style.width)+" "+parseInt(n.style.height);else return;n.strokeweight=this.format(Math.max(1,s.strokeWidth*s.scale/this.vmlScale))+"px",s.shadow&&this.root.appendChild(this.createShadow(n,t&&s.fillColor!=null,e&&s.strokeColor!=null)),e&&s.strokeColor!=null?(n.stroked="true",n.strokecolor=s.strokeColor):n.stroked="false",n.appendChild(this.createStroke()),t&&s.fillColor!=null?n.appendChild(this.createFill()):this.pointerEvents&&(n.nodeName!="shape"||this.path[this.path.length-1]==this.closeOp)?n.appendChild(this.createTransparentFill()):n.filled="false",this.root.appendChild(n)}}createTransparentFill(){var t=this.createVmlElement("fill");return t.src=mxClient.imageBasePath+"/transparent.gif",t.type="tile",t}createFill(){var t=this.state,e=this.createVmlElement("fill");if(e.color=t.fillColor,t.gradientColor!=null){e.type="gradient",e.method="none",e.color2=t.gradientColor;var n=180-t.rotation;t.gradientDirection==mxConstants$1.DIRECTION_WEST?n-=90+(this.root.style.flip=="x"?180:0):t.gradientDirection==mxConstants$1.DIRECTION_EAST?n+=90+(this.root.style.flip=="x"?180:0):t.gradientDirection==mxConstants$1.DIRECTION_NORTH?n-=180+(this.root.style.flip=="y"?-180:0):n+=this.root.style.flip=="y"?-180:0,(this.root.style.flip=="x"||this.root.style.flip=="y")&&(n*=-1),e.angle=mxUtils$1.mod(n,360),e.opacity=t.alpha*t.gradientFillAlpha*100+"%",e.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",t.alpha*t.gradientAlpha*100+"%")}else(t.alpha<1||t.fillAlpha<1)&&(e.opacity=t.alpha*t.fillAlpha*100+"%");return e}createStroke(){var t=this.state,e=this.createVmlElement("stroke");return e.endcap=t.lineCap||"flat",e.joinstyle=t.lineJoin||"miter",e.miterlimit=t.miterLimit||"10",(t.alpha<1||t.strokeAlpha<1)&&(e.opacity=t.alpha*t.strokeAlpha*100+"%"),t.dashed&&(e.dashstyle=this.getVmlDashStyle()),e}getVmlDashStyle(){var t="dash";if(typeof this.state.dashPattern=="string"){var e=this.state.dashPattern.split(" ");e.length>0&&e[0]==1&&(t="0 2")}return t}createShadow(t,e,n){var s=this.state,l=-s.rotation*(Math.PI/180),r=Math.cos(l),o=Math.sin(l),h=s.shadowDx*s.scale,u=s.shadowDy*s.scale;this.root.style.flip=="x"?h*=-1:this.root.style.flip=="y"&&(u*=-1);var d=t.cloneNode(!0);return d.style.marginLeft=Math.round(h*r-u*o)+"px",d.style.marginTop=Math.round(h*o+u*r)+"px",document.documentMode==8&&(d.strokeweight=t.strokeweight,t.nodeName=="shape"&&(d.path=this.path.join(" ")+" e",d.style.width=this.root.style.width,d.style.height=this.root.style.height,d.coordsize=parseInt(t.style.width)+" "+parseInt(t.style.height))),n?(d.strokecolor=s.shadowColor,d.appendChild(this.createShadowStroke())):d.stroked="false",e?d.appendChild(this.createShadowFill()):d.filled="false",d}createShadowFill(){var t=this.createVmlElement("fill");return t.color=this.state.shadowColor,t.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",t}createShadowStroke(){var t=this.createStroke();return t.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",t}rotate(t,e,n,s,l){e&&n?t+=180:e?this.root.style.flip="x":n&&(this.root.style.flip="y"),(e?!n:n)&&(t*=-1),this.root.style.rotation=t,this.state.rotation=this.state.rotation+t,this.state.rotationCx=s,this.state.rotationCy=l}begin(){super.begin(),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"}quadTo(t,e,n,s){var l=this.state,r=(this.lastX+l.dx)*l.scale,o=(this.lastY+l.dy)*l.scale,h=(t+l.dx)*l.scale,u=(e+l.dy)*l.scale,d=(n+l.dx)*l.scale,m=(s+l.dy)*l.scale,g=r+2/3*(h-r),x=o+2/3*(u-o),v=d+2/3*(h-d),C=m+2/3*(u-m);this.path.push("c "+this.format(g)+" "+this.format(x)+" "+this.format(v)+" "+this.format(C)+" "+this.format(d)+" "+this.format(m)),this.lastX=d/l.scale-l.dx,this.lastY=m/l.scale-l.dy}createRect(t,e,n,s,l){var r=this.state,o=this.createVmlElement(t);return o.style.position="absolute",o.style.left=this.format((e+r.dx)*r.scale)+"px",o.style.top=this.format((n+r.dy)*r.scale)+"px",o.style.width=this.format(s*r.scale)+"px",o.style.height=this.format(l*r.scale)+"px",o}rect(t,e,n,s){this.node=this.createRect("rect",t,e,n,s)}roundrect(t,e,n,s,l,r){this.node=this.createRect("roundrect",t,e,n,s),this.node.setAttribute("arcsize",Math.max(l*100/n,r*100/s)+"%")}ellipse(t,e,n,s){this.node=this.createRect("oval",t,e,n,s)}image(t,e,n,s,l,r,o,h){var u=null;if(!r)u=this.createRect("image",t,e,n,s),u.src=l;else{u=this.createRect("rect",t,e,n,s),u.stroked="false";var d=this.createVmlElement("fill");d.aspect=r?"atmost":"ignore",d.rotate="true",d.type="frame",d.src=l,u.appendChild(d)}o&&h?u.style.rotation="180":o?u.style.flip="x":h&&(u.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(u.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(u)}createDiv(t,e,n,s){var l=this.createElement("div"),r=this.state,o="";if(r.fontBackgroundColor!=null&&(o+="background-color:"+mxUtils$1.htmlEntities(r.fontBackgroundColor)+";"),r.fontBorderColor!=null&&(o+="border:1px solid "+mxUtils$1.htmlEntities(r.fontBorderColor)+";"),mxUtils$1.isNode(t))l.appendChild(t);else if(s!="fill"&&s!="width"){var h=this.createElement("div");h.style.cssText=o,h.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",h.style.zoom="1",h.style.textDecoration="inherit",h.innerHTML=t,l.appendChild(h)}else l.style.cssText=o,l.innerHTML=t;var u=l.style;return u.fontSize=r.fontSize/this.vmlScale+"px",u.fontFamily=r.fontFamily,u.color=r.fontColor,u.verticalAlign="top",u.textAlign=e||"left",u.lineHeight=mxConstants$1.LINE_HEIGHT,(r.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(u.fontWeight="bold"),(r.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(u.fontStyle="italic"),(r.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&(u.textDecoration="underline"),l}text(t,e,n,s,l,r,o,h,u,d,m,g,x){if(this.textEnabled&&l!=null){var v=this.state;if(u=="html"){if(v.rotation!=null){var C=this.rotatePoint(t,e,v.rotation,v.rotationCx,v.rotationCy);t=C.x,e=C.y}document.documentMode==8&&!mxClient.IS_EM?(t+=v.dx,e+=v.dy,d!="fill"&&o==mxConstants$1.ALIGN_TOP&&(e-=1)):(t*=v.scale,e*=v.scale);var E=document.documentMode==8&&!mxClient.IS_EM?this.createVmlElement("group"):this.createElement("div");E.style.position="absolute",E.style.display="inline",E.style.left=this.format(t)+"px",E.style.top=this.format(e)+"px",E.style.zoom=v.scale;var b=this.createElement("div");b.style.position="relative",b.style.display="inline";var w=mxUtils$1.getAlignmentAsPoint(r,o),$=w.x,P=w.y,M=this.createDiv(l,r,o,d),D=this.createElement("div");if(x!=null&&M.setAttribute("dir",x),h&&n>0){if(m||(M.style.width=Math.round(n)+"px"),M.style.wordWrap=mxConstants$1.WORD_WRAP,M.style.whiteSpace="normal",M.style.wordWrap=="break-word"){var k=M;k.firstChild!=null&&k.firstChild.nodeName=="DIV"&&(k.firstChild.style.width="100%")}}else M.style.whiteSpace="nowrap";var Z=v.rotation+(g||0);if(this.rotateHtml&&Z!=0?(D.style.display="inline",D.style.zoom="1",D.appendChild(M),document.documentMode==8&&!mxClient.IS_EM&&this.root.nodeName!="DIV"?(b.appendChild(D),E.appendChild(b)):E.appendChild(D)):document.documentMode==8&&!mxClient.IS_EM?(b.appendChild(M),E.appendChild(b)):(M.style.display="inline",E.appendChild(M)),this.root.nodeName!="DIV"){var q=this.createVmlElement("rect");q.stroked="false",q.filled="false",q.appendChild(E),this.root.appendChild(q)}else this.root.appendChild(E);if(m?(M.style.overflow="hidden",M.style.width=Math.round(n)+"px",mxClient.IS_QUIRKS||(M.style.maxHeight=Math.round(s)+"px")):d=="fill"?(M.style.overflow="hidden",M.style.width=Math.max(0,n)+1+"px",M.style.height=Math.max(0,s)+1+"px"):d=="width"&&(M.style.overflow="hidden",M.style.width=Math.max(0,n)+1+"px",M.style.maxHeight=Math.max(0,s)+1+"px"),this.rotateHtml&&Z!=0){var j=Z*(Math.PI/180),X=parseFloat(parseFloat(Math.cos(j)).toFixed(8)),rt=parseFloat(parseFloat(Math.sin(-j)).toFixed(8));j%=2*Math.PI,j<0&&(j+=2*Math.PI),j%=Math.PI,j>Math.PI/2&&(j=Math.PI-j);var et=Math.cos(j),Y=Math.sin(j);document.documentMode==8&&!mxClient.IS_EM&&(M.style.display="inline-block",D.style.display="inline-block",b.style.display="inline-block"),M.style.visibility="hidden",M.style.position="absolute",document.body.appendChild(M);var G=M;G.firstChild!=null&&G.firstChild.nodeName=="DIV"&&(G=G.firstChild);var k=G.offsetWidth+3,J=G.offsetHeight;m?(n=Math.min(n,k),J=Math.min(J,s)):n=k,h&&(M.style.width=n+"px"),mxClient.IS_QUIRKS&&(m||d=="width")&&J>s&&(J=s,M.style.height=J+"px"),s=J;var tt=(s-s*et+n*-Y)/2-rt*n*($+.5)+X*s*(P+.5),gt=(n-n*et+s*-Y)/2+X*n*($+.5)+rt*s*(P+.5);if(E.nodeName=="group"&&this.root.nodeName=="DIV"){var dt=this.createElement("div");dt.style.display="inline-block",dt.style.position="absolute",dt.style.left=this.format(t+(gt-n/2)*v.scale)+"px",dt.style.top=this.format(e+(tt-s/2)*v.scale)+"px",E.parentNode.appendChild(dt),dt.appendChild(E)}else{var K=document.documentMode==8&&!mxClient.IS_EM?1:v.scale;E.style.left=this.format(t+(gt-n/2)*K)+"px",E.style.top=this.format(e+(tt-s/2)*K)+"px"}D.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+X+", M12="+rt+", M21="+-rt+", M22="+X+", sizingMethod='auto expand')",D.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(D.style.filter+="alpha(opacity="+this.state.alpha*100+")"),D.appendChild(M),M.style.position="",M.style.visibility=""}else if(document.documentMode!=8||mxClient.IS_EM){M.style.verticalAlign="top",this.state.alpha<1&&(E.style.filter="alpha(opacity="+this.state.alpha*100+")");var nt=M.parentNode;M.style.visibility="hidden",document.body.appendChild(M),n=M.offsetWidth;var J=M.offsetHeight;mxClient.IS_QUIRKS&&m&&J>s&&(J=s,M.style.height=J+"px"),s=J,M.style.visibility="",nt.appendChild(M),E.style.left=this.format(t+n*$*this.state.scale)+"px",E.style.top=this.format(e+s*P*this.state.scale)+"px"}else this.state.alpha<1&&(M.style.filter="alpha(opacity="+this.state.alpha*100+")"),b.style.left=$*100+"%",b.style.top=P*100+"%"}else this.plainText(t,e,n,s,mxUtils$1.htmlEntities(l,!1),r,o,h,u,d,m,g,x)}}plainText(t,e,n,s,l,r,o,h,u,d,m,g,x){var v=this.state;t=(t+v.dx)*v.scale,e=(e+v.dy)*v.scale;var C=this.createVmlElement("shape");C.style.width="1px",C.style.height="1px",C.stroked="false";var E=this.createVmlElement("fill");E.color=v.fontColor,E.opacity=v.alpha*100+"%",C.appendChild(E);var b=this.createVmlElement("path");b.textpathok="true",b.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),C.appendChild(b);var w=this.createVmlElement("textpath");w.style.cssText="v-text-align:"+r,w.style.align=r,w.style.fontFamily=v.fontFamily,w.string=l,w.on="true";var $=v.fontSize*v.scale/this.vmlScale;w.style.fontSize=$+"px",(v.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(w.style.fontWeight="bold"),(v.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(w.style.fontStyle="italic"),(v.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&(w.style.textDecoration="underline");var P=l.split(`
`),M=$+(P.length-1)*$*mxConstants$1.LINE_HEIGHT,D=0,k=0;if(o==mxConstants$1.ALIGN_BOTTOM?k=-M/2:o!=mxConstants$1.ALIGN_MIDDLE&&(k=M/2),g!=null){C.style.rotation=g;var Z=g*(Math.PI/180);D=Math.sin(Z)*k,k=Math.cos(Z)*k}C.appendChild(w),C.style.left=this.format(t-D)+"px",C.style.top=this.format(e+k)+"px",this.root.appendChild(C)}stroke(){this.addNode(!1,!0)}fill(){this.addNode(!0,!1)}fillAndStroke(){this.addNode(!0,!0)}}class mxSvgCanvas2D extends mxAbstractCanvas2D{constructor(t,e){super();c(this,"useDomParser",typeof DOMParser=="function"&&typeof XMLSerializer=="function");c(this,"node",null);c(this,"matchHtmlAlignment",!0);c(this,"textEnabled",!0);c(this,"foEnabled",!0);c(this,"foAltText","[Object]");c(this,"foOffset",0);c(this,"textOffset",0);c(this,"imageOffset",0);c(this,"strokeTolerance",0);c(this,"minStrokeWidth",1);c(this,"refCount",0);c(this,"lineHeightCorrection",1);c(this,"pointerEventsValue","all");c(this,"fontMetricsPadding",10);c(this,"cacheOffsetSize",!0);this.root=t,this.gradients=[],this.defs=null,this.styleEnabled=e??!1;var n=null;if(t.ownerDocument!=document){for(var s=t;s!=null&&s.nodeName!="svg";)s=s.parentNode;n=s}if(n!=null){var l=n.getElementsByTagName("defs");l.length>0&&(this.defs=n.getElementsByTagName("defs")[0]),this.defs==null&&(this.defs=this.createElement("defs"),n.firstChild!=null?n.insertBefore(this.defs,n.firstChild):n.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle())}}format(t){return parseFloat(parseFloat(t).toFixed(2))}getBaseUrl(){var t=window.location.href,e=t.lastIndexOf("#");return e>0&&(t=t.substring(0,e)),t}reset(){super.reset(),this.gradients=[]}createStyle(t){var e=this.createElement("style");return e.setAttribute("type","text/css"),mxUtils$1.write(e,"svg{font-family:"+mxConstants$1.DEFAULT_FONTFAMILY+";font-size:"+mxConstants$1.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),e}createElement(t,e){if(this.root.ownerDocument.createElementNS!=null)return this.root.ownerDocument.createElementNS(e||mxConstants$1.NS_SVG,t);var n=this.root.ownerDocument.createElement(t);return e!=null&&n.setAttribute("xmlns",e),n}getAlternateText(t,e,n,s,l,r,o,h,u,d,m,g,x){return r!=null?this.foAltText:null}createAlternateContent(t,e,n,s,l,r,o,h,u,d,m,g,x){var v=this.getAlternateText(t,e,n,s,l,r,o,h,u,d,m,g,x),C=this.state;if(v!=null&&C.fontSize>0){var E=h==mxConstants$1.ALIGN_TOP?1:h==mxConstants$1.ALIGN_BOTTOM?0:.3,b=o==mxConstants$1.ALIGN_RIGHT?"end":o==mxConstants$1.ALIGN_LEFT?"start":"middle",w=this.createElement("text");w.setAttribute("x",Math.round(e+C.dx)),w.setAttribute("y",Math.round(n+C.dy+E*C.fontSize)),w.setAttribute("fill",C.fontColor||"black"),w.setAttribute("font-family",C.fontFamily),w.setAttribute("font-size",Math.round(C.fontSize)+"px"),b!="start"&&w.setAttribute("text-anchor",b),(C.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&w.setAttribute("font-weight","bold"),(C.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&w.setAttribute("font-style","italic");var $=[];return(C.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&$.push("underline"),(C.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&$.push("line-through"),$.length>0&&w.setAttribute("text-decoration",$.join(" ")),mxUtils$1.write(w,v),w}else return null}createGradientId(t,e,n,s,l){t.charAt(0)=="#"&&(t=t.substring(1)),e.charAt(0)=="#"&&(e=e.substring(1)),t=t.toLowerCase()+"-"+n,e=e.toLowerCase()+"-"+s;var r=null;if(l==null||l==mxConstants$1.DIRECTION_SOUTH)r="s";else if(l==mxConstants$1.DIRECTION_EAST)r="e";else{var o=t;t=e,e=o,l==mxConstants$1.DIRECTION_NORTH?r="s":l==mxConstants$1.DIRECTION_WEST&&(r="e")}return"mx-gradient-"+t+"-"+e+"-"+r}getSvgGradient(t,e,n,s,l){var r=this.createGradientId(t,e,n,s,l),o=this.gradients[r];if(o==null){var h=this.root.ownerSVGElement,u=0,d=r+"-"+u;if(h!=null)for(o=h.ownerDocument.getElementById(d);o!=null&&o.ownerSVGElement!=h;)d=r+"-"+u++,o=h.ownerDocument.getElementById(d);else d="id"+ ++this.refCount;o==null&&(o=this.createSvgGradient(t,e,n,s,l),o.setAttribute("id",d),this.defs!=null?this.defs.appendChild(o):h.appendChild(o)),this.gradients[r]=o}return o.getAttribute("id")}createSvgGradient(t,e,n,s,l){var r=this.createElement("linearGradient");r.setAttribute("x1","0%"),r.setAttribute("y1","0%"),r.setAttribute("x2","0%"),r.setAttribute("y2","0%"),l==null||l==mxConstants$1.DIRECTION_SOUTH?r.setAttribute("y2","100%"):l==mxConstants$1.DIRECTION_EAST?r.setAttribute("x2","100%"):l==mxConstants$1.DIRECTION_NORTH?r.setAttribute("y1","100%"):l==mxConstants$1.DIRECTION_WEST&&r.setAttribute("x1","100%");var o=n<1?";stop-opacity:"+n:"",h=this.createElement("stop");return h.setAttribute("offset","0%"),h.setAttribute("style","stop-color:"+t+o),r.appendChild(h),o=s<1?";stop-opacity:"+s:"",h=this.createElement("stop"),h.setAttribute("offset","100%"),h.setAttribute("style","stop-color:"+e+o),r.appendChild(h),r}addNode(t,e){var n=this.node,s=this.state;if(n!=null){if(n.nodeName=="path")if(this.path!=null&&this.path.length>0)n.setAttribute("d",this.path.join(" "));else return;t&&s.fillColor!=null?this.updateFill():this.styleEnabled||(n.nodeName=="ellipse"&&mxClient.IS_FF?n.setAttribute("fill","transparent"):n.setAttribute("fill","none"),t=!1),e&&s.strokeColor!=null?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),s.transform!=null&&s.transform.length>0&&n.setAttribute("transform",s.transform),s.shadow&&this.root.appendChild(this.createShadow(n)),this.strokeTolerance>0&&!t&&this.root.appendChild(this.createTolerance(n)),this.pointerEvents?n.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&this.originalRoot==null&&n.setAttribute("pointer-events","none"),(n.nodeName!="rect"&&n.nodeName!="path"&&n.nodeName!="ellipse"||n.getAttribute("fill")!="none"&&n.getAttribute("fill")!="transparent"||n.getAttribute("stroke")!="none"||n.getAttribute("pointer-events")!="none")&&this.root.appendChild(n),this.node=null}}updateFill(){var t=this.state;if((t.alpha<1||t.fillAlpha<1)&&this.node.setAttribute("fill-opacity",t.alpha*t.fillAlpha),t.fillColor!=null)if(t.gradientColor!=null){var e=this.getSvgGradient(String(t.fillColor),String(t.gradientColor),t.gradientFillAlpha,t.gradientAlpha,t.gradientDirection);if(!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var n=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+n+"#"+e+")")}else this.node.setAttribute("fill","url(#"+e+")")}else this.node.setAttribute("fill",String(t.fillColor).toLowerCase())}getCurrentStrokeWidth(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))}updateStroke(){var t=this.state;this.node.setAttribute("stroke",String(t.strokeColor).toLowerCase()),(t.alpha<1||t.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",t.alpha*t.strokeAlpha);var e=this.getCurrentStrokeWidth();e!=1&&this.node.setAttribute("stroke-width",e),this.node.nodeName=="path"&&this.updateStrokeAttributes(),t.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((t.fixDash?1:t.strokeWidth)*t.scale))}updateStrokeAttributes(){var t=this.state;if(t.lineJoin!=null&&t.lineJoin!="miter"&&this.node.setAttribute("stroke-linejoin",t.lineJoin),t.lineCap!=null){var e=t.lineCap;e=="flat"&&(e="butt"),e!="butt"&&this.node.setAttribute("stroke-linecap",e)}t.miterLimit!=null&&(!this.styleEnabled||t.miterLimit!=10)&&this.node.setAttribute("stroke-miterlimit",t.miterLimit)}createDashPattern(t){var e=[];if(typeof this.state.dashPattern=="string"){var n=this.state.dashPattern.split(" ");if(n.length>0)for(var s=0;s<n.length;s++)e[s]=Number(n[s])*t}return e.join(" ")}createTolerance(t){var e=t.cloneNode(!0),n=parseFloat(e.getAttribute("stroke-width")||1)+this.strokeTolerance;return e.setAttribute("pointer-events","stroke"),e.setAttribute("visibility","hidden"),e.removeAttribute("stroke-dasharray"),e.setAttribute("stroke-width",n),e.setAttribute("fill","none"),e.setAttribute("stroke",mxClient.IS_OT?"none":"white"),e}createShadow(t){var e=t.cloneNode(!0),n=this.state;return e.getAttribute("fill")!="none"&&(!mxClient.IS_FF||e.getAttribute("fill")!="transparent")&&e.setAttribute("fill",n.shadowColor),e.getAttribute("stroke")!="none"&&e.setAttribute("stroke",n.shadowColor),e.setAttribute("transform","translate("+this.format(n.shadowDx*n.scale)+","+this.format(n.shadowDy*n.scale)+")"+(n.transform||"")),e.setAttribute("opacity",n.shadowAlpha),e}setLink(t){if(t==null)this.root=this.originalRoot;else{this.originalRoot=this.root;var e=this.createElement("a");e.setAttributeNS==null||this.root.ownerDocument!=document&&document.documentMode==null?e.setAttribute("xlink:href",t):e.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",t),this.root.appendChild(e),this.root=e}}rotate(t,e,n,s,l){if(t!=0||e||n){var r=this.state;if(s+=r.dx,l+=r.dy,s*=r.scale,l*=r.scale,r.transform=r.transform||"",e&&n)t+=180;else if(e!=n){var o=e?s:0,h=e?-1:1,u=n?l:0,d=n?-1:1;r.transform+="translate("+this.format(o)+","+this.format(u)+")scale("+this.format(h)+","+this.format(d)+")translate("+this.format(-o)+","+this.format(-u)+")"}(e?!n:n)&&(t*=-1),t!=0&&(r.transform+="rotate("+this.format(t)+","+this.format(s)+","+this.format(l)+")"),r.rotation=r.rotation+t,r.rotationCx=s,r.rotationCy=l}}begin(){super.begin(),this.node=this.createElement("path")}rect(t,e,n,s){var l=this.state,r=this.createElement("rect");r.setAttribute("x",this.format((t+l.dx)*l.scale)),r.setAttribute("y",this.format((e+l.dy)*l.scale)),r.setAttribute("width",this.format(n*l.scale)),r.setAttribute("height",this.format(s*l.scale)),this.node=r}roundrect(t,e,n,s,l,r){this.rect(t,e,n,s),l>0&&this.node.setAttribute("rx",this.format(l*this.state.scale)),r>0&&this.node.setAttribute("ry",this.format(r*this.state.scale))}ellipse(t,e,n,s){var l=this.state,r=this.createElement("ellipse");r.setAttribute("cx",this.format((t+n/2+l.dx)*l.scale)),r.setAttribute("cy",this.format((e+s/2+l.dy)*l.scale)),r.setAttribute("rx",n/2*l.scale),r.setAttribute("ry",s/2*l.scale),this.node=r}image(t,e,n,s,l,r,o,h){l=this.converter.convert(l),r=r??!0,o=o??!1,h=h??!1;var u=this.state;t+=u.dx,e+=u.dy;var d=this.createElement("image");d.setAttribute("x",this.format(t*u.scale)+this.imageOffset),d.setAttribute("y",this.format(e*u.scale)+this.imageOffset),d.setAttribute("width",this.format(n*u.scale)),d.setAttribute("height",this.format(s*u.scale)),d.setAttributeNS==null?d.setAttribute("xlink:href",l):d.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",l),r||d.setAttribute("preserveAspectRatio","none"),(u.alpha<1||u.fillAlpha<1)&&d.setAttribute("opacity",u.alpha*u.fillAlpha);var m=this.state.transform||"";if(o||h){var g=1,x=1,v=0,C=0;o&&(g=-1,v=-n-2*t),h&&(x=-1,C=-s-2*e),m+="scale("+g+","+x+")translate("+v*u.scale+","+C*u.scale+")"}m.length>0&&d.setAttribute("transform",m),this.pointerEvents||d.setAttribute("pointer-events","none"),this.root.appendChild(d)}convertHtml(t){if(this.useDomParser){var e=new DOMParser().parseFromString(t,"text/html");e!=null&&(t=new XMLSerializer().serializeToString(e.body),t.substring(0,5)=="<body"&&(t=t.substring(t.indexOf(">",5)+1)),t.substring(t.length-7,t.length)=="</body>"&&(t=t.substring(0,t.length-7)))}else if(document.implementation!=null&&document.implementation.createDocument!=null){var n=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),s=n.createElement("body");n.documentElement.appendChild(s);var l=document.createElement("div");l.innerHTML=t;for(var r=l.firstChild;r!=null;){var o=r.nextSibling;s.appendChild(n.adoptNode(r)),r=o}return s.innerHTML}else{var h=document.createElement("textarea");h.innerHTML=t.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=h.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return t}createDiv(t){var e=t;if(mxUtils$1.isNode(e)||(e="<div><div>"+this.convertHtml(e)+"</div></div>"),!mxClient.IS_IE11&&document.createElementNS){var n=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(mxUtils$1.isNode(e)){var s=document.createElement("div"),l=s.cloneNode(!1);this.root.ownerDocument!=document?s.appendChild(e.cloneNode(!0)):s.appendChild(e),l.appendChild(s),n.appendChild(l)}else n.innerHTML=e;return n}else return mxUtils$1.isNode(e)&&(e="<div><div>"+mxUtils$1.getXml(e)+"</div></div>"),e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>",mxUtils$1.parseXml(e).documentElement}updateText(t,e,n,s,l,r,o,h,u,d,m){m!=null&&m.firstChild!=null&&m.firstChild.firstChild!=null&&this.updateTextNodes(t,e,n,s,l,r,o,h,u,d,m.firstChild)}addForeignObject(t,e,n,s,l,r,o,h,u,d,m,g,x,v,C){var E=this.createElement("g"),b=this.createElement("foreignObject");if(b.setAttribute("style","overflow: visible; text-align: left;"),b.setAttribute("pointer-events","none"),v.ownerDocument!=document&&(v=mxUtils$1.importNodeImplementation(b.ownerDocument,v,!0)),b.appendChild(v),E.appendChild(b),this.updateTextNodes(t,e,n,s,r,o,h,d,m,g,E),this.root.ownerDocument!=document){var w=this.createAlternateContent(b,t,e,n,s,l,r,o,h,u,d,m,g);if(w!=null){b.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var $=this.createElement("switch");$.appendChild(b),$.appendChild(w),E.appendChild($)}}C.appendChild(E)}updateTextNodes(t,e,n,s,l,r,o,h,u,d,m){var g=this.state.scale;mxSvgCanvas2D.createCss(n+2,s,l,r,o,h,u,this.state.fontBackgroundColor!=null?this.state.fontBackgroundColor:null,this.state.fontBorderColor!=null?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(r==mxConstants$1.ALIGN_TOP?"flex-start":r==mxConstants$1.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(l==mxConstants$1.ALIGN_LEFT?"flex-start":l==mxConstants$1.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),g,(x,v,C,E,b)=>{t+=this.state.dx,e+=this.state.dy;var w=m.firstChild,$=w.firstChild,P=$.firstChild,M=P.firstChild,D=(this.rotateHtml?this.state.rotation:0)+(d??0),k=(this.foOffset!=0?"translate("+this.foOffset+" "+this.foOffset+")":"")+(g!=1?"scale("+g+")":"");M.setAttribute("style",b),P.setAttribute("style",E),w.setAttribute("width",Math.ceil(1/Math.min(1,g)*100)+"%"),w.setAttribute("height",Math.ceil(1/Math.min(1,g)*100)+"%");var Z=Math.round(e+v);Z<0?w.setAttribute("y",Z):(w.removeAttribute("y"),C+="padding-top: "+Z+"px; "),$.setAttribute("style",C+"margin-left: "+Math.round(t+x)+"px;"),k+=D!=0?"rotate("+D+" "+t+" "+e+")":"",k!=""?m.setAttribute("transform",k):m.removeAttribute("transform"),this.state.alpha!=1?m.setAttribute("opacity",this.state.alpha):m.removeAttribute("opacity")})}static createCss(t,e,n,s,l,r,o,h,u,d,m,g,x){var v="box-sizing: border-box; font-size: 0; text-align: "+(n==mxConstants$1.ALIGN_LEFT?"left":n==mxConstants$1.ALIGN_RIGHT?"right":"center")+"; ",C=mxUtils$1.getAlignmentAsPoint(n,s),E="overflow: hidden; ",b="width: 1px; ",w="height: 1px; ",$=C.x*t,P=C.y*e;o?(b="width: "+Math.round(t)+"px; ",v+="max-height: "+Math.round(e)+"px; ",P=0):r=="fill"?(b="width: "+Math.round(t)+"px; ",w="height: "+Math.round(e)+"px; ",m+="width: 100%; height: 100%; ",v+=b+w):r=="width"?(b="width: "+Math.round(t)+"px; ",m+="width: 100%; ",v+=b,P=0,e>0&&(v+="max-height: "+Math.round(e)+"px; ")):(E="",P=0);var M="";h!=null&&(M+="background-color: "+h+"; "),u!=null&&(M+="border: 1px solid "+u+"; "),E==""||o?m+=M:v+=M,l&&t>0?(m+="white-space: normal; word-wrap: "+mxConstants$1.WORD_WRAP+"; ",b="width: "+Math.round(t)+"px; ",E!=""&&r!="fill"&&(P=0)):(m+="white-space: nowrap; ",E==""&&($=0)),x($,P,d+b+w,v+E,m,E)}getTextCss(){var t=this.state,e=mxConstants$1.LINE_HEIGHT*this.lineHeightCorrection,n="display: inline-block; font-size: "+t.fontSize+"px; font-family: "+t.fontFamily+"; color: "+t.fontColor+"; line-height: "+e+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ";(t.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(n+="font-weight: bold; "),(t.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(n+="font-style: italic; ");var s=[];return(t.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&s.push("underline"),(t.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&s.push("line-through"),s.length>0&&(n+="text-decoration: "+s.join(" ")+"; "),n}text(t,e,n,s,l,r,o,h,u,d,m,g,x){if(this.textEnabled&&l!=null)if(g=g??0,this.foEnabled&&u=="html"){var v=this.createDiv(l);v!=null&&(x!=null&&v.setAttribute("dir",x),this.addForeignObject(t,e,n,s,l,r,o,h,u,d,m,g,x,v,this.root))}else this.plainText(t+this.state.dx,e+this.state.dy,n,s,l,r,o,h,d,m,g,x)}createClip(t,e,n,s){t=Math.round(t),e=Math.round(e),n=Math.round(n),s=Math.round(s);for(var l="mx-clip-"+t+"-"+e+"-"+n+"-"+s,r=0,o=l+"-"+r;document.getElementById(o)!=null;)o=l+"-"+ ++r;var h=this.createElement("clipPath");h.setAttribute("id",o);var u=this.createElement("rect");return u.setAttribute("x",t),u.setAttribute("y",e),u.setAttribute("width",n),u.setAttribute("height",s),h.appendChild(u),h}plainText(t,e,n,s,l,r,o,h,u,d,m,g){m=m??0;var x=this.state,v=x.fontSize,C=this.createElement("g"),E=x.transform||"";if(this.updateFont(C),m!=0&&(E+="rotate("+m+","+this.format(t*x.scale)+","+this.format(e*x.scale)+")"),g!=null&&C.setAttribute("direction",g),d&&n>0&&s>0){var b=t,Z=e;r==mxConstants$1.ALIGN_CENTER?b-=n/2:r==mxConstants$1.ALIGN_RIGHT&&(b-=n),u!="fill"&&(o==mxConstants$1.ALIGN_MIDDLE?Z-=s/2:o==mxConstants$1.ALIGN_BOTTOM&&(Z-=s));var w=this.createClip(b*x.scale-2,Z*x.scale-2,n*x.scale+4,s*x.scale+4);if(this.defs!=null?this.defs.appendChild(w):this.root.appendChild(w),!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&this.root.ownerDocument==document){var $=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");C.setAttribute("clip-path","url("+$+"#"+w.getAttribute("id")+")")}else C.setAttribute("clip-path","url(#"+w.getAttribute("id")+")")}var P=r==mxConstants$1.ALIGN_RIGHT?"end":r==mxConstants$1.ALIGN_CENTER?"middle":"start";P!="start"&&C.setAttribute("text-anchor",P),(!this.styleEnabled||v!=mxConstants$1.DEFAULT_FONTSIZE)&&C.setAttribute("font-size",v*x.scale+"px"),E.length>0&&C.setAttribute("transform",E),x.alpha<1&&C.setAttribute("opacity",x.alpha);var M=l.split(`
`),D=Math.round(v*mxConstants$1.LINE_HEIGHT),k=v+(M.length-1)*D,Z=e+v-1;if(o==mxConstants$1.ALIGN_MIDDLE)if(u=="fill")Z-=s/2;else{var q=(this.matchHtmlAlignment&&d&&s>0?Math.min(k,s):k)/2;Z-=q}else if(o==mxConstants$1.ALIGN_BOTTOM)if(u=="fill")Z-=s;else{var q=this.matchHtmlAlignment&&d&&s>0?Math.min(k,s):k;Z-=q+1}for(var j=0;j<M.length;j++){if(M[j].length>0&&mxUtils$1.trim(M[j]).length>0){var X=this.createElement("text");X.setAttribute("x",this.format(t*x.scale)+this.textOffset),X.setAttribute("y",this.format(Z*x.scale)+this.textOffset),mxUtils$1.write(X,M[j]),C.appendChild(X)}Z+=D}this.root.appendChild(C),this.addTextBackground(C,l,t,e,n,u=="fill"?s:k,r,o,u)}updateFont(t){var e=this.state;t.setAttribute("fill",e.fontColor),(!this.styleEnabled||e.fontFamily!=mxConstants$1.DEFAULT_FONTFAMILY)&&t.setAttribute("font-family",e.fontFamily),(e.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&t.setAttribute("font-style","italic");var n=[];(e.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&n.push("underline"),(e.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&n.push("line-through"),n.length>0&&t.setAttribute("text-decoration",n.join(" "))}addTextBackground(t,e,n,s,l,r,o,h,u){var d=this.state;if(d.fontBackgroundColor!=null||d.fontBorderColor!=null){var m=null;if(u=="fill"||u=="width")o==mxConstants$1.ALIGN_CENTER?n-=l/2:o==mxConstants$1.ALIGN_RIGHT&&(n-=l),h==mxConstants$1.ALIGN_MIDDLE?s-=r/2:h==mxConstants$1.ALIGN_BOTTOM&&(s-=r),m=new mxRectangle((n+1)*d.scale,s*d.scale,(l-2)*d.scale,(r+2)*d.scale);else if(t.getBBox!=null&&this.root.ownerDocument==document)try{m=t.getBBox(),m=new mxRectangle(m.x,m.y+1,m.width,m.height)}catch{}else{var g=document.createElement("div");g.style.lineHeight=mxConstants$1.LINE_HEIGHT,g.style.fontSize=d.fontSize+"px",g.style.fontFamily=d.fontFamily,g.style.whiteSpace="nowrap",g.style.position="absolute",g.style.visibility="hidden",g.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",g.style.zoom="1",(d.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(g.style.fontWeight="bold"),(d.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(g.style.fontStyle="italic"),e=mxUtils$1.htmlEntities(e,!1),g.innerHTML=e.replace(/\n/g,"<br/>"),document.body.appendChild(g);var l=g.offsetWidth,r=g.offsetHeight;g.parentNode.removeChild(g),o==mxConstants$1.ALIGN_CENTER?n-=l/2:o==mxConstants$1.ALIGN_RIGHT&&(n-=l),h==mxConstants$1.ALIGN_MIDDLE?s-=r/2:h==mxConstants$1.ALIGN_BOTTOM&&(s-=r),m=new mxRectangle((n+1)*d.scale,(s+2)*d.scale,l*d.scale,(r+1)*d.scale)}if(m!=null){var x=this.createElement("rect");x.setAttribute("fill",d.fontBackgroundColor||"none"),x.setAttribute("stroke",d.fontBorderColor||"none"),x.setAttribute("x",Math.floor(m.x-1)),x.setAttribute("y",Math.floor(m.y-1)),x.setAttribute("width",Math.ceil(m.width+2)),x.setAttribute("height",Math.ceil(m.height));var v=d.fontBorderColor!=null?Math.max(1,this.format(d.scale)):0;x.setAttribute("stroke-width",v),this.root.ownerDocument==document&&mxUtils$1.mod(v,2)==1&&x.setAttribute("transform","translate(0.5, 0.5)"),t.insertBefore(x,t.firstChild)}}}stroke(){this.addNode(!1,!0)}fill(){this.addNode(!0,!1)}fillAndStroke(){this.addNode(!0,!0)}}class mxShape{constructor(i){c(this,"dialect",null);c(this,"scale",1);c(this,"antiAlias",!0);c(this,"minSvgStrokeWidth",1);c(this,"bounds",null);c(this,"points",null);c(this,"node",null);c(this,"state",null);c(this,"style",null);c(this,"boundingBox",null);c(this,"svgStrokeTolerance",8);c(this,"pointerEvents",!0);c(this,"svgPointerEvents","all");c(this,"shapePointerEvents",!1);c(this,"stencilPointerEvents",!1);c(this,"vmlScale",1);c(this,"outline",!1);c(this,"visible",!0);c(this,"useSvgBoundingBox",!1);c(this,"verticalTextRotation",-90);this.stencil=i,this.initStyles()}init(i){this.node==null&&(this.node=this.create(i),i!=null&&i.appendChild(this.node))}initStyles(i){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1}isParseVml(){return!0}isHtmlAllowed(){return!1}getSvgScreenOffset(){var i=this.stencil&&this.stencil.strokewidth!="inherit"?Number(this.stencil.strokewidth):this.strokewidth;return mxUtils$1.mod(Math.max(1,Math.round(i*this.scale)),2)==1?.5:0}create(i){var t=null;return i!=null&&i.ownerSVGElement!=null?t=this.createSvg(i):this.dialect!=mxConstants$1.DIALECT_VML&&this.isHtmlAllowed()?t=this.createHtml(i):t=this.createVml(i),t}createSvg(){return document.createElementNS(mxConstants$1.NS_SVG,"g")}createVml(){var i=document.createElement(mxClient.VML_PREFIX+":group");return i.style.position="absolute",i}createHtml(){var i=document.createElement("div");return i.style.position="absolute",i}reconfigure(){this.redraw()}redraw(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),this.node.nodeName=="DIV"&&this.isHtmlAllowed()?this.redrawHtmlShape():this.redrawShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)}clear(){if(this.node.ownerSVGElement!=null)for(;this.node.lastChild!=null;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(this.cursor!=null?"cursor:"+this.cursor+";":""),this.node.innerHTML=""}updateBoundsFromPoints(){var i=this.points;if(i!=null&&i.length>0&&i[0]!=null){this.bounds=new mxRectangle(Number(i[0].x),Number(i[0].y),1,1);for(var t=1;t<this.points.length;t++)i[t]!=null&&this.bounds.add(new mxRectangle(Number(i[t].x),Number(i[t].y),1,1))}}getLabelBounds(i){var t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),e=i;if(t!=mxConstants$1.DIRECTION_SOUTH&&t!=mxConstants$1.DIRECTION_NORTH&&this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){e=e.clone();var n=e.width;e.width=e.height,e.height=n}var s=this.getLabelMargins(e);if(s!=null){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,!1)=="1",r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,!1)=="1";if(this.state!=null&&this.state.text!=null&&this.state.text.isPaintBoundsInverted()){var n=s.x;s.x=s.height,s.height=s.width,s.width=s.y,s.y=n,n=l,l=r,r=n}return mxUtils$1.getDirectedBounds(i,s,this.style,l,r)}return i}getLabelMargins(i){return null}checkBounds(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0}createVmlGroup(){var i=document.createElement(mxClient.VML_PREFIX+":group");return i.style.position="absolute",i.style.width=this.node.style.width,i.style.height=this.node.style.height,i}redrawShape(){var i=this.createCanvas();i!=null&&(i.pointerEvents=this.pointerEvents,this.paint(i),this.node!=i.root&&this.node.insertAdjacentHTML("beforeend",i.root.outerHTML),this.node.nodeName=="DIV"&&document.documentMode==8&&(this.node.style.filter="",mxUtils$1.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(i))}createCanvas(){var i=null;return this.node.ownerSVGElement!=null&&(i=this.createSvgCanvas()),i!=null&&this.outline&&(i.setStrokeWidth(this.strokewidth),i.setStrokeColor(this.stroke),this.isDashed!=null&&i.setDashed(this.isDashed),i.setStrokeWidth=function(){},i.setStrokeColor=function(){},i.setFillColor=function(){},i.setGradient=function(){},i.setDashed=function(){},i.text=function(){}),i}createSvgCanvas(){var i=new mxSvgCanvas2D(this.node,!1);i.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,i.pointerEventsValue=this.svgPointerEvents;var t=this.getSvgScreenOffset();return t!=0?this.node.setAttribute("transform","translate("+t+","+t+")"):this.node.removeAttribute("transform"),i.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(i.format=function(e){return Math.round(parseFloat(e))}),i}createVmlCanvas(){var i=document.documentMode==8&&this.isParseVml()?this.createVmlGroup():this.node,t=new mxVmlCanvas2D(i,!1);if(i.tagUrn!=""){var e=Math.max(1,Math.round(this.bounds.width)),n=Math.max(1,Math.round(this.bounds.height));i.coordsize=e*this.vmlScale+","+n*this.vmlScale,t.scale(this.vmlScale),t.vmlScale=this.vmlScale}var s=this.scale;return t.translate(-Math.round(this.bounds.x/s),-Math.round(this.bounds.y/s)),t}updateVmlContainer(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var i=Math.max(1,Math.round(this.bounds.width)),t=Math.max(1,Math.round(this.bounds.height));this.node.style.width=i+"px",this.node.style.height=t+"px",this.node.style.overflow="visible"}redrawHtmlShape(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)}updateHtmlFilters(i){var t="";if(this.opacity<100&&(t+="alpha(opacity="+this.opacity+")"),this.isShadow&&(t+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants$1.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants$1.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants$1.VML_SHADOWCOLOR+"')"),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var e=this.fill,n=this.gradient,s="0",l={east:0,south:1,west:2,north:3},r=this.direction!=null?l[this.direction]:0;if(this.gradientDirection!=null&&(r=mxUtils$1.mod(r+l[this.gradientDirection]-1,4)),r==1){s="1";var o=e;e=n,n=o}else if(r==2){var o=e;e=n,n=o}else r==3&&(s="1");t+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+e+"', endColorStr='"+n+"', gradientType='"+s+"')"}i.style.filter=t}updateHtmlColors(i){var t=this.stroke;t!=null&&t!=mxConstants$1.NONE?(i.style.borderColor=t,this.isDashed?i.style.borderStyle="dashed":this.strokewidth>0&&(i.style.borderStyle="solid"),i.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):i.style.borderWidth="0px",t=this.outline?null:this.fill,t!=null&&t!=mxConstants$1.NONE?(i.style.backgroundColor=t,i.style.backgroundImage="none"):this.pointerEvents?i.style.backgroundColor="transparent":document.documentMode==8?mxUtils$1.addTransparentBackgroundFilter(i):this.setTransparentBackgroundImage(i)}updateHtmlBounds(i){var t=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);i.style.borderWidth=Math.max(1,t)+"px",i.style.overflow="hidden",i.style.left=Math.round(this.bounds.x-t/2)+"px",i.style.top=Math.round(this.bounds.y-t/2)+"px",document.compatMode=="CSS1Compat"&&(t=-t),i.style.width=Math.round(Math.max(0,this.bounds.width+t))+"px",i.style.height=Math.round(Math.max(0,this.bounds.height+t))+"px"}destroyCanvas(i){if(i instanceof mxSvgCanvas2D){for(var t in i.gradients){var e=i.gradients[t];e!=null&&(e.mxRefCount=(e.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=i.gradients}}paint(i){var t=!1;if(i!=null&&this.outline){var e=i.stroke;i.stroke=function(){t=!0,e.apply(this,arguments)};var n=i.fillAndStroke;i.fillAndStroke=function(){t=!0,n.apply(this,arguments)}}var s=this.scale,l=this.bounds.x/s,r=this.bounds.y/s,o=this.bounds.width/s,h=this.bounds.height/s;if(this.isPaintBoundsInverted()){var u=(o-h)/2;l+=u,r-=u;var d=o;o=h,h=d}this.updateTransform(i,l,r,o,h),this.configureCanvas(i,l,r,o,h);var m=null;if(this.stencil==null&&this.points==null&&this.shapePointerEvents||this.stencil!=null&&this.stencilPointerEvents){var g=this.createBoundingBox();if(this.dialect==mxConstants$1.DIALECT_SVG)m=this.createTransparentSvgRectangle(g.x,g.y,g.width,g.height),this.node.appendChild(m);else{var x=i.createRect("rect",g.x/s,g.y/s,g.width/s,g.height/s);x.appendChild(i.createTransparentFill()),x.stroked="false",i.root.appendChild(x)}}if(this.stencil!=null)this.stencil.drawShape(i,this,l,r,o,h);else if(i.setStrokeWidth(this.strokewidth),this.points!=null){for(var v=[],C=0;C<this.points.length;C++)this.points[C]!=null&&v.push(new mxPoint(this.points[C].x/s,this.points[C].y/s));this.paintEdgeShape(i,v)}else this.paintVertexShape(i,l,r,o,h);m!=null&&i.state!=null&&i.state.transform!=null&&m.setAttribute("transform",i.state.transform),i!=null&&this.outline&&!t&&(i.rect(l,r,o,h),i.stroke())}configureCanvas(i,t,e,n,s){var l=null;if(this.style!=null&&(l=this.style.dashPattern),i.setAlpha(this.opacity/100),i.setFillAlpha(this.fillOpacity/100),i.setStrokeAlpha(this.strokeOpacity/100),this.isShadow!=null&&i.setShadow(this.isShadow),this.isDashed!=null&&i.setDashed(this.isDashed,this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FIX_DASH,!1)==1:!1),l!=null&&i.setDashPattern(l),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE){var r=this.getGradientBounds(i,t,e,n,s);i.setGradient(this.fill,this.gradient,r.x,r.y,r.width,r.height,this.gradientDirection)}else i.setFillColor(this.fill);i.setStrokeColor(this.stroke)}getGradientBounds(i,t,e,n,s){return new mxRectangle(Number(t),Number(e),n,s)}updateTransform(i,t,e,n,s){i.scale(this.scale),i.rotate(this.getShapeRotation(),this.flipH,this.flipV,t+n/2,e+s/2)}paintVertexShape(i,t,e,n,s){this.paintBackground(i,t,e,n,s),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(i.setShadow(!1),this.paintForeground(i,t,e,n,s))}paintBackground(i,t,e,n,s){}paintForeground(i,t,e,n,s){}paintEdgeShape(i,t){}getArcSize(i,t){var e=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")e=Math.min(i/2,Math.min(t/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;e=Math.min(i*n,t*n)}return e}paintGlassEffect(i,t,e,n,s,l){var r=Math.ceil(this.strokewidth/2),o=.4;i.setGradient("#ffffff","#ffffff",t,e,n,s*.6,"south",.9,.1),i.begin(),l+=2*r,this.isRounded?(i.moveTo(t-r+l,e-r),i.quadTo(t-r,e-r,t-r,e-r+l),i.lineTo(t-r,e+s*o),i.quadTo(t+n*.5,e+s*.7,t+n+r,e+s*o),i.lineTo(t+n+r,e-r+l),i.quadTo(t+n+r,e-r,t+n+r-l,e-r)):(i.moveTo(t-r,e-r),i.lineTo(t-r,e+s*o),i.quadTo(t+n*.5,e+s*.7,t+n+r,e+s*o),i.lineTo(t+n+r,e-r)),i.close(),i.fill()}addPoints(i,t,e,n,s,l,r){if(t!=null&&t.length>0){r=r??!0;var o=t[t.length-1];if(s&&e){t=t.slice();var h=t[0],u=new mxPoint(o.x+(h.x-o.x)/2,o.y+(h.y-o.y)/2);t.splice(0,0,u)}var d=t[0],m=1;for(r?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y);m<(s?t.length:t.length-1);){var g=t[mxUtils$1.mod(m,t.length)],x=d.x-g.x,v=d.y-g.y;if(e&&(x!=0||v!=0)&&(l==null||mxUtils$1.indexOf(l,m-1)<0)){var C=Math.sqrt(x*x+v*v),E=x*Math.min(n,C/2)/C,b=v*Math.min(n,C/2)/C,w=g.x+E,$=g.y+b;i.lineTo(w,$);for(var P=t[mxUtils$1.mod(m+1,t.length)];m<t.length-2&&Math.round(P.x-g.x)==0&&Math.round(P.y-g.y)==0;)P=t[mxUtils$1.mod(m+2,t.length)],m++;x=P.x-g.x,v=P.y-g.y,C=Math.max(1,Math.sqrt(x*x+v*v));var M=x*Math.min(n,C/2)/C,D=v*Math.min(n,C/2)/C,k=g.x+M,Z=g.y+D;i.quadTo(g.x,g.y,k,Z),g=new mxPoint(k,Z)}else i.lineTo(g.x,g.y);d=g,m++}s?i.close():i.lineTo(o.x,o.y)}}resetStyles(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass}apply(i){if(this.state=i,this.style=i.style,this.style!=null){if(this.fill=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing),this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROTATION,this.rotation),this.direction=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DIRECTION,this.direction),this.flipH=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,this.flipV=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,this.stencil!=null&&(this.flipH=mxUtils$1.getValue(this.style,"stencilFlipH",0)==1||this.flipH,this.flipV=mxUtils$1.getValue(this.style,"stencilFlipV",0)==1||this.flipV),this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var t=this.flipH;this.flipH=this.flipV,this.flipV=t}this.isShadow=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SHADOW,this.isShadow)==1,this.isDashed=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_DASHED,this.isDashed)==1,this.isRounded=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ROUNDED,this.isRounded)==1,this.glass=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_GLASS,this.glass)==1,this.fill==mxConstants$1.NONE&&(this.fill=null),this.gradient==mxConstants$1.NONE&&(this.gradient=null),this.stroke==mxConstants$1.NONE&&(this.stroke=null)}}setCursor(i){i==null&&(i=""),this.cursor=i,this.node!=null&&(this.node.style.cursor=i)}getCursor(){return this.cursor}isRoundable(){return!1}updateBoundingBox(){if(this.useSvgBoundingBox&&this.node!=null&&this.node.ownerSVGElement!=null)try{var i=this.node.getBBox();if(i.width>0&&i.height>0){this.boundingBox=new mxRectangle(i.x,i.y,i.width,i.height),this.boundingBox.grow(this.strokewidth*this.scale/2);return}}catch{console.log("updateBoundingBox   Err")}if(this.bounds!=null){var t=this.createBoundingBox();if(t!=null){this.augmentBoundingBox(t);var e=this.getShapeRotation();e!=0&&(t=mxUtils$1.getBoundingBox(t,e))}this.boundingBox=t}}createBoundingBox(){var i=this.bounds.clone();return(this.stencil!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&i.rotate90(),i}augmentBoundingBox(i){this.isShadow&&(i.width+=Math.ceil(mxConstants$1.SHADOW_OFFSET_X*this.scale),i.height+=Math.ceil(mxConstants$1.SHADOW_OFFSET_Y*this.scale)),i.grow(this.strokewidth*this.scale/2)}isPaintBoundsInverted(){return this.stencil==null&&(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH)}getRotation(){return this.rotation!=null?this.rotation:0}getTextRotation(){var i=this.getRotation();return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)!=1&&(i+=this.verticalTextRotation),i}getShapeRotation(){var i=this.getRotation();return this.direction!=null&&(this.direction==mxConstants$1.DIRECTION_NORTH?i+=270:this.direction==mxConstants$1.DIRECTION_WEST?i+=180:this.direction==mxConstants$1.DIRECTION_SOUTH&&(i+=90)),i}createTransparentSvgRectangle(i,t,e,n){var s=document.createElementNS(mxConstants$1.NS_SVG,"rect");return s.setAttribute("x",i),s.setAttribute("y",t),s.setAttribute("width",e),s.setAttribute("height",n),s.setAttribute("fill","none"),s.setAttribute("stroke","none"),s.setAttribute("pointer-events","all"),s}setTransparentBackgroundImage(i){i.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"}releaseSvgGradients(i){if(i!=null)for(var t in i){var e=i[t];e!=null&&(e.mxRefCount=(e.mxRefCount||0)-1,e.mxRefCount==0&&e.parentNode!=null&&e.parentNode.removeChild(e))}}destroy(){this.node!=null&&(mxEvent$1.release(this.node),this.node.parentNode!=null&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null}}class mxPolyline extends mxShape{constructor(i,t,e){super(),this.points=i,this.stroke=t,this.strokewidth=e??1}getRotation(){return 0}getShapeRotation(){return 0}isPaintBoundsInverted(){return!1}paintEdgeShape(i,t){var e=i.pointerEventsValue;i.pointerEventsValue="stroke",this.style==null||this.style[mxConstants$1.STYLE_CURVED]!=1?this.paintLine(i,t,this.isRounded):this.paintCurvedLine(i,t),i.pointerEventsValue=e}paintLine(i,t,e){var n=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;i.begin(),this.addPoints(i,t,e,n,!1),i.stroke()}paintCurvedLine(i,t){i.begin();var e=t[0],n=t.length;i.moveTo(e.x,e.y);for(var s=1;s<n-2;s++){var o=t[s],h=t[s+1],l=(o.x+h.x)/2,r=(o.y+h.y)/2;i.quadTo(o.x,o.y,l,r)}var o=t[n-2],h=t[n-1];i.quadTo(o.x,o.y,h.x,h.y),i.stroke()}}class mxGuide{constructor(i,t){c(this,"states",null);c(this,"horizontal",!0);c(this,"vertical",!0);c(this,"guideX",null);c(this,"guideY",null);c(this,"rounded",!1);c(this,"tolerance",2);this.graph=i,this.setStates(t)}setStates(i){this.states=i}isEnabledForEvent(i){return!0}getGuideTolerance(i){return i&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance}createGuideShape(i){var t=new mxPolyline([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return t.isDashed=!0,t}isStateIgnored(i){return!1}move(i,t,e,n){if(this.states!=null&&(this.horizontal||this.vertical)&&i!=null&&t!=null){let Y=function(J,tt,gt){var dt=!1;gt&&Math.abs(J-b)<x?(t.x=J-i.getCenterX(),x=Math.abs(J-b),dt=!0):gt||(Math.abs(J-C)<x?(t.x=J-i.x,x=Math.abs(J-C),dt=!0):Math.abs(J-E)<x&&(t.x=J-i.x-i.width,x=Math.abs(J-E),dt=!0)),dt&&(h=tt,u=J,this.guideX==null&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),o=o||dt},G=function(J,tt,gt){var dt=!1;gt&&Math.abs(J-P)<v?(t.y=J-i.getCenterY(),v=Math.abs(J-P),dt=!0):gt||(Math.abs(J-w)<v?(t.y=J-i.y,v=Math.abs(J-w),dt=!0):Math.abs(J-$)<v&&(t.y=J-i.y-i.height,v=Math.abs(J-$),dt=!0)),dt&&(m=tt,g=J,this.guideY==null&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),d=d||dt};var rt=Y,et=G,s=this.graph.getView().scale,l=this.getGuideTolerance(e)*s,r=i.clone();r.x+=t.x,r.y+=t.y;for(var o=!1,h=null,u=null,d=!1,m=null,g=null,x=l,v=l,C=r.x,E=r.x+r.width,b=r.getCenterX(),w=r.y,$=r.y+r.height,P=r.getCenterY(),M=0;M<this.states.length;M++){var D=this.states[M];D!=null&&!this.isStateIgnored(D)&&(this.horizontal&&(Y.call(this,D.getCenterX(),D,!0),Y.call(this,D.x,D,!1),Y.call(this,D.x+D.width,D,!1),D.cell==null&&Y.call(this,D.getCenterX(),D,!1)),this.vertical&&(G.call(this,D.getCenterY(),D,!0),G.call(this,D.y,D,!1),G.call(this,D.y+D.height,D,!1),D.cell==null&&G.call(this,D.getCenterY(),D,!1)))}this.graph.snapDelta(t,i,!e,o,d),t=this.getDelta(i,h,t.x,m,t.y);var k=this.graph.container;if(!o&&this.guideX!=null)this.guideX.node.style.visibility="hidden";else if(this.guideX!=null){var Z=null,q=null;h!=null&&i!=null&&(Z=Math.min(i.y+t.y-this.graph.panDy,h.y),q=Math.max(i.y+i.height+t.y-this.graph.panDy,h.y+h.height)),Z!=null&&q!=null?this.guideX.points=[new mxPoint(u,Z),new mxPoint(u,q)]:this.guideX.points=[new mxPoint(u,-this.graph.panDy),new mxPoint(u,k.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(h,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}if(!d&&this.guideY!=null)this.guideY.node.style.visibility="hidden";else if(this.guideY!=null){var j=null,X=null;m!=null&&i!=null&&(j=Math.min(i.x+t.x-this.graph.panDx,m.x),X=Math.max(i.x+i.width+t.x-this.graph.panDx,m.x+m.width)),j!=null&&X!=null?this.guideY.points=[new mxPoint(j,g),new mxPoint(X,g)]:this.guideY.points=[new mxPoint(-this.graph.panDx,g),new mxPoint(k.scrollWidth-3-this.graph.panDx,g)],this.guideY.stroke=this.getGuideColor(m,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}return t}getDelta(i,t,e,n,s){var l=this.graph.view.scale;return(this.rounded||t!=null&&t.cell==null)&&(e=Math.round((i.x+e)/l)*l-i.x),(this.rounded||n!=null&&n.cell==null)&&(s=Math.round((i.y+s)/l)*l-i.y),new mxPoint(e,s)}getGuideColor(i,t){return mxConstants$1.GUIDE_COLOR}hide(){this.setVisible(!1)}setVisible(i){this.guideX!=null&&(this.guideX.node.style.visibility=i?"visible":"hidden"),this.guideY!=null&&(this.guideY.node.style.visibility=i?"visible":"hidden")}destroy(){this.guideX!=null&&(this.guideX.destroy(),this.guideX=null),this.guideY!=null&&(this.guideY.destroy(),this.guideY=null)}}class mxDragSource{constructor(i,t){c(this,"dragOffset",null);c(this,"dragElement",null);c(this,"previewElement",null);c(this,"enabled",!0);c(this,"currentGraph",null);c(this,"currentDropTarget",null);c(this,"currentPoint",null);c(this,"currentGuide",null);c(this,"currentHighlight",null);c(this,"autoscroll",!0);c(this,"guidesEnabled",!0);c(this,"gridEnabled",!0);c(this,"highlightDropTargets",!0);c(this,"dragElementZIndex",100);c(this,"dragElementOpacity",70);c(this,"checkEventSource",!0);this.element=i,this.dropHandler=t,mxEvent$1.addGestureListeners(i,e=>{this.mouseDown(e)}),mxEvent$1.addListener(i,"dragstart",function(e){mxEvent$1.consume(e)}),this.eventConsumer=function(e,n){var s=n.getProperty("eventName"),l=n.getProperty("event");s!=mxEvent$1.MOUSE_DOWN&&l.consume()}}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}isGuidesEnabled(){return this.guidesEnabled}setGuidesEnabled(i){this.guidesEnabled=i}isGridEnabled(){return this.gridEnabled}setGridEnabled(i){this.gridEnabled=i}getGraphForEvent(i){return null}getDropTarget(i,t,e,n){return i.getCellAt(t,e)}createDragElement(i){return this.element.cloneNode(!0)}createPreviewElement(i){return null}isActive(){return this.mouseMoveHandler!=null}reset(){this.currentGraph!=null&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()}mouseDown(i){this.enabled&&!mxEvent$1.isConsumed(i)&&this.mouseMoveHandler==null&&(this.startDrag(i),this.mouseMoveHandler=mxUtils$1.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils$1.bind(this,this.mouseUp),mxEvent$1.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent$1.isMouseEvent(i)&&(this.eventSource=mxEvent$1.getSource(i),mxEvent$1.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))}startDrag(i){this.dragElement=this.createDragElement(i),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils$1.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")}stopDrag(){this.removeDragElement()}removeDragElement(){this.dragElement!=null&&(this.dragElement.parentNode!=null&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)}getElementForEvent(i){return mxEvent$1.isTouchEvent(i)||mxEvent$1.isPenEvent(i)?document.elementFromPoint(mxEvent$1.getClientX(i),mxEvent$1.getClientY(i)):mxEvent$1.getSource(i)}graphContainsEvent(i,t){var e=mxEvent$1.getClientX(t),n=mxEvent$1.getClientY(t),s=mxUtils$1.getOffset(i.container),l=mxUtils$1.getScrollOrigin(),r=this.getElementForEvent(t);if(this.checkEventSource)for(;r!=null&&r!=i.container;)r=r.parentNode;return r!=null&&e>=s.x-l.x&&n>=s.y-l.y&&e<=s.x-l.x+i.container.offsetWidth&&n<=s.y-l.y+i.container.offsetHeight}mouseMove(i){var t=this.getGraphForEvent(i);if(t!=null&&!this.graphContainsEvent(t,i)&&(t=null),t!=this.currentGraph&&(this.currentGraph!=null&&this.dragExit(this.currentGraph,i),this.currentGraph=t,this.currentGraph!=null&&this.dragEnter(this.currentGraph,i)),this.currentGraph!=null&&this.dragOver(this.currentGraph,i),this.dragElement!=null&&(this.previewElement==null||this.previewElement.style.visibility!="visible")){var e=mxEvent$1.getClientX(i),n=mxEvent$1.getClientY(i);this.dragElement.parentNode==null&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",this.dragOffset!=null&&(e+=this.dragOffset.x,n+=this.dragOffset.y);var s=mxUtils$1.getDocumentScrollOrigin(document);this.dragElement.style.left=e+s.x+"px",this.dragElement.style.top=n+s.y+"px"}else this.dragElement!=null&&(this.dragElement.style.visibility="hidden");mxEvent$1.consume(i)}mouseUp(i){if(this.currentGraph!=null){if(this.currentPoint!=null&&(this.previewElement==null||this.previewElement.style.visibility!="hidden")){var t=this.currentGraph.view.scale,e=this.currentGraph.view.translate,n=this.currentPoint.x/t-e.x,s=this.currentPoint.y/t-e.y;this.drop(this.currentGraph,i,this.currentDropTarget,n,s)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent$1.consume(i)}removeListeners(){this.eventSource!=null&&(mxEvent$1.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent$1.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null}dragEnter(i,t){i.isMouseDown=!0,i.isMouseTrigger=mxEvent$1.isMouseEvent(t),this.previewElement=this.createPreviewElement(i),this.previewElement!=null&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&this.previewElement!=null&&(this.currentGuide=new mxGuide(i,i.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(i,mxConstants$1.DROP_TARGET_COLOR)),i.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.eventConsumer)}dragExit(i,t){this.currentDropTarget=null,this.currentPoint=null,i.isMouseDown=!1,i.removeListener(this.eventConsumer),this.previewElement!=null&&(this.previewElement.parentNode!=null&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),this.currentGuide!=null&&(this.currentGuide.destroy(),this.currentGuide=null),this.currentHighlight!=null&&(this.currentHighlight.destroy(),this.currentHighlight=null)}dragOver(i,t){var e=mxUtils$1.getOffset(i.container),n=mxUtils$1.getScrollOrigin(i.container),s=mxEvent$1.getClientX(t)-e.x+n.x-i.panDx,l=mxEvent$1.getClientY(t)-e.y+n.y-i.panDy;if(i.autoScroll&&(this.autoscroll==null||this.autoscroll)&&i.scrollPointToVisible(s,l,i.autoExtend),this.currentHighlight!=null&&i.isDropEnabled()){this.currentDropTarget=this.getDropTarget(i,s,l,t);var r=i.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(r)}if(this.previewElement!=null){this.previewElement.parentNode==null&&(i.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var o=this.isGridEnabled()&&i.isGridEnabledEvent(t),h=!0;if(this.currentGuide!=null&&this.currentGuide.isEnabledForEvent(t)){var u=parseInt(this.previewElement.style.width),d=parseInt(this.previewElement.style.height),m=new mxRectangle(0,0,u,d),g=new mxPoint(s,l);g=this.currentGuide.move(m,g,o,!0),h=!1,s=g.x,l=g.y}else if(o){var x=i.view.scale,v=i.view.translate,C=i.gridSize/2;s=(i.snap(s/x-v.x-C)+v.x)*x,l=(i.snap(l/x-v.y-C)+v.y)*x}this.currentGuide!=null&&h&&this.currentGuide.hide(),this.previewOffset!=null&&(s+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(s)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(s,l)}drop(i,t,e,n,s){this.dropHandler.apply(this,arguments),i.container.style.visibility!="hidden"&&i.container.focus()}}class mxEventSource{constructor(i){c(this,"eventListeners",null);c(this,"eventsEnabled",!0);c(this,"eventSource",null);this.setEventSource(i)}isEventsEnabled(){return this.eventsEnabled}setEventsEnabled(i){this.eventsEnabled=i}getEventSource(){return this.eventSource}setEventSource(i){this.eventSource=i}addListener(i,t){this.eventListeners==null&&(this.eventListeners=[]),this.eventListeners.push(i),this.eventListeners.push(t)}removeListener(i){if(this.eventListeners!=null)for(var t=0;t<this.eventListeners.length;)this.eventListeners[t+1]==i?this.eventListeners.splice(t,2):t+=2}fireEvent(i,t){if(this.eventListeners!=null&&this.isEventsEnabled()){i==null&&(i=new mxEventObject$1),t==null&&(t=this.getEventSource()),t==null&&(t=this);for(var e=[t,i],n=0;n<this.eventListeners.length;n+=2){var s=this.eventListeners[n];(s==null||s==i.getName())&&this.eventListeners[n+1].apply(this,e)}}}}class mxWindow extends mxEventSource{constructor(t,e,n,s,l,r,o,h,u,d){super();c(this,"closeImage",mxClient.imageBasePath+"/close.gif");c(this,"minimizeImage",mxClient.imageBasePath+"/minimize.gif");c(this,"normalizeImage",mxClient.imageBasePath+"/normalize.gif");c(this,"maximizeImage",mxClient.imageBasePath+"/maximize.gif");c(this,"resizeImage",mxClient.imageBasePath+"/resize.gif");c(this,"visible",!1);c(this,"minimumSize",new mxRectangle(0,0,50,40));c(this,"destroyOnClose",!0);c(this,"contentHeightCorrection",document.documentMode==8||document.documentMode==7?6:2);c(this,"title",null);c(this,"content",null);e!=null&&(o=o??!0,this.content=e,this.init(n,s,l,r,d),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(o),this.setTitle(t),(h==null||h)&&this.installMoveHandler(),u!=null&&u.parentNode!=null?u.parentNode.replaceChild(this.div,u):document.body.appendChild(this.div))}init(t,e,n,s,l){l=l??"mxWindow",this.div=document.createElement("div"),this.div.className=l,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=l,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),n!=null&&(mxClient.IS_QUIRKS||(this.div.style.width=n+"px"),this.table.style.width=n+"px"),s!=null&&(mxClient.IS_QUIRKS||(this.div.style.height=s+"px"),this.table.style.height=s+"px");var r=document.createElement("tbody"),o=document.createElement("tr");this.title=document.createElement("td"),this.title.className=l+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),o.appendChild(this.title),r.appendChild(o),o=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=l+"Pane",document.documentMode==7&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=l+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||this.content.nodeName.toUpperCase()!="DIV")&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),o.appendChild(this.td),r.appendChild(o),this.table.appendChild(r),this.div.appendChild(this.table);var h=u=>{this.activate()};mxEvent$1.addGestureListeners(this.title,h),mxEvent$1.addGestureListeners(this.table,h),this.hide()}setTitle(t){for(var e=this.title.firstChild;e!=null;){var n=e.nextSibling;e.nodeType==mxConstants$1.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=n}mxUtils$1.write(this.title,t||""),this.title.appendChild(this.buttons)}setScrollable(t){(navigator.userAgent==null||navigator.userAgent.indexOf("Presto/2.5")<0)&&(t?this.contentWrapper.style.overflow="auto":this.contentWrapper.style.overflow="hidden")}activate(){if(mxWindow.activeWindow!=this){var t=mxUtils$1.getCurrentStyle(this.getElement()),e=t!=null?t.zIndex:3;if(mxWindow.activeWindow){var n=mxWindow.activeWindow.getElement();n!=null&&n.style!=null&&(n.style.zIndex=e)}var s=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(e)+1,this.fireEvent(new mxEventObject$1(mxEvent$1.ACTIVATE,"previousWindow",s))}}getElement(){return this.div}fit(){mxUtils$1.fit(this.div)}isResizable(){return this.resize!=null?this.resize.style.display!="none":!1}setResizable(t){if(t)if(this.resize==null){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var e=null,n=null,s=null,l=null,r=u=>{this.activate(),e=mxEvent$1.getClientX(u),n=mxEvent$1.getClientY(u),s=this.div.offsetWidth,l=this.div.offsetHeight,mxEvent$1.addGestureListeners(document,null,o,h),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_START,"event",u)),mxEvent$1.consume(u)},o=u=>{if(e!=null&&n!=null){var d=mxEvent$1.getClientX(u)-e,m=mxEvent$1.getClientY(u)-n;this.setSize(s+d,l+m),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE,"event",u)),mxEvent$1.consume(u)}},h=u=>{e!=null&&n!=null&&(e=null,n=null,mxEvent$1.removeGestureListeners(document,null,o,h),this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_END,"event",u)),mxEvent$1.consume(u))};mxEvent$1.addGestureListeners(this.resize,r,o,h),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else this.resize!=null&&(this.resize.style.display="none")}setSize(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),mxClient.IS_QUIRKS||(this.div.style.width=t+"px",this.div.style.height=e+"px"),this.table.style.width=t+"px",this.table.style.height=e+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}setMinimizable(t){this.minimize.style.display=t?"":"none"}getMinimumSize(){return new mxRectangle(0,0,0,this.title.offsetHeight)}installMinimizeHandler(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var t=!1,e=null,n=null,s=l=>{if(this.activate(),t)t=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=e,mxClient.IS_QUIRKS||(this.div.style.height=n),this.table.style.height=n,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",l));else{t=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",e=this.maximize.style.display,this.maximize.style.display="none",n=this.table.style.height;var r=this.getMinimumSize();r.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=r.height+"px"),this.table.style.height=r.height+"px"),r.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=r.width+"px"),this.table.style.width=r.width+"px"),this.resize!=null&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject$1(mxEvent$1.MINIMIZE,"event",l))}mxEvent$1.consume(l)};mxEvent$1.addGestureListeners(this.minimize,s)}setMaximizable(t){this.maximize.style.display=t?"":"none"}installMaximizeHandler(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var t=!1,e=null,n=null,s=null,l=null,r=null,o=h=>{if(this.activate(),this.maximize.style.display!="none"){if(t){if(t=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=r,this.div.style.left=e+"px",this.div.style.top=n+"px",!mxClient.IS_QUIRKS){this.div.style.height=s,this.div.style.width=l;var d=mxUtils$1.getCurrentStyle(this.contentWrapper);(d.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.table.style.height=s,this.table.style.width=l,this.resize!=null&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject$1(mxEvent$1.NORMALIZE,"event",h))}else{t=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",r=this.minimize.style.display,this.minimize.style.display="none",e=parseInt(this.div.style.left),n=parseInt(this.div.style.top),s=this.table.style.height,l=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var u=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=u-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=u-2+"px",this.resize!=null&&(this.resize.style.visibility="hidden"),!mxClient.IS_QUIRKS){var d=mxUtils$1.getCurrentStyle(this.contentWrapper);(d.overflow=="auto"||this.resize!=null)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.fireEvent(new mxEventObject$1(mxEvent$1.MAXIMIZE,"event",h))}mxEvent$1.consume(h)}};mxEvent$1.addGestureListeners(this.maximize,o),mxEvent$1.addListener(this.title,"dblclick",o)}installMoveHandler(){this.title.style.cursor="move",mxEvent$1.addGestureListeners(this.title,t=>{var e=mxEvent$1.getClientX(t),n=mxEvent$1.getClientY(t),s=this.getX(),l=this.getY(),r=h=>{var u=mxEvent$1.getClientX(h)-e,d=mxEvent$1.getClientY(h)-n;this.setLocation(s+u,l+d),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE,"event",h)),mxEvent$1.consume(h)},o=h=>{mxEvent$1.removeGestureListeners(document,null,r,o),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_END,"event",h)),mxEvent$1.consume(h)};mxEvent$1.addGestureListeners(document,null,r,o),this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_START,"event",t)),mxEvent$1.consume(t)}),mxClient.IS_POINTER&&(this.title.style.touchAction="none")}setLocation(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"}getX(){return parseInt(this.div.style.left)}getY(){return parseInt(this.div.style.top)}installCloseHandler(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent$1.addGestureListeners(this.closeImg,t=>{this.fireEvent(new mxEventObject$1(mxEvent$1.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent$1.consume(t)})}setImage(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)}setClosable(t){this.closeImg.style.display=t?"":"none"}isVisible(){return this.div!=null?this.div.style.display!="none":!1}setVisible(t){this.div!=null&&this.isVisible()!=t&&(t?this.show():this.hide())}show(){this.div.style.display="",this.activate();var t=mxUtils$1.getCurrentStyle(this.contentWrapper);!mxClient.IS_QUIRKS&&(t.overflow=="auto"||this.resize!=null)&&this.contentWrapper.style.display!="none"&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW))}hide(){this.div.style.display="none",this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE))}destroy(){this.fireEvent(new mxEventObject$1(mxEvent$1.DESTROY)),this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null}}const At=class At{static init(){if(At.window==null&&document.body!=null){var i=At.consoleName+" - mxGraph "+mxClient.VERSION,t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("height","100%");var e=document.createElement("tbody"),n=document.createElement("tr"),s=document.createElement("td");s.style.verticalAlign="top",At.textarea=document.createElement("textarea"),At.textarea.setAttribute("wrap","off"),At.textarea.setAttribute("readOnly","true"),At.textarea.style.height="100%",At.textarea.style.resize="none",At.textarea.value=At.buffer,mxClient.IS_NS&&document.compatMode!="BackCompat"?At.textarea.style.width="99%":At.textarea.style.width="100%",s.appendChild(At.textarea),n.appendChild(s),e.appendChild(n),n=document.createElement("tr"),At.td=document.createElement("td"),At.td.style.verticalAlign="top",At.td.setAttribute("height","30px"),n.appendChild(At.td),e.appendChild(n),t.appendChild(e),At.addButton("Info",function(u){At.info()}),At.addButton("DOM",function(u){var d=mxUtils$1.getInnerHtml(document.body);At.debug(d)}),At.addButton("Trace",function(u){At.TRACE=!At.TRACE,At.TRACE?At.debug("Tracing enabled"):At.debug("Tracing disabled")}),At.addButton("Copy",function(u){try{mxUtils$1.copy(At.textarea.value)}catch(d){mxUtils$1.alert(d)}}),At.addButton("Show",function(u){try{mxUtils$1.popup(At.textarea.value)}catch(d){mxUtils$1.alert(d)}}),At.addButton("Clear",function(u){At.textarea.value=""});var l=0,r=0;if(typeof window.innerWidth=="number"?(l=window.innerHeight,r=window.innerWidth):(l=document.documentElement.clientHeight||document.body.clientHeight,r=document.body.clientWidth),At.window=new mxWindow(i,t,Math.max(0,r-320),Math.max(0,l-210),300,160),At.window.setMaximizable(!0),At.window.setScrollable(!1),At.window.setResizable(!0),At.window.setClosable(!0),At.window.destroyOnClose=!1,mxClient.IS_NS&&!mxClient.IS_GC&&!mxClient.IS_SF&&document.compatMode!="BackCompat"||document.documentMode==11){var o=At.window.getElement(),h=function(u,d){At.textarea.style.height=Math.max(0,o.offsetHeight-70)+"px"};At.window.addListener(mxEvent$1.RESIZE_END,h),At.window.addListener(mxEvent$1.MAXIMIZE,h),At.window.addListener(mxEvent$1.NORMALIZE,h),At.textarea.style.height="92px"}}}static info(){At.writeln(mxUtils$1.toString(navigator))}static addButton(i,t){var e=document.createElement("button");mxUtils$1.write(e,i),mxEvent$1.addListener(e,"click",t),At.td.appendChild(e)}static isVisible(){return At.window!=null?At.window.isVisible():!1}static show(){At.setVisible(!0)}static setVisible(i){At.window==null&&At.init(),At.window!=null&&At.window.setVisible(i)}static enter(i){if(At.TRACE)return At.writeln("Entering "+i),new Date().getTime()}static leave(i,t){if(At.TRACE){var e=t!=0?" ("+(new Date().getTime()-t)+" ms)":"";At.writeln("Leaving "+i+e)}}static debug(){At.DEBUG&&At.writeln.apply(this,arguments)}static warn(){At.WARN&&At.writeln.apply(this,arguments)}static write(){for(var i="",t=0;t<arguments.length;t++)i+=arguments[t],t<arguments.length-1&&(i+=" ");At.textarea!=null?(At.textarea.value=At.textarea.value+i,navigator.userAgent!=null&&navigator.userAgent.indexOf("Presto/2.5")>=0&&(At.textarea.style.visibility="hidden",At.textarea.style.visibility="visible"),At.textarea.scrollTop=At.textarea.scrollHeight):At.buffer+=i}static writeln(){for(var i="",t=0;t<arguments.length;t++)i+=arguments[t],t<arguments.length-1&&(i+=" ");At.write(i+`
`)}};c(At,"consoleName","Console"),c(At,"TRACE",!1),c(At,"DEBUG",!0),c(At,"WARN",!0),c(At,"buffer","");let mxLog=At;class mxGeometry extends mxRectangle{constructor(t,e,n,s){super(t,e,n,s);c(this,"TRANSLATE_CONTROL_POINTS",!0);c(this,"alternateBounds",null);c(this,"sourcePoint",null);c(this,"targetPoint",null);c(this,"points",null);c(this,"offset",null);c(this,"relative",!1)}swap(){if(this.alternateBounds!=null){var t=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=t}}getTerminalPoint(t){return t?this.sourcePoint:this.targetPoint}setTerminalPoint(t,e){return e?this.sourcePoint=t:this.targetPoint=t,t}rotate(t,e){var n=mxUtils$1.toRadians(t),s=Math.cos(n),l=Math.sin(n);if(!this.relative){var r=new mxPoint(this.getCenterX(),this.getCenterY()),o=mxUtils$1.getRotatedPoint(r,s,l,e);this.x=Math.round(o.x-this.width/2),this.y=Math.round(o.y-this.height/2)}if(this.sourcePoint!=null){var o=mxUtils$1.getRotatedPoint(this.sourcePoint,s,l,e);this.sourcePoint.x=Math.round(o.x),this.sourcePoint.y=Math.round(o.y)}if(this.targetPoint!=null){var o=mxUtils$1.getRotatedPoint(this.targetPoint,s,l,e);this.targetPoint.x=Math.round(o.x),this.targetPoint.y=Math.round(o.y)}if(this.points!=null){for(var h=0;h<this.points.length;h++)if(this.points[h]!=null){var o=mxUtils$1.getRotatedPoint(this.points[h],s,l,e);this.points[h].x=Math.round(o.x),this.points[h].y=Math.round(o.y)}}}translate(t,e){if(t=parseFloat(t),e=parseFloat(e),this.relative||(this.x=parseFloat(this.x)+t,this.y=parseFloat(this.y)+e),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+e),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+t,this.targetPoint.y=parseFloat(this.targetPoint.y)+e),this.TRANSLATE_CONTROL_POINTS&&this.points!=null)for(var n=0;n<this.points.length;n++)this.points[n]!=null&&(this.points[n].x=parseFloat(this.points[n].x)+t,this.points[n].y=parseFloat(this.points[n].y)+e)}scale(t,e,n){if(t=parseFloat(t),e=parseFloat(e),this.sourcePoint!=null&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*e),this.targetPoint!=null&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*t,this.targetPoint.y=parseFloat(this.targetPoint.y)*e),this.points!=null)for(var s=0;s<this.points.length;s++)this.points[s]!=null&&(this.points[s].x=parseFloat(this.points[s].x)*t,this.points[s].y=parseFloat(this.points[s].y)*e);this.relative||(this.x=parseFloat(this.x)*t,this.y=parseFloat(this.y)*e,n&&(e=t=Math.min(t,e)),this.width=parseFloat(this.width)*t,this.height=parseFloat(this.height)*e)}equals(t){return super.equals(t)&&this.relative==t.relative&&(this.sourcePoint==null&&t.sourcePoint==null||this.sourcePoint!=null&&this.sourcePoint.equals(t.sourcePoint))&&(this.targetPoint==null&&t.targetPoint==null||this.targetPoint!=null&&this.targetPoint.equals(t.targetPoint))&&(this.points==null&&t.points==null||this.points!=null&&mxUtils$1.equalPoints(this.points,t.points))&&(this.alternateBounds==null&&t.alternateBounds==null||this.alternateBounds!=null&&this.alternateBounds.equals(t.alternateBounds))&&(this.offset==null&&t.offset==null||this.offset!=null&&this.offset.equals(t.offset))}}class mxObjectCodec{constructor(i,t,e,n){this.template=i,this.exclude=t??[],this.idrefs=e??[],this.mapping=n??[],this.reverse=new Object;for(var s in this.mapping)this.reverse[this.mapping[s]]=s}getName(){return mxUtils$1.getFunctionName(this.template.constructor)}cloneTemplate(){return new this.template.constructor}getFieldName(i){if(i!=null){var t=this.reverse[i];t!=null&&(i=t)}return i}getAttributeName(i){if(i!=null){var t=this.mapping[i];t!=null&&(i=t)}return i}isExcluded(i,t,e,n){return t==mxObjectIdentity.FIELD_NAME||mxUtils$1.indexOf(this.exclude,t)>=0}isReference(i,t,e,n){return mxUtils$1.indexOf(this.idrefs,t)>=0}encode(i,t){var e=i.document.createElement(this.getName());return t=this.beforeEncode(i,t,e),this.encodeObject(i,t,e),this.afterEncode(i,t,e)}encodeObject(i,t,e){i.setAttribute(e,"id",i.getId(t));for(var n in t){var s=n,l=t[s];l!=null&&!this.isExcluded(t,s,l,!0)&&(mxUtils$1.isInteger(s)&&(s=null),this.encodeValue(i,t,s,l,e))}}encodeValue(i,t,e,n,s){if(n!=null){if(this.isReference(t,e,n,!0)){var l=i.getId(n);if(l==null){mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+e+"="+n);return}n=l}var r=this.template[e];(e==null||i.encodeDefaults||r!=n)&&(e=this.getAttributeName(e),this.writeAttribute(i,t,e,n,s))}}writeAttribute(i,t,e,n,s){typeof n!="object"?this.writePrimitiveAttribute(i,t,e,n,s):this.writeComplexAttribute(i,t,e,n,s)}writePrimitiveAttribute(i,t,e,n,s){if(n=this.convertAttributeToXml(i,t,e,n,s),e==null){var l=i.document.createElement("add");typeof n=="function"?l.appendChild(i.document.createTextNode(n)):i.setAttribute(l,"value",n),s.appendChild(l)}else typeof n!="function"&&i.setAttribute(s,e,n)}writeComplexAttribute(i,t,e,n,s){var l=i.encode(n);l!=null?(e!=null&&l.setAttribute("as",e),s.appendChild(l)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+e+": "+n)}convertAttributeToXml(i,t,e,n){return this.isBooleanAttribute(i,t,e,n)&&(n=n==!0?"1":"0"),n}isBooleanAttribute(i,t,e,n){return typeof n.length>"u"&&(n==!0||n==!1)}convertAttributeFromXml(i,t,e){var n=t.value;return this.isNumericAttribute(i,t,e)&&(n=parseFloat(n),(isNaN(n)||!isFinite(n))&&(n=0)),n}isNumericAttribute(i,t,e){var n=e.constructor==mxGeometry&&(t.name=="x"||t.name=="y"||t.name=="width"||t.name=="height")||e.constructor==mxPoint&&(t.name=="x"||t.name=="y")||mxUtils$1.isNumeric(t.value);return n}beforeEncode(i,t,e){return t}afterEncode(i,t,e){return e}decode(i,t,e){var n=t.getAttribute("id"),s=i.objects[n];return s==null&&(s=e||this.cloneTemplate(),n!=null&&i.putObject(n,s)),t=this.beforeDecode(i,t,s),this.decodeNode(i,t,s),this.afterDecode(i,t,s)}decodeNode(i,t,e){t!=null&&(this.decodeAttributes(i,t,e),this.decodeChildren(i,t,e))}decodeAttributes(i,t,e){var n=t.attributes;if(n!=null)for(var s=0;s<n.length;s++)this.decodeAttribute(i,n[s],e)}isIgnoredAttribute(i,t,e){return t.nodeName=="as"||t.nodeName=="id"}decodeAttribute(i,t,e){if(!this.isIgnoredAttribute(i,t,e)){var n=t.nodeName,s=this.convertAttributeFromXml(i,t,e),l=this.getFieldName(n);if(this.isReference(e,l,s,!1)){var r=i.getObject(s);if(r==null){mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+n+"="+s);return}s=r}this.isExcluded(e,n,s,!1)||(e[n]=s)}}decodeChildren(i,t,e){for(var n=t.firstChild;n!=null;){var s=n.nextSibling;n.nodeType==mxConstants$1.NODETYPE_ELEMENT&&!this.processInclude(i,n,e)&&this.decodeChild(i,n,e),n=s}}decodeChild(i,t,e){var n=this.getFieldName(t.getAttribute("as"));if(n==null||!this.isExcluded(e,n,t,!1)){var s=this.getFieldTemplate(e,n,t),l=null;t.nodeName=="add"?l=t.getAttribute("value"):l=i.decode(t,s);try{this.addObjectValue(e,n,l,s)}catch(r){throw new Error(r.message+" for "+t.nodeName)}}}getFieldTemplate(i,t,e){var n=i[t];return n instanceof Array&&n.length>0&&(n=null),n}addObjectValue(i,t,e,n){e!=null&&e!=n&&(t!=null&&t.length>0?i[t]=e:i.push(e))}processInclude(i,t,e){if(t.nodeName=="include"){var n=t.getAttribute("name");if(n!=null)try{var s=mxUtils$1.load(n).getDocumentElement();s!=null&&i.decode(s,e)}catch{}return!0}return!1}beforeDecode(i,t,e){return t}afterDecode(i,t,e){return e}}c(mxObjectCodec,"allowEval",!1);const _mxCodecRegistry=class _mxCodecRegistry{static register(a){if(a!=null){var i=a.getName();_mxCodecRegistry.codecs[i]=a;var t=mxUtils$1.getFunctionName(a.template.constructor);t!=i&&_mxCodecRegistry.addAlias(t,i)}return a}static addAlias(a,i){_mxCodecRegistry.aliases[a]=i}static getCodec_encode(a){var i=null;if(a!=null){var t=mxUtils$1.getFunctionName(a),e=_mxCodecRegistry.aliases[t];if(e!=null&&(t=e),i=_mxCodecRegistry.codecs[t],i==null)try{i=new mxObjectCodec(new a),_mxCodecRegistry.register(i)}catch{}}return i}static getCodec(name){var codec=null;if(codec=_mxCodecRegistry.codecs[name],codec==null)try{let classname=name,obj=eval("new "+classname+"()");codec=new mxObjectCodec(obj),_mxCodecRegistry.register(codec)}catch(a){}return codec}};c(_mxCodecRegistry,"codecs",[]),c(_mxCodecRegistry,"aliases",[]);let mxCodecRegistry=_mxCodecRegistry;const Re=class Re{static create(i){var t="";if(i!=null)for(var e=i.getParent();e!=null;){var n=e.getIndex(i);t=n+Re.PATH_SEPARATOR+t,i=e,e=i.getParent()}var s=t.length;return s>1&&(t=t.substring(0,s-1)),t}static getParentPath(i){if(i!=null){var t=i.lastIndexOf(Re.PATH_SEPARATOR);if(t>=0)return i.substring(0,t);if(i.length>0)return""}return null}static resolve(i,t){var e=i;if(t!=null)for(var n=t.split(Re.PATH_SEPARATOR),s=0;s<n.length;s++)e=e.getChildAt(parseInt(n[s]));return e}static compare(i,t){for(var e=Math.min(i.length,t.length),n=0,s=0;s<e;s++)if(i[s]!=t[s]){if(i[s].length==0||t[s].length==0)n=i[s]==t[s]?0:i[s]>t[s]?1:-1;else{var l=parseInt(i[s]),r=parseInt(t[s]);n=l==r?0:l>r?1:-1}break}if(n==0){var l=i.length,r=t.length;l!=r&&(n=l>r?1:-1)}return n}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}};c(Re,"PATH_SEPARATOR",".");let mxCellPath=Re;class mxCell{constructor(i,t,e){c(this,"id",null);c(this,"geometry",null);c(this,"style",null);c(this,"vertex",!1);c(this,"edge",!1);c(this,"connectable",!0);c(this,"visible",!0);c(this,"collapsed",!1);c(this,"parent",null);c(this,"source",null);c(this,"target",null);c(this,"children",null);c(this,"edges",null);c(this,"mxTransient",["id","value","parent","source","target","children","edges"]);this.value=i,this.setGeometry(t),this.setStyle(e),this.onInit!=null&&this.onInit()}getId(){return this.id}setId(i){this.id=i}getValue(){return this.value}setValue(i){this.value=i}valueChanged(i){var t=this.getValue();return this.setValue(i),t}getGeometry(){return this.geometry}setGeometry(i){this.geometry=i}getStyle(){return this.style}setStyle(i){this.style=i}isVertex(){return this.vertex!=0}setVertex(i){this.vertex=i}isEdge(){return this.edge!=0}setEdge(i){this.edge=i}isConnectable(){return this.connectable!=0}setConnectable(i){this.connectable=i}isVisible(){return this.visible!=0}setVisible(i){this.visible=i}isCollapsed(){return this.collapsed!=0}setCollapsed(i){this.collapsed=i}getParent(){return this.parent}setParent(i){this.parent=i}getTerminal(i){return i?this.source:this.target}setTerminal(i,t){return t?this.source=i:this.target=i,i}getChildCount(){return this.children==null?0:this.children.length}getIndex(i){return mxUtils$1.indexOf(this.children,i)}getChildAt(i){return this.children==null?null:this.children[i]}insert(i,t){return i!=null&&(t==null&&(t=this.getChildCount(),i.getParent()==this&&t--),i.removeFromParent(),i.setParent(this),this.children==null?(this.children=[],this.children.push(i)):this.children.splice(t,0,i)),i}remove(i){var t=null;return this.children!=null&&i>=0&&(t=this.getChildAt(i),t!=null&&(this.children.splice(i,1),t.setParent(null))),t}removeFromParent(){if(this.parent!=null){var i=this.parent.getIndex(this);this.parent.remove(i)}}getEdgeCount(){return this.edges==null?0:this.edges.length}getEdgeIndex(i){return mxUtils$1.indexOf(this.edges,i)}getEdgeAt(i){return this.edges==null?null:this.edges[i]}insertEdge(i,t){return i!=null&&(i.removeFromTerminal(t),i.setTerminal(this,t),(this.edges==null||i.getTerminal(!t)!=this||mxUtils$1.indexOf(this.edges,i)<0)&&(this.edges==null&&(this.edges=[]),this.edges.push(i))),i}removeEdge(i,t){if(i!=null){if(i.getTerminal(!t)!=this&&this.edges!=null){var e=this.getEdgeIndex(i);e>=0&&this.edges.splice(e,1)}i.setTerminal(null,t)}return i}removeFromTerminal(i){var t=this.getTerminal(i);t!=null&&t.removeEdge(this,i)}hasAttribute(i){var t=this.getValue();return t!=null&&t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&t.hasAttribute?t.hasAttribute(i):t.getAttribute(i)!=null}getAttribute(i,t){var e=this.getValue(),n=e!=null&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT?e.getAttribute(i):null;return n??t}setAttribute(i,t){var e=this.getValue();e!=null&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT&&e.setAttribute(i,t)}clone(){var i=mxUtils$1.clone(this,this.mxTransient);return i.setValue(this.cloneValue()),i}cloneValue(){var i=this.getValue();return i!=null&&(typeof i.clone=="function"?i=i.clone():isNaN(i.nodeType)||(i=i.cloneNode(!0))),i}}class mxCodec{constructor(i){c(this,"elements",null);c(this,"encodeDefaults",!1);this.document=i||mxUtils$1.createXmlDocument(),this.objects=[]}putObject(i,t){return this.objects[i]=t,t}getObject(i){var t=null;if(i!=null&&(t=this.objects[i],t==null&&(t=this.lookup(i),t==null))){var e=this.getElementById(i);e!=null&&(t=this.decode(e))}return t}lookup(i){return null}getElementById(i){return this.updateElements(),this.elements[i]}updateElements(){this.elements==null&&(this.elements=new Object,this.document.documentElement!=null&&this.addElement(this.document.documentElement))}addElement(i){if(i.nodeType==mxConstants$1.NODETYPE_ELEMENT){var t=i.getAttribute("id");if(t!=null){if(this.elements[t]==null)this.elements[t]=i;else if(this.elements[t]!=i)throw new Error(t+": Duplicate ID")}}for(i=i.firstChild;i!=null;)this.addElement(i),i=i.nextSibling}getId(i){var t=null;return i!=null&&(t=this.reference(i),t==null&&i instanceof mxCell&&(t=i.getId(),t==null&&(t=mxCellPath.create(i),t.length==0&&(t="root")))),t}reference(i){return null}encode(i){var t=null;if(i!=null&&i.constructor!=null){var e=mxCodecRegistry.getCodec_encode(i.constructor);e!=null?t=e.encode(this,i):mxUtils$1.isNode(i)?t=mxUtils$1.importNode(this.document,i,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils$1.getFunctionName(i.constructor))}return t}decode(i,t){this.updateElements();var e=null;if(i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=mxCodecRegistry.getCodec(i.nodeName);n!=null?e=n.decode(this,i,t):(e=i.cloneNode(!0),e.removeAttribute("as"))}return e}decode_tmp(i,t){this.updateElements();var e=null,n=null,n=mxCodecRegistry.getCodec(i.nodeName);if(n!=null)try{e=n.decode(this,i,t)}catch(s){console.log("dec.decode err",s)}else if(i.nodeName=="mxGeometry"){const l=new DOMParser().parseFromString(i.outerHTML,"application/xml");let r=0,o=0,h=0,u=0;for(let d=0;d<l.documentElement.attributes.length;d++){let m=l.documentElement.attributes[d].name;m=="x"?r=parseInt(l.documentElement.attributes[d].value,10):m=="y"?o=parseInt(l.documentElement.attributes[d].value,10):m=="width"?h=parseInt(l.documentElement.attributes[d].value,10):m=="height"&&(u=parseInt(l.documentElement.attributes[d].value,10))}e=new mxGeometry(r,o,h,u)}else console.log("mxCodec decode notreg:",i.nodeName);return e}encodeCell(i,t,e){if(t.appendChild(this.encode(i)),e==null||e)for(var n=i.getChildCount(),s=0;s<n;s++)this.encodeCell(i.getChildAt(s),t)}isCellCodec(i){return i!=null&&typeof i.isCellCodec=="function"?i.isCellCodec():!1}decodeCell(i,t){t=t??!0;var e=null;if(i!=null&&i.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=mxCodecRegistry.getCodec(i.nodeName);if(!this.isCellCodec(n))for(var s=i.firstChild;s!=null&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(s.nodeName),s=s.nextSibling;this.isCellCodec(n)||(n=mxCodecRegistry.getCodec(mxCell)),e=n.decode(this,i),t&&this.insertIntoGraph(e)}return e}insertIntoGraph(i){var t=i.parent,e=i.getTerminal(!0),n=i.getTerminal(!1);if(i.setTerminal(null,!1),i.setTerminal(null,!0),i.parent=null,t!=null){if(t==i)throw new Error(t.id+": Self Reference");t.insert(i)}e!=null&&e.insertEdge(i,!0),n!=null&&n.insertEdge(i,!1)}setAttribute(i,t,e){t!=null&&e!=null&&i.setAttribute(t,e)}}class mxTemporaryCellStates{constructor(i,t,e,n,s){t=t??1,this.view=i,this.oldValidateCellState=i.validateCellState,this.oldBounds=i.getGraphBounds(),this.oldStates=i.getStates(),this.oldScale=i.getScale(),this.oldDoRedrawShape=i.graph.cellRenderer.doRedrawShape;var l=this;if(s!=null&&(i.graph.cellRenderer.doRedrawShape=function(u){var d=u.shape.paint;u.shape.paint=function(m){var g=s(u);g!=null&&m.setLink(g),d.apply(this,arguments),g!=null&&m.setLink(null)},l.oldDoRedrawShape.apply(i.graph.cellRenderer,arguments),u.shape.paint=d}),i.validateCellState=function(u,d){return u==null||n==null||n(u)?l.oldValidateCellState.apply(i,arguments):null},i.setStates(new mxDictionary),i.setScale(t),e!=null){i.resetValidationState();for(var r=null,o=0;o<e.length;o++){var h=i.getBoundingBox(i.validateCellState(i.validateCell(e[o])));r==null?r=h:r.add(h)}i.setGraphBounds(r||new mxRectangle)}}destroy(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape}}class mxStyleChange{constructor(i,t,e){this.model=i,this.cell=t,this.style=e,this.previous=e}execute(){this.cell!=null&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))}}class mxChildChange{constructor(i,t,e,n){this.model=i,this.parent=t,this.previous=t,this.child=e,this.index=n,this.previousIndex=n}execute(){if(this.child!=null){var i=this.model.getParent(this.child),t=i!=null?i.getIndex(this.child):0;this.previous==null&&this.connect(this.child,!1),i=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),this.previous!=null&&this.connect(this.child,!0),this.parent=this.previous,this.previous=i,this.index=this.previousIndex,this.previousIndex=t}}connect(i,t){t=t??!0;var e=i.getTerminal(!0),n=i.getTerminal(!1);e!=null&&(t?this.model.terminalForCellChanged(i,e,!0):this.model.terminalForCellChanged(i,null,!0)),n!=null&&(t?this.model.terminalForCellChanged(i,n,!1):this.model.terminalForCellChanged(i,null,!1)),i.setTerminal(e,!0),i.setTerminal(n,!1);for(var s=this.model.getChildCount(i),l=0;l<s;l++)this.connect(this.model.getChildAt(i,l),t)}}class mxValueChange{constructor(i,t,e){this.model=i,this.cell=t,this.value=e,this.previous=e}execute(){this.cell!=null&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))}}class mxTerminalChange{constructor(i,t,e,n){this.model=i,this.cell=t,this.terminal=e,this.previous=e,this.source=n}execute(){this.cell!=null&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))}}class mxGeometryChange{constructor(i,t,e){this.model=i,this.cell=t,this.geometry=e,this.previous=e}execute(){this.cell!=null&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))}}class mxEffects{static animateChanges(i,t,e){var n=10,s=0,l=function(){for(var o=!1,h=0;h<t.length;h++){var u=t[h];if(u instanceof mxGeometryChange||u instanceof mxTerminalChange||u instanceof mxValueChange||u instanceof mxChildChange||u instanceof mxStyleChange){var d=i.getView().getState(u.cell||u.child,!1);if(d!=null)if(o=!0,u.constructor!=mxGeometryChange||i.model.isEdge(u.cell))mxUtils$1.setOpacity(d.shape.node,100*s/n);else{var m=i.getView().scale,g=(u.geometry.x-u.previous.x)*m,x=(u.geometry.y-u.previous.y)*m,v=(u.geometry.width-u.previous.width)*m,C=(u.geometry.height-u.previous.height)*m;s==0?(d.x-=g,d.y-=x,d.width-=v,d.height-=C):(d.x+=g/n,d.y+=x/n,d.width+=v/n,d.height+=C/n),i.cellRenderer.redraw(d),mxEffects.cascadeOpacity(i,u.cell,100*s/n)}}}s<n&&o?(s++,window.setTimeout(l,r)):e!=null&&e()},r=30;l()}static cascadeOpacity(i,t,e){for(var n=i.model.getChildCount(t),s=0;s<n;s++){var l=i.model.getChildAt(t,s),r=i.getView().getState(l);r!=null&&(mxUtils$1.setOpacity(r.shape.node,e),mxEffects.cascadeOpacity(i,l,e))}var o=i.model.getEdges(t);if(o!=null)for(var s=0;s<o.length;s++){var h=i.getView().getState(o[s]);h!=null&&mxUtils$1.setOpacity(h.shape.node,e)}}static fadeOut(i,t,e,n,s,l){n=n||40,s=s||30;var r=t||100;if(mxUtils$1.setOpacity(i,r),l||l==null){var o=function(){r=Math.max(r-n,0),mxUtils$1.setOpacity(i,r),r>0?window.setTimeout(o,s):(i.style.visibility="hidden",e&&i.parentNode&&i.parentNode.removeChild(i))};window.setTimeout(o,s)}else i.style.visibility="hidden",e&&i.parentNode&&i.parentNode.removeChild(i)}}var _mxUtils;let mxUtils$1=(_mxUtils=class{static removeCursors(a){a.style!=null&&(a.style.cursor="");var i=a.childNodes;if(i!=null)for(var t=i.length,e=0;e<t;e+=1)_mxUtils.removeCursors(i[e])}static getCurrentStyle(a){return a!=null?window.getComputedStyle(a,""):null}static parseCssNumber(a){return a=="thin"?a="2":a=="medium"?a="4":a=="thick"&&(a="6"),a=parseFloat(a),isNaN(a)&&(a=0),a}static hasScrollbars(a){var i=_mxUtils.getCurrentStyle(a);return i!=null&&(i.overflow=="scroll"||i.overflow=="auto")}static bind(a,i){return function(){return i.apply(a,arguments)}}static eval(expr){var result=null;let _mxJavaScriptExpression=null;if(expr.indexOf("function")>=0)try{eval(" _mxJavaScriptExpression= function() { return ("+expr+")}();"),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(a){mxLog.warn(a.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(a){mxLog.warn(a.message+" while evaluating "+expr)}return result}static findNode(a,i,t){if(a.nodeType==mxConstants$1.NODETYPE_ELEMENT){var e=a.getAttribute(i);if(e!=null&&e==t)return a}for(a=a.firstChild;a!=null;){var n=_mxUtils.findNode(a,i,t);if(n!=null)return n;a=a.nextSibling}return null}static getFunctionName(a){var i=null;if(a!=null){if(a.name!=null)i=a.name;else if(i=_mxUtils.trim(a.toString()),/^function\s/.test(i)){i=_mxUtils.ltrim(i.substring(9));var t=i.indexOf("(");t>0&&(i=i.substring(0,t))}}return i}static indexOf(a,i){if(a!=null&&i!=null){for(var t=0;t<a.length;t++)if(a[t]==i)return t}return-1}static forEach(a,i){if(a!=null&&i!=null)for(var t=0;t<a.length;t++)i(a[t]);return a}static remove(a,i){var t=null;if(typeof i=="object")for(var e=_mxUtils.indexOf(i,a);e>=0;)i.splice(e,1),t=a,e=_mxUtils.indexOf(i,a);for(var n in i)i[n]==a&&(delete i[n],t=a);return t}static isNode(a,i,t,e){return a!=null&&!isNaN(a.nodeType)&&(i==null||a.nodeName.toLowerCase()==i.toLowerCase())?t==null||a.getAttribute(t)==e:!1}static isAncestorNode(a,i){for(var t=i;t!=null;){if(t==a)return!0;t=t.parentNode}return!1}static getChildNodes(a,i){i=i||mxConstants$1.NODETYPE_ELEMENT;for(var t=[],e=a.firstChild;e!=null;)e.nodeType==i&&t.push(e),e=e.nextSibling;return t}static importNode(a,i,t){return a.importNode(i,t)}static importNodeImplementation(a,i,t){switch(i.nodeType){case 1:{var e=a.createElement(i.nodeName);if(i.attributes&&i.attributes.length>0)for(var n=0;n<i.attributes.length;n++)e.setAttribute(i.attributes[n].nodeName,i.getAttribute(i.attributes[n].nodeName));if(t&&i.childNodes&&i.childNodes.length>0)for(var n=0;n<i.childNodes.length;n++)e.appendChild(_mxUtils.importNodeImplementation(a,i.childNodes[n],t));return e}case 3:case 4:case 8:return a.createTextNode(i.nodeValue!=null?i.nodeValue:i.value)}}static createXmlDocument(){var a=null;return document.implementation&&document.implementation.createDocument?a=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(a=_mxUtils.createMsXmlDocument()),a}static createMsXmlDocument(){var a=new ActiveXObject("Microsoft.XMLDOM");return a.async=!1,a.validateOnParse=!1,a.resolveExternals=!1,a}static parseXml(a){var i=new DOMParser;return i.parseFromString(a,"text/xml")}static removeWhitespace(a,i){for(var t=i?a.previousSibling:a.nextSibling;t!=null&&t.nodeType==mxConstants$1.NODETYPE_TEXT;){var e=i?t.previousSibling:t.nextSibling,n=_mxUtils.getTextContent(t);_mxUtils.trim(n).length==0&&t.parentNode.removeChild(t),t=e}}static htmlEntities(a,i){return a=String(a||""),a=a.replace(/&/g,"&amp;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\'/g,"&#39;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),(i==null||i)&&(a=a.replace(/\n/g,"&#xa;")),a}static isVml(a){return a!=null&&a.tagUrn=="urn:schemas-microsoft-com:vml"}static getXml(a,i){var t="";if(mxClient.IS_IE11)t=_mxUtils.getPrettyXml(a,"","","");else if(window.XMLSerializer!=null){var e=new XMLSerializer;t=e.serializeToString(a)}else a.xml!=null&&(t=a.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,`
`));return i=i||"&#xa;",t=t.replace(/\n/g,i),t}static getPrettyXml(a,i,t,e,n){var s=[];if(a!=null)if(i=i??"  ",t=t??"",e=e??`
`,a.namespaceURI!=null&&a.namespaceURI!=n&&(n=a.namespaceURI,a.getAttribute("xmlns")==null&&a.setAttribute("xmlns",a.namespaceURI)),a.nodeType==mxConstants$1.NODETYPE_DOCUMENT)s.push(_mxUtils.getPrettyXml(a.documentElement,i,t,e,n));else if(a.nodeType==mxConstants$1.NODETYPE_DOCUMENT_FRAGMENT){var l=a.firstChild;if(l!=null)for(;l!=null;)s.push(_mxUtils.getPrettyXml(l,i,t,e,n)),l=l.nextSibling}else if(a.nodeType==mxConstants$1.NODETYPE_COMMENT){var r=_mxUtils.getTextContent(a);r.length>0&&s.push(t+"<!--"+r+"-->"+e)}else if(a.nodeType==mxConstants$1.NODETYPE_TEXT){var r=_mxUtils.getTextContent(a);r.length>0&&s.push(t+_mxUtils.htmlEntities(_mxUtils.trim(r),!1)+e)}else if(a.nodeType==mxConstants$1.NODETYPE_CDATA){var r=_mxUtils.getTextContent(a);r.length>0&&s.push(t+"<![CDATA["+r+"]]"+e)}else{s.push(t+"<"+a.nodeName);var o=a.attributes;if(o!=null)for(var h=0;h<o.length;h++){var u=_mxUtils.htmlEntities(o[h].value);s.push(" "+o[h].nodeName+'="'+u+'"')}var l=a.firstChild;if(l!=null){for(s.push(">"+e);l!=null;)s.push(_mxUtils.getPrettyXml(l,i,t+i,e,n)),l=l.nextSibling;s.push(t+"</"+a.nodeName+">"+e)}else s.push(" />"+e)}return s.join("")}static extractTextWithWhitespace(a){var i=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],t=[];function e(n){if(!(n.length==1&&(n[0].nodeName=="BR"||n[0].innerHTML==`
`)))for(var s=0;s<n.length;s++){var l=n[s];l.nodeName=="BR"||l.innerHTML==`
`||(n.length==1||s==0)&&l.nodeName=="DIV"&&l.innerHTML.toLowerCase()=="<br>"?t.push(`
`):(l.nodeType===3||l.nodeType===4?l.nodeValue.length>0&&t.push(l.nodeValue):l.nodeType!==8&&l.childNodes.length>0&&e(l.childNodes),s<n.length-1&&_mxUtils.indexOf(i,n[s+1].nodeName)>=0&&t.push(`
`))}}return e(a),t.join("")}static replaceTrailingNewlines(a,i){for(var t="";a.length>0&&a.charAt(a.length-1)==`
`;)a=a.substring(0,a.length-1),t+=i;return a+t}static getTextContent(a){return a!=null?a[a.textContent===void 0?"text":"textContent"]:""}static setTextContent(a,i){a.innerText!==void 0?a.innerText=i:a[a.textContent===void 0?"text":"textContent"]=i}static getInnerHtml(a){if(a!=null){var i=new XMLSerializer;return i.serializeToString(a)}return""}static getOuterHtml(a){if(a!=null){var i=new XMLSerializer;return i.serializeToString(a)}return""}static write(a,i){var t=a.ownerDocument,e=t.createTextNode(i);return a!=null&&a.appendChild(e),e}static writeln(a,i){var t=a.ownerDocument,e=t.createTextNode(i);return a!=null&&(a.appendChild(e),a.appendChild(document.createElement("br"))),e}static br(a,i){i=i||1;for(var t=null,e=0;e<i;e++)a!=null&&(t=a.ownerDocument.createElement("br"),a.appendChild(t));return t}static button(a,i,t){t=t??document;var e=t.createElement("button");return _mxUtils.write(e,a),mxEvent$1.addListener(e,"click",function(n){i(n)}),e}static para(a,i){var t=document.createElement("p");return _mxUtils.write(t,i),a!=null&&a.appendChild(t),t}static addTransparentBackgroundFilter(a){a.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"}static linkAction(a,i,t,e,n){return _mxUtils.link(a,i,function(){t.execute(e)},n)}static linkInvoke(a,i,t,e,n,s){return _mxUtils.link(a,i,function(){t[e](n)},s)}static link(a,i,t,e){var n=document.createElement("span");return n.style.color="blue",n.style.textDecoration="underline",n.style.cursor="pointer",e!=null&&(n.style.paddingLeft=e+"px"),mxEvent$1.addListener(n,"click",t),_mxUtils.write(n,i),a!=null&&a.appendChild(n),n}static getDocumentSize(){var a=document.body,i=document.documentElement;try{return new mxRectangle(0,0,a.clientWidth||i.clientWidth,Math.max(a.clientHeight||0,i.clientHeight))}catch{return new mxRectangle}}static fit(a){var i=_mxUtils.getDocumentSize(),t=parseInt(a.offsetLeft),e=parseInt(a.offsetWidth),n=_mxUtils.getDocumentScrollOrigin(a.ownerDocument),s=n.x,l=n.y,r=s+i.width;t+e>r&&(a.style.left=Math.max(s,r-e)+"px");var o=parseInt(a.offsetTop),h=parseInt(a.offsetHeight),u=l+i.height;o+h>u&&(a.style.top=Math.max(l,u-h)+"px")}static load(a){var i=new mxXmlRequest(a,null,"GET",!1);return i.send(),i}static get(a,i,t,e,n,s,l){var r=new mxXmlRequest(a,null,"GET"),o=r.setRequestHeaders;return l&&(r.setRequestHeaders=function(h,u){o.apply(this,arguments);for(var d in l)h.setRequestHeader(d,l[d])}),e!=null&&r.setBinary(e),r.send(i,t,n,s),r}static getAll(a,i,t){for(var e=a.length,n=[],s=0,l=function(){s==0&&t!=null&&t(),s++},r=0;r<a.length;r++)(function(o,h){_mxUtils.get(o,function(u){var d=u.getStatus();d<200||d>299?l():(n[h]=u,e--,e==0&&i(n))},l)})(a[r],r);e==0&&i(n)}static post(a,i,t,e){return new mxXmlRequest(a,i).send(t,e)}static submit(a,i,t,e){return new mxXmlRequest(a,i).simulate(t,e)}static loadInto(a,i,t){i.addEventListener("load",t,!1),i.load(a)}static getValue(a,i,t){var e=a!=null?a[i]:null;return e==null&&(e=t),e}static getNumber(a,i,t){var e=a!=null?a[i]:null;return e==null&&(e=t||0),Number(e)}static getColor(a,i,t){var e=a!=null?a[i]:null;return e==null?e=t:e==mxConstants$1.NONE&&(e=null),e}static clone(a,i,t){t=t??!1;var e=null;if(a!=null&&typeof a.constructor=="function"){e=new a.constructor;for(var n in a)n!=mxObjectIdentity.FIELD_NAME&&(i==null||_mxUtils.indexOf(i,n)<0)&&(!t&&typeof a[n]=="object"?e[n]=_mxUtils.clone(a[n]):e[n]=a[n])}return e}static equalPoints(a,i){if(a==null&&i!=null||a!=null&&i==null||a!=null&&i!=null&&a.length!=i.length)return!1;if(a!=null&&i!=null){for(var t=0;t<a.length;t++)if(a[t]!=null&&i[t]==null||a[t]==null&&i[t]!=null||a[t]!=null&&i[t]!=null&&(a[t].x!=i[t].x||a[t].y!=i[t].y))return!1}return!0}static equalEntries(a,i){var t=0;if(a==null&&i!=null||a!=null&&i==null||a!=null&&i!=null&&a.length!=i.length)return!1;if(a!=null&&i!=null){for(var e in i)t++;for(var e in a)if(t--,(!_mxUtils.isNaN(a[e])||!_mxUtils.isNaN(i[e]))&&a[e]!=i[e])return!1}return t==0}static removeDuplicates(a){for(var i=new mxDictionary,t=[],e=0;e<a.length;e++)i.get(a[e])||(t.push(a[e]),i.put(a[e],!0));return t}static isNaN(a){return typeof a=="number"&&isNaN(a)}static extend(a,i){var t=function(){};t.prototype=i.prototype,a.prototype=new t,a.prototype.constructor=a}static toString(a){var i="";for(var t in a)try{if(a[t]==null)i+=t+` = [null]
`;else if(typeof a[t]=="function")i+=t+` => [Function]
`;else if(typeof a[t]=="object"){var e=_mxUtils.getFunctionName(a[t].constructor);i+=t+" => ["+e+`]
`}else i+=t+" = "+a[t]+`
`}catch(n){i+=t+"="+n.message}return i}static toRadians(a){return Math.PI*a/180}static toDegree(a){return a*180/Math.PI}static arcToCurves(a,i,t,e,n,s,l,r,o){if(r-=a,o-=i,t===0||e===0)return Ht;var h=l,u=n;t=Math.abs(t),e=Math.abs(e);var d=-r/2,m=-o/2,g=Math.cos(u*Math.PI/180),x=Math.sin(u*Math.PI/180),v=g*d+x*m,C=-1*x*d+g*m,E=v*v,b=C*C,w=t*t,$=e*e,P=E/w+b/$,M;if(P>1)t=Math.sqrt(P)*t,e=Math.sqrt(P)*e,M=0;else{var D=1;s===h&&(D=-1),M=D*Math.sqrt((w*$-w*b-$*E)/(w*b+$*E))}var k=M*t*C/e,Z=-1*M*e*v/t,q=g*k-x*Z+r/2,j=x*k+g*Z+o/2,X=Math.atan2((C-Z)/e,(v-k)/t)-Math.atan2(0,1),rt=X>=0?X:2*Math.PI+X;X=Math.atan2((-C-Z)/e,(-v-k)/t)-Math.atan2((C-Z)/e,(v-k)/t);var et=X>=0?X:2*Math.PI+X;h==0&&et>0?et-=2*Math.PI:h!=0&&et<0&&(et+=2*Math.PI);for(var Y=et*2/Math.PI,G=Math.ceil(Y<0?-1*Y:Y),J=et/G,tt=8/3*Math.sin(J/4)*Math.sin(J/4)/Math.sin(J/2),gt=g*t,dt=g*e,K=x*t,nt=x*e,ht=Math.cos(rt),bt=Math.sin(rt),$t=-tt*(gt*bt+nt*ht),Dt=-tt*(K*bt-dt*ht),ct=0,Et=0,Ht=[],Ot=0;Ot<G;++Ot){rt+=J,ht=Math.cos(rt),bt=Math.sin(rt),ct=gt*ht-nt*bt+q,Et=K*ht+dt*bt+j;var Nt=-tt*(gt*bt+nt*ht),lt=-tt*(K*bt-dt*ht),yt=Ot*6;Ht[yt]=Number($t+a),Ht[yt+1]=Number(Dt+i),Ht[yt+2]=Number(ct-Nt+a),Ht[yt+3]=Number(Et-lt+i),Ht[yt+4]=Number(ct+a),Ht[yt+5]=Number(Et+i),$t=ct+Nt,Dt=Et+lt}return Ht}static getBoundingBox(a,i,t){var e=null;if(a!=null&&i!=null&&i!=0){var n=_mxUtils.toRadians(i),s=Math.cos(n),l=Math.sin(n);t=t??new mxPoint(a.x+a.width/2,a.y+a.height/2);var r=new mxPoint(a.x,a.y),o=new mxPoint(a.x+a.width,a.y),h=new mxPoint(o.x,a.y+a.height),u=new mxPoint(a.x,h.y);r=_mxUtils.getRotatedPoint(r,s,l,t),o=_mxUtils.getRotatedPoint(o,s,l,t),h=_mxUtils.getRotatedPoint(h,s,l,t),u=_mxUtils.getRotatedPoint(u,s,l,t),e=new mxRectangle(r.x,r.y,0,0),e.add(new mxRectangle(o.x,o.y,0,0)),e.add(new mxRectangle(h.x,h.y,0,0)),e.add(new mxRectangle(u.x,u.y,0,0))}return e}static getRotatedPoint(a,i,t,e){e=e??new mxPoint;var n=a.x-e.x,s=a.y-e.y,l=n*i-s*t,r=s*i+n*t;return new mxPoint(l+e.x,r+e.y)}static getPortConstraints(a,i,t,e){var n=_mxUtils.getValue(a.style,mxConstants$1.STYLE_PORT_CONSTRAINT,_mxUtils.getValue(i.style,t?mxConstants$1.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants$1.STYLE_TARGET_PORT_CONSTRAINT,null));if(n==null)return e;var s=n.toString(),l=mxConstants$1.DIRECTION_MASK_NONE,r=_mxUtils.getValue(a.style,mxConstants$1.STYLE_PORT_CONSTRAINT_ROTATION,0),o=0;r==1&&(o=_mxUtils.getValue(a.style,mxConstants$1.STYLE_ROTATION,0));var h=0;if(o>45?(h=1,o>=135&&(h=2)):o<-45&&(h=3,o<=-135&&(h=2)),s.indexOf(mxConstants$1.DIRECTION_NORTH)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 1:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 2:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 3:l|=mxConstants$1.DIRECTION_MASK_WEST;break}if(s.indexOf(mxConstants$1.DIRECTION_WEST)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 1:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 2:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 3:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break}if(s.indexOf(mxConstants$1.DIRECTION_SOUTH)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 1:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 2:l|=mxConstants$1.DIRECTION_MASK_NORTH;break;case 3:l|=mxConstants$1.DIRECTION_MASK_EAST;break}if(s.indexOf(mxConstants$1.DIRECTION_EAST)>=0)switch(h){case 0:l|=mxConstants$1.DIRECTION_MASK_EAST;break;case 1:l|=mxConstants$1.DIRECTION_MASK_SOUTH;break;case 2:l|=mxConstants$1.DIRECTION_MASK_WEST;break;case 3:l|=mxConstants$1.DIRECTION_MASK_NORTH;break}return l}static reversePortConstraints(a){var i=0;return i=(a&mxConstants$1.DIRECTION_MASK_WEST)<<3,i|=(a&mxConstants$1.DIRECTION_MASK_NORTH)<<1,i|=(a&mxConstants$1.DIRECTION_MASK_SOUTH)>>1,i|=(a&mxConstants$1.DIRECTION_MASK_EAST)>>3,i}static findNearestSegment(a,i,t){var e=-1;if(a.absolutePoints.length>0)for(var n=a.absolutePoints[0],s=null,l=1;l<a.absolutePoints.length;l++){var r=a.absolutePoints[l],o=_mxUtils.ptSegDistSq(n.x,n.y,r.x,r.y,i,t);(s==null||o<s)&&(s=o,e=l-1),n=r}return e}static getDirectedBounds(a,i,t,e,n){var s=_mxUtils.getValue(t,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);if(e=e??_mxUtils.getValue(t,mxConstants$1.STYLE_FLIPH,!1),n=n??_mxUtils.getValue(t,mxConstants$1.STYLE_FLIPV,!1),i.x=Math.round(Math.max(0,Math.min(a.width,i.x))),i.y=Math.round(Math.max(0,Math.min(a.height,i.y))),i.width=Math.round(Math.max(0,Math.min(a.width,i.width))),i.height=Math.round(Math.max(0,Math.min(a.height,i.height))),n&&(s==mxConstants$1.DIRECTION_SOUTH||s==mxConstants$1.DIRECTION_NORTH)||e&&(s==mxConstants$1.DIRECTION_EAST||s==mxConstants$1.DIRECTION_WEST)){var l=i.x;i.x=i.width,i.width=l}if(e&&(s==mxConstants$1.DIRECTION_SOUTH||s==mxConstants$1.DIRECTION_NORTH)||n&&(s==mxConstants$1.DIRECTION_EAST||s==mxConstants$1.DIRECTION_WEST)){var l=i.y;i.y=i.height,i.height=l}var r=mxRectangle.fromRectangle(i);return s==mxConstants$1.DIRECTION_SOUTH?(r.y=i.x,r.x=i.height,r.width=i.y,r.height=i.width):s==mxConstants$1.DIRECTION_WEST?(r.y=i.height,r.x=i.width,r.width=i.x,r.height=i.y):s==mxConstants$1.DIRECTION_NORTH&&(r.y=i.width,r.x=i.y,r.width=i.height,r.height=i.x),new mxRectangle(a.x+r.x,a.y+r.y,a.width-r.width-r.x,a.height-r.height-r.y)}static getPerimeterPoint(a,i,t){for(var e=null,n=0;n<a.length-1;n++){var s=_mxUtils.intersection(a[n].x,a[n].y,a[n+1].x,a[n+1].y,i.x,i.y,t.x,t.y);if(s!=null){var l=t.x-s.x,r=t.y-s.y,o={p:s,distSq:r*r+l*l};o!=null&&(e==null||e.distSq>o.distSq)&&(e=o)}}return e!=null?e.p:null}static rectangleIntersectsSegment(a,i,t){var e=a.y,n=a.x,s=e+a.height,l=n+a.width,r=i.x,o=t.x;if(i.x>t.x&&(r=t.x,o=i.x),o>l&&(o=l),r<n&&(r=n),r>o)return!1;var h=i.y,u=t.y,d=t.x-i.x;if(Math.abs(d)>1e-7){var m=(t.y-i.y)/d,g=i.y-m*i.x;h=m*r+g,u=m*o+g}if(h>u){var x=u;u=h,h=x}return u>s&&(u=s),h<e&&(h=e),!(h>u)}static contains(a,i,t){return a.x<=i&&a.x+a.width>=i&&a.y<=t&&a.y+a.height>=t}static intersects(a,i){var t=a.width,e=a.height,n=i.width,s=i.height;if(n<=0||s<=0||t<=0||e<=0)return!1;var l=a.x,r=a.y,o=i.x,h=i.y;return n+=o,s+=h,t+=l,e+=r,(n<o||n>l)&&(s<h||s>r)&&(t<l||t>o)&&(e<r||e>h)}static intersectsHotspot(a,i,t,e,n,s){if(e=e??1,n=n??0,s=s??0,e>0){var l=a.getCenterX(),r=a.getCenterY(),o=a.width,h=a.height,u=_mxUtils.getValue(a.style,mxConstants$1.STYLE_STARTSIZE)*a.view.scale;u>0&&(_mxUtils.getValue(a.style,mxConstants$1.STYLE_HORIZONTAL,!0)?(r=a.y+u/2,h=u):(l=a.x+u/2,o=u)),o=Math.max(n,o*e),h=Math.max(n,h*e),s>0&&(o=Math.min(o,s),h=Math.min(h,s));var d=new mxRectangle(l-o/2,r-h/2,o,h),m=_mxUtils.toRadians(_mxUtils.getValue(a.style,mxConstants$1.STYLE_ROTATION)||0);if(m!=0){var g=Math.cos(-m),x=Math.sin(-m),l=new mxPoint(a.getCenterX(),a.getCenterY()),v=_mxUtils.getRotatedPoint(new mxPoint(i,t),g,x,l);i=v.x,t=v.y}return _mxUtils.contains(d,i,t)}return!0}static getOffset(a,i){for(var t=0,e=0,n=!1,s=a,l=document.body,r=document.documentElement;s!=null&&s!=l&&s!=r&&!n;){var o=_mxUtils.getCurrentStyle(s);o!=null&&(n=n||o.position=="fixed"),s=s.parentNode}if(!i&&!n){var h=_mxUtils.getDocumentScrollOrigin(a.ownerDocument);t+=h.x,e+=h.y}var u=a.getBoundingClientRect();return u!=null&&(t+=u.left,e+=u.top),new mxPoint(t,e)}static getDocumentScrollOrigin(a){if(mxClient.IS_QUIRKS)return new mxPoint(a.body.scrollLeft,a.body.scrollTop);var i=a.defaultView||a.parentWindow,t=i!=null&&window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=i!=null&&window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(t,e)}static getScrollOrigin(a,i,t){i=i??!1,t=t??!0;for(var e=a!=null?a.ownerDocument:document,n=e.body,s=e.documentElement,l=new mxPoint,r=!1;a!=null&&a!=n&&a!=s;){!isNaN(a.scrollLeft)&&!isNaN(a.scrollTop)&&(l.x+=a.scrollLeft,l.y+=a.scrollTop);var o=_mxUtils.getCurrentStyle(a);o!=null&&(r=r||o.position=="fixed"),a=i?a.parentNode:null}if(!r&&t){var h=_mxUtils.getDocumentScrollOrigin(e);l.x+=h.x,l.y+=h.y}return l}static convertPoint(a,i,t){var e=_mxUtils.getScrollOrigin(a,!1),n=_mxUtils.getOffset(a);return n.x-=e.x,n.y-=e.y,new mxPoint(i-n.x,t-n.y)}static ltrim(a,i){return i=i||"\\s",a!=null?a.replace(new RegExp("^["+i+"]+","g"),""):null}static rtrim(a,i){return i=i||"\\s",a!=null?a.replace(new RegExp("["+i+"]+$","g"),""):null}static trim(a,i){return _mxUtils.ltrim(_mxUtils.rtrim(a,i),i)}static isNumeric(a){return!isNaN(parseFloat(a))&&isFinite(a)&&(typeof a!="string"||a.toLowerCase().indexOf("0x")<0)}static isInteger(a){return String(parseInt(a))===String(a)}static mod(a,i){return(a%i+i)%i}static intersection(a,i,t,e,n,s,l,r){var o=(r-s)*(t-a)-(l-n)*(e-i),h=(l-n)*(i-s)-(r-s)*(a-n),u=(t-a)*(i-s)-(e-i)*(a-n),d=h/o,m=u/o;if(d>=0&&d<=1&&m>=0&&m<=1){var g=a+d*(t-a),x=i+d*(e-i);return new mxPoint(g,x)}return null}static ptSegDistSq(a,i,t,e,n,s){t-=a,e-=i,n-=a,s-=i;var l=n*t+s*e,r;l<=0?r=0:(n=t-n,s=e-s,l=n*t+s*e,l<=0?r=0:r=l*l/(t*t+e*e));var o=n*n+s*s-r;return o<0&&(o=0),o}static ptLineDist(a,i,t,e,n,s){return Math.abs((e-i)*n-(t-a)*s+t*i-e*a)/Math.sqrt((e-i)*(e-i)+(t-a)*(t-a))}static relativeCcw(a,i,t,e,n,s){t-=a,e-=i,n-=a,s-=i;var l=n*e-s*t;return l==0&&(l=n*t+s*e,l>0&&(n-=t,s-=e,l=n*t+s*e,l<0&&(l=0))),l<0?-1:l>0?1:0}static animateChanges(a,i){mxEffects.animateChanges.apply(this,arguments)}static cascadeOpacity(a,i,t){mxEffects.cascadeOpacity.apply(this,arguments)}static fadeOut(a,i,t,e,n,s){mxEffects.fadeOut.apply(this,arguments)}static setOpacity(a,i){_mxUtils.isVml(a)?i>=100?a.style.filter="":a.style.filter="alpha(opacity="+i/5+")":a.style.opacity=i/100}static createImage(a){var i=null;return i=document.createElement("img"),i.setAttribute("src",a),i.setAttribute("border","0"),i}static sortCells(a,i){i=i??!0;var t=new mxDictionary;return a.sort(function(e,n){var s=t.get(e);s==null&&(s=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR),t.put(e,s));var l=t.get(n);l==null&&(l=mxCellPath.create(n).split(mxCellPath.PATH_SEPARATOR),t.put(n,l));var r=mxCellPath.compare(s,l);return r==0?0:r>0==i?1:-1}),a}static getStylename(a){if(a!=null){var i=a.split(";"),t=i[0];if(t.indexOf("=")<0)return t}return""}static getStylenames(a){var i=[];if(a!=null)for(var t=a.split(";"),e=0;e<t.length;e++)t[e].indexOf("=")<0&&i.push(t[e]);return i}static indexOfStylename(a,i){if(a!=null&&i!=null)for(var t=a.split(";"),e=0,n=0;n<t.length;n++){if(t[n]==i)return e;e+=t[n].length+1}return-1}static addStylename(a,i){return _mxUtils.indexOfStylename(a,i)<0&&(a==null?a="":a.length>0&&a.charAt(a.length-1)!=";"&&(a+=";"),a+=i),a}static removeStylename(a,i){var t=[];if(a!=null)for(var e=a.split(";"),n=0;n<e.length;n++)e[n]!=i&&t.push(e[n]);return t.join(";")}static removeAllStylenames(a){var i=[];if(a!=null)for(var t=a.split(";"),e=0;e<t.length;e++)t[e].indexOf("=")>=0&&i.push(t[e]);return i.join(";")}static setCellStyles(a,i,t,e){if(i!=null&&i.length>0){a.beginUpdate();try{for(var n=0;n<i.length;n++)if(i[n]!=null){var s=_mxUtils.setStyle(a.getStyle(i[n]),t,e);a.setStyle(i[n],s)}}finally{a.endUpdate()}}}static setStyle(a,i,t){var e=t!=null&&(typeof t.length>"u"||t.length>0);if(a==null||a.length==0)e&&(a=i+"="+t+";");else if(a.substring(0,i.length+1)==i+"="){var n=a.indexOf(";");e?a=i+"="+t+(n<0?";":a.substring(n)):a=n<0||n==a.length-1?"":a.substring(n+1)}else{var s=a.indexOf(";"+i+"=");if(s<0){if(e){var l=a.charAt(a.length-1)==";"?"":";";a=a+l+i+"="+t+";"}}else{var n=a.indexOf(";",s+1);e?a=a.substring(0,s+1)+i+"="+t+(n<0?";":a.substring(n)):a=a.substring(0,s)+(n<0?";":a.substring(n))}}return a}static setCellStyleFlags(a,i,t,e,n){if(i!=null&&i.length>0){a.beginUpdate();try{for(var s=0;s<i.length;s++)if(i[s]!=null){var l=_mxUtils.setStyleFlag(a.getStyle(i[s]),t,e,n);a.setStyle(i[s],l)}}finally{a.endUpdate()}}}static setStyleFlag(a,i,t,e){if(a==null||a.length==0)e||e==null?a=i+"="+t:a=i+"=0";else{var n=a.indexOf(i+"=");if(n<0){var s=a.charAt(a.length-1)==";"?"":";";e||e==null?a=a+s+i+"="+t:a=a+s+i+"=0"}else{var l=a.indexOf(";",n),r="";l<0?r=a.substring(n+i.length+1):r=a.substring(n+i.length+1,l),e==null?r=parseInt(r)^t:e?r=parseInt(r)|t:r=parseInt(r)&~t,a=a.substring(0,n)+i+"="+r+(l>=0?a.substring(l):"")}}return a}static getAlignmentAsPoint(a,i){var t=-.5,e=-.5;return a==mxConstants$1.ALIGN_LEFT?t=0:a==mxConstants$1.ALIGN_RIGHT&&(t=-1),i==mxConstants$1.ALIGN_TOP?e=0:i==mxConstants$1.ALIGN_BOTTOM&&(e=-1),new mxPoint(t,e)}static getSizeForString(a,i,t,e,n){i=i??mxConstants$1.DEFAULT_FONTSIZE,t=t??mxConstants$1.DEFAULT_FONTFAMILY;var s=document.createElement("div");if(s.style.fontFamily=t,s.style.fontSize=Math.round(i)+"px",s.style.lineHeight=Math.round(i*mxConstants$1.LINE_HEIGHT)+"px",n!=null){(n&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(s.style.fontWeight="bold"),(n&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(s.style.fontStyle="italic");var l=[];(n&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&l.push("underline"),(n&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&l.push("line-through"),l.length>0&&(s.style.textDecoration=l.join(" "))}s.style.position="absolute",s.style.visibility="hidden",s.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",s.style.zoom="1",e!=null?(s.style.width=e+"px",s.style.whiteSpace="normal"):s.style.whiteSpace="nowrap",s.innerHTML=a,document.body.appendChild(s);var r=new mxRectangle(0,0,s.offsetWidth,s.offsetHeight);return document.body.removeChild(s),r}static getViewXml(a,i,t,e,n){if(e=e??0,n=n??0,i=i??1,t==null){var s=a.getModel();t=[s.getRoot()]}var l=a.getView(),r=null,o=l.isEventsEnabled();l.setEventsEnabled(!1);var h=l.drawPane,u=l.overlayPane;a.dialect==mxConstants$1.DIALECT_SVG?(l.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),l.canvas.appendChild(l.drawPane),l.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),l.canvas.appendChild(l.overlayPane)):(l.drawPane=l.drawPane.cloneNode(!1),l.canvas.appendChild(l.drawPane),l.overlayPane=l.overlayPane.cloneNode(!1),l.canvas.appendChild(l.overlayPane));var d=l.getTranslate();l.translate=new mxPoint(e,n);var m=new mxTemporaryCellStates(a.getView(),i,t);try{var g=new mxCodec;r=g.encode(a.getView())}finally{m.destroy(),l.translate=d,l.canvas.removeChild(l.drawPane),l.canvas.removeChild(l.overlayPane),l.drawPane=h,l.overlayPane=u,l.setEventsEnabled(o)}return r}static getScaleForPageCount(a,i,t,e){if(a<1)return 1;t=t??mxConstants$1.PAGE_FORMAT_A4_PORTRAIT,e=e??0;var n=t.width-e*2,s=t.height-e*2,l=i.getGraphBounds().clone(),r=i.getView().getScale();l.width/=r,l.height/=r;var o=l.width,h=l.height,u=1,d=n/s,m=o/h,g=m/d,x=Math.sqrt(a),v=Math.sqrt(g),C=x*v,E=x/v;if(C<1&&E>a){var b=E/a;E=a,C/=b}if(E<1&&C>a){var b=C/a;C=a,E/=b}for(var w=Math.ceil(C)*Math.ceil(E),$=0;w>a;){var P=Math.floor(C)/C,M=Math.floor(E)/E;P==1&&(P=Math.floor(C-1)/C),M==1&&(M=Math.floor(E-1)/E);var b=1;if(P>M?b=P:b=M,C=C*b,E=E*b,w=Math.ceil(C)*Math.ceil(E),$++,$>10)break}var D=n*C;return u=D/o,u*.99999}static show(a,i,t,e,n,s){if(t=t??0,e=e??0,i==null){var l=window.open();i=l.document}else i.open();document.documentMode==9&&i.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->');var r=a.getGraphBounds(),o=Math.ceil(t-r.x),h=Math.ceil(e-r.y);if(n==null&&(n=Math.ceil(r.width+t)+Math.ceil(Math.ceil(r.x)-r.x)),s==null&&(s=Math.ceil(r.height+e)+Math.ceil(Math.ceil(r.y)-r.y)),document.documentMode==11){for(var u="<html><head>",d=document.getElementsByTagName("base"),m=0;m<d.length;m++)u+=d[m].outerHTML;u+="<style>";for(var m=0;m<document.styleSheets.length;m++)try{u+=document.styleSheets[m].cssText}catch{}u+='</style></head><body style="margin:0px;">',u+='<div style="position:absolute;overflow:hidden;width:'+n+"px;height:"+s+'px;"><div style="position:relative;left:'+o+"px;top:"+h+'px;">',u+=a.container.innerHTML,u+="</div></div></body><html>",i.writeln(u),i.close()}else{i.writeln("<html><head>");for(var d=document.getElementsByTagName("base"),m=0;m<d.length;m++)i.writeln(_mxUtils.getOuterHtml(d[m]));for(var g=document.getElementsByTagName("link"),m=0;m<g.length;m++)i.writeln(_mxUtils.getOuterHtml(g[m]));for(var x=document.getElementsByTagName("style"),m=0;m<x.length;m++)i.writeln(_mxUtils.getOuterHtml(x[m]));i.writeln('</head><body style="margin:0px;"></body></html>'),i.close();var v=i.createElement("div");v.position="absolute",v.overflow="hidden",v.style.width=n+"px",v.style.height=s+"px";var C=i.createElement("div");C.style.position="absolute",C.style.left=o+"px",C.style.top=h+"px";for(var E=a.container.firstChild,b=null;E!=null;){var w=E.cloneNode(!0);E==a.view.drawPane.ownerSVGElement?(v.appendChild(w),b=w):C.appendChild(w),E=E.nextSibling}i.body.appendChild(v),C.firstChild!=null&&i.body.appendChild(C),b!=null&&(b.style.minWidth="",b.style.minHeight="",b.firstChild.setAttribute("transform","translate("+o+","+h+")"))}return _mxUtils.removeCursors(i.body),i}static printScreen(a){var i=window.open();a.getGraphBounds(),_mxUtils.show(a,i.document);var t=function(){i.focus(),i.print(),i.close()};mxClient.IS_GC?i.setTimeout(t,500):t()}static popup(a,i){if(i){var t=document.createElement("div");t.style.overflow="scroll",t.style.width="636px",t.style.height="460px";var e=document.createElement("pre");e.innerHTML=_mxUtils.htmlEntities(a,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),t.appendChild(e);var n=document.body.clientWidth,s=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),l=new mxWindow("Popup Window",t,n/2-320,s/2-240,640,480,!1,!0);l.setClosable(!0),l.setVisible(!0)}else if(mxClient.IS_NS){var l=window.open();l.document.writeln("<pre>"+_mxUtils.htmlEntities(a)+"</pre"),l.document.close()}else{var l=window.open(),e=l.document.createElement("pre");e.innerHTML=_mxUtils.htmlEntities(a,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),l.document.body.appendChild(e)}}static alert(a){alert(a)}static prompt(a,i){return prompt(a,i??"")}static confirm(a){return confirm(a)}static error(a,i,t,e){var n=document.createElement("div");n.style.padding="20px";var s=document.createElement("img");s.setAttribute("src",e||_mxUtils.errorImage),s.setAttribute("valign","bottom"),s.style.verticalAlign="middle",n.appendChild(s),n.appendChild(document.createTextNode(" ")),n.appendChild(document.createTextNode(" ")),n.appendChild(document.createTextNode(" ")),_mxUtils.write(n,a);var l=document.body.clientWidth,r=document.body.clientHeight||document.documentElement.clientHeight,o=new mxWindow(mxResources$1.get(_mxUtils.errorResource)||_mxUtils.errorResource,n,(l-i)/2,r/4,i,null,!1,!0);if(t){_mxUtils.br(n);var h=document.createElement("p"),u=document.createElement("button");u.setAttribute("style","float:right"),mxEvent$1.addListener(u,"click",function(d){o.destroy()}),_mxUtils.write(u,mxResources$1.get(_mxUtils.closeResource)||_mxUtils.closeResource),h.appendChild(u),n.appendChild(h),_mxUtils.br(n),o.setClosable(!0)}return o.setVisible(!0),o}static makeDraggable(a,i,t,e,n,s,l,r,o,h){var u=new mxDragSource(a,t);return u.dragOffset=new mxPoint(n??0,s??mxConstants$1.TOOLTIP_VERTICAL_OFFSET),u.autoscroll=l,u.setGuidesEnabled(!1),o!=null&&(u.highlightDropTargets=o),h!=null&&(u.getDropTarget=h),u.getGraphForEvent=function(d){return typeof i=="function"?i(d):i},e!=null&&(u.createDragElement=function(){return e.cloneNode(!0)},r&&(u.createPreviewElement=function(d){var m=e.cloneNode(!0),g=parseInt(m.style.width),x=parseInt(m.style.height);return m.style.width=Math.round(g*d.view.scale)+"px",m.style.height=Math.round(x*d.view.scale)+"px",m})),u}},c(_mxUtils,"errorResource",mxClient.language!="none"?"error":""),c(_mxUtils,"closeResource",mxClient.language!="none"?"close":""),c(_mxUtils,"errorImage",mxClient.imageBasePath+"/error.gif"),c(_mxUtils,"setPrefixedStyle",function(){var a=null;return mxClient.IS_OT?a="O":mxClient.IS_SF||mxClient.IS_GC?a="Webkit":mxClient.IS_MT&&(a="Moz"),function(i,t,e){i[t]=e,a!=null&&t.length>0&&(t=a+t.substring(0,1).toUpperCase()+t.substring(1),i[t]=e)}}()),c(_mxUtils,"clearSelection",function(){return document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){}}()),_mxUtils);class mxMouseEvent{constructor(i,t){c(this,"consumed",!1);c(this,"graphX",null);c(this,"graphY",null);this.evt=i,this.state=t,this.sourceState=t}getEvent(){return this.evt}getSource(){return mxEvent$1.getSource(this.evt)}isSource(i){return i!=null?mxUtils$1.isAncestorNode(i.node,this.getSource()):!1}getX(){return mxEvent$1.getClientX(this.getEvent())}getY(){return mxEvent$1.getClientY(this.getEvent())}getGraphX(){return this.graphX}getGraphY(){return this.graphY}getState(){return this.state}getCell(){var i=this.getState();return i!=null?i.cell:null}isPopupTrigger(){return mxEvent$1.isPopupTrigger(this.getEvent())}isConsumed(){return this.consumed}consume(i){i=i??(this.evt.touches!=null||mxEvent$1.isMouseEvent(this.evt)),i&&this.evt.preventDefault&&this.evt.preventDefault(),this.consumed=!0}}const Me=class Me{static addStencil(i,t){Me.stencils[i]=t}static getStencil(i){return Me.stencils[i]}};c(Me,"stencils",{});let mxStencilRegistry=Me;const we=class we extends mxShape{constructor(t,e,n,s,l,r,o,h,u,d,m,g,x,v,C,E,b,w,$,P,M){super();c(this,"replaceLinefeeds",!0);c(this,"verticalTextRotation",-90);c(this,"ignoreClippedStringSize",!0);c(this,"ignoreStringSize",!1);c(this,"textWidthPadding",document.documentMode==8&&!mxClient.IS_EM?4:3);c(this,"lastValue",null);c(this,"cacheEnabled",!0);this.value=t,this.bounds=e,this.color=l??"black",this.align=n??mxConstants$1.ALIGN_CENTER,this.valign=s??mxConstants$1.ALIGN_MIDDLE,this.family=r??mxConstants$1.DEFAULT_FONTFAMILY,this.size=o??mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=h??mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=parseInt(u||2),this.spacingTop=this.spacing+parseInt(d||0),this.spacingRight=this.spacing+parseInt(m||0),this.spacingBottom=this.spacing+parseInt(g||0),this.spacingLeft=this.spacing+parseInt(x||0),this.horizontal=v??!0,this.background=C,this.border=E,this.wrap=b??!1,this.clipped=w??!1,this.overflow=$??"visible",this.labelPadding=P??0,this.textDirection=M,this.rotation=0,this.updateMargin()}isParseVml(){return!1}isHtmlAllowed(){return document.documentMode!=8||mxClient.IS_EM}getSvgScreenOffset(){return 0}checkBounds(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&this.bounds!=null&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)}paint(t,e){var n=this.scale,s=this.bounds.x/n,l=this.bounds.y/n,r=this.bounds.width/n,o=this.bounds.height/n;if(this.updateTransform(t,s,l,r,o),this.configureCanvas(t,s,l,r,o),e)t.updateText(s,l,r,o,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var h=mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML,u=h||t instanceof mxVmlCanvas2D?"html":"";h=!0,u="html";var d=this.value;!h&&u=="html"&&(d=mxUtils$1.htmlEntities(d,!1)),u=="html"&&!mxUtils$1.isNode(this.value)&&(d=mxUtils$1.replaceTrailingNewlines(d,"<div><br></div>")),d=!mxUtils$1.isNode(this.value)&&this.replaceLinefeeds&&u=="html"?d.replace(/\n/g,"<br/>"):d;var m=this.textDirection;m==mxConstants$1.TEXT_DIRECTION_AUTO&&!h&&(m=this.getAutoDirection()),m!=mxConstants$1.TEXT_DIRECTION_LTR&&m!=mxConstants$1.TEXT_DIRECTION_RTL&&(m=null),t.text(s,l,r,o,d,this.align,this.valign,this.wrap,u,this.overflow,this.clipped,this.getTextRotation(),m)}}redraw(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML))if(this.node.nodeName=="DIV"&&this.isHtmlAllowed())mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),this.updateHtmlTransform()),this.updateBoundingBox();else{var t=this.createCanvas();t!=null&&t.updateText!=null?(t.pointerEvents=this.pointerEvents,this.paint(t,!0),this.destroyCanvas(t),this.updateBoundingBox()):super.redraw()}else super.redraw(),mxUtils$1.isNode(this.value)||this.dialect==mxConstants$1.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null}resetStyles(){super.resetStyles(),this.color="black",this.align=mxConstants$1.ALIGN_CENTER,this.valign=mxConstants$1.ALIGN_MIDDLE,this.family=mxConstants$1.DEFAULT_FONTFAMILY,this.size=mxConstants$1.DEFAULT_FONTSIZE,this.fontStyle=mxConstants$1.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants$1.DEFAULT_TEXT_DIRECTION,delete this.margin}apply(t){var e=this.spacing;super.apply(t),this.style!=null&&(this.fontStyle=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTFAMILY,this.family),this.size=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTSIZE,this.size),this.color=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FONTCOLOR,this.color),this.align=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ALIGN,this.align),this.valign=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_TOP,this.spacingTop-e))+this.spacing,this.spacingRight=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_RIGHT,this.spacingRight-e))+this.spacing,this.spacingBottom=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_BOTTOM,this.spacingBottom-e))+this.spacing,this.spacingLeft=parseInt(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SPACING_LEFT,this.spacingLeft-e))+this.spacing,this.horizontal=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null}getAutoDirection(){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return t!=null&&t.length>0&&t[0]>"z"?mxConstants$1.TEXT_DIRECTION_RTL:mxConstants$1.TEXT_DIRECTION_LTR}getContentNode(){var t=this.node;return t!=null&&(t.ownerSVGElement==null?t=this.node.firstChild.firstChild:t=t.firstChild.firstChild.firstChild.firstChild.firstChild),t}updateBoundingBox(){var t=this.node;this.boundingBox=this.bounds.clone();var e=this.getTextRotation(),n=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER):null,s=this.style!=null?mxUtils$1.getValue(this.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE):null;if(!this.ignoreStringSize&&t!=null&&this.overflow!="fill"&&(!this.clipped||!this.ignoreClippedStringSize||n!=mxConstants$1.ALIGN_CENTER||s!=mxConstants$1.ALIGN_MIDDLE)){var l=null,r=null;if(t.ownerSVGElement!=null)if(t.firstChild!=null&&t.firstChild.firstChild!=null&&t.firstChild.firstChild.nodeName=="foreignObject")t=t.firstChild.firstChild.firstChild.firstChild,r=t.offsetHeight*this.scale,this.overflow=="width"?l=this.boundingBox.width:l=t.offsetWidth*this.scale;else try{var o=t.getBBox();typeof this.value=="string"&&mxUtils$1.trim(this.value)==0?this.boundingBox=null:o.width==0&&o.height==0?this.boundingBox=null:this.boundingBox=new mxRectangle(o.x,o.y,o.width,o.height);return}catch{}else{var h=this.state!=null?this.state.view.textDiv:null;if(this.offsetWidth!=null&&this.offsetHeight!=null)l=this.offsetWidth*this.scale,r=this.offsetHeight*this.scale;else{h!=null&&(this.updateFont(h),this.updateSize(h,!1),this.updateInnerHtml(h),t=h);var u=t;if(document.documentMode==8&&!mxClient.IS_EM){var d=Math.round(this.bounds.width/this.scale);if(this.wrap&&d>0){if(t.style.wordWrap=mxConstants$1.WORD_WRAP,t.style.whiteSpace="normal",t.style.wordWrap!="break-word"){var m=u.getElementsByTagName("div");m.length>0&&(u=m[m.length-1]),l=u.offsetWidth+2,m=this.node.getElementsByTagName("div"),this.clipped&&(l=Math.min(d,l)),m.length>1&&(m[m.length-2].style.width=l+"px")}}else t.style.whiteSpace="nowrap"}else u.firstChild!=null&&u.firstChild.nodeName=="DIV"&&(u=u.firstChild);this.offsetWidth=u.offsetWidth+this.textWidthPadding,this.offsetHeight=u.offsetHeight,l=this.offsetWidth*this.scale,r=this.offsetHeight*this.scale}}l!=null&&r!=null&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,l,r))}if(this.boundingBox!=null)if(e!=0){var g=mxUtils$1.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),e,new mxPoint(0,0));this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=g.x,this.boundingBox.y+=g.y,this.boundingBox.width=g.width,this.boundingBox.height=g.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null}getShapeRotation(){return 0}getTextRotation(){return this.state!=null&&this.state.shape!=null?this.state.shape.getTextRotation():0}isPaintBoundsInverted(){return!this.horizontal&&this.state!=null&&this.state.view.graph.model.isVertex(this.state.cell)}configureCanvas(t,e,n,s,l){super.configureCanvas(t,e,n,s,l),t.setFontColor(this.color),t.setFontBackgroundColor(this.background),t.setFontBorderColor(this.border),t.setFontFamily(this.family),t.setFontSize(this.size),t.setFontStyle(this.fontStyle)}updateVmlContainer(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"}getHtmlValue(){var t=this.value;return this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(t=mxUtils$1.htmlEntities(t,!1)),t=mxUtils$1.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,t}getTextCss(){var t=mxConstants$1.LINE_HEIGHT,e="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+t+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD&&(e+="font-weight: bold; "),(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC&&(e+="font-style: italic; ");var n=[];return(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&n.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&n.push("line-through"),n.length>0&&(e+="text-decoration: "+n.join(" ")+"; "),e}redrawHtmlShape(){if(mxClient.IS_SVG)this.redrawHtmlShapeWithCss3();else{var t=this.node.style;t.whiteSpace="normal",t.overflow="",t.width="",t.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,this.state==null||this.state.view.textDiv==null),this.offsetWidth=null,this.offsetHeight=null,this.updateHtmlTransform()}}redrawHtmlShapeWithCss3(){var t=Math.max(0,Math.round(this.bounds.width/this.scale)),e=Math.max(0,Math.round(this.bounds.height/this.scale)),n="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",s=this.getTextCss();mxSvgCanvas2D.createCss(t+2,e,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.background!=null?mxUtils$1.htmlEntities(this.background):null,this.border!=null?mxUtils$1.htmlEntities(this.border):null,n,s,this.scale,(l,r,o,h,u,d)=>{var m=this.getTextRotation(),g=(this.scale!=1?"scale("+this.scale+") ":"")+(m!=0?"rotate("+m+"deg) ":"")+(this.margin.x!=0||this.margin.y!=0?"translate("+this.margin.x*100+"%,"+this.margin.y*100+"%)":"");g!=""&&(g="transform-origin: 0 0; transform: "+g+"; "),d==""?(o+=h,h="display:inline-block; min-width: 100%; "+g):h+=g,this.opacity<100&&(u+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",o);var x=mxUtils$1.isNode(this.value)?this.value.outerHTML:this.getHtmlValue();this.node.firstChild==null&&(this.node.innerHTML="<div><div>"+x+"</div></div>"),this.node.firstChild.firstChild.setAttribute("style",u),this.node.firstChild.setAttribute("style",h)})}updateHtmlTransform(){var t=this.getTextRotation(),e=this.node.style,n=this.margin.x,s=this.margin.y;t!=0?(mxUtils$1.setPrefixedStyle(e,"transformOrigin",-n*100+"% "+-s*100+"%"),mxUtils$1.setPrefixedStyle(e,"transform","translate("+n*100+"%,"+s*100+"%) scale("+this.scale+") rotate("+t+"deg)")):(mxUtils$1.setPrefixedStyle(e,"transformOrigin","0% 0%"),mxUtils$1.setPrefixedStyle(e,"transform","scale("+this.scale+") translate("+n*100+"%,"+s*100+"%)")),e.left=Math.round(this.bounds.x-Math.ceil(n*(this.overflow!="fill"&&this.overflow!="width"?3:1)))+"px",e.top=Math.round(this.bounds.y-s*(this.overflow!="fill"?3:1))+"px",this.opacity<100?e.opacity=this.opacity/100:e.opacity=""}updateInnerHtml(t){if(mxUtils$1.isNode(this.value))t.innerHTML=this.value.outerHTML;else{var e=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(e=mxUtils$1.htmlEntities(e,!1)),e=mxUtils$1.replaceTrailingNewlines(e,"<div>&nbsp;</div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,e='<div style="display:inline-block;_display:inline;">'+e+"</div>",t.innerHTML=e}}updateHtmlFilter(){var t=this.node.style,e=this.margin.x,P=this.margin.y,n=this.scale;mxUtils$1.setOpacity(this.node,this.opacity);var s=0,l=0,r=this.state!=null?this.state.view.textDiv:null,o=this.node;if(r!=null){r.style.overflow="",r.style.height="",r.style.width="",this.updateFont(r),this.updateSize(r,!1),this.updateInnerHtml(r);var h=Math.round(this.bounds.width/this.scale);this.wrap&&h>0?(r.style.whiteSpace="normal",r.style.wordWrap=mxConstants$1.WORD_WRAP,s=h,this.clipped&&(s=Math.min(s,this.bounds.width)),r.style.width=s+"px"):r.style.whiteSpace="nowrap",o=r,o.firstChild!=null&&o.firstChild.nodeName=="DIV"&&(o=o.firstChild,this.wrap&&r.style.wordWrap=="break-word"&&(o.style.width="100%")),!this.clipped&&this.wrap&&h>0&&(s=o.offsetWidth+this.textWidthPadding,r.style.width=s+"px"),l=o.offsetHeight+2,mxClient.IS_QUIRKS&&this.border!=null&&this.border!=mxConstants$1.NONE&&(l+=3)}else o.firstChild!=null&&o.firstChild.nodeName=="DIV"&&(o=o.firstChild,l=o.offsetHeight);s=o.offsetWidth+this.textWidthPadding,this.clipped&&(l=Math.min(l,this.bounds.height));var h=this.bounds.width/n,u=this.bounds.height/n;this.overflow=="fill"?(l=u,s=h):this.overflow=="width"&&(l=o.scrollHeight,s=h),this.offsetWidth=s,this.offsetHeight=l,mxClient.IS_QUIRKS&&(this.clipped||this.overflow=="width"&&u>0)?(u=Math.min(u,l),t.height=Math.round(u)+"px"):u=l,this.overflow!="fill"&&this.overflow!="width"&&(this.clipped&&(s=Math.min(h,s)),h=s,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(t.width=Math.round(h)+"px")),u*=n,h*=n;var d=this.getTextRotation()*(Math.PI/180),m=parseFloat(parseFloat(Math.cos(d)).toFixed(8)),g=parseFloat(parseFloat(Math.sin(-d)).toFixed(8));d%=2*Math.PI,d<0&&(d+=2*Math.PI),d%=Math.PI,d>Math.PI/2&&(d=Math.PI-d);var x=Math.cos(d),v=Math.sin(-d),C=h*-(e+.5),E=u*-(P+.5),b=(u-u*x+h*v)/2+g*C-m*E,w=(h-h*x+u*v)/2-m*C-g*E;if(d!=0){var $="progid:DXImageTransform.Microsoft.Matrix(M11="+m+", M12="+g+", M21="+-g+", M22="+m+", sizingMethod='auto expand')";t.filter!=null&&t.filter.length>0?t.filter+=" "+$:t.filter=$}var P=0;this.overflow!="fill"&&mxClient.IS_QUIRKS&&(this.valign==mxConstants$1.ALIGN_TOP?P-=1:this.valign==mxConstants$1.ALIGN_BOTTOM?P+=2:P+=1),t.zoom=n,t.left=Math.round(this.bounds.x+w-h/2)+"px",t.top=Math.round(this.bounds.y+b-u/2+P)+"px"}updateValue(){if(mxUtils$1.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var t=this.value;this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(t=mxUtils$1.htmlEntities(t,!1)),t=mxUtils$1.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t;var e=this.background!=null&&this.background!=mxConstants$1.NONE?this.background:null,n=this.border!=null&&this.border!=mxConstants$1.NONE?this.border:null;if(this.overflow=="fill"||this.overflow=="width")e!=null&&(this.node.style.backgroundColor=e),n!=null&&(this.node.style.border="1px solid "+n);else{var s="";e!=null&&(s+="background-color:"+mxUtils$1.htmlEntities(e)+";"),n!=null&&(s+="border:1px solid "+mxUtils$1.htmlEntities(n)+";");var l=mxConstants$1.LINE_HEIGHT;t='<div style="zoom:1;'+s+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+l+'">'+t+"</div>"}this.node.innerHTML=t;var r=this.node.getElementsByTagName("div");if(r.length>0){var o=this.textDirection;o==mxConstants$1.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants$1.DIALECT_STRICTHTML&&(o=this.getAutoDirection()),o==mxConstants$1.TEXT_DIRECTION_LTR||o==mxConstants$1.TEXT_DIRECTION_RTL?r[r.length-1].setAttribute("dir",o):r[r.length-1].removeAttribute("dir")}}}updateFont(t){var e=t.style;e.lineHeight=mxConstants$1.LINE_HEIGHT,e.fontSize=this.size+"px",e.fontFamily=this.family,e.verticalAlign="top",e.color=this.color,(this.fontStyle&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?e.fontWeight="bold":e.fontWeight="",(this.fontStyle&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?e.fontStyle="italic":e.fontStyle="";var n=[];(this.fontStyle&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&n.push("underline"),(this.fontStyle&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&n.push("line-through"),e.textDecoration=n.join(" "),this.align==mxConstants$1.ALIGN_CENTER?e.textAlign="center":this.align==mxConstants$1.ALIGN_RIGHT?e.textAlign="right":e.textAlign="left"}updateSize(t,e){var n=Math.max(0,Math.round(this.bounds.width/this.scale)),s=Math.max(0,Math.round(this.bounds.height/this.scale)),l=t.style;if(this.clipped?(l.overflow="hidden",mxClient.IS_QUIRKS?l.width=n+"px":(l.maxHeight=s+"px",l.maxWidth=n+"px")):this.overflow=="fill"?(l.width=n+1+"px",l.height=s+1+"px",l.overflow="hidden"):this.overflow=="width"&&(l.width=n+1+"px",l.maxHeight=s+1+"px",l.overflow="hidden"),this.wrap&&n>0){if(l.wordWrap=mxConstants$1.WORD_WRAP,l.whiteSpace="normal",l.width=n+"px",e&&this.overflow!="fill"&&this.overflow!="width"){var r=t;r.firstChild!=null&&r.firstChild.nodeName=="DIV"&&(r=r.firstChild,t.style.wordWrap=="break-word"&&(r.style.width="100%"));var o=r.offsetWidth;if(o==0){var h=t.parentNode;t.style.visibility="hidden",document.body.appendChild(t),o=r.offsetWidth,t.style.visibility="",h.appendChild(t)}o+=3,this.clipped&&(o=Math.min(o,n)),l.width=o+"px"}}else l.whiteSpace="nowrap"}updateMargin(){this.margin=mxUtils$1.getAlignmentAsPoint(this.align,this.valign)}getSpacing(){var t=0,e=0;return this.align==mxConstants$1.ALIGN_CENTER?t=(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants$1.ALIGN_RIGHT?t=-this.spacingRight-we.baseSpacingRight:t=this.spacingLeft+we.baseSpacingLeft,this.valign==mxConstants$1.ALIGN_MIDDLE?e=(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants$1.ALIGN_BOTTOM?e=-this.spacingBottom-we.baseSpacingBottom:e=this.spacingTop+we.baseSpacingTop,new mxPoint(t,e)}};c(we,"baseSpacingTop",0),c(we,"baseSpacingBottom",0),c(we,"baseSpacingLeft",0),c(we,"baseSpacingRight",0);let mxText=we;class mxRectangleShape extends mxShape{constructor(i,t,e,n){super(),this.bounds=i,this.fill=t,this.stroke=e,this.strokewidth=n??1}isHtmlAllowed(){var i=!0;return this.style!=null&&(i=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!this.isRounded&&!this.glass&&this.rotation==0&&(i||this.fill!=null&&this.fill!=mxConstants$1.NONE)}paintBackground(i,t,e,n,s){var l=!0;if(this.style!=null&&(l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),l||this.fill!=null&&this.fill!=mxConstants$1.NONE||this.stroke!=null&&this.stroke!=mxConstants$1.NONE){if(!l&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(i.pointerEvents=!1),this.isRounded){var r=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")r=Math.min(n/2,Math.min(s/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;r=Math.min(n*o,s*o)}i.roundrect(t,e,n,s,r,r)}else i.rect(t,e,n,s);i.fillAndStroke()}}isRoundable(i,t,e,n,s){return!0}paintForeground(i,t,e,n,s){this.glass&&!this.outline&&this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.paintGlassEffect(i,t,e,n,s,this.getArcSize(n+this.strokewidth,s+this.strokewidth))}}class mxImageShape extends mxRectangleShape{constructor(t,e,n,s,l){super();c(this,"preserveImageAspect",!0);this.bounds=t,this.image=e,this.fill=n,this.stroke=s,this.strokewidth=l??1,this.shadow=!1}getSvgScreenOffset(){return 0}apply(t){super.apply(t),this.fill=null,this.stroke=null,this.gradient=null,this.style!=null&&(this.preserveImageAspect=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_ASPECT,1)==1,this.flipH=this.flipH||mxUtils$1.getValue(this.style,"imageFlipH",0)==1,this.flipV=this.flipV||mxUtils$1.getValue(this.style,"imageFlipV",0)==1)}isHtmlAllowed(){return!this.preserveImageAspect}createHtml(){var t=document.createElement("div");return t.style.position="absolute",t}isRoundable(t,e,n,s,l){return!1}paintVertexShape(t,e,n,s,l){if(this.image!=null){var r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,null),o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,null);r!=null&&(t.setFillColor(r),t.setStrokeColor(o),t.rect(e,n,s,l),t.fillAndStroke()),t.image(e,n,s,l,this.image,this.preserveImageAspect,!1,!1);var o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,null);o!=null&&(t.setShadow(!1),t.setStrokeColor(o),t.rect(e,n,s,l),t.stroke())}else super.paintBackground(t,e,n,s,l)}redrawHtmlShape(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",this.image!=null){var t=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BACKGROUND,""),e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=t,this.node.style.borderColor=e;var n=this.rotation!=0,s=document.createElement(n?mxClient.VML_PREFIX+":image":"img");s.setAttribute("border","0"),s.style.position="absolute",s.src=this.image;var l=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=l,this.flipH&&this.flipV?l+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?l+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(l+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),s.style.filter!=l&&(s.style.filter=l),s.nodeName=="image"?s.style.rotation=this.rotation:this.rotation!=0?mxUtils$1.setPrefixedStyle(s.style,"transform","rotate("+this.rotation+"deg)"):mxUtils$1.setPrefixedStyle(s.style,"transform",""),s.style.width=this.node.style.width,s.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(s)}else this.setTransparentBackgroundImage(this.node)}}const Pe=class Pe{static addMarker(i,t){Pe.markers[i]=t}static createMarker(i,t,e,n,s,l,r,o,h,u){var d=Pe.markers[e];return d!=null?d(i,t,e,n,s,l,r,o,h,u):null}};c(Pe,"markers",[]);let mxMarker=Pe;function diamond(a,i,t,e,n,s,l,r,o,h){var u=t==mxConstants$1.ARROW_DIAMOND?.7071:.9862,d=n*o*u,m=s*o*u;n=n*(l+o),s=s*(l+o);var g=e.clone();g.x-=d,g.y-=m,e.x+=-n-d,e.y+=-s-m;var x=t==mxConstants$1.ARROW_DIAMOND?2:3.4;return function(){a.begin(),a.moveTo(g.x,g.y),a.lineTo(g.x-n/2-s/x,g.y+n/x-s/2),a.lineTo(g.x-n,g.y-s),a.lineTo(g.x-n/2+s/x,g.y-s/2-n/x),a.close(),h?a.fillAndStroke():a.stroke()}}function createOpenArrow(a){return a=a??2,function(i,t,e,n,s,l,r,o,h,u){var d=s*h*1.118,m=l*h*1.118;s=s*(r+h),l=l*(r+h);var g=n.clone();return g.x-=d,g.y-=m,n.x+=-d*2,n.y+=-m*2,function(){i.begin(),i.moveTo(g.x-s-l/a,g.y-l+s/a),i.lineTo(g.x,g.y),i.lineTo(g.x+l/a-s,g.y-l-s/a),i.stroke()}}}function createArrow(a){return a=a??2,function(i,t,e,n,s,l,r,o,h,u){var d=s*h*1.118,m=l*h*1.118;s=s*(r+h),l=l*(r+h);var g=n.clone();g.x-=d,g.y-=m;var x=e!=mxConstants$1.ARROW_CLASSIC&&e!=mxConstants$1.ARROW_CLASSIC_THIN?1:3/4;return n.x+=-s*x-d,n.y+=-l*x-m,function(){i.begin(),i.moveTo(g.x,g.y),i.lineTo(g.x-s-l/a,g.y-l+s/a),(e==mxConstants$1.ARROW_CLASSIC||e==mxConstants$1.ARROW_CLASSIC_THIN)&&i.lineTo(g.x-s*3/4,g.y-l*3/4),i.lineTo(g.x+l/a-s,g.y-l-s/a),i.close(),u?i.fillAndStroke():i.stroke()}}}function oval(a,i,t,e,n,s,l,r,o,h){var u=l/2,d=e.clone();return e.x-=n*u,e.y-=s*u,function(){a.ellipse(d.x-u,d.y-u,l,l),h?a.fillAndStroke():a.stroke()}}class mxConnector extends mxPolyline{constructor(i,t,e){super(i,t,e)}updateBoundingBox(){this.useSvgBoundingBox=this.style!=null&&this.style[mxConstants$1.STYLE_CURVED]==1,super.updateBoundingBox()}paintEdgeShape(i,t){var e=this.createMarker(i,t,!0),n=this.createMarker(i,t,!1);super.paintEdgeShape(i,t),i.setFillColor(this.stroke),i.setShadow(!1),i.setDashed(!1),e!=null&&e(),n!=null&&n()}createMarker(i,t,e){var n=null,s=t.length,l=mxUtils$1.getValue(this.style,e?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW),r=e?t[1]:t[s-2],o=e?t[0]:t[s-1];if(l!=null&&r!=null&&o!=null){for(var h=1;h<s-1&&Math.round(r.x-o.x)==0&&Math.round(r.y-o.y)==0;)r=e?t[1+h]:t[s-2-h],h++;var u=o.x-r.x,d=o.y-r.y,m=Math.max(1,Math.sqrt(u*u+d*d)),g=u/m,x=d/m,v=mxUtils$1.getNumber(this.style,e?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE),C=this.style[e?mxConstants$1.STYLE_STARTFILL:mxConstants$1.STYLE_ENDFILL]!=0;n=mxMarker.createMarker(i,this,l,o,g,x,v,e,this.strokewidth,C)}return n}augmentBoundingBox(i){super.augmentBoundingBox(i);var t=0;mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(t=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE)+1),mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(t=Math.max(t,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE))+1),i.grow(t*this.scale)}}const Oe=class Oe{constructor(){c(this,"defaultEdgeShape",mxConnector);c(this,"defaultVertexShape",mxRectangleShape);c(this,"defaultTextShape",mxText);c(this,"legacyControlPosition",!0);c(this,"legacySpacing",!0);c(this,"antiAlias",!0);c(this,"minSvgStrokeWidth",1);c(this,"forceControlClickHandler",!1)}static registerShape(i,t){Oe.defaultShapes[i]=t}initializeShape(i){i.shape.dialect=i.view.graph.dialect,this.configureShape(i),i.shape.init(i.view.getDrawPane())}createShape(i){var t=null;if(i.style!=null){var e=mxStencilRegistry.getStencil(i.style[mxConstants$1.STYLE_SHAPE]);if(e!=null)t=new mxShape(e);else{var n=this.getShapeConstructor(i);t=new n}}return t}createIndicatorShape(i){i.shape.indicatorShape=this.getShape(i.view.graph.getIndicatorShape(i))}getShape(i){return i!=null?Oe.defaultShapes[i]:null}getShapeConstructor(i){var t=this.getShape(i.style[mxConstants$1.STYLE_SHAPE]);return t==null&&(t=i.view.graph.getModel().isEdge(i.cell)?this.defaultEdgeShape:this.defaultVertexShape),t}configureShape(i){i.shape.apply(i),i.shape.image=i.view.graph.getImage(i),i.shape.indicatorColor=i.view.graph.getIndicatorColor(i),i.shape.indicatorStrokeColor=i.style[mxConstants$1.STYLE_INDICATOR_STROKECOLOR],i.shape.indicatorGradientColor=i.view.graph.getIndicatorGradientColor(i),i.shape.indicatorDirection=i.style[mxConstants$1.STYLE_INDICATOR_DIRECTION],i.shape.indicatorImage=i.view.graph.getIndicatorImage(i),this.postConfigureShape(i)}postConfigureShape(i){i.shape!=null&&(this.resolveColor(i,"indicatorGradientColor",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(i,"indicatorColor",mxConstants$1.STYLE_FILLCOLOR),this.resolveColor(i,"gradient",mxConstants$1.STYLE_GRADIENTCOLOR),this.resolveColor(i,"stroke",mxConstants$1.STYLE_STROKECOLOR),this.resolveColor(i,"fill",mxConstants$1.STYLE_FILLCOLOR))}checkPlaceholderStyles(i){if(i.style!=null){for(var t=["inherit","swimlane","indicated"],e=[mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.STYLE_FONTCOLOR],n=0;n<e.length;n++)if(mxUtils$1.indexOf(t,i.style[e[n]])>=0)return!0}return!1}resolveColor(i,t,e){var n=e==mxConstants$1.STYLE_FONTCOLOR?i.text:i.shape;if(n!=null){var s=i.view.graph,l=n[t],r=null;if(l=="inherit"?r=s.model.getParent(i.cell):l=="swimlane"?(n[t]=e==mxConstants$1.STYLE_STROKECOLOR||e==mxConstants$1.STYLE_FONTCOLOR?"#000000":"#ffffff",s.model.getTerminal(i.cell,!1)!=null?r=s.model.getTerminal(i.cell,!1):r=i.cell,r=s.getSwimlane(r),e=s.swimlaneIndicatorColorAttribute):l=="indicated"&&i.shape!=null&&(n[t]=i.shape.indicatorColor),r!=null){var o=s.getView().getState(r);if(n[t]=null,o!=null){var h=e==mxConstants$1.STYLE_FONTCOLOR?o.text:o.shape;h!=null&&t!="indicatorColor"?n[t]=h[t]:n[t]=o.style[e]}}}}getLabelValue(i){return i.view.graph.getLabel(i.cell)}createLabel(i,t){var e=i.view.graph;if(e.getModel().isEdge(i.cell),i.style[mxConstants$1.STYLE_FONTSIZE]>0||i.style[mxConstants$1.STYLE_FONTSIZE]==null){var n=e.isHtmlLabel(i.cell)||t!=null&&mxUtils$1.isNode(t);i.text=new this.defaultTextShape(t,new mxRectangle,i.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER,e.getVerticalAlign(i),i.style[mxConstants$1.STYLE_FONTCOLOR],i.style[mxConstants$1.STYLE_FONTFAMILY],i.style[mxConstants$1.STYLE_FONTSIZE],i.style[mxConstants$1.STYLE_FONTSTYLE],i.style[mxConstants$1.STYLE_SPACING],i.style[mxConstants$1.STYLE_SPACING_TOP],i.style[mxConstants$1.STYLE_SPACING_RIGHT],i.style[mxConstants$1.STYLE_SPACING_BOTTOM],i.style[mxConstants$1.STYLE_SPACING_LEFT],i.style[mxConstants$1.STYLE_HORIZONTAL],i.style[mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR],i.style[mxConstants$1.STYLE_LABEL_BORDERCOLOR],e.isWrapping(i.cell)&&e.isHtmlLabel(i.cell),e.isLabelClipped(i.cell),i.style[mxConstants$1.STYLE_OVERFLOW],i.style[mxConstants$1.STYLE_LABEL_PADDING],mxUtils$1.getValue(i.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION)),i.text.opacity=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_TEXT_OPACITY,100),i.text.dialect=n?mxConstants$1.DIALECT_STRICTHTML:i.view.graph.dialect,i.text.style=i.style,i.text.state=i,this.initializeLabel(i,i.text);var s=!1,l=function(r){var o=i;if(mxClient.IS_TOUCH||s){var h=mxEvent$1.getClientX(r),u=mxEvent$1.getClientY(r),d=mxUtils$1.convertPoint(e.container,h,u);o=e.view.getState(e.getCellAt(d.x,d.y))}return o};mxEvent$1.addGestureListeners(i.text.node,r=>{this.isLabelEvent(i,r)&&(e.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(r,i)),s=e.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(r).nodeName=="IMG")},r=>{this.isLabelEvent(i,r)&&e.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(r,l(r)))},r=>{this.isLabelEvent(i,r)&&(e.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(r,l(r))),s=!1)}),e.nativeDblClickEnabled&&mxEvent$1.addListener(i.text.node,"dblclick",r=>{this.isLabelEvent(i,r)&&(e.dblClick(r,i.cell),mxEvent$1.consume(r))})}}initializeLabel(i,t){mxClient.IS_SVG&&mxClient.NO_FO&&t.dialect!=mxConstants$1.DIALECT_SVG?t.init(i.view.graph.container):t.init(i.view.getDrawPane())}createCellOverlays(i){var t=i.view.graph,e=t.getCellOverlays(i.cell),n=null;if(e!=null){n=new mxDictionary;for(var s=0;s<e.length;s++){var l=i.overlays!=null?i.overlays.remove(e[s]):null;if(l==null){var r=new mxImageShape(new mxRectangle,e[s].image.src);r.dialect=i.view.graph.dialect,r.preserveImageAspect=!1,r.overlay=e[s],this.initializeOverlay(i,r),this.installCellOverlayListeners(i,e[s],r),e[s].cursor!=null&&(r.node.style.cursor=e[s].cursor),n.put(e[s],r)}else n.put(e[s],l)}}i.overlays!=null&&i.overlays.visit(function(o,h){h.destroy()}),i.overlays=n}initializeOverlay(i,t){t.init(i.view.getOverlayPane())}installCellOverlayListeners(i,t,e){var n=i.view.graph;mxEvent$1.addListener(e.node,"click",function(s){n.isEditing()&&n.stopEditing(!n.isInvokesStopCellEditing()),t.fireEvent(new mxEventObject$1(mxEvent$1.CLICK,"event",s,"cell",i.cell))}),mxEvent$1.addGestureListeners(e.node,function(s){mxEvent$1.consume(s)},function(s){n.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(s,i))}),mxClient.IS_TOUCH&&mxEvent$1.addListener(e.node,"touchend",function(s){t.fireEvent(new mxEventObject$1(mxEvent$1.CLICK,"event",s,"cell",i.cell))})}createControl(i){var t=i.view.graph,e=t.getFoldingImage(i);if(t.foldingEnabled&&e!=null){if(i.control==null){var n=new mxRectangle(0,0,e.width,e.height);i.control=new mxImageShape(n,e.src),i.control.preserveImageAspect=!1,i.control.dialect=t.dialect,this.initControl(i,i.control,!0,this.createControlClickHandler(i))}}else i.control!=null&&(i.control.destroy(),i.control=null)}createControlClickHandler(i){var t=i.view.graph;return e=>{if(this.forceControlClickHandler||t.isEnabled()){var n=!t.isCellCollapsed(i.cell);t.foldCells(n,!1,[i.cell],null,e),mxEvent$1.consume(e)}}}initControl(i,t,e,n){var s=i.view.graph,l=s.isHtmlLabel(i.cell)&&mxClient.NO_FO&&s.dialect==mxConstants$1.DIALECT_SVG;l?(t.dialect=mxConstants$1.DIALECT_PREFERHTML,t.init(s.container),t.node.style.zIndex=1):t.init(i.view.getOverlayPane());var r=t.innerNode||t.node;if(n!=null&&!mxClient.IS_IOS&&(s.isEnabled()&&(r.style.cursor="pointer"),mxEvent$1.addListener(r,"click",n)),e){var o=null;mxEvent$1.addGestureListeners(r,function(h){o=new mxPoint(mxEvent$1.getClientX(h),mxEvent$1.getClientY(h)),s.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(h,i)),mxEvent$1.consume(h)},function(h){s.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(h,i))},function(h){s.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(h,i)),mxEvent$1.consume(h)}),n!=null&&mxClient.IS_IOS&&r.addEventListener("touchend",function(h){if(o!=null){var u=s.tolerance;Math.abs(o.x-mxEvent$1.getClientX(h))<u&&Math.abs(o.y-mxEvent$1.getClientY(h))<u&&(n.call(n,h),mxEvent$1.consume(h))}},!0)}return r}isShapeEvent(i,t){return!0}isLabelEvent(i,t){return!0}installListeners(i){var t=i.view.graph,e=function(n){var s=i;if(t.dialect!=mxConstants$1.DIALECT_SVG&&mxEvent$1.getSource(n).nodeName=="IMG"||mxClient.IS_TOUCH){var l=mxEvent$1.getClientX(n),r=mxEvent$1.getClientY(n),o=mxUtils$1.convertPoint(t.container,l,r);s=t.view.getState(t.getCellAt(o.x,o.y))}return s};mxEvent$1.addGestureListeners(i.shape.node,n=>{this.isShapeEvent(i,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(n,i))},n=>{this.isShapeEvent(i,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(n,e(n)))},n=>{this.isShapeEvent(i,n)&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(n,e(n)))}),t.nativeDblClickEnabled&&mxEvent$1.addListener(i.shape.node,"dblclick",n=>{this.isShapeEvent(i,n)&&(t.dblClick(n,i.cell),mxEvent$1.consume(n))})}redrawLabel(i,t){var e=i.view.graph,n=this.getLabelValue(i),s=e.isWrapping(i.cell),l=e.isLabelClipped(i.cell),r=i.view.graph.isHtmlLabel(i.cell)||n!=null&&mxUtils$1.isNode(n),o=r?mxConstants$1.DIALECT_STRICTHTML:i.view.graph.dialect,h=i.style[mxConstants$1.STYLE_OVERFLOW]||"visible";if(i.text!=null&&(i.text.wrap!=s||i.text.clipped!=l||i.text.overflow!=h||i.text.dialect!=o)&&(i.text.destroy(),i.text=null),i.text==null&&n!=null&&(mxUtils$1.isNode(n)||n.length>0)?this.createLabel(i,n):i.text!=null&&(n==null||n.length==0)&&(i.text.destroy(),i.text=null),i.text!=null){t&&(i.text.lastValue!=null&&this.isTextShapeInvalid(i,i.text)&&(i.text.lastValue=null),i.text.resetStyles(),i.text.apply(i),i.text.valign=e.getVerticalAlign(i));var u=this.getLabelBounds(i),d=this.getTextScale(i);if(this.resolveColor(i,"color",mxConstants$1.STYLE_FONTCOLOR),t||i.text.value!=n||i.text.isWrapping!=s||i.text.overflow!=h||i.text.isClipping!=l||i.text.scale!=d||i.text.dialect!=o||i.text.bounds==null||!i.text.bounds.equals(u)){i.text.dialect=o,i.text.value=n,i.text.bounds=u,i.text.scale=d,i.text.wrap=s,i.text.clipped=l,i.text.overflow=h;var m=i.text.node.style.visibility;this.redrawLabelShape(i.text),i.text.node.style.visibility=m}}}isTextShapeInvalid(i,t){function e(n,s,l){var r=!1;return s=="spacingTop"||s=="spacingRight"||s=="spacingBottom"||s=="spacingLeft"?r=parseFloat(t[n])-parseFloat(t.spacing)!=(i.style[s]||l):r=t[n]!=(i.style[s]||l),r}return e("fontStyle",mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.DEFAULT_FONTSTYLE)||e("family",mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY)||e("size",mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE)||e("color",mxConstants$1.STYLE_FONTCOLOR,"black")||e("align",mxConstants$1.STYLE_ALIGN,"")||e("valign",mxConstants$1.STYLE_VERTICAL_ALIGN,"")||e("spacing",mxConstants$1.STYLE_SPACING,2)||e("spacingTop",mxConstants$1.STYLE_SPACING_TOP,0)||e("spacingRight",mxConstants$1.STYLE_SPACING_RIGHT,0)||e("spacingBottom",mxConstants$1.STYLE_SPACING_BOTTOM,0)||e("spacingLeft",mxConstants$1.STYLE_SPACING_LEFT,0)||e("horizontal",mxConstants$1.STYLE_HORIZONTAL,!0)||e("background",mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR)||e("border",mxConstants$1.STYLE_LABEL_BORDERCOLOR)||e("opacity",mxConstants$1.STYLE_TEXT_OPACITY,100)||e("textDirection",mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION)}redrawLabelShape(i){i.redraw()}getTextScale(i){return i.view.scale}getLabelBounds(i){var t=i.view.graph,e=i.view.scale,n=t.getModel().isEdge(i.cell),s=new mxRectangle(i.absoluteOffset.x,i.absoluteOffset.y);if(n){var l=i.text.getSpacing();s.x+=l.x*e,s.y+=l.y*e;var r=t.getCellGeometry(i.cell);r!=null&&(s.width=Math.max(0,r.width*e),s.height=Math.max(0,r.height*e))}else{if(i.text.isPaintBoundsInverted()){var o=s.x;s.x=s.y,s.y=o}s.x+=i.x,s.y+=i.y,s.width=Math.max(1,i.width),s.height=Math.max(1,i.height)}if(i.text.isPaintBoundsInverted()){var h=(i.width-i.height)/2;s.x+=h,s.y-=h;var o=s.width;s.width=s.height,s.height=o}if(i.shape!=null){var u=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),d=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);u==mxConstants$1.ALIGN_CENTER&&d==mxConstants$1.ALIGN_MIDDLE&&(s=i.shape.getLabelBounds(s))}var m=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_WIDTH,null);return m!=null&&(s.width=parseFloat(m)*e),n||this.rotateLabelBounds(i,s),s}rotateLabelBounds(i,t){if(t.y-=i.text.margin.y*t.height,t.x-=i.text.margin.x*t.width,!this.legacySpacing||i.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&i.style[mxConstants$1.STYLE_OVERFLOW]!="width"){var e=i.view.scale,n=i.text.getSpacing();t.x+=n.x*e,t.y+=n.y*e;var s=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),l=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE),r=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_WIDTH,null);t.width=Math.max(0,t.width-(s==mxConstants$1.ALIGN_CENTER&&r==null?i.text.spacingLeft*e+i.text.spacingRight*e:0)),t.height=Math.max(0,t.height-(l==mxConstants$1.ALIGN_MIDDLE?i.text.spacingTop*e+i.text.spacingBottom*e:0))}var o=i.text.getTextRotation();if(o!=0&&i!=null&&i.view.graph.model.isVertex(i.cell)){var h=i.getCenterX(),u=i.getCenterY();if(t.x!=h||t.y!=u){var d=o*(Math.PI/180),m=mxUtils$1.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(d),Math.sin(d),new mxPoint(h,u));t.x=m.x,t.y=m.y}}}redrawCellOverlays(i,t){if(this.createCellOverlays(i),i.overlays!=null){var e=mxUtils$1.mod(mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ROTATION,0),90),n=mxUtils$1.toRadians(e),s=Math.cos(n),l=Math.sin(n);i.overlays.visit(function(r,o){var h=o.overlay.getBounds(i);if(!i.view.graph.getModel().isEdge(i.cell)&&i.shape!=null&&e!=0){var u=h.getCenterX(),d=h.getCenterY(),m=mxUtils$1.getRotatedPoint(new mxPoint(u,d),s,l,new mxPoint(i.getCenterX(),i.getCenterY()));u=m.x,d=m.y,h.x=Math.round(u-h.width/2),h.y=Math.round(d-h.height/2)}(t||o.bounds==null||o.scale!=i.view.scale||!o.bounds.equals(h))&&(o.bounds=h,o.scale=i.view.scale,o.redraw())})}}redrawControl(i,t){var e=i.view.graph.getFoldingImage(i);if(i.control!=null&&e!=null){var n=this.getControlBounds(i,e.width,e.height),s=this.legacyControlPosition?mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ROTATION,0):i.shape.getTextRotation(),l=i.view.scale;(t||i.control.scale!=l||!i.control.bounds.equals(n)||i.control.rotation!=s)&&(i.control.rotation=s,i.control.bounds=n,i.control.scale=l,i.control.redraw())}}getControlBounds(i,t,e){if(i.control!=null){var n=i.view.scale,s=i.getCenterX(),l=i.getCenterY();if(!i.view.graph.getModel().isEdge(i.cell)&&(s=i.x+t*n,l=i.y+e*n,i.shape!=null)){var r=i.shape.getShapeRotation();if(this.legacyControlPosition)r=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ROTATION,0);else if(i.shape.isPaintBoundsInverted()){var o=(i.width-i.height)/2;s+=o,l-=o}if(r!=0){var h=mxUtils$1.toRadians(r),u=Math.cos(h),d=Math.sin(h),m=mxUtils$1.getRotatedPoint(new mxPoint(s,l),u,d,new mxPoint(i.getCenterX(),i.getCenterY()));s=m.x,l=m.y}}return i.view.graph.getModel().isEdge(i.cell)?new mxRectangle(Math.round(s-t/2*n),Math.round(l-e/2*n),Math.round(t*n),Math.round(e*n)):new mxRectangle(Math.round(s-t/2*n),Math.round(l-e/2*n),Math.round(t*n),Math.round(e*n))}return null}insertStateAfter(i,t,e){for(var n=this.getShapesForState(i),s=0;s<n.length;s++)if(n[s]!=null&&n[s].node!=null){var l=n[s].node.parentNode!=i.view.getDrawPane()&&n[s].node.parentNode!=i.view.getOverlayPane(),r=l?e:t;if(r!=null&&r.nextSibling!=n[s].node)r.nextSibling==null?r.parentNode.appendChild(n[s].node):r.parentNode.insertBefore(n[s].node,r.nextSibling);else if(r==null)if(n[s].node.parentNode==i.view.graph.container){for(var o=i.view.canvas;o!=null&&o.parentNode!=i.view.graph.container;)o=o.parentNode;o!=null&&o.nextSibling!=null?o.nextSibling!=n[s].node&&n[s].node.parentNode.insertBefore(n[s].node,o.nextSibling):n[s].node.parentNode.appendChild(n[s].node)}else n[s].node.parentNode!=null&&n[s].node.parentNode.firstChild!=null&&n[s].node.parentNode.firstChild!=n[s].node&&n[s].node.parentNode.insertBefore(n[s].node,n[s].node.parentNode.firstChild);l?e=n[s].node:t=n[s].node}return[t,e]}getShapesForState(i){return[i.shape,i.text,i.control]}redraw(i,t,e){var n=this.redrawShape(i,t,e);i.shape!=null&&(e==null||e)&&(this.redrawLabel(i,n),this.redrawCellOverlays(i,n),this.redrawControl(i,n))}redrawShape(i,t,e){var n=i.view.graph.model,s=!1;return i.shape!=null&&i.shape.style!=null&&i.style!=null&&i.shape.style[mxConstants$1.STYLE_SHAPE]!=i.style[mxConstants$1.STYLE_SHAPE]&&(i.shape.destroy(),i.shape=null),i.shape==null&&i.view.graph.container!=null&&i.cell!=i.view.currentRoot&&(n.isVertex(i.cell)||n.isEdge(i.cell))?(i.shape=this.createShape(i),i.shape!=null&&(i.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,i.shape.antiAlias=this.antiAlias,this.createIndicatorShape(i),this.initializeShape(i),this.createCellOverlays(i),this.installListeners(i),i.view.graph.selectionCellsHandler.updateHandler(i))):!t&&i.shape!=null&&(!mxUtils$1.equalEntries(i.shape.style,i.style)||this.checkPlaceholderStyles(i))&&(i.shape.resetStyles(),this.configureShape(i),i.view.graph.selectionCellsHandler.updateHandler(i),t=!0),i.shape!=null&&i.shape.indicatorShape!=this.getShape(i.view.graph.getIndicatorShape(i))&&(i.shape.indicator!=null&&(i.shape.indicator.destroy(),i.shape.indicator=null),this.createIndicatorShape(i),i.shape.indicatorShape!=null&&(i.shape.indicator=new i.shape.indicatorShape,i.shape.indicator.dialect=i.shape.dialect,i.shape.indicator.init(i.node),t=!0)),i.shape!=null&&(this.createControl(i),(t||this.isShapeInvalid(i,i.shape))&&(i.absolutePoints!=null?(i.shape.points=i.absolutePoints.slice(),i.shape.bounds=null):(i.shape.points=null,i.shape.bounds=new mxRectangle(i.x,i.y,i.width,i.height)),i.shape.scale=i.view.scale,e==null||e?this.doRedrawShape(i):i.shape.updateBoundingBox(),s=!0)),s}doRedrawShape(i){i.shape.redraw()}isShapeInvalid(i,t){return t.bounds==null||t.scale!=i.view.scale||i.absolutePoints==null&&!t.bounds.equals(i)||i.absolutePoints!=null&&!mxUtils$1.equalPoints(t.points,i.absolutePoints)}destroy(i){i.shape!=null&&(i.text!=null&&(i.text.destroy(),i.text=null),i.overlays!=null&&(i.overlays.visit(function(t,e){e.destroy()}),i.overlays=null),i.control!=null&&(i.control.destroy(),i.control=null),i.shape.destroy(),i.shape=null)}};c(Oe,"defaultShapes",new Object);let mxCellRenderer=Oe;class mxChildChangeCodec extends mxObjectCodec{constructor(){super(new mxChildChange,["model","child","previousIndex"],["parent","previous"])}isReference(i,t,e,n){return t=="child"&&(!n||i.model.contains(i.previous))?!0:mxUtils$1.indexOf(this.idrefs,t)>=0}isExcluded(i,t,e,n){return super.isExcluded(i,t,e,n)||n&&e!=null&&(t=="previous"||t=="parent")&&!i.model.contains(e)}afterEncode(i,t,e){return this.isReference(t,"child",t.child,!0)?e.setAttribute("child",i.getId(t.child)):i.encodeCell(t.child,e),e}beforeDecode(i,t,e){if(t.firstChild!=null&&t.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){t=t.cloneNode(!0);var n=t.firstChild;e.child=i.decodeCell(n,!1);var s=n.nextSibling;for(n.parentNode.removeChild(n),n=s;n!=null;){if(s=n.nextSibling,n.nodeType==mxConstants$1.NODETYPE_ELEMENT){var l=n.getAttribute("id");i.lookup(l)==null&&i.decodeCell(n)}n.parentNode.removeChild(n),n=s}}else{var r=t.getAttribute("child");e.child=i.getObject(r)}return t}afterDecode(i,t,e){return e.child!=null&&(e.child.parent!=null&&e.previous!=null&&e.child.parent!=e.previous&&(e.previous=e.child.parent),e.child.parent=e.previous,e.previous=e.parent,e.previousIndex=e.index),e}}class mxCellCodec extends mxObjectCodec{constructor(){super(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"])}isCellCodec(){return!0}isNumericAttribute(i,t,e){return t.nodeName!=="value"&&super.isNumericAttribute(i,t,e)}isExcluded(i,t,e,n){return super.isExcluded(i,t,e,n)||n&&t=="value"&&e.nodeType==mxConstants$1.NODETYPE_ELEMENT}afterEncode(i,t,e){if(t.value!=null&&t.value.nodeType==mxConstants$1.NODETYPE_ELEMENT){var n=e;e=mxUtils$1.importNode(i.document,t.value,!0),e.appendChild(n);var s=n.getAttribute("id");e.setAttribute("id",s),n.removeAttribute("id")}return e}beforeDecode(i,t,e){var n=t.cloneNode(!0),s=this.getName();if(t.nodeName!=s){var l=t.getElementsByTagName(s)[0];l!=null&&l.parentNode==t?(mxUtils$1.removeWhitespace(l,!0),mxUtils$1.removeWhitespace(l,!1),l.parentNode.removeChild(l),n=l):n=null,e.value=t.cloneNode(!0);var r=e.value.getAttribute("id");r!=null&&(e.setId(r),e.value.removeAttribute("id"))}else e.setId(t.getAttribute("id"));if(n!=null)for(var o=0;o<this.idrefs.length;o++){var h=this.idrefs[o],u=n.getAttribute(h);if(u!=null){n.removeAttribute(h);var d=i.objects[u]||i.lookup(u);if(d==null){var m=i.getElementById(u);if(m!=null){var g=mxCodecRegistry.codecs[m.nodeName]||this;d=g.decode(i,m)}}e[h]=d}}return n}}class mxKeyHandler{constructor(i,t){c(this,"graph",null);c(this,"target",null);c(this,"normalKeys",null);c(this,"shiftKeys",null);c(this,"controlKeys",null);c(this,"controlShiftKeys",null);c(this,"enabled",!0);i!=null&&(this.graph=i,this.target=t||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=e=>{this.keyDown(e)},mxEvent$1.addListener(this.target,"keydown",this.keydownHandler))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}bindKey(i,t){this.normalKeys[i]=t}bindShiftKey(i,t){this.shiftKeys[i]=t}bindControlKey(i,t){this.controlKeys[i]=t}bindControlShiftKey(i,t){this.controlShiftKeys[i]=t}isControlDown(i){return mxEvent$1.isControlDown(i)}getFunction(i){return i!=null&&!mxEvent$1.isAltDown(i)?this.isControlDown(i)?mxEvent$1.isShiftDown(i)?this.controlShiftKeys[i.keyCode]:this.controlKeys[i.keyCode]:mxEvent$1.isShiftDown(i)?this.shiftKeys[i.keyCode]:this.normalKeys[i.keyCode]:null}isGraphEvent(i){var t=mxEvent$1.getSource(i);return t==this.target||t.parentNode==this.target||this.graph.cellEditor!=null&&this.graph.cellEditor.isEventSource(i)?!0:mxUtils$1.isAncestorNode(this.graph.container,t)}keyDown(i){if(this.isEnabledForEvent(i)){if(i.keyCode==27)this.escape(i);else if(!this.isEventIgnored(i)){var t=this.getFunction(i);t!=null&&(t(i),mxEvent$1.consume(i))}}}isEnabledForEvent(i){return this.graph.isEnabled()&&!mxEvent$1.isConsumed(i)&&this.isGraphEvent(i)&&this.isEnabled()}isEventIgnored(i){return this.graph.isEditing()}escape(i){this.graph.isEscapeEnabled()&&this.graph.escape(i)}destroy(){this.target!=null&&this.keydownHandler!=null&&(mxEvent$1.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null}}class mxDefaultKeyHandler{constructor(i){c(this,"editor",null);c(this,"handler",null);if(i!=null){this.editor=i,this.handler=new mxKeyHandler(i.graph);var t=this.handler.escape;this.handler.escape=function(e){t.apply(this,arguments),i.hideProperties(),i.fireEvent(new mxEventObject$1(mxEvent$1.ESCAPE,"event",e))}}}bindAction(i,t,e){var n=()=>{this.editor.execute(t)};e?this.handler.bindControlKey(i,n):this.handler.bindKey(i,n)}destroy(){this.handler.destroy(),this.handler=null}}class mxDefaultKeyHandlerCodec extends mxObjectCodec{constructor(){super(new mxDefaultKeyHandler)}encode(i,t){return null}decode(i,t,e){if(e!=null)for(e.editor,t=t.firstChild;t!=null;){if(!this.processInclude(i,t,e)&&t.nodeName=="add"){var n=t.getAttribute("as"),s=t.getAttribute("action"),l=t.getAttribute("control");e.bindAction(n,s,l)}t=t.nextSibling}return e}}class mxDefaultPopupMenu{constructor(i){c(this,"imageBasePath",null);this.config=i}createMenu(i,t,e,n){if(this.config!=null){var s=this.createConditions(i,e,n),l=this.config.firstChild;this.addItems(i,t,e,n,s,l,null)}}addItems(i,t,e,n,s,l,r){for(var o=!1;l!=null;){if(l.nodeName=="add"){var h=l.getAttribute("if");if(h==null||s[h]){var u=l.getAttribute("as");u=mxResources$1.get(u)||u;var d=mxUtils$1.eval(mxUtils$1.getTextContent(l)),m=l.getAttribute("action"),g=l.getAttribute("icon"),x=l.getAttribute("iconCls"),v=l.getAttribute("enabled-if"),C=v==null||s[v];o&&(t.addSeparator(r),o=!1),g!=null&&this.imageBasePath&&(g=this.imageBasePath+g);var E=this.addAction(t,i,u,g,d,m,e,r,x,C);this.addItems(i,t,e,n,s,l.firstChild,E)}}else l.nodeName=="separator"&&(o=!0);l=l.nextSibling}}addAction(i,t,e,n,s,l,r,o,h,u){var d=function(m){typeof s=="function"&&s.call(t,t,r,m),l!=null&&t.execute(l,r,m)};return i.addItem(e,n,d,o,h,u)}createConditions(i,t,e){var n=i.graph.getModel(),s=n.getChildCount(t),l=[];l.nocell=t==null,l.ncells=i.graph.getSelectionCount()>1,l.notRoot=n.getRoot()!=n.getParent(i.graph.getDefaultParent()),l.cell=t!=null;var r=t!=null&&i.graph.getSelectionCount()==1;l.nonEmpty=r&&s>0,l.expandable=r&&i.graph.isCellFoldable(t,!1),l.collapsable=r&&i.graph.isCellFoldable(t,!0),l.validRoot=r&&i.graph.isValidRoot(t),l.emptyValidRoot=l.validRoot&&s==0,l.swimlane=r&&i.graph.isSwimlane(t);for(var o=this.config.getElementsByTagName("condition"),h=0;h<o.length;h++){var u=mxUtils$1.eval(mxUtils$1.getTextContent(o[h])),d=o[h].getAttribute("name");d!=null&&typeof u=="function"&&(l[d]=u(i,t,e))}return l}}class mxDefaultPopupMenuCodec extends mxObjectCodec{constructor(){super(new mxDefaultPopupMenu)}encode(i,t){return null}decode(i,t,e){var n=t.getElementsByTagName("include")[0];return n!=null?this.processInclude(i,n,e):e!=null&&(e.config=t),e}}class mxPopupMenu extends mxEventSource{constructor(t){super();c(this,"submenuImage",mxClient.imageBasePath+"/submenu.gif");c(this,"zIndex",10006);c(this,"useLeftButtonForPopup",!1);c(this,"enabled",!0);c(this,"itemCount",0);c(this,"autoExpand",!1);c(this,"smartSeparators",!1);c(this,"labels",!0);this.factoryMethod=t,t!=null&&this.init()}init(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent$1.disableContextMenu(this.div)}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}isPopupTrigger(t){return t.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent$1.isLeftMouseButton(t.getEvent())}addItem(t,e,n,s,l,r,o,h){s=s||this,this.itemCount++,s.willAddSeparator&&(s.containsItems&&this.addSeparator(s,!0),s.willAddSeparator=!1),s.containsItems=!0;var u=document.createElement("tr");u.className="mxPopupMenuItem";var d=document.createElement("td");if(d.className="mxPopupMenuIcon",e!=null){var m=document.createElement("img");m.src=e,d.appendChild(m)}else if(l!=null){var g=document.createElement("div");g.className=l,d.appendChild(g)}if(u.appendChild(d),this.labels){var x=document.createElement("td");x.className="mxPopupMenuItem"+(r!=null&&!r?" mxDisabled":""),mxUtils$1.write(x,t),x.align="left",u.appendChild(x);var v=document.createElement("td");v.className="mxPopupMenuItem"+(r!=null&&!r?" mxDisabled":""),v.style.paddingRight="6px",v.style.textAlign="right",u.appendChild(v),s.div==null&&this.createSubmenu(s)}if(s.tbody.appendChild(u),o!=!1&&r!=!1){var C=null;mxEvent$1.addGestureListeners(u,E=>{this.eventReceiver=u,s.activeRow!=u&&s.activeRow!=s&&(s.activeRow!=null&&s.activeRow.div.parentNode!=null&&this.hideSubmenu(s),u.div!=null&&(this.showSubmenu(s,u),s.activeRow=u)),document.selection!=null&&(mxClient.IS_QUIRKS||document.documentMode==8)&&(C=document.selection.createRange()),mxEvent$1.consume(E)},E=>{s.activeRow!=u&&s.activeRow!=s&&(s.activeRow!=null&&s.activeRow.div.parentNode!=null&&this.hideSubmenu(s),this.autoExpand&&u.div!=null&&(this.showSubmenu(s,u),s.activeRow=u)),h||(u.className="mxPopupMenuItemHover")},E=>{if(this.eventReceiver==u){if(s.activeRow!=u&&this.hideMenu(),C!=null){try{C.select()}catch{}C=null}n!=null&&n(E)}this.eventReceiver=null,mxEvent$1.consume(E)}),h||mxEvent$1.addListener(u,"mouseout",E=>{u.className="mxPopupMenuItem"})}return u}addCheckmark(t,e){var n=t.firstChild.nextSibling;n.style.backgroundImage="url('"+e+"')",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="2px 50%"}createSubmenu(t){t.table=document.createElement("table"),t.table.className="mxPopupMenu",t.tbody=document.createElement("tbody"),t.table.appendChild(t.tbody),t.div=document.createElement("div"),t.div.className="mxPopupMenu",t.div.style.position="absolute",t.div.style.display="inline",t.div.style.zIndex=this.zIndex,t.div.appendChild(t.table);var e=document.createElement("img");e.setAttribute("src",this.submenuImage);var n=t.firstChild.nextSibling.nextSibling;n.appendChild(e)}showSubmenu(t,e){if(e.div!=null){e.div.style.left=t.div.offsetLeft+e.offsetLeft+e.offsetWidth-1+"px",e.div.style.top=t.div.offsetTop+e.offsetTop+"px",document.body.appendChild(e.div);var n=parseInt(e.div.offsetLeft),s=parseInt(e.div.offsetWidth),l=mxUtils$1.getDocumentScrollOrigin(document),r=document.body,o=document.documentElement,h=l.x+(r.clientWidth||o.clientWidth);n+s>h&&(e.div.style.left=Math.max(0,t.div.offsetLeft-s+-6)+"px"),mxUtils$1.fit(e.div)}}addSeparator(t,e){if(t=t||this,this.smartSeparators&&!e)t.willAddSeparator=!0;else if(t.tbody!=null){t.willAddSeparator=!1;var n=document.createElement("tr"),s=document.createElement("td");s.className="mxPopupMenuIcon",s.style.padding="0 0 0 0px",n.appendChild(s);var l=document.createElement("td");l.style.padding="0 0 0 0px",l.setAttribute("colSpan","2");var r=document.createElement("hr");r.setAttribute("size","1"),l.appendChild(r),n.appendChild(l),t.tbody.appendChild(n)}}popup(t,e,n,s){if(this.div!=null&&this.tbody!=null&&this.factoryMethod!=null){for(this.div.style.left=t+"px",this.div.style.top=e+"px";this.tbody.firstChild!=null;)mxEvent$1.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,s),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject$1(mxEvent$1.SHOW)))}}isMenuShowing(){return this.div!=null&&this.div.parentNode==document.body}showMenu(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils$1.fit(this.div)}hideMenu(){this.div!=null&&(this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject$1(mxEvent$1.HIDE)))}hideSubmenu(t){t.activeRow!=null&&(this.hideSubmenu(t.activeRow),t.activeRow.div.parentNode!=null&&t.activeRow.div.parentNode.removeChild(t.activeRow.div),t.activeRow=null)}destroy(){this.div!=null&&(mxEvent$1.release(this.div),this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.div=null)}}class mxToolbar extends mxEventSource{constructor(t){super();c(this,"enabled",!0);c(this,"noReset",!1);c(this,"updateDefaultMode",!0);this.container=t}addItem(t,e,n,s,l,r){var o=document.createElement(e!=null?"img":"button"),h=l||(r!=null?"mxToolbarMode":"mxToolbarItem");o.className=h,o.setAttribute("src",e),t!=null&&(e!=null?o.setAttribute("title",t):mxUtils$1.write(o,t)),this.container.appendChild(o),n!=null&&(mxEvent$1.addListener(o,"click",n),mxClient.IS_TOUCH&&mxEvent$1.addListener(o,"touchend",n));var u=d=>{s!=null?o.setAttribute("src",e):o.style.backgroundColor=""};return mxEvent$1.addGestureListeners(o,d=>{if(s!=null?o.setAttribute("src",s):o.style.backgroundColor="gray",r!=null){this.menu==null&&(this.menu=new mxPopupMenu,this.menu.init());var m=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),m!=o){this.currentImg=o,this.menu.factoryMethod=r;var g=new mxPoint(o.offsetLeft,o.offsetTop+o.offsetHeight);this.menu.popup(g.x,g.y,null,d),this.menu.isMenuShowing()&&(o.className=h+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),o.className=h,this.currentImg=null})}}},null,u),mxEvent$1.addListener(o,"mouseout",u),o}addCombo(t){var e=document.createElement("div");e.style.display="inline",e.className="mxToolbarComboContainer";var n=document.createElement("select");return n.className=t||"mxToolbarCombo",e.appendChild(n),this.container.appendChild(e),n}addActionCombo(t,e){var n=document.createElement("select");return n.className=e||"mxToolbarCombo",this.addOption(n,t,null),mxEvent$1.addListener(n,"change",function(s){var l=n.options[n.selectedIndex];n.selectedIndex=0,l.funct!=null&&l.funct(s)}),this.container.appendChild(n),n}addOption(t,e,n){var s=document.createElement("option");return mxUtils$1.writeln(s,e),typeof n=="function"?s.funct=n:s.setAttribute("value",n),t.appendChild(s),s}addSwitchMode(t,e,n,s,l){var r=document.createElement("img");return r.initialClassName=l||"mxToolbarMode",r.className=r.initialClassName,r.setAttribute("src",e),r.altIcon=s,t!=null&&r.setAttribute("title",t),mxEvent$1.addListener(r,"click",o=>{var h=this.selectedMode.altIcon;h!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",h)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=r),this.selectedMode=r;var h=r.altIcon;h!=null?(r.altIcon=r.getAttribute("src"),r.setAttribute("src",h)):r.className=r.initialClassName+"Selected",this.fireEvent(new mxEventObject$1(mxEvent$1.SELECT)),n()}),this.container.appendChild(r),this.defaultMode==null&&(this.defaultMode=r,this.selectMode(r),n()),r}addMode(t,e,n,s,l,r){r=r??!0;var o=document.createElement(e!=null?"img":"button");return o.initialClassName=l||"mxToolbarMode",o.className=o.initialClassName,o.setAttribute("src",e),o.altIcon=s,t!=null&&o.setAttribute("title",t),this.enabled&&r&&(mxEvent$1.addListener(o,"click",h=>{this.selectMode(o,n),this.noReset=!1}),mxEvent$1.addListener(o,"dblclick",h=>{this.selectMode(o,n),this.noReset=!0}),this.defaultMode==null&&(this.defaultMode=o,this.defaultFunction=n,this.selectMode(o,n))),this.container.appendChild(o),o}selectMode(t,e){if(this.selectedMode!=t){if(this.selectedMode!=null){var n=this.selectedMode.altIcon;n!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=t;var n=this.selectedMode.altIcon;n!=null?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject$1(mxEvent$1.SELECT,"function",e))}}resetMode(t){(t||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)}addSeparator(t){return this.addItem(null,t,null)}addBreak(){mxUtils$1.br(this.container)}addLine(){var t=document.createElement("hr");t.style.marginRight="6px",t.setAttribute("size","1"),this.container.appendChild(t)}destroy(){mxEvent$1.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,this.menu!=null&&this.menu.destroy()}}class mxDefaultToolbar{constructor(i,t){c(this,"toolbar",null);c(this,"resetHandler",null);c(this,"spacing",4);c(this,"connectOnDrop",!1);this.editor=t,i!=null&&t!=null&&this.init(i)}init(i){i!=null&&(this.toolbar=new mxToolbar(i),this.toolbar.addListener(mxEvent$1.SELECT,(t,e)=>{var n=e.getProperty("function");n!=null?this.editor.insertFunction=()=>{n.apply(this,arguments),this.toolbar.resetMode()}:this.editor.insertFunction=null}),this.resetHandler=()=>{this.toolbar!=null&&this.toolbar.resetMode(!0)},this.editor.graph.addListener(mxEvent$1.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent$1.ESCAPE,this.resetHandler))}addItem(i,t,e,n){var s=()=>{e!=null&&e.length>0&&this.editor.execute(e)};return this.toolbar.addItem(i,t,s,n)}addSeparator(i){i=i||mxClient.imageBasePath+"/separator.gif",this.toolbar.addSeparator(i)}addCombo(){return this.toolbar.addCombo()}addActionCombo(i){return this.toolbar.addActionCombo(i)}addActionOption(i,t,e){var n=()=>{this.editor.execute(e)};this.addOption(i,t,n)}addOption(i,t,e){return this.toolbar.addOption(i,t,e)}addMode(i,t,e,n,s){var l=()=>{this.editor.setMode(e),s!=null&&s(this.editor)};return this.toolbar.addSwitchMode(i,t,l,n)}addPrototype(i,t,e,n,s,l){var r=()=>typeof e=="function"?e():e!=null?this.editor.graph.cloneCell(e):null,o=(d,m)=>{if(typeof s=="function")s(this.editor,r(),d,m);else{let g=r();this.drop(g,d,m)}this.toolbar.resetMode(),mxEvent$1.consume(d)},h=this.toolbar.addMode(i,t,o,n,null,l),u=function(d,m,g){o(m,g)};return this.installDropHandler(h,u),h}drop(i,t,e){var n=this.editor.graph,s=n.getModel();if(e==null||s.isEdge(e)||!this.connectOnDrop||!n.isCellConnectable(e)){for(;e!=null&&!n.isValidDropTarget(e,[i],t);)e=s.getParent(e);this.insert(i,t,e)}else this.connect(i,t,e)}insert(i,t,e){var n=this.editor.graph;if(n.canImportCell(i)){var s=mxEvent$1.getClientX(t),l=mxEvent$1.getClientY(t),r=mxUtils$1.convertPoint(n.container,s,l);return n.isSplitEnabled()&&n.isSplitTarget(e,[i],t)?n.splitEdge(e,[i],null,r.x,r.y):this.editor.addVertex(e,i,r.x,r.y)}return null}connect(i,t,e){var n=this.editor.graph,s=n.getModel();if(e!=null&&n.isCellConnectable(i)&&n.isEdgeValid(null,e,i)){var l=null;s.beginUpdate();try{var r=s.getGeometry(e),o=s.getGeometry(i).clone();o.x=r.x+(r.width-o.width)/2,o.y=r.y+(r.height-o.height)/2;var h=this.spacing*n.gridSize,u=s.getDirectedEdgeCount(e,!0)*20;this.editor.horizontalFlow?o.x+=(o.width+r.width)/2+h+u:o.y+=(o.height+r.height)/2+h+u,i.setGeometry(o);var d=s.getParent(e);if(n.addCell(i,d),n.constrainChild(i),l=this.editor.createEdge(e,i),s.getGeometry(l)==null){var m=new mxGeometry;m.relative=!0,s.setGeometry(l,m)}n.addEdge(l,d,e,i)}finally{s.endUpdate()}n.setSelectionCells([i,l]),n.scrollCellToVisible(i)}}installDropHandler(i,t){var e=document.createElement("img");e.setAttribute("src",i.getAttribute("src"));var n=s=>{e.style.width=2*i.offsetWidth+"px",e.style.height=2*i.offsetHeight+"px",mxUtils$1.makeDraggable(i,this.editor.graph,t,e),mxEvent$1.removeListener(e,"load",n)};mxEvent$1.addListener(e,"load",n)}destroy(){this.resetHandler!=null&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),this.toolbar!=null&&(this.toolbar.destroy(),this.toolbar=null)}}const Ue=class Ue extends mxObjectCodec{constructor(){super(new mxDefaultToolbar)}encode(i,t){return null}decode(i,t,e){if(e!=null){var n=e.editor;for(t=t.firstChild;t!=null;){if(t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&!this.processInclude(i,t,e)){if(t.nodeName=="separator")e.addSeparator();else if(t.nodeName=="br")e.toolbar.addBreak();else if(t.nodeName=="hr")e.toolbar.addLine();else if(t.nodeName=="add"){var s=t.getAttribute("as");s=mxResources$1.get(s)||s;var l=t.getAttribute("icon"),r=t.getAttribute("pressedIcon"),o=t.getAttribute("action"),h=t.getAttribute("mode"),u=t.getAttribute("template"),d=t.getAttribute("toggle")!="0",m=mxUtils$1.getTextContent(t),g=null;if(o!=null)g=e.addItem(s,l,o,r);else if(h!=null){var x=mxUtils$1.eval(m);g=e.addMode(s,l,h,r,x)}else if(u!=null||m!=null&&m.length>0){var v=n.templates[u],C=t.getAttribute("style");v!=null&&C!=null&&(v=n.graph.cloneCell(v),v.setStyle(C));var E=null;m!=null&&m.length>0&&Ue.allowEval&&(E=mxUtils$1.eval(m)),g=e.addPrototype(s,l,v,r,E,d)}else{var b=mxUtils$1.getChildNodes(t);if(b.length>0)if(l==null)for(var w=e.addActionCombo(s),$=0;$<b.length;$++){var P=b[$];if(P.nodeName=="separator")e.addOption(w,"---");else if(P.nodeName=="add"){var M=P.getAttribute("as"),D=P.getAttribute("action");e.addActionOption(w,M,D)}}else{var k=null,Z=function(){var et=n.templates[k.value];if(et!=null){var Y=et.clone(),G=k.options[k.selectedIndex].cellStyle;return G!=null&&Y.setStyle(G),Y}else mxLog.warn("Template "+et+" not found");return null},q=e.addPrototype(s,l,Z,null,null,d);k=e.addCombo(),mxEvent$1.addListener(k,"change",function(){e.toolbar.selectMode(q,function(et){var Y=mxUtils$1.convertPoint(n.graph.container,mxEvent$1.getClientX(et),mxEvent$1.getClientY(et));return n.addVertex(null,x(),Y.x,Y.y)}),e.toolbar.noReset=!1});for(var $=0;$<b.length;$++){var P=b[$];if(P.nodeName=="separator")e.addOption(k,"---");else if(P.nodeName=="add"){var M=P.getAttribute("as"),j=P.getAttribute("template"),X=e.addOption(k,M,j||u);X.cellStyle=P.getAttribute("style")}}}}if(g!=null){var rt=t.getAttribute("id");rt!=null&&rt.length>0&&g.setAttribute("id",rt)}}}t=t.nextSibling}}return e}};c(Ue,"allowEval",!0);let mxDefaultToolbarCodec=Ue;class mxConnectionConstraint{constructor(i,t,e,n,s){this.point=i,this.perimeter=t??!0,this.name=e,this.dx=n||0,this.dy=s||0}}class mxCellState extends mxRectangle{constructor(t,e,n){super();c(this,"invalidStyle",!1);c(this,"invalid",!0);c(this,"absolutePoints",null);c(this,"visibleSourceState",null);c(this,"visibleTargetState",null);c(this,"terminalDistance",0);c(this,"length",0);c(this,"segments",null);c(this,"shape",null);c(this,"text",null);c(this,"unscaledWidth",null);c(this,"unscaledHeight",null);this.view=t,this.cell=e,this.style=n??{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}getPerimeterBounds(t,e){if(t=t||0,e=e??new mxRectangle(this.x,this.y,this.width,this.height),this.shape!=null&&this.shape.stencil!=null&&this.shape.stencil.aspect=="fixed"){var n=this.shape.stencil.computeAspect(this.style,e.x,e.y,e.width,e.height);e.x=n.x,e.y=n.y,e.width=this.shape.stencil.w0*n.width,e.height=this.shape.stencil.h0*n.height}return t!=0&&e.grow(t),e}setAbsoluteTerminalPoint(t,e){e?(this.absolutePoints==null&&(this.absolutePoints=[]),this.absolutePoints.length==0?this.absolutePoints.push(t):this.absolutePoints[0]=t):this.absolutePoints==null?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(t)):this.absolutePoints.length==1?this.absolutePoints.push(t):this.absolutePoints[this.absolutePoints.length-1]=t}setCursor(t){this.shape!=null&&this.shape.setCursor(t),this.text!=null&&this.text.setCursor(t)}getVisibleTerminal(t){var e=this.getVisibleTerminalState(t);return e!=null?e.cell:null}getVisibleTerminalState(t){return t?this.visibleSourceState:this.visibleTargetState}setVisibleTerminalState(t,e){e?this.visibleSourceState=t:this.visibleTargetState=t}getCellBounds(){return this.cellBounds}getPaintBounds(){return this.paintBounds}updateCachedBounds(){var t=this.view.translate,e=this.view.scale;this.cellBounds=new mxRectangle(this.x/e-t.x,this.y/e-t.y,this.width/e,this.height/e),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),this.shape!=null&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()}setState(t){this.view=t.view,this.cell=t.cell,this.style=t.style,this.absolutePoints=t.absolutePoints,this.origin=t.origin,this.absoluteOffset=t.absoluteOffset,this.boundingBox=t.boundingBox,this.terminalDistance=t.terminalDistance,this.segments=t.segments,this.length=t.length,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.unscaledWidth=t.unscaledWidth,this.unscaledHeight=t.unscaledHeight}clone(){var t=new mxCellState(this.view,this.cell,this.style);if(this.absolutePoints!=null){t.absolutePoints=[];for(var e=0;e<this.absolutePoints.length;e++)t.absolutePoints[e]=this.absolutePoints[e].clone()}return this.origin!=null&&(t.origin=this.origin.clone()),this.absoluteOffset!=null&&(t.absoluteOffset=this.absoluteOffset.clone()),this.boundingBox!=null&&(t.boundingBox=this.boundingBox.clone()),t.terminalDistance=this.terminalDistance,t.segments=this.segments,t.length=this.length,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.unscaledWidth=this.unscaledWidth,t.unscaledHeight=this.unscaledHeight,t}destroy(){this.view.graph.cellRenderer.destroy(this)}}const Tt=class Tt{static EntityRelation(i,t,e,n,s){var l=i.view,r=l.graph,o=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_SEGMENT,mxConstants$1.ENTITY_SEGMENT)*l.scale,h=i.absolutePoints,u=h[0],d=h[h.length-1],m=!1;if(u!=null)t=new mxCellState,t.x=u.x,t.y=u.y;else if(t!=null){var g=mxUtils$1.getPortConstraints(t,i,!0,mxConstants$1.DIRECTION_MASK_NONE);if(g!=mxConstants$1.DIRECTION_MASK_NONE&&g!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST)m=g==mxConstants$1.DIRECTION_MASK_WEST;else{var x=r.getCellGeometry(t.cell);x.relative?m=x.x<=.5:e!=null&&(m=e.x+e.width<t.x)}}else return;var v=!0;if(d!=null)e=new mxCellState,e.x=d.x,e.y=d.y;else if(e!=null){var g=mxUtils$1.getPortConstraints(e,i,!1,mxConstants$1.DIRECTION_MASK_NONE);if(g!=mxConstants$1.DIRECTION_MASK_NONE&&g!=mxConstants$1.DIRECTION_MASK_WEST+mxConstants$1.DIRECTION_MASK_EAST)v=g==mxConstants$1.DIRECTION_MASK_WEST;else{var C=r.getCellGeometry(e.cell);C.relative?v=C.x<=.5:t!=null&&(v=t.x+t.width<e.x)}}if(t!=null&&e!=null){var E=m?t.x:t.x+t.width,b=l.getRoutingCenterY(t),w=v?e.x:e.x+e.width,$=l.getRoutingCenterY(e),P=o,M=m?-P:P,D=new mxPoint(E+M,b);M=v?-P:P;var k=new mxPoint(w+M,$);if(m==v){var Z=m?Math.min(E,w)-o:Math.max(E,w)+o;s.push(new mxPoint(Z,b)),s.push(new mxPoint(Z,$))}else if(D.x<k.x==m){var q=b+($-b)/2;s.push(D),s.push(new mxPoint(D.x,q)),s.push(new mxPoint(k.x,q)),s.push(k)}else s.push(D),s.push(k)}}static Loop(i,t,e,n,s){var l=i.absolutePoints,r=l[0],o=l[l.length-1];if(r!=null&&o!=null){if(n!=null&&n.length>0)for(var h=0;h<n.length;h++){var u=n[h];u=i.view.transformControlPoint(i,u),s.push(new mxPoint(u.x,u.y))}return}if(t!=null){var d=i.view,m=d.graph,u=n!=null&&n.length>0?n[0]:null;u!=null&&(u=d.transformControlPoint(i,u),mxUtils$1.contains(t,u.x,u.y)&&(u=null));var g=0,x=0,v=0,C=0,E=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_SEGMENT,m.gridSize)*d.scale,b=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_WEST);b==mxConstants$1.DIRECTION_NORTH||b==mxConstants$1.DIRECTION_SOUTH?(g=d.getRoutingCenterX(t),x=E):(v=d.getRoutingCenterY(t),C=E),u==null||u.x<t.x||u.x>t.x+t.width?u!=null?(g=u.x,C=Math.max(Math.abs(v-u.y),C)):b==mxConstants$1.DIRECTION_NORTH?v=t.y-2*x:b==mxConstants$1.DIRECTION_SOUTH?v=t.y+t.height+2*x:b==mxConstants$1.DIRECTION_EAST?g=t.x-2*C:g=t.x+t.width+2*C:u!=null&&(g=d.getRoutingCenterX(t),x=Math.max(Math.abs(g-u.x),C),v=u.y,C=0),s.push(new mxPoint(g-x,v-C)),s.push(new mxPoint(g+x,v+C))}}static ElbowConnector(i,t,e,n,s){var l=n!=null&&n.length>0?n[0]:null,r=!1,o=!1;if(t!=null&&e!=null)if(l!=null){var h=Math.min(t.x,e.x),u=Math.max(t.x+t.width,e.x+e.width),d=Math.min(t.y,e.y),m=Math.max(t.y+t.height,e.y+e.height);l=i.view.transformControlPoint(i,l),r=l.y<d||l.y>m,o=l.x<h||l.x>u}else{var h=Math.max(t.x,e.x),u=Math.min(t.x+t.width,e.x+e.width);if(r=h==u,!r){var d=Math.max(t.y,e.y),m=Math.min(t.y+t.height,e.y+e.height);o=d==m}}!o&&(r||i.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL)?Tt.TopToBottom(i,t,e,n,s):Tt.SideToSide(i,t,e,n,s)}static SideToSide(i,t,e,n,s){var l=i.view,r=n!=null&&n.length>0?n[0]:null,o=i.absolutePoints,h=o[0],u=o[o.length-1];if(r!=null&&(r=l.transformControlPoint(i,r)),h!=null&&(t=new mxCellState,t.x=h.x,t.y=h.y),u!=null&&(e=new mxCellState,e.x=u.x,e.y=u.y),t!=null&&e!=null){var d=Math.max(t.x,e.x),m=Math.min(t.x+t.width,e.x+e.width),g=r!=null?r.x:Math.round(m+(d-m)/2),x=l.getRoutingCenterY(t),v=l.getRoutingCenterY(e);if(r!=null&&(r.y>=t.y&&r.y<=t.y+t.height&&(x=r.y),r.y>=e.y&&r.y<=e.y+e.height&&(v=r.y)),!mxUtils$1.contains(e,g,x)&&!mxUtils$1.contains(t,g,x)&&s.push(new mxPoint(g,x)),!mxUtils$1.contains(e,g,v)&&!mxUtils$1.contains(t,g,v)&&s.push(new mxPoint(g,v)),s.length==1)if(r!=null)!mxUtils$1.contains(e,g,r.y)&&!mxUtils$1.contains(t,g,r.y)&&s.push(new mxPoint(g,r.y));else{var C=Math.max(t.y,e.y),E=Math.min(t.y+t.height,e.y+e.height);s.push(new mxPoint(g,C+(E-C)/2))}}}static TopToBottom(i,t,e,n,s){var l=i.view,r=n!=null&&n.length>0?n[0]:null,o=i.absolutePoints,h=o[0],u=o[o.length-1];if(r!=null&&(r=l.transformControlPoint(i,r)),h!=null&&(t=new mxCellState,t.x=h.x,t.y=h.y),u!=null&&(e=new mxCellState,e.x=u.x,e.y=u.y),t!=null&&e!=null){var d=Math.max(t.y,e.y),m=Math.min(t.y+t.height,e.y+e.height),g=l.getRoutingCenterX(t);r!=null&&r.x>=t.x&&r.x<=t.x+t.width&&(g=r.x);var x=r!=null?r.y:Math.round(m+(d-m)/2);if(!mxUtils$1.contains(e,g,x)&&!mxUtils$1.contains(t,g,x)&&s.push(new mxPoint(g,x)),r!=null&&r.x>=e.x&&r.x<=e.x+e.width?g=r.x:g=l.getRoutingCenterX(e),!mxUtils$1.contains(e,g,x)&&!mxUtils$1.contains(t,g,x)&&s.push(new mxPoint(g,x)),s.length==1)if(r!=null&&s.length==1)!mxUtils$1.contains(e,r.x,x)&&!mxUtils$1.contains(t,r.x,x)&&s.push(new mxPoint(r.x,x));else{var v=Math.max(t.x,e.x),C=Math.min(t.x+t.width,e.x+e.width);s.push(new mxPoint(v+(C-v)/2,x))}}}static SegmentConnector(i,t,e,n,s){var l=Tt.scalePointArray(i.absolutePoints,i.view.scale),r=Tt.scaleCellState(t,i.view.scale),o=Tt.scaleCellState(e,i.view.scale),h=1,u=s.length>0?s[0]:null,d=!0,m=null;function g(rt){return rt.x=Math.round(rt.x*i.view.scale*10)/10,rt.y=Math.round(rt.y*i.view.scale*10)/10,(u==null||Math.abs(u.x-rt.x)>=h||Math.abs(u.y-rt.y)>=Math.max(1,i.view.scale))&&(s.push(rt),u=rt),u}var x=l[0];x==null&&r!=null?x=new mxPoint(i.view.getRoutingCenterX(r),i.view.getRoutingCenterY(r)):x!=null&&(x=x.clone());var v=l.length-1;if(n!=null&&n.length>0){for(var C=[],E=0;E<n.length;E++){var b=i.view.transformControlPoint(i,n[E],!0);b!=null&&C.push(b)}if(C.length==0)return;x!=null&&C[0]!=null&&(Math.abs(C[0].x-x.x)<h&&(C[0].x=x.x),Math.abs(C[0].y-x.y)<h&&(C[0].y=x.y));var w=l[v];w!=null&&C[C.length-1]!=null&&(Math.abs(C[C.length-1].x-w.x)<h&&(C[C.length-1].x=w.x),Math.abs(C[C.length-1].y-w.y)<h&&(C[C.length-1].y=w.y)),m=C[0];var $=r,P=l[0],M=!1,D=!1,k=m;P!=null&&($=null);for(var E=0;E<2;E++){var Z=P!=null&&P.x==k.x,q=P!=null&&P.y==k.y,j=$!=null&&k.y>=$.y&&k.y<=$.y+$.height,X=$!=null&&k.x>=$.x&&k.x<=$.x+$.width;if(M=q||P==null&&j,D=Z||P==null&&X,!(E==0&&(M&&D||Z&&q))){if(P!=null&&!q&&!Z&&(j||X)){d=!j;break}if(D||M){d=M,E==1&&(d=C.length%2==0?M:D);break}}$=o,P=l[v],P!=null&&($=null),k=C[C.length-1],Z&&q&&(C=C.slice(1))}d&&(l[0]!=null&&l[0].y!=m.y||l[0]==null&&r!=null&&(m.y<r.y||m.y>r.y+r.height))?g(new mxPoint(x.x,m.y)):!d&&(l[0]!=null&&l[0].x!=m.x||l[0]==null&&r!=null&&(m.x<r.x||m.x>r.x+r.width))&&g(new mxPoint(m.x,x.y)),d?x.y=m.y:x.x=m.x;for(var E=0;E<C.length;E++)d=!d,m=C[E],d?x.y=m.y:x.x=m.x,g(x.clone())}else m=x,d=!0;if(x=l[v],x==null&&o!=null&&(x=new mxPoint(i.view.getRoutingCenterX(o),i.view.getRoutingCenterY(o))),x!=null&&m!=null&&(d&&(l[v]!=null&&l[v].y!=m.y||l[v]==null&&o!=null&&(m.y<o.y||m.y>o.y+o.height))?g(new mxPoint(x.x,m.y)):!d&&(l[v]!=null&&l[v].x!=m.x||l[v]==null&&o!=null&&(m.x<o.x||m.x>o.x+o.width))&&g(new mxPoint(m.x,x.y))),l[0]==null&&r!=null)for(;s.length>1&&s[1]!=null&&mxUtils$1.contains(r,s[1].x,s[1].y);)s.splice(1,1);if(l[v]==null&&o!=null)for(;s.length>1&&s[s.length-1]!=null&&mxUtils$1.contains(o,s[s.length-1].x,s[s.length-1].y);)s.splice(s.length-1,1);w!=null&&s[s.length-1]!=null&&Math.abs(w.x-s[s.length-1].x)<=h&&Math.abs(w.y-s[s.length-1].y)<=h&&(s.splice(s.length-1,1),s[s.length-1]!=null&&(Math.abs(s[s.length-1].x-w.x)<h&&(s[s.length-1].x=w.x),Math.abs(s[s.length-1].y-w.y)<h&&(s[s.length-1].y=w.y)))}static getJettySize(i,t){var e=mxUtils$1.getValue(i.style,t?mxConstants$1.STYLE_SOURCE_JETTY_SIZE:mxConstants$1.STYLE_TARGET_JETTY_SIZE,mxUtils$1.getValue(i.style,mxConstants$1.STYLE_JETTY_SIZE,Tt.orthBuffer));if(e=="auto"){var n=mxUtils$1.getValue(i.style,t?mxConstants$1.STYLE_STARTARROW:mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE);if(n!=mxConstants$1.NONE){var s=mxUtils$1.getNumber(i.style,t?mxConstants$1.STYLE_STARTSIZE:mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE);e=Math.max(2,Math.ceil((s+Tt.orthBuffer)/Tt.orthBuffer))*Tt.orthBuffer}else e=2*Tt.orthBuffer}return e}static scalePointArray(i,t){var e=[];if(i!=null)for(var n=0;n<i.length;n++)if(i[n]!=null){var s=new mxPoint(Math.round(i[n].x/t*10)/10,Math.round(i[n].y/t*10)/10);e[n]=s}else e[n]=null;else e=null;return e}static scaleCellState(i,t){var e=null;return i!=null?(e=i.clone(),e.setRect(Math.round(i.x/t*10)/10,Math.round(i.y/t*10)/10,Math.round(i.width/t*10)/10,Math.round(i.height/t*10)/10)):e=null,e}static OrthConnector(i,t,e,n,s){var l=i.view.graph,r=u==null?!1:l.getModel().isEdge(u.cell),o=d==null?!1:l.getModel().isEdge(d.cell),h=Tt.scalePointArray(i.absolutePoints,i.view.scale),u=Tt.scaleCellState(t,i.view.scale),d=Tt.scaleCellState(e,i.view.scale),m=h[0],g=h[h.length-1],x=u!=null?u.x:m.x,v=u!=null?u.y:m.y,C=u!=null?u.width:0,E=u!=null?u.height:0,b=d!=null?d.x:g.x,w=d!=null?d.y:g.y,$=d!=null?d.width:0,P=d!=null?d.height:0,M=Tt.getJettySize(i,!0),D=Tt.getJettySize(i,!1);u!=null&&d==u&&(D=Math.max(M,D),M=D);var k=D+M,Z=!1;if(m!=null&&g!=null){var K=g.x-m.x,nt=g.y-m.y;Z=K*K+nt*nt<k*k}if(Z||n!=null&&n.length>0||r||o){Tt.SegmentConnector(i,t,e,n,s);return}var q=[mxConstants$1.DIRECTION_MASK_ALL,mxConstants$1.DIRECTION_MASK_ALL],j=0;if(u!=null&&(q[0]=mxUtils$1.getPortConstraints(u,i,!0,mxConstants$1.DIRECTION_MASK_ALL),j=mxUtils$1.getValue(u.style,mxConstants$1.STYLE_ROTATION,0),j!=0)){var X=mxUtils$1.getBoundingBox(new mxRectangle(x,v,C,E),j);x=X.x,v=X.y,C=X.width,E=X.height}if(d!=null&&(q[1]=mxUtils$1.getPortConstraints(d,i,!1,mxConstants$1.DIRECTION_MASK_ALL),j=mxUtils$1.getValue(d.style,mxConstants$1.STYLE_ROTATION,0),j!=0)){var X=mxUtils$1.getBoundingBox(new mxRectangle(b,w,$,P),j);b=X.x,w=X.y,$=X.width,P=X.height}for(var rt=[0,0],et=[[x,v,C,E],[b,w,$,P]],Y=[M,D],G=0;G<2;G++)Tt.limits[G][1]=et[G][0]-Y[G],Tt.limits[G][2]=et[G][1]-Y[G],Tt.limits[G][4]=et[G][0]+et[G][2]+Y[G],Tt.limits[G][8]=et[G][1]+et[G][3]+Y[G];var J=et[0][0]+et[0][2]/2,tt=et[0][1]+et[0][3]/2,gt=et[1][0]+et[1][2]/2,dt=et[1][1]+et[1][3]/2,K=J-gt,nt=tt-dt,ht=0;K<0?nt<0?ht=2:ht=1:nt<=0&&(ht=3,K==0&&(ht=2));var bt=null;u!=null&&(bt=m);for(var $t=[[.5,.5],[.5,.5]],G=0;G<2;G++)bt!=null&&($t[G][0]=(bt.x-et[G][0])/et[G][2],Math.abs(bt.x-et[G][0])<=1?rt[G]=mxConstants$1.DIRECTION_MASK_WEST:Math.abs(bt.x-et[G][0]-et[G][2])<=1&&(rt[G]=mxConstants$1.DIRECTION_MASK_EAST),$t[G][1]=(bt.y-et[G][1])/et[G][3],Math.abs(bt.y-et[G][1])<=1?rt[G]=mxConstants$1.DIRECTION_MASK_NORTH:Math.abs(bt.y-et[G][1]-et[G][3])<=1&&(rt[G]=mxConstants$1.DIRECTION_MASK_SOUTH)),bt=null,d!=null&&(bt=g);var Dt=et[0][1]-(et[1][1]+et[1][3]),ct=et[0][0]-(et[1][0]+et[1][2]),Et=et[1][1]-(et[0][1]+et[0][3]),Ht=et[1][0]-(et[0][0]+et[0][2]);Tt.vertexSeperations[1]=Math.max(ct-k,0),Tt.vertexSeperations[2]=Math.max(Dt-k,0),Tt.vertexSeperations[4]=Math.max(Et-k,0),Tt.vertexSeperations[3]=Math.max(Ht-k,0);var Ot=[],Nt=[],lt=[];Nt[0]=ct>=Ht?mxConstants$1.DIRECTION_MASK_WEST:mxConstants$1.DIRECTION_MASK_EAST,lt[0]=Dt>=Et?mxConstants$1.DIRECTION_MASK_NORTH:mxConstants$1.DIRECTION_MASK_SOUTH,Nt[1]=mxUtils$1.reversePortConstraints(Nt[0]),lt[1]=mxUtils$1.reversePortConstraints(lt[0]);for(var yt=ct>=Ht?ct:Ht,_t=Dt>=Et?Dt:Et,Rt=[[0,0],[0,0]],Yt=!1,G=0;G<2;G++)rt[G]==0&&(Nt[G]&q[G]||(Nt[G]=mxUtils$1.reversePortConstraints(Nt[G])),lt[G]&q[G]||(lt[G]=mxUtils$1.reversePortConstraints(lt[G])),Rt[G][0]=lt[G],Rt[G][1]=Nt[G]);_t>0&&yt>0&&((Nt[0]&q[0])>0&&(lt[1]&q[1])>0?(Rt[0][0]=Nt[0],Rt[0][1]=lt[0],Rt[1][0]=lt[1],Rt[1][1]=Nt[1],Yt=!0):(lt[0]&q[0])>0&&(Nt[1]&q[1])>0&&(Rt[0][0]=lt[0],Rt[0][1]=Nt[0],Rt[1][0]=Nt[1],Rt[1][1]=lt[1],Yt=!0)),_t>0&&!Yt&&(Rt[0][0]=lt[0],Rt[0][1]=Nt[0],Rt[1][0]=lt[1],Rt[1][1]=Nt[1],Yt=!0),yt>0&&!Yt&&(Rt[0][0]=Nt[0],Rt[0][1]=lt[0],Rt[1][0]=Nt[1],Rt[1][1]=lt[1],Yt=!0);for(var G=0;G<2;G++)rt[G]==0&&(Rt[G][0]&q[G]||(Rt[G][0]=Rt[G][1]),Ot[G]=Rt[G][0]&q[G],Ot[G]|=(Rt[G][1]&q[G])<<8,Ot[G]|=(Rt[1-G][G]&q[G])<<16,Ot[G]|=(Rt[1-G][1-G]&q[G])<<24,Ot[G]&15||(Ot[G]=Ot[G]<<8),Ot[G]&3840||(Ot[G]=Ot[G]&15|Ot[G]>>8),Ot[G]&983040||(Ot[G]=Ot[G]&65535|(Ot[G]&251658240)>>8),rt[G]=Ot[G]&15,(q[G]==mxConstants$1.DIRECTION_MASK_WEST||q[G]==mxConstants$1.DIRECTION_MASK_NORTH||q[G]==mxConstants$1.DIRECTION_MASK_EAST||q[G]==mxConstants$1.DIRECTION_MASK_SOUTH)&&(rt[G]=q[G]));var Zt=rt[0]==mxConstants$1.DIRECTION_MASK_EAST?3:rt[0],Qt=rt[1]==mxConstants$1.DIRECTION_MASK_EAST?3:rt[1];Zt-=ht,Qt-=ht,Zt<1&&(Zt+=4),Qt<1&&(Qt+=4);var Wt=Tt.routePatterns[Zt-1][Qt-1];switch(Tt.wayPoints1[0][0]=et[0][0],Tt.wayPoints1[0][1]=et[0][1],rt[0]){case mxConstants$1.DIRECTION_MASK_WEST:Tt.wayPoints1[0][0]-=M,Tt.wayPoints1[0][1]+=$t[0][1]*et[0][3];break;case mxConstants$1.DIRECTION_MASK_SOUTH:Tt.wayPoints1[0][0]+=$t[0][0]*et[0][2],Tt.wayPoints1[0][1]+=et[0][3]+M;break;case mxConstants$1.DIRECTION_MASK_EAST:Tt.wayPoints1[0][0]+=et[0][2]+M,Tt.wayPoints1[0][1]+=$t[0][1]*et[0][3];break;case mxConstants$1.DIRECTION_MASK_NORTH:Tt.wayPoints1[0][0]+=$t[0][0]*et[0][2],Tt.wayPoints1[0][1]-=M;break}for(var Bt=0,S=(rt[0]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,A=S,I=0,G=0;G<Wt.length;G++){var N=Wt[G]&15,_=N==mxConstants$1.DIRECTION_MASK_EAST?3:N;_+=ht,_>4&&(_-=4);var V=Tt.dirVectors[_-1];I=_%2>0?0:1,I!=S&&(Bt++,Tt.wayPoints1[Bt][0]=Tt.wayPoints1[Bt-1][0],Tt.wayPoints1[Bt][1]=Tt.wayPoints1[Bt-1][1]);var W=(Wt[G]&Tt.TARGET_MASK)>0,ot=(Wt[G]&Tt.SOURCE_MASK)>0,at=(Wt[G]&Tt.SIDE_MASK)>>5;at=at<<ht,at>15&&(at=at>>4);var mt=(Wt[G]&Tt.CENTER_MASK)>0;if((ot||W)&&at<9){var Lt=0,Ct=ot?0:1;if(mt&&I==0?Lt=et[Ct][0]+$t[Ct][0]*et[Ct][2]:mt?Lt=et[Ct][1]+$t[Ct][1]*et[Ct][3]:Lt=Tt.limits[Ct][at],I==0){var Ut=Tt.wayPoints1[Bt][0],Mt=(Lt-Ut)*V[0];Mt>0&&(Tt.wayPoints1[Bt][0]+=V[0]*Mt)}else{var Vt=Tt.wayPoints1[Bt][1],Kt=(Lt-Vt)*V[1];Kt>0&&(Tt.wayPoints1[Bt][1]+=V[1]*Kt)}}else mt&&(Tt.wayPoints1[Bt][0]+=V[0]*Math.abs(Tt.vertexSeperations[_]/2),Tt.wayPoints1[Bt][1]+=V[1]*Math.abs(Tt.vertexSeperations[_]/2));Bt>0&&Tt.wayPoints1[Bt][I]==Tt.wayPoints1[Bt-1][I]?Bt--:S=I}for(var G=0;G<=Bt;G++){if(G==Bt){var Jt=(rt[1]&(mxConstants$1.DIRECTION_MASK_EAST|mxConstants$1.DIRECTION_MASK_WEST))>0?0:1,re=Jt==A?0:1;if(re!=(Bt+1)%2)break}s.push(new mxPoint(Math.round(Tt.wayPoints1[G][0]*i.view.scale*10)/10,Math.round(Tt.wayPoints1[G][1]*i.view.scale*10)/10))}for(var jt=1;jt<s.length;)s[jt-1]==null||s[jt]==null||s[jt-1].x!=s[jt].x||s[jt-1].y!=s[jt].y?jt++:s.splice(jt,1)}static getRoutePattern(i,t,e,n){var s=i[0]==mxConstants$1.DIRECTION_MASK_EAST?3:i[0],l=i[1]==mxConstants$1.DIRECTION_MASK_EAST?3:i[1];s-=t,l-=t,s<1&&(s+=4),l<1&&(l+=4);var r=Tt.routePatterns[s-1][l-1];return(e==0||n==0)&&Tt.inlineRoutePatterns[s-1][l-1]!=null&&(r=Tt.inlineRoutePatterns[s-1][l-1]),r}};c(Tt,"orthBuffer",10),c(Tt,"orthPointsFallback",!0),c(Tt,"dirVectors",[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]]),c(Tt,"wayPoints1",[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]),c(Tt,"routePatterns",[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]]),c(Tt,"inlineRoutePatterns",[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]]),c(Tt,"vertexSeperations",[]),c(Tt,"limits",[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),c(Tt,"LEFT_MASK",32),c(Tt,"TOP_MASK",64),c(Tt,"RIGHT_MASK",128),c(Tt,"BOTTOM_MASK",256),c(Tt,"LEFT",1),c(Tt,"TOP",2),c(Tt,"RIGHT",4),c(Tt,"BOTTOM",8),c(Tt,"SIDE_MASK",480),c(Tt,"CENTER_MASK",512),c(Tt,"SOURCE_MASK",1024),c(Tt,"TARGET_MASK",2048),c(Tt,"VERTEX_MASK",3072);let mxEdgeStyle=Tt;class mxCellMarker extends mxEventSource{constructor(t,e,n,s){super();c(this,"graph",null);c(this,"enabled",!0);c(this,"hotspot",mxConstants$1.DEFAULT_HOTSPOT);c(this,"hotspotEnabled",!1);c(this,"validColor",null);c(this,"invalidColor",null);c(this,"currentColor",null);c(this,"validState",null);c(this,"markedState",null);t!=null&&(this.graph=t,this.validColor=e??mxConstants$1.DEFAULT_VALID_COLOR,this.invalidColor=n??mxConstants$1.DEFAULT_INVALID_COLOR,this.hotspot=s??mxConstants$1.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(t))}setEnabled(t){this.enabled=t}isEnabled(){return this.enabled}setHotspot(t){this.hotspot=t}getHotspot(){return this.hotspot}setHotspotEnabled(t){this.hotspotEnabled=t}isHotspotEnabled(){return this.hotspotEnabled}hasValidState(){return this.validState!=null}getValidState(){return this.validState}getMarkedState(){return this.markedState}reset(){this.validState=null,this.markedState!=null&&(this.markedState=null,this.unmark())}process(t){var e=null;return this.isEnabled()&&(e=this.getState(t),this.setCurrentState(e,t)),e}setCurrentState(t,e,n){var s=t!=null?this.isValidState(t):!1;n=n??this.getMarkerColor(e.getEvent(),t,s),s?this.validState=t:this.validState=null,(t!=this.markedState||n!=this.currentColor)&&(this.currentColor=n,t!=null&&this.currentColor!=null?(this.markedState=t,this.mark()):this.markedState!=null&&(this.markedState=null,this.unmark()))}markCell(t,e){var n=this.graph.getView().getState(t);n!=null&&(this.currentColor=e??this.validColor,this.markedState=n,this.mark())}mark(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject$1(mxEvent$1.MARK,"state",this.markedState))}unmark(){this.mark()}isValidState(t){return!0}getMarkerColor(t,e,n){return n?this.validColor:this.invalidColor}getState(t){var e=this.graph.getView(),n=this.getCell(t),s=this.getStateToMark(e.getState(n));return s!=null&&this.intersects(s,t)?s:null}getCell(t){return t.getCell()}getStateToMark(t){return t}intersects(t,e){return this.hotspotEnabled?mxUtils$1.intersectsHotspot(t,e.getGraphX(),e.getGraphY(),this.hotspot,mxConstants$1.MIN_HOTSPOT_SIZE,mxConstants$1.MAX_HOTSPOT_SIZE):!0}destroy(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()}}class EdgeCellMarker extends mxCellMarker{constructor(i,t){super(t),this.edgeHandler=i}getCell(i){var t=super.getCell(i);if((t==this.edgeHandler.state.cell||t==null)&&this.edgeHandler.currentPoint!=null&&(t=this.edgeHandler.graph.getCellAt(this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)),t!=null&&!this.edgeHandler.graph.isCellConnectable(t)){var e=this.edgeHandler.graph.getModel().getParent(t);this.edgeHandler.graph.getModel().isVertex(e)&&this.edgeHandler.graph.isCellConnectable(e)&&(t=e)}var n=this.edgeHandler.graph.getModel();return(this.edgeHandler.graph.isSwimlane(t)&&this.edgeHandler.currentPoint!=null&&this.edgeHandler.graph.hitsSwimlaneContent(t,this.edgeHandler.currentPoint.x,this.edgeHandler.currentPoint.y)||!this.edgeHandler.isConnectableCell(t)||t==this.edgeHandler.state.cell||t!=null&&!this.edgeHandler.graph.connectableEdges&&n.isEdge(t)||n.isAncestor(this.edgeHandler.state.cell,t))&&(t=null),this.edgeHandler.graph.isCellConnectable(t)||(t=null),t}isValidState(i){var t=this.edgeHandler.graph.getModel(),e=this.edgeHandler.graph.view.getTerminalPort(i,this.edgeHandler.graph.view.getState(t.getTerminal(this.edgeHandler.state.cell,!this.edgeHandler.isSource)),!this.edgeHandler.isSource),n=e!=null?e.cell:null,s=this.edgeHandler.isSource?i.cell:n,l=this.edgeHandler.isSource?n:i.cell;return this.edgeHandler.error=this.edgeHandler.validateConnection(s,l),this.edgeHandler.error==null}}class mxGraphHandler{constructor(i){c(this,"enabled",!0);c(this,"highlightEnabled",!0);c(this,"cloneEnabled",!0);c(this,"moveEnabled",!0);c(this,"guide",null);c(this,"currentDx",null);c(this,"currentDy",null);c(this,"updateCursor",!0);c(this,"selectEnabled",!0);c(this,"connectOnDrop",!1);c(this,"scrollOnMove",!0);c(this,"minimumSize",6);c(this,"previewColor","black");c(this,"htmlPreview",!1);c(this,"shape",null);c(this,"scaleGrid",!1);c(this,"rotationEnabled",!0);c(this,"allowLivePreview",mxClient.IS_SVG);this.graph=i,this.graph.addMouseListener(this),this.panHandler=()=>{this.suspended||(this.updatePreview(),this.updateHint())},this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.escapeHandler=(t,e)=>{this.reset()},this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler),this.refreshHandler=(t,e)=>{window.setTimeout(()=>{if(this.first!=null&&!this.suspended){var n=this.currentDx,s=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.pBounds==null?this.reset():(this.currentDx=n,this.currentDy=s,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1))}},0)},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.keyHandler=t=>{if(this.graph.container!=null&&this.graph.container.style.visibility!="hidden"&&this.first!=null&&!this.suspended){var e=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();e!=this.cloning&&(this.cloning=e,this.checkPreview(),this.updatePreview())}},mxEvent$1.addListener(document,"keydown",this.keyHandler),mxEvent$1.addListener(document,"keyup",this.keyHandler)}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}isCloneEnabled(){return this.cloneEnabled}setCloneEnabled(i){this.cloneEnabled=i}isMoveEnabled(){return this.moveEnabled}setMoveEnabled(i){this.moveEnabled=i}isSelectEnabled(){return this.selectEnabled}setSelectEnabled(i){this.selectEnabled=i}isRemoveCellsFromParent(){return this.removeCellsFromParent}setRemoveCellsFromParent(i){this.removeCellsFromParent=i}isPropagateSelectionCell(i,t,e){var n=this.graph.model.getParent(i);if(t){var s=this.graph.getCellGeometry(i);return!this.graph.model.isEdge(i)&&!this.graph.model.isEdge(n)&&!this.graph.isSiblingSelected(i)&&(s==null||s.relative||!this.graph.isSwimlane(n))}else return(!this.graph.isToggleEvent(e.getEvent())||!this.graph.isSiblingSelected(i)&&!this.graph.isCellSelected(i)&&!this.graph.isSwimlane(n)||this.graph.isCellSelected(n))&&(this.graph.isToggleEvent(e.getEvent())||!this.graph.isCellSelected(n))}getInitialCellForEvent(i){var t=i.getState();if((!this.graph.isToggleEvent(i.getEvent())||!mxEvent$1.isAltDown(i.getEvent()))&&t!=null&&!this.graph.isCellSelected(t.cell))for(var e=this.graph.model,n=this.graph.view.getState(e.getParent(t.cell));n!=null&&!this.graph.isCellSelected(n.cell)&&(e.isVertex(n.cell)||e.isEdge(n.cell))&&this.isPropagateSelectionCell(t.cell,!0,i);)t=n,n=this.graph.view.getState(this.graph.getModel().getParent(t.cell));return t!=null?t.cell:null}isDelayedSelection(i,t){if(!this.graph.isToggleEvent(t.getEvent())||!mxEvent$1.isAltDown(t.getEvent()))for(;i!=null;){if(this.graph.selectionCellsHandler.isHandled(i))return this.graph.cellEditor.getEditingCell()!=i;i=this.graph.model.getParent(i)}return this.graph.isToggleEvent(t.getEvent())&&!mxEvent$1.isAltDown(t.getEvent())}selectDelayed(i){if(!this.graph.popupMenuHandler.isPopupTrigger(i)){var t=i.getCell();t==null&&(t=this.cell);var e=this.graph.view.getState(t);if(e!=null)if(i.isSource(e.control))this.graph.selectCellForEvent(t,i.getEvent());else{if(!this.graph.isToggleEvent(i.getEvent())||!mxEvent$1.isAltDown(i.getEvent()))for(var n=this.graph.getModel(),s=n.getParent(t);this.graph.view.getState(s)!=null&&(n.isVertex(s)||n.isEdge(s))&&this.isPropagateSelectionCell(t,!1,i);)t=s,s=n.getParent(t);this.graph.selectCellForEvent(t,i.getEvent())}}}consumeMouseEvent(i,t){t.consume()}mouseDown(i,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&t.getState()!=null&&!mxEvent$1.isMultiTouchEvent(t.getEvent())){var e=this.getInitialCellForEvent(t);if(this.delayedSelection=this.isDelayedSelection(e,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(e,t.getEvent()),this.isMoveEnabled()){var n=this.graph.model,s=n.getGeometry(e);this.graph.isCellMovable(e)&&(!n.isEdge(e)||this.graph.getSelectionCount()>1||s.points!=null&&s.points.length>0||n.getTerminal(e,!0)==null||n.getTerminal(e,!1)==null||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(e,t.getX(),t.getY()):this.delayedSelection&&(this.cell=e),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent$1.MOUSE_DOWN,t)}}}getGuideStates(){var i=this.graph.getDefaultParent(),t=this.graph.getModel(),e=n=>this.graph.view.getState(n)!=null&&t.isVertex(n)&&t.getGeometry(n)!=null&&!t.getGeometry(n).relative;return this.graph.view.getCellStates(t.filterDescendants(e,i))}getCells(i){return!this.delayedSelection&&this.graph.isCellMovable(i)?[i]:this.graph.getMovableCells(this.graph.getSelectionCells())}getPreviewBounds(i){var t=this.getBoundingBox(i);if(t!=null){if(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize){var e=this.minimumSize-t.width;t.x-=e/2,t.width=this.minimumSize}else t.x=Math.round(t.x),t.width=Math.ceil(t.width);if(this.graph.view.translate,this.graph.view.scale,t.height<this.minimumSize){var n=this.minimumSize-t.height;t.y-=n/2,t.height=this.minimumSize}else t.y=Math.round(t.y),t.height=Math.ceil(t.height)}return t}getBoundingBox(i){var t=null;if(i!=null&&i.length>0){for(var e=this.graph.getModel(),n=0;n<i.length;n++)if(e.isVertex(i[n])||e.isEdge(i[n])){var s=this.graph.view.getState(i[n]);if(s!=null){var l=s;e.isVertex(i[n])&&s.shape!=null&&s.shape.boundingBox!=null&&(l=s.shape.boundingBox),t==null?t=mxRectangle.fromRectangle(l):t.add(l)}}}return t}createPreviewShape(i){var t=new mxRectangleShape(i,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants$1.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t}start(i,t,e,n){this.cell=i,this.first=mxUtils$1.convertPoint(this.graph.container,t,e),this.cells=n??this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,this.cellCount=0;for(var s=0;s<this.cells.length;s++)this.cellCount+=this.addStates(this.cells[s],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());for(var l=this.graph.model.getParent(i),r=this.graph.model.getChildCount(l)<2,o=new mxDictionary,h=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),s=0;s<h.length;s++){var u=this.graph.view.getState(h[s]);u!=null&&!o.get(u)&&o.put(u,!0)}this.guide.isStateIgnored=d=>{var m=this.graph.model.getParent(d.cell);return d.cell!=null&&(!this.cloning&&this.isCellMoving(d.cell)||d.cell!=(this.target||l)&&!r&&!o.get(d)&&(this.target==null||this.graph.model.getChildCount(this.target)>=2)&&m!=(this.target||l))}}}addStates(i,t){var e=this.graph.view.getState(i),n=0;if(e!=null&&t.get(i)==null){t.put(i,e),n++;for(var s=this.graph.model.getChildCount(i),l=0;l<s;l++)n+=this.addStates(this.graph.model.getChildAt(i,l),t)}return n}isCellMoving(i){return this.allCells.get(i)!=null}useGuidesForEvent(i){return this.guide!=null?this.guide.isEnabledForEvent(i.getEvent())&&!this.graph.isConstrainedEvent(i.getEvent()):!0}snap(i){var t=this.scaleGrid?this.graph.view.scale:1;return i.x=this.graph.snap(i.x/t)*t,i.y=this.graph.snap(i.y/t)*t,i}getDelta(i){var t=mxUtils$1.convertPoint(this.graph.container,i.getX(),i.getY());return new mxPoint(t.x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)}updateHint(i){}removeHint(){}roundLength(i){return Math.round(i*100)/100}isValidDropTarget(i,t){return this.graph.model.getParent(this.cell)!=i}checkPreview(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&this.shape==null&&(this.shape=this.createPreviewShape(this.bounds))}mouseMove(i,t){var e=this.graph;if(!t.isConsumed()&&e.isMouseDown&&this.cell!=null&&this.first!=null&&this.bounds!=null&&!this.suspended){if(mxEvent$1.isMultiTouchEvent(t.getEvent())){this.reset();return}var n=this.getDelta(t),s=e.tolerance;if(this.shape!=null||this.livePreviewActive||Math.abs(n.x)>s||Math.abs(n.y)>s){this.highlight==null&&(this.highlight=new mxCellHighlight(this.graph,mxConstants$1.DROP_TARGET_COLOR,3));var l=e.isCloneEvent(t.getEvent())&&e.isCellsCloneable()&&this.isCloneEnabled(),r=e.isGridEnabledEvent(t.getEvent()),o=t.getCell(),h=!0,u=null;this.cloning=l,e.isDropEnabled()&&this.highlightEnabled&&(u=e.getDropTarget(this.cells,t.getEvent(),o,l));var d=e.getView().getState(u),m=!1;if(d!=null&&(l||this.isValidDropTarget(u,t)))this.target!=u&&(this.target=u,this.setHighlightColor(mxConstants$1.DROP_TARGET_COLOR)),m=!0;else if(this.target=null,this.connectOnDrop&&o!=null&&this.cells.length==1&&e.getModel().isVertex(o)&&e.isCellConnectable(o)&&(d=e.getView().getState(o),d!=null)){var g=e.getEdgeValidationError(null,this.cell,o),x=g==null?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(x),m=!0}d!=null&&m?this.highlight.highlight(d):this.highlight.hide(),this.guide!=null&&this.useGuidesForEvent(t)?(n=this.guide.move(this.bounds,n,r,l),h=!1):n=this.graph.snapDelta(n,this.bounds,!r,!1,!1),this.guide!=null&&h&&this.guide.hide(),e.isConstrainedEvent(t.getEvent())&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),this.checkPreview(),(this.currentDx!=n.x||this.currentDy!=n.y)&&(this.currentDx=n.x,this.currentDy=n.y,this.updatePreview())}this.updateHint(t),this.consumeMouseEvent(mxEvent$1.MOUSE_MOVE,t),mxEvent$1.consume(t.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!t.isConsumed()&&(t.getState()!=null||t.sourceState!=null)&&!e.isMouseDown){var v=e.getCursorForMouseEvent(t);v==null&&e.isEnabled()&&e.isCellMovable(t.getCell())&&(e.getModel().isEdge(t.getCell())?v=mxConstants$1.CURSOR_MOVABLE_EDGE:v=mxConstants$1.CURSOR_MOVABLE_VERTEX),v!=null&&t.sourceState!=null&&t.sourceState.setCursor(v)}}updatePreview(i){this.livePreviewUsed&&!i?this.cells!=null&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()}updatePreviewShape(){this.shape!=null&&this.pBounds!=null&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())}updateLivePreview(i,t){if(!this.suspended){var e=[];if(this.allCells!=null&&this.allCells.visit((v,C)=>{if(this.graph.view.getState(C.cell)==null)C.destroy();else{var E=C.clone();e.push([C,E]),C.shape!=null&&(C.shape.originalPointerEvents==null&&(C.shape.originalPointerEvents=C.shape.pointerEvents),C.shape.pointerEvents=!1,C.text!=null&&(C.text.originalPointerEvents==null&&(C.text.originalPointerEvents=C.text.pointerEvents),C.text.pointerEvents=!1)),this.graph.model.isVertex(C.cell)&&(C.x+=i,C.y+=t,this.cloning||(C.view.graph.cellRenderer.redraw(C,!0),C.view.invalidate(C.cell),C.invalid=!1,C.control!=null&&C.control.node!=null&&(C.control.node.style.visibility="hidden")))}}),e.length==0)this.reset();else{for(var n=this.graph.view.scale,s=0;s<e.length;s++){var l=e[s][0];if(this.graph.model.isEdge(l.cell)){var r=this.graph.getCellGeometry(l.cell),o=[];if(r!=null&&r.points!=null)for(var h=0;h<r.points.length;h++)r.points[h]!=null&&o.push(new mxPoint(r.points[h].x+i/n,r.points[h].y+t/n));var u=l.visibleSourceState,d=l.visibleTargetState,m=e[s][1].absolutePoints;if(u==null||!this.isCellMoving(u.cell)){var g=m[0];l.setAbsoluteTerminalPoint(new mxPoint(g.x+i,g.y+t),!0),u=null}else l.view.updateFixedTerminalPoint(l,u,!0,this.graph.getConnectionConstraint(l,u,!0));if(d==null||!this.isCellMoving(d.cell)){var x=m[m.length-1];l.setAbsoluteTerminalPoint(new mxPoint(x.x+i,x.y+t),!1),d=null}else l.view.updateFixedTerminalPoint(l,d,!1,this.graph.getConnectionConstraint(l,d,!1));l.view.updatePoints(l,o,u,d),l.view.updateFloatingTerminalPoints(l,u,d),l.view.updateEdgeLabelOffset(l),l.invalid=!1,this.cloning||l.view.graph.cellRenderer.redraw(l,!0)}}this.graph.view.validate(),this.redrawHandles(e),this.resetPreviewStates(e)}}}redrawHandles(i){for(var t=0;t<i.length;t++){var e=this.graph.selectionCellsHandler.getHandler(i[t][0].cell);e!=null&&e.redraw(!0)}}resetPreviewStates(i){for(var t=0;t<i.length;t++)i[t][0].setState(i[t][1])}suspend(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),this.shape!=null&&(this.shape.node.style.visibility="hidden"),this.guide!=null&&this.guide.setVisible(!1),this.suspended=!0)}resume(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),this.shape!=null&&(this.shape.node.style.visibility="visible"),this.guide!=null&&this.guide.setVisible(!0))}resetLivePreview(){this.allCells!=null&&(this.allCells.visit((i,t)=>{t.shape!=null&&t.shape.originalPointerEvents!=null&&(t.shape.pointerEvents=t.shape.originalPointerEvents,t.shape.originalPointerEvents=null,t.shape.bounds=null,t.text!=null&&(t.text.pointerEvents=t.text.originalPointerEvents,t.text.originalPointerEvents=null)),t.control!=null&&t.control.node!=null&&t.control.node.style.visibility=="hidden"&&(t.control.node.style.visibility=""),t.view.invalidate(t.cell)}),this.graph.view.validate())}setHandlesVisibleForCells(i,t){if(this.handlesVisible!=t){this.handlesVisible=t;for(var e=0;e<i.length;e++){var n=this.graph.selectionCellsHandler.getHandler(i[e]);n!=null&&(n.setHandlesVisible(t),t&&n.redraw())}}}setHighlightColor(i){this.highlight!=null&&this.highlight.setHighlightColor(i)}mouseUp(i,t){if(!t.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),this.cell!=null&&this.first!=null&&(this.shape!=null||this.livePreviewUsed)&&this.currentDx!=null&&this.currentDy!=null){var e=this.graph,n=t.getCell();if(this.connectOnDrop&&this.target==null&&n!=null&&e.getModel().isVertex(n)&&e.isCellConnectable(n)&&e.isEdgeValid(null,this.cell,n))e.connectionHandler.connect(this.cell,n,t.getEvent());else{var s=e.isCloneEvent(t.getEvent())&&e.isCellsCloneable()&&this.isCloneEnabled(),l=e.getView().scale,r=this.roundLength(this.currentDx/l),o=this.roundLength(this.currentDy/l),h=this.target;e.isSplitEnabled()&&e.isSplitTarget(h,this.cells,t.getEvent())?e.splitEdge(h,this.cells,null,r,o,t.getGraphX(),t.getGraphY()):this.moveCells(this.cells,r,o,s,this.target,t.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&this.cell!=null&&this.selectDelayed(t);this.cellWasClicked&&this.consumeMouseEvent(mxEvent$1.MOUSE_UP,t),this.reset()}reset(){if(this.livePreviewUsed){this.resetLivePreview();try{this.setHandlesVisibleForCells(this.graph.selectionCelltresHandler.getHandledSelectionCells(),!0)}catch{}}this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null}shouldRemoveCellsFromParent(i,t,e){if(this.graph.getModel().isVertex(i)){var n=this.graph.getView().getState(i);if(n!=null){var s=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),l=mxUtils$1.toRadians(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ROTATION)||0);if(l!=0){var r=Math.cos(-l),o=Math.sin(-l),h=new mxPoint(n.getCenterX(),n.getCenterY());s=mxUtils$1.getRotatedPoint(s,r,o,h)}return!mxUtils$1.contains(n,s.x,s.y)}}return!1}moveCells(i,t,e,n,s,l){n&&(i=this.graph.getCloneableCells(i));var r=this.graph.getModel().getParent(this.cell);s==null&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(r,i,l)&&(s=this.graph.getDefaultParent()),n=n&&!this.graph.isCellLocked(s||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var o=[];if(!n&&s!=null&&this.removeEmptyParents){for(var h=new mxDictionary,u=0;u<i.length;u++)h.put(i[u],!0);for(var u=0;u<i.length;u++){var d=this.graph.model.getParent(i[u]);d!=null&&!h.get(d)&&(h.put(d,!0),o.push(d))}}i=this.graph.moveCells(i,t,e,n,s,l);for(var m=[],u=0;u<o.length;u++)this.shouldRemoveParent(o[u])&&m.push(o[u]);this.graph.removeCells(m,!1)}finally{this.graph.getModel().endUpdate()}n&&this.graph.setSelectionCells(i),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(i[0])}shouldRemoveParent(i){var t=this.graph.view.getState(i);return t!=null&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&this.graph.model.getChildCount(t.cell)==0&&this.graph.isTransparentState(t)}destroyShapes(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.guide!=null&&(this.guide.destroy(),this.guide=null),this.highlight!=null&&(this.highlight.destroy(),this.highlight=null)}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.refreshHandler!=null&&(this.graph.getModel().removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent$1.removeListener(document,"keydown",this.keyHandler),mxEvent$1.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()}}c(mxGraphHandler,"maxCells",50),c(mxGraphHandler,"guidesEnabled",!1),c(mxGraphHandler,"handlesVisible",!0),c(mxGraphHandler,"removeCellsFromParent",!0),c(mxGraphHandler,"removeEmptyParents",!1),c(mxGraphHandler,"maxLivePreview",0);class mxImage{constructor(i,t,e){this.src=i,this.width=t,this.height=e}}class mxConstraintHandler{constructor(i){c(this,"pointImage",new mxImage(mxClient.imageBasePath+"/point.gif",5,5));c(this,"enabled",!0);c(this,"highlightColor",mxConstants$1.DEFAULT_VALID_COLOR);this.graph=i,this.resetHandler=(t,e)=>{this.currentFocus!=null&&this.graph.view.getState(this.currentFocus.cell)==null?this.reset():this.redraw()},this.graph.model.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.resetHandler),this.graph.addListener(mxEvent$1.ROOT,this.resetHandler)}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}reset(){if(this.focusIcons!=null){for(var i=0;i<this.focusIcons.length;i++)this.focusIcons[i].destroy();this.focusIcons=null}this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null}getTolerance(i){return this.graph.getTolerance()}getImageForConstraint(i,t,e){return this.pointImage}isEventIgnored(i,t){return!1}isStateIgnored(i,t){return!1}destroyIcons(){if(this.focusIcons!=null){for(var i=0;i<this.focusIcons.length;i++)this.focusIcons[i].destroy();this.focusIcons=null,this.focusPoints=null}}destroyFocusHighlight(){this.focusHighlight!=null&&(this.focusHighlight.destroy(),this.focusHighlight=null)}isKeepFocusEvent(i){return mxEvent$1.isShiftDown(i.getEvent())}getCellForEvent(i,t){var e=i.getCell();if(e==null&&t!=null&&(i.getGraphX()!=t.x||i.getGraphY()!=t.y)&&(e=this.graph.getCellAt(t.x,t.y)),e!=null&&!this.graph.isCellConnectable(e)){var n=this.graph.getModel().getParent(e);this.graph.getModel().isVertex(n)&&this.graph.isCellConnectable(n)&&(e=n)}return this.graph.isCellLocked(e)?null:e}update(i,t,e,n){if(this.isEnabled()&&!this.isEventIgnored(i)){this.mouseleaveHandler==null&&this.graph.container!=null&&(this.mouseleaveHandler=()=>{this.reset()},mxEvent$1.addListener(this.graph.container,"mouseleave",this.resetHandler));var s=this.getTolerance(i),l=n!=null?n.x:i.getGraphX(),r=n!=null?n.y:i.getGraphY(),o=new mxRectangle(l-s,r-s,2*s,2*s),h=new mxRectangle(i.getGraphX()-s,i.getGraphY()-s,2*s,2*s),u=this.graph.view.getState(this.getCellForEvent(i,n));!this.isKeepFocusEvent(i)&&(this.currentFocusArea==null||this.currentFocus==null||u!=null||!this.graph.getModel().isVertex(this.currentFocus.cell)||!mxUtils$1.intersects(this.currentFocusArea,h))&&u!=this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(i,u,t)),this.currentConstraint=null,this.currentPoint=null;var d=null;if(this.focusIcons!=null&&this.constraints!=null&&(u==null||this.currentFocus==u))for(var m=h.getCenterX(),g=h.getCenterY(),x=0;x<this.focusIcons.length;x++){var v=m-this.focusIcons[x].bounds.getCenterX(),C=g-this.focusIcons[x].bounds.getCenterY(),E=v*v+C*C;if((this.intersects(this.focusIcons[x],h,t,e)||n!=null&&this.intersects(this.focusIcons[x],o,t,e))&&(d==null||E<d)){this.currentConstraint=this.constraints[x],this.currentPoint=this.focusPoints[x],d=E;var E=this.focusIcons[x].bounds.clone();if(E.grow(mxConstants$1.HIGHLIGHT_SIZE+1),E.width-=1,E.height-=1,this.focusHighlight==null){var b=this.createHighlightShape();b.dialect=this.graph.dialect==mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_SVG:mxConstants$1.DIALECT_VML,b.pointerEvents=!1,b.init(this.graph.getView().getOverlayPane()),this.focusHighlight=b;var w=()=>this.currentFocus!=null?this.currentFocus:u;mxEvent$1.redirectMouseEvents(b.node,this.graph,w)}this.focusHighlight.bounds=E,this.focusHighlight.redraw()}}this.currentConstraint==null&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null}redraw(){if(this.currentFocus!=null&&this.constraints!=null&&this.focusIcons!=null){var i=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=i,this.currentFocusArea=new mxRectangle(i.x,i.y,i.width,i.height);for(var t=0;t<this.constraints.length;t++){var e=this.graph.getConnectionPoint(i,this.constraints[t]),n=this.getImageForConstraint(i,this.constraints[t],e),s=new mxRectangle(Math.round(e.x-n.width/2),Math.round(e.y-n.height/2),n.width,n.height);this.focusIcons[t].bounds=s,this.focusIcons[t].redraw(),this.currentFocusArea.add(this.focusIcons[t].bounds),this.focusPoints[t]=e}}}setFocus(i,t,e){if(this.constraints=t!=null&&!this.isStateIgnored(t,e)&&this.graph.isCellConnectable(t.cell)?this.isEnabled()?this.graph.getAllConnectionConstraints(t,e)||[]:[]:null,this.constraints!=null){if(this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height),this.focusIcons!=null){for(var n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusIcons=null,this.focusPoints=null}this.focusPoints=[],this.focusIcons=[];for(var n=0;n<this.constraints.length;n++){var s=this.graph.getConnectionPoint(t,this.constraints[n]),l=this.getImageForConstraint(t,this.constraints[n],s),r=l.src,o=new mxRectangle(Math.round(s.x-l.width/2),Math.round(s.y-l.height/2),l.width,l.height),h=new mxImageShape(o,r);h.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,h.preserveImageAspect=!1,h.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||document.documentMode==8)&&mxEvent$1.addListener(h.node,"dragstart",function(m){return mxEvent$1.consume(m),!1}),h.node.previousSibling!=null&&h.node.parentNode.insertBefore(h.node,h.node.parentNode.firstChild);var u=()=>this.currentFocus!=null?this.currentFocus:t;h.redraw(),mxEvent$1.redirectMouseEvents(h.node,this.graph,u),this.currentFocusArea.add(h.bounds),this.focusIcons.push(h),this.focusPoints.push(s)}this.currentFocusArea.grow(this.getTolerance(i))}else this.destroyIcons(),this.destroyFocusHighlight()}createHighlightShape(){var i=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants$1.HIGHLIGHT_STROKEWIDTH);return i.opacity=mxConstants$1.HIGHLIGHT_OPACITY,i}intersects(i,t,e,n){return mxUtils$1.intersects(i.bounds,t)}destroy(){this.reset(),this.resetHandler!=null&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),this.mouseleaveHandler!=null&&this.graph.container!=null&&(mxEvent$1.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)}}class mxEdgeHandler{constructor(i){c(this,"graph",null);c(this,"state",null);c(this,"marker",null);c(this,"constraintHandler",null);c(this,"error",null);c(this,"shape",null);c(this,"bends",null);c(this,"labelShape",null);c(this,"cloneEnabled",!0);c(this,"addEnabled",!1);c(this,"removeEnabled",!1);c(this,"preferHtml",!1);c(this,"allowHandleBoundsCheck",!0);c(this,"handleImage",null);i!=null&&(this.state=i,this.init(),this.escapeHandler=(t,e)=>{var n=this.index!=null;this.reset(),n&&this.graph.cellRenderer.redraw(this.state,!1,i.view.isRendering())},this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}init(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants$1.CURSOR_MOVABLE_EDGE),mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=this.state.text!=null&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var i=this.state.getVisibleTerminalState(!0);if(i!=null&&(this.preferHtml=i.text!=null&&i.text.node.parentNode==this.graph.container),!this.preferHtml){var t=this.state.getVisibleTerminalState(!1);t!=null&&(this.preferHtml=t.text!=null&&t.text.node.parentNode==this.graph.container)}}if(this.parentHighlightEnabled){var e=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(e)){var n=this.graph.view.getState(e);n!=null&&(this.parentHighlight=this.createParentHighlightShape(n),this.parentHighlight.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(n.style[mxConstants$1.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))}}(this.graph.getSelectionCount()<mxGraphHandler.maxCells||mxGraphHandler.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants$1.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.redraw()}createCustomHandles(){return null}isVirtualBendsEnabled(i){return this.virtualBendsEnabled&&(this.state.style[mxConstants$1.STYLE_EDGE]==null||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.NONE||this.state.style[mxConstants$1.STYLE_NOEDGESTYLE]==1)&&mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_SHAPE,null)!="arrow"}isCellEnabled(i){return!0}isAddPointEvent(i){return mxEvent$1.isShiftDown(i)}isRemovePointEvent(i){return mxEvent$1.isShiftDown(i)}getSelectionPoints(i){return i.absolutePoints}createParentHighlightShape(i){var t=new mxRectangleShape(i,null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t}createSelectionShape(i){var t=new this.state.shape.constructor;return t.outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t}getSelectionColor(){return mxConstants$1.EDGE_SELECTION_COLOR}getSelectionStrokeWidth(){return mxConstants$1.EDGE_SELECTION_STROKEWIDTH}isSelectionDashed(){return mxConstants$1.EDGE_SELECTION_DASHED}isConnectableCell(i){return!0}getCellAt(i,t){return this.outlineConnect?null:this.graph.getCellAt(i,t)}createMarker(){var i=new EdgeCellMarker(this,this.graph);return i}validateConnection(i,t){return this.graph.getEdgeValidationError(this.state.cell,i,t)}createBends(){for(var i=this.state.cell,t=[],e=0;e<this.abspoints.length;e++)if(this.isHandleVisible(e)){var n=e==0,s=e==this.abspoints.length-1,l=n||s;(l||this.graph.isCellBendable(i))&&(r=>{var o=this.createHandleShape(r);this.initBend(o,()=>()=>{this.dblClickRemoveEnabled&&this.removePoint(this.state,r)}),this.isHandleEnabled(e)&&o.setCursor(l?mxConstants$1.CURSOR_TERMINAL_HANDLE:mxConstants$1.CURSOR_BEND_HANDLE),t.push(o),l||(this.points.push(new mxPoint(0,0)),o.node.style.visibility="hidden")})(e)}return t}createVirtualBends(){var i=this.state.cell;this.abspoints[0];var t=[];if(this.graph.isCellBendable(i))for(var e=1;e<this.abspoints.length;e++)(n=>{this.initBend(n),n.setCursor(mxConstants$1.CURSOR_VIRTUAL_BEND_HANDLE),t.push(n)})(this.createHandleShape());return t}isHandleEnabled(i){return!0}isHandleVisible(i){var t=this.state.getVisibleTerminalState(!0),e=this.state.getVisibleTerminalState(!1),n=this.graph.getCellGeometry(this.state.cell),s=n!=null?this.graph.view.getEdgeStyle(this.state,n.points,t,e):null;return s!=mxEdgeStyle.EntityRelation||i==0||i==this.abspoints.length-1}createHandleShape(i){if(this.handleImage!=null){var t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return t.preserveImageAspect=!1,t}else{var e=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(e-=1),new mxRectangleShape(new mxRectangle(0,0,e,e),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}}createLabelHandleShape(){if(this.labelHandleImage!=null){var i=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return i.preserveImageAspect=!1,i}else{var t=mxConstants$1.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants$1.LABEL_HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}}initBend(i,t){this.preferHtml?(i.dialect=mxConstants$1.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(i.node,this.graph,this.state,null,null,null,t),(mxClient.IS_QUIRKS||document.documentMode==8)&&mxEvent$1.addListener(i.node,"dragstart",function(e){return mxEvent$1.consume(e),!1}),mxClient.IS_TOUCH&&i.node.setAttribute("pointer-events","none")}getHandleForEvent(i){var t=mxEvent$1.isMouseEvent(i.getEvent())?1:this.tolerance,e=this.allowHandleBoundsCheck&&t>0?new mxRectangle(i.getGraphX()-t,i.getGraphY()-t,2*t,2*t):null,n=null,s=null;function l(o){if(o!=null&&o.node!=null&&o.node.style.display!="none"&&o.node.style.visibility!="hidden"&&(i.isSource(o)||e!=null&&mxUtils$1.intersects(o.bounds,e))){var h=i.getGraphX()-o.bounds.getCenterX(),u=i.getGraphY()-o.bounds.getCenterY(),d=h*h+u*u;if(n==null||d<=n)return n=d,!0}return!1}if(this.customHandles!=null&&this.isCustomHandleEvent(i)){for(var r=this.customHandles.length-1;r>=0;r--)if(l(this.customHandles[r].shape))return mxEvent$1.CUSTOM_HANDLE-r}if((i.isSource(this.state.text)||l(this.labelShape))&&(s=mxEvent$1.LABEL_HANDLE),this.bends!=null)for(var r=0;r<this.bends.length;r++)l(this.bends[r])&&(s=r);if(this.virtualBends!=null&&this.isAddVirtualBendEvent(i))for(var r=0;r<this.virtualBends.length;r++)l(this.virtualBends[r])&&(s=mxEvent$1.VIRTUAL_HANDLE-r);return s}isAddVirtualBendEvent(i){return!0}isCustomHandleEvent(i){return!0}mouseDown(i,t){var e=this.getHandleForEvent(t);if(this.bends!=null&&this.bends[e]!=null){var n=this.bends[e].bounds;this.snapPoint=new mxPoint(n.getCenterX(),n.getCenterY())}this.addEnabled&&e==null&&this.isAddPointEvent(t.getEvent())?(this.addPoint(this.state,t.getEvent()),t.consume()):e!=null&&!t.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(t.getEvent())?this.removePoint(this.state,e):(e!=mxEvent$1.LABEL_HANDLE||this.graph.isLabelMovable(t.getCell()))&&(e<=mxEvent$1.VIRTUAL_HANDLE&&mxUtils$1.setOpacity(this.virtualBends[mxEvent$1.VIRTUAL_HANDLE-e].node,100),this.start(t.getX(),t.getY(),e)),t.consume())}start(i,t,e){if(this.startX=i,this.startY=t,this.isSource=this.bends==null?!1:e==0,this.isTarget=this.bends==null?!1:e==this.bends.length-1,this.isLabel=e==mxEvent$1.LABEL_HANDLE,this.isSource||this.isTarget){var n=this.state.cell,s=this.graph.model.getTerminal(n,this.isSource);(s==null&&this.graph.isTerminalPointMovable(n,this.isSource)||s!=null&&this.graph.isCellDisconnectable(n,s,this.isSource))&&(this.index=e)}else this.index=e;if(this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE&&this.customHandles!=null)for(var l=0;l<this.customHandles.length;l++)l!=mxEvent$1.CUSTOM_HANDLE-this.index&&this.customHandles[l].setVisible(!1)}clonePreviewState(i,t){return this.state.clone()}getSnapToTerminalTolerance(){return this.graph.gridSize*this.graph.view.scale/2}updateHint(i,t){}removeHint(){}roundLength(i){return Math.round(i)}isSnapToTerminalsEvent(i){return this.snapToTerminals&&!mxEvent$1.isAltDown(i.getEvent())}getPointForEvent(i){var t=this.graph.getView(),e=t.scale,n=new mxPoint(this.roundLength(i.getGraphX()/e)*e,this.roundLength(i.getGraphY()/e)*e),s=this.getSnapToTerminalTolerance(),l=!1,r=!1;if(s>0&&this.isSnapToTerminalsEvent(i)){let m=function(x){if(x!=null){var v=x.x;Math.abs(n.x-v)<s&&(n.x=v,l=!0);var C=x.y;Math.abs(n.y-C)<s&&(n.y=C,r=!0)}},g=function(x){x!=null&&m.call(this,new mxPoint(t.getRoutingCenterX(x),t.getRoutingCenterY(x)))};var u=m,d=g;if(g.call(this,this.state.getVisibleTerminalState(!0)),g.call(this,this.state.getVisibleTerminalState(!1)),this.state.absolutePoints!=null)for(var o=0;o<this.state.absolutePoints.length;o++)m.call(this,this.state.absolutePoints[o])}if(this.graph.isGridEnabledEvent(i.getEvent())){var h=t.translate;l||(n.x=(this.graph.snap(n.x/e-h.x)+h.x)*e),r||(n.y=(this.graph.snap(n.y/e-h.y)+h.y)*e)}return n}getPreviewTerminalState(i){if(this.constraintHandler.update(i,this.isSource,!0,i.isSource(this.marker.highlight.shape)?null:this.currentPoint),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null){this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var t=this.graph.getModel(),e=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource),n=e!=null?e.cell:null,s=this.isSource?this.constraintHandler.currentFocus.cell:n,l=this.isSource?n:this.constraintHandler.currentFocus.cell;this.error=this.validateConnection(s,l);var r=null;return this.error==null&&(r=this.constraintHandler.currentFocus),(this.error!=null||r!=null&&!this.isCellEnabled(r.cell))&&this.constraintHandler.reset(),r}else{if(this.graph.isIgnoreTerminalEvent(i.getEvent()))return this.marker.reset(),null;this.marker.process(i);var o=this.marker.getValidState();return o!=null&&!this.isCellEnabled(o.cell)&&(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState()}}getPreviewPoints(i,t){var e=this.graph.getCellGeometry(this.state.cell),n=e.points!=null?e.points.slice():null,s=new mxPoint(i.x,i.y),l=null;if(!this.isSource&&!this.isTarget)if(this.convertPoint(s,!1),n==null)n=[s];else{if(this.index<=mxEvent$1.VIRTUAL_HANDLE&&n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,0,s),!this.isSource&&!this.isTarget){for(var r=0;r<this.bends.length;r++)if(r!=this.index){var o=this.bends[r];o!=null&&mxUtils$1.contains(o.bounds,i.x,i.y)&&(this.index<=mxEvent$1.VIRTUAL_HANDLE?n.splice(mxEvent$1.VIRTUAL_HANDLE-this.index,1):n.splice(this.index-1,1),l=n)}if(l==null&&this.straightRemoveEnabled&&(t==null||!mxEvent$1.isAltDown(t.getEvent()))){let v=function(C,E){C>0&&C<u.length-1&&mxUtils$1.ptSegDistSq(u[C-1].x,u[C-1].y,u[C+1].x,u[C+1].y,E.x,E.y)<h&&(n.splice(C-1,1),l=n)};var x=v,h=this.graph.tolerance*this.graph.tolerance,u=this.state.absolutePoints.slice();u[this.index]=i;var d=this.state.getVisibleTerminalState(!0);if(d!=null){var m=this.graph.getConnectionConstraint(this.state,d,!0);(m==null||this.graph.getConnectionPoint(d,m)==null)&&(u[0]=new mxPoint(d.view.getRoutingCenterX(d),d.view.getRoutingCenterY(d)))}var g=this.state.getVisibleTerminalState(!1);if(g!=null){var m=this.graph.getConnectionConstraint(this.state,g,!1);(m==null||this.graph.getConnectionPoint(g,m)==null)&&(u[u.length-1]=new mxPoint(g.view.getRoutingCenterX(g),g.view.getRoutingCenterY(g)))}v(this.index,i)}}l==null&&this.index>mxEvent$1.VIRTUAL_HANDLE&&(n[this.index-1]=s)}else this.graph.resetEdgesOnConnect&&(n=null);return l??n}isOutlineConnectEvent(i){var t=mxUtils$1.getOffset(this.graph.container),e=i.getEvent(),n=mxEvent$1.getClientX(e),s=mxEvent$1.getClientY(e),l=document.documentElement,r=(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0),o=(window.pageYOffset||l.scrollTop)-(l.clientTop||0),h=this.currentPoint.x-this.graph.container.scrollLeft+t.x-r,u=this.currentPoint.y-this.graph.container.scrollTop+t.y-o;return this.outlineConnect&&!mxEvent$1.isShiftDown(i.getEvent())&&(i.isSource(this.marker.highlight.shape)||mxEvent$1.isAltDown(i.getEvent())&&i.getState()!=null||this.marker.highlight.isHighlightAt(n,s)||(h!=n||u!=s)&&i.getState()==null&&this.marker.highlight.isHighlightAt(h,u))}updatePreviewState(i,t,e,n,s){var l=this.isSource?e:this.state.getVisibleTerminalState(!0),r=this.isTarget?e:this.state.getVisibleTerminalState(!1),o=this.graph.getConnectionConstraint(i,l,!0),h=this.graph.getConnectionConstraint(i,r,!1),u=this.constraintHandler.currentConstraint;if(u==null&&s&&(e!=null?(n.isSource(this.marker.highlight.shape)&&(t=new mxPoint(n.getGraphX(),n.getGraphY())),u=this.graph.getOutlineConstraint(t,e,n),this.constraintHandler.setFocus(n,e,this.isSource),this.constraintHandler.currentConstraint=u,this.constraintHandler.currentPoint=t):u=new mxConnectionConstraint),this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var d=this.graph.view.scale;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null?(this.marker.highlight.shape.stroke=s?mxConstants$1.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/d/d,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(n.getCell())&&this.marker.getValidState()!=n.getState()?"transparent":mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/d/d,this.marker.highlight.repaint())}this.isSource?o=u:this.isTarget&&(h=u),(this.isSource||this.isTarget)&&(u!=null&&u.point!=null?(i.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X]=u.point.x,i.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y]=u.point.y):(delete i.style[this.isSource?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X],delete i.style[this.isSource?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y])),i.setVisibleTerminalState(l,!0),i.setVisibleTerminalState(r,!1),(!this.isSource||l!=null)&&i.view.updateFixedTerminalPoint(i,l,!0,o),(!this.isTarget||r!=null)&&i.view.updateFixedTerminalPoint(i,r,!1,h),(this.isSource||this.isTarget)&&e==null&&(i.setAbsoluteTerminalPoint(t,this.isSource),this.marker.getMarkedState()==null&&(this.error=this.graph.allowDanglingEdges?null:"")),i.view.updatePoints(i,this.points,l,r),i.view.updateFloatingTerminalPoints(i,l,r)}mouseMove(i,t){if(this.index!=null&&this.marker!=null){if(this.currentPoint=this.getPointForEvent(t),this.error=null,!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent$1.isShiftDown(t.getEvent())&&this.snapPoint!=null&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent$1.CUSTOM_HANDLE&&this.index>mxEvent$1.VIRTUAL_HANDLE)this.customHandles!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged());else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,t);var e=this.isSource||this.isTarget?this.getPreviewTerminalState(t):null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var n=this.isSource||this.isTarget?this.isOutlineConnectEvent(t):!1;n?e=this.marker.highlight.state:e!=null&&e!=t.getState()&&this.graph.isCellConnectable(t.getCell())&&this.marker.highlight.shape!=null&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),e=null)}e!=null&&!this.isCellEnabled(e.cell)&&(e=null,this.marker.reset());var s=this.clonePreviewState(this.currentPoint,e!=null?e.cell:null);this.updatePreviewState(s,this.currentPoint,e,t,n);var l=this.error==null?this.marker.validColor:this.marker.invalidColor;this.setPreviewColor(l),this.abspoints=s.absolutePoints,this.active=!0,this.updateHint(t,this.currentPoint)}this.drawPreview(),mxEvent$1.consume(t.getEvent()),t.consume()}}mouseUp(i,t){if(this.index!=null&&this.marker!=null){var e=this.state.cell,n=this.index;if(this.index=null,t.getX()!=this.startX||t.getY()!=this.startY){var s=!this.graph.isIgnoreTerminalEvent(t.getEvent())&&this.graph.isCloneEvent(t.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(this.error!=null)this.error.length>0&&this.graph.validationAlert(this.error);else if(n<=mxEvent$1.CUSTOM_HANDLE&&n>mxEvent$1.VIRTUAL_HANDLE){if(this.customHandles!=null){var l=this.graph.getModel();l.beginUpdate();try{this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(t)}finally{l.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var r=null;if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(r=this.constraintHandler.currentFocus.cell),r==null&&this.marker.hasValidState()&&this.marker.highlight!=null&&this.marker.highlight.shape!=null&&this.marker.highlight.shape.stroke!="transparent"&&this.marker.highlight.shape.stroke!="white"&&(r=this.marker.validState.cell),r!=null){var l=this.graph.getModel(),o=l.getParent(e);l.beginUpdate();try{if(s){var h=l.getGeometry(e),s=this.graph.cloneCell(e);l.add(o,s,l.getChildCount(o)),h!=null&&(h=h.clone(),l.setGeometry(s,h));var u=l.getTerminal(e,!this.isSource);this.graph.connectCell(s,u,!this.isSource),e=s}e=this.connect(e,r,this.isSource,s,t)}finally{l.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){var d=this.abspoints[this.isSource?0:this.abspoints.length-1];d.x=this.roundLength(d.x/this.graph.view.scale-this.graph.view.translate.x),d.y=this.roundLength(d.y/this.graph.view.scale-this.graph.view.translate.y);var m=this.graph.getView().getState(this.graph.getModel().getParent(e));m!=null&&(d.x-=m.origin.x,d.y-=m.origin.y),d.x-=this.graph.panDx/this.graph.view.scale,d.y-=this.graph.panDy/this.graph.view.scale,e=this.changeTerminalPoint(e,d,this.isSource,s)}}else this.active?e=this.changePoints(e,this.points,s):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(t.getEvent())&&this.graph.selectCellForEvent(this.state.cell,t.getEvent());this.marker!=null&&(this.reset(),e!=this.state.cell&&this.graph.setSelectionCell(e)),t.consume()}}reset(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&this.sizers!=null)for(var i=0;i<this.sizers.length;i++)this.sizers[i]!=null&&(this.sizers[i].node.style.display="");if(this.marker!=null&&this.marker.reset(),this.constraintHandler!=null&&this.constraintHandler.reset(),this.customHandles!=null)for(var i=0;i<this.customHandles.length;i++)this.customHandles[i].reset();this.setPreviewColor(mxConstants$1.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()}setPreviewColor(i){this.shape!=null&&(this.shape.stroke=i)}convertPoint(i,t){var e=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t&&(i.x=this.graph.snap(i.x),i.y=this.graph.snap(i.y)),i.x=Math.round(i.x/e-n.x),i.y=Math.round(i.y/e-n.y);var s=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return s!=null&&(i.x-=s.origin.x,i.y-=s.origin.y),i}moveLabel(i,t,e){var n=this.graph.getModel(),s=n.getGeometry(i.cell);if(s!=null){var l=this.graph.getView().scale;if(s=s.clone(),s.relative){var r=this.graph.getView().getRelativePoint(i,t,e);s.x=Math.round(r.x*1e4)/1e4,s.y=Math.round(r.y),s.offset=new mxPoint(0,0);var r=this.graph.view.getPoint(i,s);s.offset=new mxPoint(Math.round((t-r.x)/l),Math.round((e-r.y)/l))}else{var o=i.absolutePoints,h=o[0],u=o[o.length-1];if(h!=null&&u!=null){var d=h.x+(u.x-h.x)/2,m=h.y+(u.y-h.y)/2;s.offset=new mxPoint(Math.round((t-d)/l),Math.round((e-m)/l)),s.x=0,s.y=0}}n.setGeometry(i.cell,s)}}connect(i,t,e,n,s){var l=this.graph.getModel();l.getParent(i),l.beginUpdate();try{var r=this.constraintHandler.currentConstraint;r==null&&(r=new mxConnectionConstraint),this.graph.connectCell(i,t,e,r)}finally{l.endUpdate()}return i}changeTerminalPoint(i,t,e,n){var s=this.graph.getModel();s.beginUpdate();try{if(n){var l=s.getParent(i),r=s.getTerminal(i,!e);i=this.graph.cloneCell(i),s.add(l,i,s.getChildCount(l)),s.setTerminal(i,r,!e)}var o=s.getGeometry(i);o!=null&&(o=o.clone(),o.setTerminalPoint(t,e),s.setGeometry(i,o),this.graph.connectCell(i,null,e,new mxConnectionConstraint))}finally{s.endUpdate()}return i}changePoints(i,t,e){var n=this.graph.getModel();n.beginUpdate();try{if(e){var s=n.getParent(i),l=n.getTerminal(i,!0),r=n.getTerminal(i,!1);i=this.graph.cloneCell(i),n.add(s,i,n.getChildCount(s)),n.setTerminal(i,l,!0),n.setTerminal(i,r,!1)}var o=n.getGeometry(i);o!=null&&(o=o.clone(),o.points=t,n.setGeometry(i,o))}finally{n.endUpdate()}return i}addPoint(i,t){var e=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t)),n=this.graph.isGridEnabledEvent(t);this.convertPoint(e,n),this.addPointAt(i,e.x,e.y),mxEvent$1.consume(t)}addPointAt(i,t,e){var n=this.graph.getCellGeometry(i.cell),s=new mxPoint(t,e);if(n!=null){n=n.clone();var l=this.graph.view.translate,r=this.graph.view.scale,o=new mxPoint(l.x*r,l.y*r),h=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(h)){var u=this.graph.view.getState(h);o=new mxPoint(u.x,u.y)}var d=mxUtils$1.findNearestSegment(i,s.x*r+o.x,s.y*r+o.y);n.points==null?n.points=[s]:n.points.splice(d,0,s),this.graph.getModel().setGeometry(i.cell,n),this.refresh(),this.redraw()}}removePoint(i,t){if(t>0&&t<this.abspoints.length-1){var e=this.graph.getCellGeometry(this.state.cell);e!=null&&e.points!=null&&(e=e.clone(),e.points.splice(t-1,1),this.graph.getModel().setGeometry(i.cell,e),this.refresh(),this.redraw())}}getHandleFillColor(i){var t=i==0,e=this.state.cell,n=this.graph.getModel().getTerminal(e,t),s=mxConstants$1.HANDLE_FILLCOLOR;return n!=null&&!this.graph.isCellDisconnectable(e,n,t)||n==null&&!this.graph.isTerminalPointMovable(e,t)?s=mxConstants$1.LOCKED_HANDLE_FILLCOLOR:n!=null&&this.graph.isCellDisconnectable(e,n,t)&&(s=mxConstants$1.CONNECT_HANDLE_FILLCOLOR),s}redraw(i){this.abspoints=this.state.absolutePoints.slice();var t=this.graph.getModel().getGeometry(this.state.cell);if(t!=null){var e=t.points;if(this.bends!=null&&this.bends.length>0&&e!=null){this.points==null&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)this.bends[n]!=null&&this.abspoints[n]!=null&&(this.points[n-1]=e[n-1])}}this.drawPreview(),i||this.redrawHandles()}redrawHandles(){var i=this.state.cell,t=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height);var e=this.graph.getLabel(i);if(this.labelShape.visible=e!=null&&e.length>0&&this.graph.isLabelMovable(i),this.bends!=null&&this.bends.length>0){var n=this.abspoints.length-1,s=this.abspoints[0],l=s.x,r=s.y;t=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(l-t.width/2),Math.floor(r-t.height/2),t.width,t.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var o=this.abspoints[n],h=o.x,u=o.y,d=this.bends.length-1;t=this.bends[d].bounds,this.bends[d].bounds=new mxRectangle(Math.floor(h-t.width/2),Math.floor(u-t.height/2),t.width,t.height),this.bends[d].fill=this.getHandleFillColor(d),this.bends[d].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[d].bounds),this.redrawInnerBends(s,o)}if(this.abspoints!=null&&this.virtualBends!=null&&this.virtualBends.length>0){for(var m=this.abspoints[0],g=0;g<this.virtualBends.length;g++)if(this.virtualBends[g]!=null&&this.abspoints[g+1]!=null){var x=this.abspoints[g+1],t=this.virtualBends[g],v=m.x+(x.x-m.x)/2,C=m.y+(x.y-m.y)/2;t.bounds=new mxRectangle(Math.floor(v-t.bounds.width/2),Math.floor(C-t.bounds.height/2),t.bounds.width,t.bounds.height),t.redraw(),mxUtils$1.setOpacity(t.node,this.virtualBendOpacity),m=x,this.manageLabelHandle&&this.checkLabelHandle(t.bounds)}}if(this.labelShape!=null&&this.labelShape.redraw(),this.customHandles!=null)for(var g=0;g<this.customHandles.length;g++){var E=this.customHandles[g].shape.node.style.display;this.customHandles[g].redraw(),this.customHandles[g].shape.node.style.display=E,this.customHandles[g].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[g])?"":"hidden"}}isCustomHandleVisible(i){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()==1}setHandlesVisible(i){if(this.bends!=null)for(var t=0;t<this.bends.length;t++)this.bends[t].node.style.display=i?"":"none";if(this.virtualBends!=null)for(var t=0;t<this.virtualBends.length;t++)this.virtualBends[t].node.style.display=i?"":"none";if(this.labelShape!=null&&(this.labelShape.node.style.display=i?"":"none"),this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(i)}redrawInnerBends(i,t){for(var e=1;e<this.bends.length-1;e++)if(this.bends[e]!=null)if(this.abspoints[e]!=null){var n=this.abspoints[e].x,s=this.abspoints[e].y,l=this.bends[e].bounds;if(this.bends[e].node.style.visibility="visible",this.bends[e].bounds=new mxRectangle(Math.round(n-l.width/2),Math.round(s-l.height/2),l.width,l.height),this.manageLabelHandle)this.checkLabelHandle(this.bends[e].bounds);else if(this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(this.bends[e].bounds,this.labelShape.bounds)){var r=mxConstants$1.HANDLE_SIZE+3,o=mxConstants$1.HANDLE_SIZE+3;this.bends[e].bounds=new mxRectangle(Math.round(n-r/2),Math.round(s-o/2),r,o)}this.bends[e].redraw()}else this.bends[e].destroy(),this.bends[e]=null}checkLabelHandle(i){if(this.labelShape!=null){var t=this.labelShape.bounds;mxUtils$1.intersects(i,t)&&(i.getCenterY()<t.getCenterY()?t.y=i.y+i.height:t.y=i.y-t.height)}}drawPreview(){if(this.isLabel){var i=this.labelShape.bounds,t=new mxRectangle(Math.round(this.label.x-i.width/2),Math.round(this.label.y-i.height/2),i.width,i.height);this.labelShape.bounds.equals(t)||(this.labelShape.bounds=t,this.labelShape.redraw())}this.shape!=null&&!mxUtils$1.equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.parentHighlight!=null&&this.parentHighlight.redraw()}refresh(){this.abspoints=this.getSelectionPoints(this.state),this.points=[],this.bends!=null&&(this.destroyBends(this.bends),this.bends=this.createBends()),this.virtualBends!=null&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),this.customHandles!=null&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),this.labelShape!=null&&this.labelShape.node!=null&&this.labelShape.node.parentNode!=null&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)}destroyBends(i){if(i!=null)for(var t=0;t<i.length;t++)i[t]!=null&&i[t].destroy()}destroy(){this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.parentHighlight!=null&&(this.parentHighlight.destroy(),this.parentHighlight=null),this.labelShape!=null&&(this.labelShape.destroy(),this.labelShape=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()}}c(mxEdgeHandler,"dblClickRemoveEnabled",!1),c(mxEdgeHandler,"mergeRemoveEnabled",!1),c(mxEdgeHandler,"straightRemoveEnabled",!1),c(mxEdgeHandler,"virtualBendsEnabled",!1),c(mxEdgeHandler,"virtualBendOpacity",20),c(mxEdgeHandler,"parentHighlightEnabled",!1),c(mxEdgeHandler,"snapToTerminals",!1),c(mxEdgeHandler,"tolerance",0),c(mxEdgeHandler,"outlineConnect",!1),c(mxEdgeHandler,"manageLabelHandle",!1);let mxElbowEdgeHandler$1=class extends mxEdgeHandler{constructor(t){super(t);c(this,"flipEnabled",!0);c(this,"doubleClickOrientationResource",mxClient.language!="none"?"doubleClickOrientation":"")}createBends(){var t=[],e=this.createHandleShape(0);return this.initBend(e),e.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(e),t.push(this.createVirtualBend(n=>{!mxEvent$1.isConsumed(n)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,n),mxEvent$1.consume(n))})),this.points.push(new mxPoint(0,0)),e=this.createHandleShape(2),this.initBend(e),e.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),t.push(e),t}createVirtualBend(t){var e=this.createHandleShape();return this.initBend(e,t),e.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(e.node.style.display="none"),e}getCursorForBend(){return this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants$1.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants$1.STYLE_EDGE]==mxConstants$1.EDGESTYLE_ELBOW)&&this.state.style[mxConstants$1.STYLE_ELBOW]==mxConstants$1.ELBOW_VERTICAL?"row-resize":"col-resize"}getTooltipForNode(t){var e=null;return this.bends!=null&&this.bends[1]!=null&&(t==this.bends[1].node||t.parentNode==this.bends[1].node)&&(e=this.doubleClickOrientationResource,e=mxResources$1.get(e)||e),e}convertPoint(t,e){var n=this.graph.getView().getScale(),s=this.graph.getView().getTranslate(),l=this.state.origin;return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-s.x-l.x),t.y=Math.round(t.y/n-s.y-l.y),t}redrawInnerBends(t,e){var n=this.graph.getModel().getGeometry(this.state.cell),s=this.state.absolutePoints,l=null;s.length>1?(t=s[1],e=s[s.length-2]):n.points!=null&&n.points.length>0&&(l=s[0]),l==null?l=new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2):l=new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y));var r=this.bends[1].bounds,o=r.width,h=r.height,u=new mxRectangle(Math.round(l.x-o/2),Math.round(l.y-h/2),o,h);this.manageLabelHandle?this.checkLabelHandle(u):this.handleImage==null&&this.labelShape.visible&&mxUtils$1.intersects(u,this.labelShape.bounds)&&(o=mxConstants$1.HANDLE_SIZE+3,h=mxConstants$1.HANDLE_SIZE+3,u=new mxRectangle(Math.floor(l.x-o/2),Math.floor(l.y-h/2),o,h)),this.bends[1].bounds=u,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)}};class mxEdgeSegmentHandler extends mxElbowEdgeHandler$1{constructor(i){super(i)}getCurrentPoints(){var i=this.state.absolutePoints;if(i!=null){var t=Math.max(1,this.graph.view.scale);if(i.length==2||i.length==3&&(Math.abs(i[0].x-i[1].x)<t&&Math.abs(i[1].x-i[2].x)<t||Math.abs(i[0].y-i[1].y)<t&&Math.abs(i[1].y-i[2].y)<t)){var e=i[0].x+(i[i.length-1].x-i[0].x)/2,n=i[0].y+(i[i.length-1].y-i[0].y)/2;i=[i[0],new mxPoint(e,n),new mxPoint(e,n),i[i.length-1]]}}return i}getPreviewPoints(i){if(this.isSource||this.isTarget)return super.getPreviewPoints(i);var t=this.getCurrentPoints(),e=this.convertPoint(t[0].clone(),!1);i=this.convertPoint(i.clone(),!1);for(var n=[],s=1;s<t.length;s++){var l=this.convertPoint(t[s].clone(),!1);s==this.index&&(Math.round(e.x-l.x)==0&&(e.x=i.x,l.x=i.x),Math.round(e.y-l.y)==0&&(e.y=i.y,l.y=i.y)),s<t.length-1&&n.push(l),e=l}if(n.length==1){var r=this.state.getVisibleTerminalState(!0),o=this.state.getVisibleTerminalState(!1),h=this.state.view.getScale(),u=this.state.view.getTranslate(),d=n[0].x*h+u.x,m=n[0].y*h+u.y;(r!=null&&mxUtils$1.contains(r,d,m)||o!=null&&mxUtils$1.contains(o,d,m))&&(n=[i,i])}return n}updatePreviewState(i,t,e,n){if(super.updatePreviewState(i,t,e,n),!this.isSource&&!this.isTarget){t=this.convertPoint(t.clone(),!1);for(var s=i.absolutePoints,l=s[0],r=s[1],o=[],h=2;h<s.length;h++){var u=s[h];(Math.round(l.x-r.x)!=0||Math.round(r.x-u.x)!=0)&&(Math.round(l.y-r.y)!=0||Math.round(r.y-u.y)!=0)&&o.push(this.convertPoint(r.clone(),!1)),l=r,r=u}var d=this.state.getVisibleTerminalState(!0),m=this.state.getVisibleTerminalState(!1),g=this.state.absolutePoints;if(o.length==0&&(Math.round(s[0].x-s[s.length-1].x)==0||Math.round(s[0].y-s[s.length-1].y)==0))o=[t,t];else if(s.length==5&&o.length==2&&d!=null&&m!=null&&g!=null&&Math.round(g[0].x-g[g.length-1].x)==0){var x=this.graph.getView(),v=x.getScale(),C=x.getTranslate(),E=x.getRoutingCenterY(d)/v-C.y,b=this.graph.getConnectionConstraint(i,d,!0);if(b!=null){var w=this.graph.getConnectionPoint(d,b);w!=null&&(this.convertPoint(w,!1),E=w.y)}var $=x.getRoutingCenterY(m)/v-C.y,P=this.graph.getConnectionConstraint(i,m,!1);if(P){var w=this.graph.getConnectionPoint(m,P);w!=null&&(this.convertPoint(w,!1),$=w.y)}o=[new mxPoint(t.x,E),new mxPoint(t.x,$)]}this.points=o,i.view.updateFixedTerminalPoints(i,d,m),i.view.updatePoints(i,this.points,d,m),i.view.updateFloatingTerminalPoints(i,d,m)}}connect(i,t,e,n,s){var l=this.graph.getModel(),r=l.getGeometry(i),o=null;if(r!=null&&r.points!=null&&r.points.length>0){var h=this.abspoints,u=h[0],d=h[1];o=[];for(var m=2;m<h.length;m++){var g=h[m];(Math.round(u.x-d.x)!=0||Math.round(d.x-g.x)!=0)&&(Math.round(u.y-d.y)!=0||Math.round(d.y-g.y)!=0)&&o.push(this.convertPoint(d.clone(),!1)),u=d,d=g}}l.beginUpdate();try{if(o!=null){var r=l.getGeometry(i);r!=null&&(r=r.clone(),r.points=o,l.setGeometry(i,r))}i=super.connect(i,t,e,n,s)}finally{l.endUpdate()}return i}getTooltipForNode(i){return null}start(i,t,e){super.start(i,t,e),this.bends!=null&&this.bends[e]!=null&&!this.isSource&&!this.isTarget&&mxUtils$1.setOpacity(this.bends[e].node,100)}createBends(){var i=[],s=this.createHandleShape(0);this.initBend(s),s.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),i.push(s);var t=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){this.points==null&&(this.points=[]);for(var e=0;e<t.length-1;e++){s=this.createVirtualBend(),i.push(s);var n=Math.round(t[e].x-t[e+1].x)==0;Math.round(t[e].y-t[e+1].y)==0&&e<t.length-2&&(n=Math.round(t[e].x-t[e+2].x)==0),s.setCursor(n?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}var s=this.createHandleShape(t.length);return this.initBend(s),s.setCursor(mxConstants$1.CURSOR_TERMINAL_HANDLE),i.push(s),i}redraw(){this.refresh(),super.redraw()}redrawInnerBends(i,t){if(this.graph.isCellBendable(this.state.cell)){var e=this.getCurrentPoints();if(e!=null&&e.length>1){var n=!1;if(e.length==4&&Math.round(e[1].x-e[2].x)==0&&Math.round(e[1].y-e[2].y)==0)if(n=!0,Math.round(e[0].y-e[e.length-1].y)==0){var s=e[0].x+(e[e.length-1].x-e[0].x)/2;e[1]=new mxPoint(s,e[1].y),e[2]=new mxPoint(s,e[2].y)}else{var l=e[0].y+(e[e.length-1].y-e[0].y)/2;e[1]=new mxPoint(e[1].x,l),e[2]=new mxPoint(e[2].x,l)}for(var r=0;r<e.length-1;r++)if(this.bends[r+1]!=null){var i=e[r],t=e[r+1],o=new mxPoint(i.x+(t.x-i.x)/2,i.y+(t.y-i.y)/2),h=this.bends[r+1].bounds;this.bends[r+1].bounds=new mxRectangle(Math.floor(o.x-h.width/2),Math.floor(o.y-h.height/2),h.width,h.height),this.bends[r+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[r+1].bounds)}n&&(mxUtils$1.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils$1.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}}}class mxEllipse extends mxShape{constructor(i,t,e,n){super(),this.bounds=i,this.fill=t,this.stroke=e,this.strokewidth=n??1}paintVertexShape(i,t,e,n,s){i.ellipse(t,e,n,s),i.fillAndStroke()}}class mxVertexHandler{constructor(i){c(this,"graph",null);c(this,"state",null);c(this,"singleSizer",!1);c(this,"index",null);c(this,"allowHandleBoundsCheck",!0);c(this,"handleImage",null);c(this,"tolerance",0);c(this,"rotationEnabled",!0);c(this,"parentHighlightEnabled",!1);c(this,"rotationRaster",!0);c(this,"rotationCursor","crosshair");c(this,"constrainGroupByChildren",!1);c(this,"horizontalOffset",0);c(this,"verticalOffset",0);i!=null&&(this.state=i,this.init(),this.escapeHandler=(t,e)=>{this.livePreview&&this.index!=null&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()},this.state.view.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}init(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants$1.CURSOR_MOVABLE_VERTEX),this.graph.getSelectionCount()<mxGraphHandler.maxCells){var i=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],i||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var t=0;i&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",t++)),this.sizers.push(this.createSizer("n-resize",t++)),this.sizers.push(this.createSizer("ne-resize",t++)),this.sizers.push(this.createSizer("w-resize",t++)),this.sizers.push(this.createSizer("e-resize",t++)),this.sizers.push(this.createSizer("sw-resize",t++)),this.sizers.push(this.createSizer("s-resize",t++))),this.sizers.push(this.createSizer("se-resize",t++)));var e=this.graph.model.getGeometry(this.state.cell);e!=null&&!e.relative&&!this.graph.isSwimlane(this.state.cell)&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_LABEL_HANDLE,mxEvent$1.LABEL_HANDLE,mxConstants$1.LABEL_HANDLE_SIZE,mxConstants$1.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants$1.CURSOR_MOVABLE_VERTEX,mxEvent$1.LABEL_HANDLE,null,mxConstants$1.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent$1.ROTATION_HANDLE,mxConstants$1.HANDLE_SIZE+3,mxConstants$1.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()}isRotationHandleVisible(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&this.graph.getSelectionCount()<mxGraphHandler.maxCells}isConstrainedEvent(i){return mxEvent$1.isShiftDown(i.getEvent())||this.state.style[mxConstants$1.STYLE_ASPECT]=="fixed"}isCenteredEvent(i,t){return!1}createCustomHandles(){return null}updateMinBounds(){var i=this.graph.getChildCells(this.state.cell);if(i.length>0&&(this.minBounds=this.graph.view.getBounds(i),this.minBounds!=null)){var t=this.state.view.scale,e=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=t,this.minBounds.y/=t,this.minBounds.width/=t,this.minBounds.height/=t,this.x0=this.state.x/t-e.x,this.y0=this.state.y/t-e.y}}getSelectionBounds(i){return new mxRectangle(Math.round(i.x),Math.round(i.y),Math.round(i.width),Math.round(i.height))}createParentHighlightShape(i){return this.createSelectionShape(i)}createSelectionShape(i){var t=new mxRectangleShape(mxRectangle.fromRectangle(i),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t}getSelectionColor(){return mxConstants$1.VERTEX_SELECTION_COLOR}getSelectionStrokeWidth(){return mxConstants$1.VERTEX_SELECTION_STROKEWIDTH}isSelectionDashed(){return mxConstants$1.VERTEX_SELECTION_DASHED}createSizer(i,t,e,n){e=e||mxConstants$1.HANDLE_SIZE;var s=new mxRectangle(0,0,e,e),l=this.createSizerShape(s,t,n);return l.isHtmlAllowed()&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(l.bounds.height-=1,l.bounds.width-=1,l.dialect=mxConstants$1.DIALECT_STRICTHTML,l.init(this.graph.container)):(l.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,l.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(l.node,this.graph,this.state),this.graph.isEnabled()&&l.setCursor(i),this.isSizerVisible(t)||(l.visible=!1),l}isSizerVisible(i){return!0}createSizerShape(i,t,e){if(this.handleImage!=null){i=new mxRectangle(i.x,i.y,this.handleImage.width,this.handleImage.height);var n=new mxImageShape(i,this.handleImage.src);return n.preserveImageAspect=!1,n}else return t==mxEvent$1.ROTATION_HANDLE?new mxEllipse(i,e||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR):new mxRectangleShape(i,e||mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}moveSizerTo(i,t,e,n){i!=null&&(i.bounds.x=Math.floor(t-i.bounds.width/2),i.bounds.y=Math.floor(e-i.bounds.height/2),i.node!=null&&i.node.style.display!="none"&&i.redraw())}getHandleForEvent(i){var t=mxEvent$1.isMouseEvent(i.getEvent())?1:this.tolerance,e=this.allowHandleBoundsCheck&&t>0?new mxRectangle(i.getGraphX()-t,i.getGraphY()-t,2*t,2*t):null,n=l=>{var r=l!=null&&l.constructor!=mxImageShape&&this.allowHandleBoundsCheck?new mxRectangle(i.getGraphX()-l.svgStrokeTolerance,i.getGraphY()-l.svgStrokeTolerance,2*l.svgStrokeTolerance,2*l.svgStrokeTolerance):e;return l!=null&&(i.isSource(l)||r!=null&&mxUtils$1.intersects(l.bounds,r)&&l.node.style.display!="none"&&l.node.style.visibility!="hidden")};if(n(this.rotationShape))return mxEvent$1.ROTATION_HANDLE;if(n(this.labelShape))return mxEvent$1.LABEL_HANDLE;if(this.sizers!=null){for(var s=0;s<this.sizers.length;s++)if(n(this.sizers[s]))return s}if(this.customHandles!=null&&this.isCustomHandleEvent(i)){for(var s=this.customHandles.length-1;s>=0;s--)if(n(this.customHandles[s].shape))return mxEvent$1.CUSTOM_HANDLE-s}return null}isCustomHandleEvent(i){return!0}mouseDown(i,t){if(!t.isConsumed()&&this.graph.isEnabled()){var e=this.getHandleForEvent(t);e!=null&&(this.start(t.getGraphX(),t.getGraphY(),e),t.consume())}}isLivePreviewBorder(){return this.state.shape!=null&&this.state.shape.fill==null&&this.state.shape.stroke==null}start(i,t,e){if(this.selectionBorder!=null)if(this.livePreviewActive=this.livePreview&&this.graph.model.getChildCount(this.state.cell)==0,this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=e,this.startX=i,this.startY=t,this.index<=mxEvent$1.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var n=this.state.view.graph.model,s=n.getParent(this.state.cell);if(this.state.view.currentRoot!=s&&(n.isVertex(s)||n.isEdge(s))&&(this.parentState=this.state.view.graph.view.getState(s)),this.selectionBorder.node.style.display=e==mxEvent$1.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),!(mxClient.IS_SVG&&Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")!=0)&&this.state.text!=null&&this.state.text.node.parentNode==this.graph.container?(this.preview.dialect=mxConstants$1.DIALECT_STRICTHTML,this.preview.init(this.graph.container)):(this.preview.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane()))),e==mxEvent$1.ROTATION_HANDLE){var l=this.getRotationHandlePosition(),r=l.x-this.state.getCenterX(),o=l.y-this.state.getCenterY();this.startAngle=r!=0?Math.atan(o/r)*180/Math.PI+90:o<0?180:0,this.startDist=Math.sqrt(r*r+o*o)}if(this.livePreviewActive){this.hideSizers(),e==mxEvent$1.ROTATION_HANDLE?this.rotationShape.node.style.display="":e==mxEvent$1.LABEL_HANDLE?this.labelShape.node.style.display="":this.sizers!=null&&this.sizers[e]!=null?this.sizers[e].node.style.display="":e<=mxEvent$1.CUSTOM_HANDLE&&this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-e].setVisible(!0);var h=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var u=0;u<h.length;u++){var d=this.graph.selectionCellsHandler.getHandler(h[u]);d!=null&&this.edgeHandlers.push(d)}}}}createGhostPreview(){var i=this.graph.cellRenderer.createShape(this.state);return i.init(this.graph.view.getOverlayPane()),i.scale=this.state.view.scale,i.bounds=this.bounds,i.outline=!0,i}setHandlesVisible(i){if(this.sizers!=null)for(var t=0;t<this.sizers.length;t++)this.sizers[t].node.style.display=i?"":"none";if(this.customHandles!=null)for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(i)}hideSizers(){this.setHandlesVisible(!1)}checkTolerance(i){this.inTolerance&&this.startX!=null&&this.startY!=null&&(mxEvent$1.isMouseEvent(i.getEvent())||Math.abs(i.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(i.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)}updateHint(i){}removeHint(){}roundAngle(i){return Math.round(i*10)/10}roundLength(i){return Math.round(i*100)/100}mouseMove(i,t){!t.isConsumed()&&this.index!=null?(this.checkTolerance(t),this.inTolerance||(this.index<=mxEvent$1.CUSTOM_HANDLE?this.customHandles!=null&&(this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].active=!0,this.ghostPreview!=null?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),this.selectionBounds!=null&&(this.selectionBorder.node.style.display="none")):(this.moveToFront(),this.customHandles[mxEvent$1.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent$1.LABEL_HANDLE?this.moveLabel(t):this.index==mxEvent$1.ROTATION_HANDLE?this.rotateVertex(t):(this.resizeVertex(t),this.updateHint(t))),t.consume()):!this.graph.isMouseDown&&this.getHandleForEvent(t)!=null&&t.consume(!1)}isGhostPreview(){return this.state.view.graph.model.getChildCount(this.state.cell)>0}moveLabel(i){var t=new mxPoint(i.getGraphX(),i.getGraphY()),e=this.graph.view.translate,n=this.graph.view.scale;this.graph.isGridEnabledEvent(i.getEvent())&&(t.x=(this.graph.snap(t.x/n-e.x)+e.x)*n,t.y=(this.graph.snap(t.y/n-e.y)+e.y)*n);var s=this.rotationShape!=null?this.sizers.length-2:this.sizers.length-1;this.moveSizerTo(this.sizers[s],t.x,t.y,"A")}rotateVertex(i){var t=new mxPoint(i.getGraphX(),i.getGraphY()),e=this.state.x+this.state.width/2-t.x,n=this.state.y+this.state.height/2-t.y;if(this.currentAlpha=e!=0?Math.atan(n/e)*180/Math.PI+90:n<0?180:0,e>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(i.getEvent())){var e=t.x-this.state.getCenterX(),n=t.y-this.state.getCenterY(),s=Math.sqrt(e*e+n*n),l;s-this.startDist<2?l=15:s-this.startDist<25?l=5:l=1,this.currentAlpha=Math.round(this.currentAlpha/l)*l}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()}resizeVertex(i){var t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),e=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),n=new mxPoint(i.getGraphX(),i.getGraphY()),s=this.graph.view.translate,l=this.graph.view.scale,r=Math.cos(-e),o=Math.sin(-e),E=n.x-this.startX,b=n.y-this.startY,h=r*E-o*b,u=o*E+r*b;E=h,b=u;var d=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(d,E/l,b/l,this.index,this.graph.isGridEnabledEvent(i.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(i),this.isCenteredEvent(this.state,i)),!d.relative){var m=this.graph.getMaximumGraphBounds();if(m!=null&&this.parentState!=null&&(m=mxRectangle.fromRectangle(m),m.x-=(this.parentState.x-s.x*l)/l,m.y-=(this.parentState.y-s.y*l)/l),this.graph.isConstrainChild(this.state.cell)){var g=this.graph.getCellContainmentArea(this.state.cell);if(g!=null){var x=this.graph.getOverlap(this.state.cell);x>0&&(g=mxRectangle.fromRectangle(g),g.x-=g.width*x,g.y-=g.height*x,g.width+=2*g.width*x,g.height+=2*g.height*x),m==null?m=g:(m=mxRectangle.fromRectangle(m),m.intersect(g))}}m!=null&&(this.unscaledBounds.x<m.x&&(this.unscaledBounds.width-=m.x-this.unscaledBounds.x,this.unscaledBounds.x=m.x),this.unscaledBounds.y<m.y&&(this.unscaledBounds.height-=m.y-this.unscaledBounds.y,this.unscaledBounds.y=m.y),this.unscaledBounds.x+this.unscaledBounds.width>m.x+m.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-m.x-m.width),this.unscaledBounds.y+this.unscaledBounds.height>m.y+m.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-m.y-m.height))}var v=this.bounds;this.bounds=new mxRectangle(Number((this.parentState!=null?this.parentState.x:s.x*l)+this.unscaledBounds.x*l),Number((this.parentState!=null?this.parentState.y:s.y*l)+this.unscaledBounds.y*l),this.unscaledBounds.width*l,this.unscaledBounds.height*l),d.relative&&this.parentState!=null&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),r=Math.cos(e),o=Math.sin(e);var C=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),E=C.x-t.x,b=C.y-t.y,w=r*E-o*b,$=o*E+r*b,P=w-E,M=$-b,D=this.bounds.x-this.state.x,k=this.bounds.y-this.state.y,Z=r*D-o*k,q=o*D+r*k;this.bounds.x+=P,this.bounds.y+=M,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+P/l),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+M/l),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),!this.graph.isCellCollapsed(this.state.cell)&&(P!=0||M!=0)?(this.childOffsetX=this.state.x-this.bounds.x+Z,this.childOffsetY=this.state.y-this.bounds.y+q):(this.childOffsetX=0,this.childOffsetY=0),v.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(i),this.preview!=null?this.drawPreview():this.updateParentHighlight())}updateLivePreview(i){var t=this.graph.view.scale,e=this.graph.view.translate,n=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/t-e.x,this.state.y/t-e.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;var s=this.state.absoluteOffset;s=new mxPoint(s.x,s.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var l=this.graph.getCellGeometry(this.state.cell);if(l!=null){var r=l.offset||this.EMPTY_POINT;r!=null&&!l.relative&&(this.state.absoluteOffset.x=this.state.view.scale*r.x,this.state.absoluteOffset.y=this.state.view.scale*r.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.moveToFront(),this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="hidden"),this.state.setState(n)}moveToFront(){(this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.nextSibling!=null||this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.nextSibling!=null&&(this.state.text==null||this.state.shape.node.nextSibling!=this.state.text.node))&&(this.state.shape!=null&&this.state.shape.node!=null&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),this.state.text!=null&&this.state.text.node!=null&&this.state.text.node.parentNode.appendChild(this.state.text.node))}mouseUp(i,t){if(this.index!=null&&this.state!=null){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.index;this.index=null,this.ghostPreview==null&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{if(n<=mxEvent$1.CUSTOM_HANDLE){if(this.customHandles!=null){var s=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].active=!1,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].execute(t),this.customHandles!=null&&this.customHandles[mxEvent$1.CUSTOM_HANDLE-n]!=null&&(this.state.style=s,this.customHandles[mxEvent$1.CUSTOM_HANDLE-n].positionChanged())}}else if(n==mxEvent$1.ROTATION_HANDLE)if(this.currentAlpha!=null){var l=this.currentAlpha-(this.state.style[mxConstants$1.STYLE_ROTATION]||0);l!=0&&this.rotateCell(this.state.cell,l)}else this.rotateClick();else{var r=this.graph.isGridEnabledEvent(t.getEvent()),o=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),h=Math.cos(-o),u=Math.sin(-o),d=e.x-this.startX,m=e.y-this.startY,g=h*d-u*m,x=u*d+h*m;d=g,m=x;var v=this.graph.view.scale,C=this.isRecursiveResize(this.state,t);this.resizeCell(this.state.cell,this.roundLength(d/v),this.roundLength(m/v),n,r,this.isConstrainedEvent(t),C)}}finally{this.graph.getModel().endUpdate()}t.consume(),this.reset()}}isRecursiveResize(i,t){return this.graph.isRecursiveResize(this.state)}rotateClick(){}rotateCell(i,t,e){if(t!=0){var n=this.graph.getModel();if(n.isVertex(i)||n.isEdge(i)){if(!n.isEdge(i)){var s=this.graph.getCurrentCellStyle(i),l=(s[mxConstants$1.STYLE_ROTATION]||0)+t;this.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,l,[i])}var r=this.graph.getCellGeometry(i);if(r!=null){var o=this.graph.getCellGeometry(e);if(o!=null&&!n.isEdge(e)&&(r=r.clone(),r.rotate(t,new mxPoint(o.width/2,o.height/2)),n.setGeometry(i,r)),n.isVertex(i)&&!r.relative||n.isEdge(i))for(var h=n.getChildCount(i),u=0;u<h;u++)this.rotateCell(n.getChildAt(i,u),t,i)}}}}reset(){if(this.sizers!=null&&this.index!=null&&this.sizers[this.index]!=null&&this.sizers[this.index].node.style.display=="none"&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,this.preview!=null&&(this.preview.destroy(),this.preview=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&this.sizers!=null){for(var i=0;i<this.sizers.length;i++)this.sizers[i]!=null&&(this.sizers[i].node.style.display="");this.state.control!=null&&this.state.control.node!=null&&(this.state.control.node.style.visibility="")}if(this.customHandles!=null)for(var i=0;i<this.customHandles.length;i++)this.customHandles[i].active?(this.customHandles[i].active=!1,this.customHandles[i].reset()):this.customHandles[i].setVisible(!0);this.selectionBorder!=null&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.unscaledBounds=null,this.livePreviewActive=null}resizeCell(i,t,e,n,s,l,r){var o=this.graph.model.getGeometry(i);if(o!=null){if(n==mxEvent$1.LABEL_HANDLE){var h=-mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),u=Math.cos(h),d=Math.sin(h),m=this.graph.view.scale,g=mxUtils$1.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/m),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/m)),u,d);o=o.clone(),o.offset==null?o.offset=g:(o.offset.x+=g.x,o.offset.y+=g.y),this.graph.model.setGeometry(i,o)}else if(this.unscaledBounds!=null){var m=this.graph.view.scale;(this.childOffsetX!=0||this.childOffsetY!=0)&&this.moveChildren(i,Math.round(this.childOffsetX/m),Math.round(this.childOffsetY/m)),this.graph.resizeCell(i,this.unscaledBounds,r)}}}moveChildren(i,t,e){for(var n=this.graph.getModel(),s=n.getChildCount(i),l=0;l<s;l++){var r=n.getChildAt(i,l),o=this.graph.getCellGeometry(r);o!=null&&(o=o.clone(),o.translate(t,e),n.setGeometry(r,o))}}union(i,t,e,n,s,l,r,o,h){if(s=s!=null?s&&this.graph.gridEnabled:this.graph.gridEnabled,this.singleSizer){var u=i.x+i.width+t,d=i.y+i.height+e;s&&(u=this.graph.snap(u/l)*l,d=this.graph.snap(d/l)*l);var m=new mxRectangle(i.x,i.y,0,0);return m.add(new mxRectangle(u,d,0,0)),m}else{var g=i.width,x=i.height,v=i.x-r.x*l,C=v+g,E=i.y-r.y*l,b=E+x,w=v+g/2,$=E+x/2;n>4?(b=b+e,s?b=this.graph.snap(b/l)*l:b=Math.round(b/l)*l):n<3&&(E=E+e,s?E=this.graph.snap(E/l)*l:E=Math.round(E/l)*l),n==0||n==3||n==5?(v+=t,s?v=this.graph.snap(v/l)*l:v=Math.round(v/l)*l):(n==2||n==4||n==7)&&(C+=t,s?C=this.graph.snap(C/l)*l:C=Math.round(C/l)*l);var P=C-v,M=b-E;if(o){var D=this.graph.getCellGeometry(this.state.cell);if(D!=null){var k=D.width/D.height;n==1||n==2||n==7||n==6?P=M*k:M=P/k,n==0&&(v=C-P,E=b-M)}}if(h){P+=P-g,M+=M-x;var Z=w-(v+P/2),q=$-(E+M/2);v+=Z,E+=q,C+=Z,b+=q}P<0&&(v+=P,P=Math.abs(P)),M<0&&(E+=M,M=Math.abs(M));var j=new mxRectangle(v+r.x*l,E+r.y*l,P,M);return this.minBounds!=null&&(j.width=Math.max(j.width,this.minBounds.x*l+this.minBounds.width*l+Math.max(0,this.x0*l-j.x)),j.height=Math.max(j.height,this.minBounds.y*l+this.minBounds.height*l+Math.max(0,this.y0*l-j.y))),j}}redraw(i){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),i||this.redrawHandles()}getHandlePadding(){var i=new mxPoint(0,0),t=this.tolerance;return this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null&&(this.bounds.width<2*this.sizers[0].bounds.width+2*t||this.bounds.height<2*this.sizers[0].bounds.height+2*t)&&(t/=2,i.x=this.sizers[0].bounds.width+t,i.y=this.sizers[0].bounds.height+t),i}getSizerBounds(){return this.bounds}redrawHandles(){var i=this.getSizerBounds(),t=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,this.state.view.scale>=.8)try{if(this.customHandles!=null)for(var e=0;e<this.customHandles.length;e++){var n=this.customHandles[e].shape.node.style.display;this.customHandles[e].redraw(),this.customHandles[e].shape.node.style.display=n,this.customHandles[e].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[e])?"":"hidden"}}catch(E){console.log("ERROR",E)}if(this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null){if(this.index==null&&this.manageSizers&&this.sizers.length>=8){var s=this.getHandlePadding();this.horizontalOffset=s.x,this.verticalOffset=s.y,(this.horizontalOffset!=0||this.verticalOffset!=0)&&(i=new mxRectangle(i.x,i.y,i.width,i.height),i.x-=this.horizontalOffset/2,i.width+=this.horizontalOffset,i.y-=this.verticalOffset/2,i.height+=this.verticalOffset),this.sizers.length>=8&&(i.width<2*this.sizers[0].bounds.width+2*t||i.height<2*this.sizers[0].bounds.height+2*t?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var l=i.x+i.width,r=i.y+i.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],l,r,"B");else{var o=i.x+i.width/2,h=i.y+i.height/2;if(this.sizers.length>=8){var u=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],d=mxUtils$1.toRadians(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),m=Math.cos(d),g=Math.sin(d),x=Math.round(d*4/Math.PI),v=new mxPoint(i.getCenterX(),i.getCenterY()),C=mxUtils$1.getRotatedPoint(new mxPoint(i.x,i.y),m,g,v);this.moveSizerTo(this.sizers[0],C.x,C.y,"C"),this.sizers[0].setCursor(u[mxUtils$1.mod(0+x,u.length)]),C.x=o,C.y=i.y,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[1],C.x,C.y,"D"),this.sizers[1].setCursor(u[mxUtils$1.mod(1+x,u.length)]),C.x=l,C.y=i.y,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[2],C.x,C.y,"E"),this.sizers[2].setCursor(u[mxUtils$1.mod(2+x,u.length)]),C.x=i.x,C.y=h,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[3],C.x,C.y,"F"),this.sizers[3].setCursor(u[mxUtils$1.mod(7+x,u.length)]),C.x=l,C.y=h,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[4],C.x,C.y,"G"),this.sizers[4].setCursor(u[mxUtils$1.mod(3+x,u.length)]),C.x=i.x,C.y=r,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[5],C.x,C.y,"H"),this.sizers[5].setCursor(u[mxUtils$1.mod(6+x,u.length)]),C.x=o,C.y=r,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[6],C.x,C.y,"I"),this.sizers[6].setCursor(u[mxUtils$1.mod(5+x,u.length)]),C.x=l,C.y=r,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[7],C.x,C.y,"J"),this.sizers[7].setCursor(u[mxUtils$1.mod(4+x,u.length)]),C.x=o+this.state.absoluteOffset.x,C.y=h+this.state.absoluteOffset.y,C=mxUtils$1.getRotatedPoint(C,m,g,v),this.moveSizerTo(this.sizers[8],C.x,C.y,"K")}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],o+this.state.absoluteOffset.x,h+this.state.absoluteOffset.y,"L"):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y,"M")}}if(this.rotationShape!=null){var d=mxUtils$1.toRadians(this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),m=Math.cos(d),g=Math.sin(d),v=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),C=mxUtils$1.getRotatedPoint(this.getRotationHandlePosition(),m,g,v);this.rotationShape.node!=null&&(this.moveSizerTo(this.rotationShape,C.x,C.y,"M"),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()?"hidden":"")}if(this.selectionBorder!=null&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0")),this.edgeHandlers!=null)for(var e=0;e<this.edgeHandlers.length;e++)this.edgeHandlers[e].redraw()}isCustomHandleVisible(i){return!this.graph.isEditing()&&this.state.view.graph.getSelectionCount()==1}getRotationHandlePosition(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)}isParentHighlightVisible(){return!0}updateParentHighlight(){if(this.selectionBorder!=null&&this.isParentHighlightVisible()){if(this.parentHighlight!=null){var i=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(i)){var t=this.graph.view.getState(i),e=this.parentHighlight.bounds;t!=null&&(e.x!=t.x||e.y!=t.y||e.width!=t.width||e.height!=t.height)&&(this.parentHighlight.bounds=mxRectangle.fromRectangle(t),this.parentHighlight.redraw())}else this.parentHighlight.destroy(),this.parentHighlight=null}else if(this.parentHighlightEnabled){var i=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(i)){var t=this.graph.view.getState(i);t!=null&&(this.parentHighlight=this.createParentHighlightShape(t),this.parentHighlight.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(t.style[mxConstants$1.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw())}}}}drawPreview(){this.preview!=null&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants$1.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()}getSelectionBorderBounds(){return this.bounds}destroy(){if(this.escapeHandler!=null&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.preview!=null&&(this.preview.destroy(),this.preview=null),this.parentHighlight!=null&&(this.parentHighlight.destroy(),this.parentHighlight=null),this.ghostPreview!=null&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.selectionBorder!=null&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),this.sizers!=null){for(var i=0;i<this.sizers.length;i++)this.sizers[i].destroy();this.sizers=null}if(this.customHandles!=null){for(var i=0;i<this.customHandles.length;i++)this.customHandles[i].destroy();this.customHandles=null}}}c(mxVertexHandler,"livePreview",!1),c(mxVertexHandler,"manageSizers",!1),c(mxVertexHandler,"rotationHandleVSpacing",-16);class mxLabel extends mxRectangleShape{constructor(t,e,n,s){super(t,e,n,s);c(this,"spacing",2);c(this,"indicatorSize",10);c(this,"indicatorSpacing",2)}init(t){super.init(t),this.indicatorShape!=null&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))}redraw(){this.indicator!=null&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),super.redraw()}isHtmlAllowed(){return super.isHtmlAllowed()&&this.indicatorColor==null&&this.indicatorShape==null}paintForeground(t,e,n,s,l){this.paintImage(t,e,n,s,l),this.paintIndicator(t,e,n,s,l),super.paintForeground(t,e,n,s,l)}paintImage(t,e,n,s,l){if(this.image!=null){var r=this.getImageBounds(e,n,s,l);t.image(r.x,r.y,r.width,r.height,this.image,!1,!1,!1)}}getImageBounds(t,e,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),o=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_WIDTH,mxConstants$1.DEFAULT_IMAGESIZE),h=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_IMAGE_HEIGHT,mxConstants$1.DEFAULT_IMAGESIZE),u=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_SPACING,this.spacing)+5;return l==mxConstants$1.ALIGN_CENTER?t+=(n-o)/2:l==mxConstants$1.ALIGN_RIGHT?t+=n-o-u:t+=u,r==mxConstants$1.ALIGN_TOP?e+=u:r==mxConstants$1.ALIGN_BOTTOM?e+=s-h-u:e+=(s-h)/2,new mxRectangle(t,e,o,h)}paintIndicator(t,e,n,s,l){if(this.indicator!=null)this.indicator.bounds=this.getIndicatorBounds(e,n,s,l),this.indicator.paint(t);else if(this.indicatorImage!=null){var r=this.getIndicatorBounds(e,n,s,l);t.image(r.x,r.y,r.width,r.height,this.indicatorImage,!1,!1,!1)}}getIndicatorBounds(t,e,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_ALIGN,mxConstants$1.ALIGN_LEFT),r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE),o=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_WIDTH,this.indicatorSize),h=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_INDICATOR_HEIGHT,this.indicatorSize),u=this.spacing+5;return l==mxConstants$1.ALIGN_RIGHT?t+=n-o-u:l==mxConstants$1.ALIGN_CENTER?t+=(n-o)/2:t+=u,r==mxConstants$1.ALIGN_BOTTOM?e+=s-h-u:r==mxConstants$1.ALIGN_TOP?e+=u:e+=(s-h)/2,new mxRectangle(t,e,o,h)}redrawHtmlShape(){for(super.redrawHtmlShape();this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(this.image!=null){var t=document.createElement("img");t.style.position="relative",t.setAttribute("border","0");var e=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);e.x-=this.bounds.x,e.y-=this.bounds.y,t.style.left=Math.round(e.x)+"px",t.style.top=Math.round(e.y)+"px",t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",t.src=this.image,this.node.appendChild(t)}}}c(mxLabel,"imageSize",mxConstants$1.DEFAULT_IMAGESIZE);class mxPanningManager{constructor(i){c(this,"damper",1/6);c(this,"delay",10);c(this,"handleMouseOut",!0);c(this,"border",0);this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(e,n){},mouseMove:function(e,n){},mouseUp:(e,n)=>{this.active&&this.stop()}},i.addMouseListener(this.mouseListener),this.mouseUpListener=()=>{this.active&&this.stop()},mxEvent$1.addListener(document,"mouseup",this.mouseUpListener);var t=()=>(this.scrollbars=mxUtils$1.hasScrollbars(i.container),this.scrollLeft=i.container.scrollLeft,this.scrollTop=i.container.scrollTop,window.setInterval(()=>{if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var e=-i.container.scrollLeft-Math.ceil(this.dx),n=-i.container.scrollTop-Math.ceil(this.dy);i.panGraph(e,n),i.panDx=this.scrollLeft-i.container.scrollLeft,i.panDy=this.scrollTop-i.container.scrollTop,i.fireEvent(new mxEventObject$1(mxEvent$1.PAN))}else i.panGraph(this.getDx(),this.getDy())},this.delay));this.isActive=function(){return this.active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=i.view.translate.x,this.t0y=i.view.translate.y,this.active=!0},this.panTo=function(e,n,s,l){this.active||this.start(),this.scrollLeft=i.container.scrollLeft,this.scrollTop=i.container.scrollTop,s=s??0,l=l??0;var r=i.container;this.dx=e+s-r.scrollLeft-r.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,this.dx==0&&(this.dx=e-r.scrollLeft,this.dx>0&&this.dx<this.border?this.dx=this.dx-this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=n+l-r.scrollTop-r.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,this.dy==0&&(this.dy=n-r.scrollTop,this.dy>0&&this.dy<this.border?this.dy=this.dy-this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),this.dx!=0||this.dy!=0?(this.dx*=this.damper,this.dy*=this.damper,this.thread==null&&(this.thread=t())):this.thread!=null&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,this.thread!=null&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)i.panDx=0,i.panDy=0,i.fireEvent(new mxEventObject$1(mxEvent$1.PAN));else{var e=i.panDx,n=i.panDy;(e!=0||n!=0)&&(i.panGraph(0,0),i.view.setTranslate(this.t0x+e/i.view.scale,this.t0y+n/i.view.scale))}},this.destroy=function(){i.removeMouseListener(this.mouseListener),mxEvent$1.removeListener(document,"mouseup",this.mouseUpListener)}}}class mxCellOverlay extends mxEventSource{constructor(t,e,n,s,l,r){super();c(this,"defaultOverlap",.5);this.image=t,this.tooltip=e,this.align=n??this.align,this.verticalAlign=s??this.verticalAlign,this.offset=l??new mxPoint,this.cursor=r??"help"}getBounds(t){var e=t.view.graph.getModel().isEdge(t.cell),n=t.view.scale,s=null,l=this.image.width,r=this.image.height;if(e){var o=t.absolutePoints;if(o.length%2==1)s=o[Math.floor(o.length/2)];else{var h=o.length/2,u=o[h-1],d=o[h];s=new mxPoint(u.x+(d.x-u.x)/2,u.y+(d.y-u.y)/2)}}else s=new mxPoint,this.align==mxConstants$1.ALIGN_LEFT?s.x=t.x:this.align==mxConstants$1.ALIGN_CENTER?s.x=t.x+t.width/2:s.x=t.x+t.width,this.verticalAlign==mxConstants$1.ALIGN_TOP?s.y=t.y:this.verticalAlign==mxConstants$1.ALIGN_MIDDLE?s.y=t.y+t.height/2:s.y=t.y+t.height;return new mxRectangle(Math.round(s.x-(l*this.defaultOverlap-this.offset.x)*n),Math.round(s.y-(r*this.defaultOverlap-this.offset.y)*n),l*n,r*n)}toString(){return this.tooltip}}class mxRootChange{constructor(i,t){this.model=i,this.root=t,this.previous=t}execute(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)}}class mxCellEditor{constructor(i){c(this,"textarea",null);c(this,"editingCell",null);c(this,"trigger",null);c(this,"modified",!1);c(this,"autoSize",!0);c(this,"selectText",!0);c(this,"emptyLabelText",mxClient.IS_FF?"<br>":"");c(this,"escapeCancelsEditing",!0);c(this,"textNode","");c(this,"zIndex",5);c(this,"minResize",new mxRectangle(0,20));c(this,"wordWrapPadding",mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1);c(this,"blurEnabled",!1);c(this,"initialValue",null);c(this,"align",null);this.graph=i,this.zoomHandler=()=>{this.graph.isEditing()&&this.resize()},this.graph.view.addListener(mxEvent$1.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=t=>{this.editingCell!=null&&this.graph.getView().getState(this.editingCell)==null&&this.stopEditing(!0)},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler)}init(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)}applyValue(i,t){this.graph.labelChanged(i.cell,t,this.trigger)}setAlign(i){this.textarea!=null&&(this.textarea.style.textAlign=i),this.align=i,this.resize()}getInitialValue(i,t){var e=mxUtils$1.htmlEntities(this.graph.getEditingValue(i.cell,t),!1);return!mxClient.IS_QUIRKS&&document.documentMode!=8&&document.documentMode!=9&&document.documentMode!=10&&(e=mxUtils$1.replaceTrailingNewlines(e,"<div><br></div>")),e.replace(/\n/g,"<br>")}getCurrentValue(i){return mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes)}isCancelEditingKeyEvent(i){return this.escapeCancelsEditing||mxEvent$1.isShiftDown(i)||mxEvent$1.isControlDown(i)||mxEvent$1.isMetaDown(i)}installListeners(i){mxEvent$1.addListener(i,"dragstart",l=>{this.graph.stopEditing(!1),mxEvent$1.consume(l)}),mxEvent$1.addListener(i,"blur",l=>{this.blurEnabled&&this.focusLost(l)}),mxEvent$1.addListener(i,"keydown",l=>{mxEvent$1.isConsumed(l)||(this.isStopEditingEvent(l)?(this.graph.stopEditing(!1),mxEvent$1.consume(l)):l.keyCode==27&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(l)),mxEvent$1.consume(l)))});var t=l=>{this.editingCell!=null&&this.clearOnChange&&i.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||l.keyCode!=8&&l.keyCode!=46)&&(this.clearOnChange=!1,i.innerHTML="")};mxEvent$1.addListener(i,"keypress",t),mxEvent$1.addListener(i,"paste",t);var e=l=>{this.editingCell!=null&&(this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>"?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)};mxEvent$1.addListener(i,mxClient.IS_IE11?"keyup":"input",e),mxEvent$1.addListener(i,"cut",e),mxEvent$1.addListener(i,"paste",e);var n=mxClient.IS_IE11?"keydown":"input",s=l=>{this.editingCell!=null&&this.autoSize&&!mxEvent$1.isConsumed(l)&&(this.resizeThread!=null&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(()=>{this.resizeThread=null,this.resize()},0))};mxEvent$1.addListener(i,n,s),mxEvent$1.addListener(window,"resize",s),document.documentMode>=9?(mxEvent$1.addListener(i,"DOMNodeRemoved",s),mxEvent$1.addListener(i,"DOMNodeInserted",s)):(mxEvent$1.addListener(i,"cut",s),mxEvent$1.addListener(i,"paste",s))}isStopEditingEvent(i){return i.keyCode==113||this.graph.isEnterStopsCellEditing()&&i.keyCode==13&&!mxEvent$1.isControlDown(i)&&!mxEvent$1.isShiftDown(i)}isEventSource(i){return mxEvent$1.getSource(i)==this.textarea}resize(){var i=this.graph.getView().getState(this.editingCell);if(i==null)this.stopEditing(!0);else if(this.textarea!=null){var t=this.graph.getModel().isEdge(i.cell),e=this.graph.getView().scale,n=null;if(!this.autoSize||i.style[mxConstants$1.STYLE_OVERFLOW]=="fill")this.bounds=this.getEditorBounds(i),this.textarea.style.width=Math.round(this.bounds.width/e)+"px",this.textarea.style.height=Math.round(this.bounds.height/e)+"px",document.documentMode==8||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(i.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal",i.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=Math.round(this.bounds.width/e)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap",i.style[mxConstants$1.STYLE_OVERFLOW]!="fill"&&(this.textarea.style.width=""));else{var s=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_WIDTH,null);if(n=i.text!=null&&this.align==null?i.text.margin:null,n==null&&(n=mxUtils$1.getAlignmentAsPoint(this.align||mxUtils$1.getValue(i.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE))),t){if(this.bounds=new mxRectangle(i.absoluteOffset.x,i.absoluteOffset.y,0,0),s!=null){var l=(parseFloat(s)+2)*e;this.bounds.width=l,this.bounds.x+=n.x*l}}else{var r=mxRectangle.fromRectangle(i),o=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),h=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);if(r=i.shape!=null&&o==mxConstants$1.ALIGN_CENTER&&h==mxConstants$1.ALIGN_MIDDLE?i.shape.getLabelBounds(r):r,s!=null&&(r.width=parseFloat(s)*e),!i.view.graph.cellRenderer.legacySpacing||i.style[mxConstants$1.STYLE_OVERFLOW]!="width"){var u=parseInt(i.style[mxConstants$1.STYLE_SPACING]||2)*e,d=(parseInt(i.style[mxConstants$1.STYLE_SPACING_TOP]||0)+mxText.baseSpacingTop)*e+u,m=(parseInt(i.style[mxConstants$1.STYLE_SPACING_RIGHT]||0)+mxText.baseSpacingRight)*e+u,g=(parseInt(i.style[mxConstants$1.STYLE_SPACING_BOTTOM]||0)+mxText.baseSpacingBottom)*e+u,x=(parseInt(i.style[mxConstants$1.STYLE_SPACING_LEFT]||0)+mxText.baseSpacingLeft)*e+u,o=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),h=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);r=new mxRectangle(r.x+x,r.y+d,r.width-(o==mxConstants$1.ALIGN_CENTER&&s==null?x+m:0),r.height-(h==mxConstants$1.ALIGN_MIDDLE?d+g:0))}this.bounds=new mxRectangle(r.x+i.absoluteOffset.x,r.y+i.absoluteOffset.y,r.width,r.height)}if(this.graph.isWrapping(i.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()){this.textarea.style.wordWrap=mxConstants$1.WORD_WRAP,this.textarea.style.whiteSpace="normal";var l=Math.round(this.bounds.width/(document.documentMode==8,e))+this.wordWrapPadding;this.textarea.style.position!="relative"?(this.textarea.style.width=l+"px",this.textarea.scrollWidth>l&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):this.textarea.style.maxWidth=l+"px"}else this.textarea.style.whiteSpace="nowrap",this.textarea.style.width="";document.documentMode==8&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var v=this.textarea.scrollWidth,C=this.textarea.scrollHeight;document.documentMode==8?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-n.x*(this.bounds.width-(v+1)*e)+v*(e-1)*0+(n.x+.5)*2)/e))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-n.y*(this.bounds.height-(C+.5)*e)+C*(e-1)*0+Math.abs(n.y+.5)*1)/e))+"px",this.textarea.style.width=Math.round(v*e)+"px",this.textarea.style.height=Math.round(C*e)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-n.x*(this.bounds.width-(v+1)*e)+v*(e-1)*0+(n.x+.5)*2))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-n.y*(this.bounds.height-(C+.5)*e)+C*(e-1)*0+Math.abs(n.y+.5)*1))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-n.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-n.y*(this.bounds.height-4)+(n.y==-1?3:0))+1)+"px")}mxUtils$1.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils$1.setPrefixedStyle(this.textarea.style,"transform","scale("+e+","+e+")"+(n==null?"":" translate("+n.x*100+"%,"+n.y*100+"%)"))}}focusLost(){this.stopEditing(!this.graph.isInvokesStopCellEditing())}getBackgroundColor(i){return null}isLegacyEditor(){var i=!1;if(mxClient.IS_SVG){var t=this.graph.view.getDrawPane().ownerSVGElement;if(t!=null){var e=mxUtils$1.getCurrentStyle(t);e!=null&&(i=e.position=="absolute")}}return!i}startEditing(i,t){this.stopEditing(!0),this.align=null,this.textarea==null&&this.init(),this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.hideTooltip();var e=this.graph.getView().getState(i);if(e!=null){this.graph.getView().scale;var n=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),s=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),l=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTCOLOR,"black"),r=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT),o=(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,h=(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,u=[];(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&u.push("underline"),(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&u.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(e),this.textarea.style.textDecoration=u.join(" "),this.textarea.style.fontWeight=o?"bold":"normal",this.textarea.style.fontStyle=h?"italic":"",this.textarea.style.fontSize=Math.round(n)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=s,this.textarea.style.textAlign=r,this.textarea.style.outline="none",this.textarea.style.color=l;var d=this.textDirection=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION);d==mxConstants$1.TEXT_DIRECTION_AUTO&&e!=null&&e.text!=null&&e.text.dialect!=mxConstants$1.DIALECT_STRICTHTML&&!mxUtils$1.isNode(e.text.value)&&(d=e.text.getAutoDirection()),d==mxConstants$1.TEXT_DIRECTION_LTR||d==mxConstants$1.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",d):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(e,t)||"",this.initialValue=this.textarea.innerHTML,this.textarea.innerHTML.length==0||this.textarea.innerHTML=="<br>"?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=i,this.trigger=t,this.textNode=null,e.text!=null&&this.isHideLabel(e)&&(this.textNode=e.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(e.cell)||e.style[mxConstants$1.STYLE_OVERFLOW]!="fill")&&window.setTimeout(()=>{this.resize()},0),this.resize();try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch{}}}isSelectText(){return this.selectText}clearSelection(){var i=null;window.getSelection?i=window.getSelection():document.selection&&(i=document.selection),i!=null&&(i.empty?i.empty():i.removeAllRanges&&i.removeAllRanges())}stopEditing(i){if(i=i||!1,this.editingCell!=null){this.textNode!=null&&(this.textNode.style.visibility="visible",this.textNode=null);var t=i?null:this.graph.view.getState(this.editingCell),e=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),t!=null&&(this.textarea.innerHTML!=e||this.align!=null)){this.prepareTextarea();var n=this.getCurrentValue(t);this.graph.getModel().beginUpdate();try{n!=null&&this.applyValue(t,n),this.align!=null&&this.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent$1.release(this.textarea),this.textarea=null,this.align=null}}prepareTextarea(){this.textarea.lastChild!=null&&this.textarea.lastChild.nodeName=="BR"&&this.textarea.removeChild(this.textarea.lastChild)}isHideLabel(i){return!0}getMinimumSize(i){var t=this.graph.getView().scale;return new mxRectangle(0,0,i.text==null?30:i.text.size*t+20,this.textarea.style.textAlign=="left"?120:40)}getEditorBounds(i){var t=this.graph.getModel().isEdge(i.cell),e=this.graph.getView().scale,n=this.getMinimumSize(i),s=n.width,l=n.height,r=null;if(!t&&i.view.graph.cellRenderer.legacySpacing&&i.style[mxConstants$1.STYLE_OVERFLOW]=="fill")r=i.shape.getLabelBounds(mxRectangle.fromRectangle(i));else{var o=parseInt(i.style[mxConstants$1.STYLE_SPACING]||0)*e,h=(parseInt(i.style[mxConstants$1.STYLE_SPACING_TOP]||0)+mxText.baseSpacingTop)*e+o,u=(parseInt(i.style[mxConstants$1.STYLE_SPACING_RIGHT]||0)+mxText.baseSpacingRight)*e+o,d=(parseInt(i.style[mxConstants$1.STYLE_SPACING_BOTTOM]||0)+mxText.baseSpacingBottom)*e+o,m=(parseInt(i.style[mxConstants$1.STYLE_SPACING_LEFT]||0)+mxText.baseSpacingLeft)*e+o;r=new mxRectangle(i.x,i.y,Math.max(s,i.width-m-u),Math.max(l,i.height-h-d));var g=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),x=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);if(r=i.shape!=null&&g==mxConstants$1.ALIGN_CENTER&&x==mxConstants$1.ALIGN_MIDDLE?i.shape.getLabelBounds(r):r,t?(r.x=i.absoluteOffset.x,r.y=i.absoluteOffset.y,i.text!=null&&i.text.boundingBox!=null&&(i.text.boundingBox.x>0&&(r.x=i.text.boundingBox.x),i.text.boundingBox.y>0&&(r.y=i.text.boundingBox.y))):i.text!=null&&i.text.boundingBox!=null&&(r.x=Math.min(r.x,i.text.boundingBox.x),r.y=Math.min(r.y,i.text.boundingBox.y)),r.x+=m,r.y+=h,i.text!=null&&i.text.boundingBox!=null&&(t?(r.width=Math.max(s,i.text.boundingBox.width),r.height=Math.max(l,i.text.boundingBox.height)):(r.width=Math.max(r.width,i.text.boundingBox.width),r.height=Math.max(r.height,i.text.boundingBox.height))),this.graph.getModel().isVertex(i.cell)){var v=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER);v==mxConstants$1.ALIGN_LEFT?r.x-=i.width:v==mxConstants$1.ALIGN_RIGHT&&(r.x+=i.width);var C=mxUtils$1.getValue(i.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);C==mxConstants$1.ALIGN_TOP?r.y-=i.height:C==mxConstants$1.ALIGN_BOTTOM&&(r.y+=i.height)}}return new mxRectangle(Math.round(r.x),Math.round(r.y),Math.round(r.width),Math.round(r.height))}getEmptyLabelText(i){return this.emptyLabelText}getEditingCell(){return this.editingCell}destroy(){this.textarea!=null&&(mxEvent$1.release(this.textarea),this.textarea.parentNode!=null&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)}}const $e=class $e{static putValue(i,t){$e.values[i]=t}static getValue(i){return $e.values[i]}static getName(i){for(var t in $e.values)if($e.values[t]==i)return t;return null}};c($e,"values",[]);let mxStyleRegistry=$e;class mxUndoableEdit{constructor(i,t){c(this,"undone",!1);c(this,"redone",!1);this.source=i,this.changes=[],this.significant=t??!0}isEmpty(){return this.changes.length==0}isSignificant(){return this.significant}add(i){this.changes.push(i)}notify(){}die(){}undo(){if(!this.undone){this.source.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT));for(var i=this.changes.length,t=i-1;t>=0;t--){var e=this.changes[t];e.execute!=null?e.execute():e.undo!=null&&e.undo(),this.source.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",e))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT))}this.notify()}redo(){if(!this.redone){this.source.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT));for(var i=this.changes.length,t=0;t<i;t++){var e=this.changes[t];e.execute!=null?e.execute():e.redo!=null&&e.redo(),this.source.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",e))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT))}this.notify()}}class mxCurrentRootChange{constructor(i,t){if(this.view=i,this.root=t,this.previous=t,this.isUp=t==null,!this.isUp)for(var e=this.view.currentRoot,n=this.view.graph.getModel();e!=null;){if(e==t){this.isUp=!0;break}e=n.getParent(e)}}execute(){var i=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=i;var t=this.view.graph.getTranslateForRoot(this.view.currentRoot);t!=null&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh();var e=this.isUp?mxEvent$1.UP:mxEvent$1.DOWN;this.view.fireEvent(new mxEventObject$1(e,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp}}class mxGraphView extends mxEventSource{constructor(t){super();c(this,"EMPTY_POINT",new mxPoint);c(this,"doneResource",mxClient.language!="none"?"done":"");c(this,"updatingDocumentResource",mxClient.language!="none"?"updatingDocument":"");c(this,"allowEval",!1);c(this,"captureDocumentGesture",!0);c(this,"optimizeVmlReflows",!0);c(this,"rendering",!0);c(this,"currentRoot",null);c(this,"scale",1);c(this,"updateStyle",!1);c(this,"lastNode",null);c(this,"lastHtmlNode",null);c(this,"lastForegroundNode",null);c(this,"lastForegroundHtmlNode",null);this.graph=t,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}getGraphBounds(){return this.graphBounds}setGraphBounds(t){this.graphBounds=t}getBounds(t){var e=null;if(t!=null&&t.length>0){for(var n=this.graph.getModel(),s=0;s<t.length;s++)if(n.isVertex(t[s])||n.isEdge(t[s])){var l=this.getState(t[s]);l!=null&&(e==null?e=mxRectangle.fromRectangle(l):e.add(l))}}return e}setCurrentRoot(t){if(this.currentRoot!=t){var e=new mxCurrentRootChange(this,t);e.execute();var n=new mxUndoableEdit(this,!0);n.add(e),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",n)),this.graph.sizeDidChange()}return t}scaleAndTranslate(t,e,n){var s=this.scale,l=new mxPoint(this.translate.x,this.translate.y);(this.scale!=t||this.translate.x!=e||this.translate.y!=n)&&(this.scale=t,this.translate.x=e,this.translate.y=n,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE_AND_TRANSLATE,"scale",t,"previousScale",s,"translate",this.translate,"previousTranslate",l))}getScale(){return this.scale}setScale(t){var e=this.scale;this.scale!=t&&(this.scale=t,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.SCALE,"scale",t,"previousScale",e))}getTranslate(){return this.translate}setTranslate(t,e){var n=new mxPoint(this.translate.x,this.translate.y);(this.translate.x!=t||this.translate.y!=e)&&(this.translate.x=t,this.translate.y=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject$1(mxEvent$1.TRANSLATE,"translate",this.translate,"previousTranslate",n))}viewStateChanged(){this.revalidate(),this.graph.sizeDidChange()}refresh(){this.currentRoot!=null&&this.clear(),this.revalidate()}revalidate(){this.invalidate(),this.validate()}clear(t,e,n){var s=this.graph.getModel();if(t=t||s.getRoot(),e=e??!1,n=n??!0,this.removeState(t),n&&(e||t!=this.currentRoot))for(var l=s.getChildCount(t),r=0;r<l;r++)this.clear(s.getChildAt(t,r),e);else this.invalidate(t)}invalidate(t,e,n){var s=this.graph.getModel();t=t||s.getRoot(),e=e??!0,n=n??!0;var l=this.getState(t);if(l!=null&&(l.invalid=!0),!t.invalidating){if(t.invalidating=!0,e)for(var r=s.getChildCount(t),o=0;o<r;o++){var h=s.getChildAt(t,o);this.invalidate(h,e,n)}if(n)for(var u=s.getEdgeCount(t),o=0;o<u;o++)this.invalidate(s.getEdgeAt(t,o),e,n);delete t.invalidating}}validate(t){var e=mxLog.enter("mxGraphView.validate");window.status=mxResources$1.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var n=null;this.optimizeVmlReflows&&this.canvas!=null&&this.textDiv==null&&(document.documentMode==8&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var s=this.getBoundingBox(this.validateCellState(this.validateCell(t||(this.currentRoot!=null?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(s??this.getEmptyBounds()),this.validateBackground(),n!=null&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),this.placeholder!=null&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources$1.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",e)}getEmptyBounds(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)}getBoundingBox(t,e){e=e??!0;var n=null;if(t!=null&&(t.shape!=null&&t.shape.boundingBox!=null&&(n=t.shape.boundingBox.clone()),t.text!=null&&t.text.boundingBox!=null&&(n!=null?n.add(t.text.boundingBox):n=t.text.boundingBox.clone()),e))for(var s=this.graph.getModel(),l=s.getChildCount(t.cell),r=0;r<l;r++){var o=this.getBoundingBox(this.getState(s.getChildAt(t.cell,r)));o!=null&&(n==null?n=o:n.add(o))}return n}createBackgroundPageShape(t){return new mxRectangleShape(t,"white","black")}validateBackground(){this.validateBackgroundImage(),this.validateBackgroundPage()}validateBackgroundImage(){var t=this.graph.getBackgroundImage();if(t!=null){if(this.backgroundImage==null||this.backgroundImage.image!=t.src){this.backgroundImage!=null&&this.backgroundImage.destroy();var e=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(e,t.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),document.documentMode==8&&!mxClient.IS_EM&&mxEvent$1.addGestureListeners(this.backgroundImage.node,n=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(n))},n=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(n))},n=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(n))})}this.redrawBackgroundImage(this.backgroundImage,t)}else this.backgroundImage!=null&&(this.backgroundImage.destroy(),this.backgroundImage=null)}validateBackgroundPage(){if(this.graph.pageVisible){var t=this.getBackgroundPageBounds();this.backgroundPageShape==null?(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",e=>{this.graph.dblClick(e)}),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,e=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(e))},e=>{this.graph.tooltipHandler!=null&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent$1.isConsumed(e)&&this.graph.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(e))},e=>{this.graph.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(e))})):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw())}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)}getBackgroundPageBounds(){var t=this.graph.pageFormat,e=this.scale*this.graph.pageScale,n=new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,t.width*e,t.height*e);return n}redrawBackgroundImage(t,e){t.scale=this.scale,t.bounds.x=this.scale*this.translate.x,t.bounds.y=this.scale*this.translate.y,t.bounds.width=this.scale*e.width,t.bounds.height=this.scale*e.height,t.redraw()}validateCell(t,e){if(e=e??!0,t!=null){e=e&&this.graph.isCellVisible(t);var n=this.getState(t,e);if(n!=null&&!e)this.removeState(t);else for(var s=this.graph.getModel(),l=s.getChildCount(t),r=0;r<l;r++)this.validateCell(s.getChildAt(t,r),e&&(!this.isCellCollapsed(t)||t==this.currentRoot))}return t}validateCellState(t,e){e=e??!0;var n=null;if(t!=null&&(n=this.getState(t),n!=null)){var s=this.graph.getModel();if(n.invalid&&(n.invalid=!1,(n.style==null||n.invalidStyle)&&(n.style=this.graph.getCellStyle(n.cell),n.invalidStyle=!1),t!=this.currentRoot&&this.validateCellState(s.getParent(t),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!1),!1),!1),this.updateCellState(n),t!=this.currentRoot&&!n.invalid&&(this.graph.cellRenderer.redraw(n,!1,this.isRendering()),n.updateCachedBounds())),e&&!n.invalid){n.shape!=null&&this.stateValidated(n);for(var l=s.getChildCount(t),r=0;r<l;r++)this.validateCellState(s.getChildAt(t,r))}}return n}updateCellState(t){if(t.absoluteOffset.x=0,t.absoluteOffset.y=0,t.origin.x=0,t.origin.y=0,t.length=0,t.cell!=this.currentRoot){var e=this.graph.getModel(),n=this.getState(e.getParent(t.cell));n!=null&&n.cell!=this.currentRoot&&(t.origin.x+=n.origin.x,t.origin.y+=n.origin.y);var s=this.graph.getChildOffsetForCell(t.cell);s!=null&&(t.origin.x+=s.x,t.origin.y+=s.y);var l=this.graph.getCellGeometry(t.cell);if(l!=null){if(!e.isEdge(t.cell))if(s=l.offset!=null?l.offset:this.EMPTY_POINT,l.relative&&n!=null)if(e.isEdge(n.cell)){var r=this.getPoint(n,l);r!=null&&(t.origin.x+=r.x/this.scale-n.origin.x-this.translate.x,t.origin.y+=r.y/this.scale-n.origin.y-this.translate.y)}else t.origin.x+=l.x*n.unscaledWidth+s.x,t.origin.y+=l.y*n.unscaledHeight+s.y;else t.absoluteOffset.x=this.scale*s.x,t.absoluteOffset.y=this.scale*s.y,t.origin.x+=l.x,t.origin.y+=l.y;t.x=this.scale*(this.translate.x+t.origin.x),t.y=this.scale*(this.translate.y+t.origin.y),t.width=this.scale*l.width,t.unscaledWidth=l.width,t.height=this.scale*l.height,t.unscaledHeight=l.height,e.isVertex(t.cell)&&this.updateVertexState(t,l),e.isEdge(t.cell)&&this.updateEdgeState(t,l)}}t.updateCachedBounds()}isCellCollapsed(t){return this.graph.isCellCollapsed(t)}updateVertexState(t,e){var n=this.graph.getModel(),s=this.getState(n.getParent(t.cell));if(e.relative&&s!=null&&!n.isEdge(s.cell)){var l=mxUtils$1.toRadians(s.style[mxConstants$1.STYLE_ROTATION]||"0");if(l!=0){var r=Math.cos(l),o=Math.sin(l),h=new mxPoint(t.getCenterX(),t.getCenterY()),u=new mxPoint(s.getCenterX(),s.getCenterY()),d=mxUtils$1.getRotatedPoint(h,r,o,u);t.x=d.x-t.width/2,t.y=d.y-t.height/2}}this.updateVertexLabelOffset(t)}updateEdgeState(t,e){var n=t.getVisibleTerminalState(!0),s=t.getVisibleTerminalState(!1);if(this.graph.model.getTerminal(t.cell,!0)!=null&&n==null||n==null&&e.getTerminalPoint(!0)==null||this.graph.model.getTerminal(t.cell,!1)!=null&&s==null||s==null&&e.getTerminalPoint(!1)==null)this.clear(t.cell,!0);else{this.updateFixedTerminalPoints(t,n,s),this.updatePoints(t,e.points,n,s),this.updateFloatingTerminalPoints(t,n,s);var l=t.absolutePoints;t.cell!=this.currentRoot&&(l==null||l.length<2||l[0]==null||l[l.length-1]==null)?this.clear(t.cell,!0):(this.updateEdgeBounds(t),this.updateEdgeLabelOffset(t))}}updateVertexLabelOffset(t){var e=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER);if(e==mxConstants$1.ALIGN_LEFT){var n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);n!=null?n*=this.scale:n=t.width,t.absoluteOffset.x-=n}else if(e==mxConstants$1.ALIGN_RIGHT)t.absoluteOffset.x+=t.width;else if(e==mxConstants$1.ALIGN_CENTER){var n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LABEL_WIDTH,null);if(n!=null){var s=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER),l=0;s==mxConstants$1.ALIGN_CENTER?l=.5:s==mxConstants$1.ALIGN_RIGHT&&(l=1),l!=0&&(t.absoluteOffset.x-=(n*this.scale-t.width)*l)}}var r=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);r==mxConstants$1.ALIGN_TOP?t.absoluteOffset.y-=t.height:r==mxConstants$1.ALIGN_BOTTOM&&(t.absoluteOffset.y+=t.height)}resetValidationState(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null}stateValidated(t){var e=this.graph.getModel().isEdge(t.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(t.cell)&&this.graph.keepEdgesInBackground,n=e?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode,s=e?this.lastForegroundNode||this.lastNode:this.lastNode,l=this.graph.cellRenderer.insertStateAfter(t,s,n);e?(this.lastForegroundHtmlNode=l[1],this.lastForegroundNode=l[0]):(this.lastHtmlNode=l[1],this.lastNode=l[0])}updateFixedTerminalPoints(t,e,n){this.updateFixedTerminalPoint(t,e,!0,this.graph.getConnectionConstraint(t,e,!0)),this.updateFixedTerminalPoint(t,n,!1,this.graph.getConnectionConstraint(t,n,!1))}updateFixedTerminalPoint(t,e,n,s){t.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(t,e,n,s),n)}getFixedTerminalPoint(t,e,n,s){var l=null;if(s!=null&&(l=this.graph.getConnectionPoint(e,s,!1)),l==null&&e==null){var r=this.scale,o=this.translate,h=t.origin,u=this.graph.getCellGeometry(t.cell);l=u.getTerminalPoint(n),l!=null&&(l=new mxPoint(r*(o.x+l.x+h.x),r*(o.y+l.y+h.y)))}return l}updateBoundsFromStencil(t){var e=null;if(t!=null&&t.shape!=null&&t.shape.stencil!=null&&t.shape.stencil.aspect=="fixed"){e=mxRectangle.fromRectangle(t);var n=t.shape.stencil.computeAspect(t.style,t.x,t.y,t.width,t.height);t.setRect(n.x,n.y,t.shape.stencil.w0*n.width,t.shape.stencil.h0*n.height)}return e}updatePoints(t,e,n,s){if(t!=null){var l=[];l.push(t.absolutePoints[0]);var r=this.getEdgeStyle(t,e,n,s);if(r!=null){var o=this.getTerminalPort(t,n,!0),h=this.getTerminalPort(t,s,!1),u=this.updateBoundsFromStencil(o),d=this.updateBoundsFromStencil(h);r(t,o,h,e,l),u!=null&&o.setRect(u.x,u.y,u.width,u.height),d!=null&&h.setRect(d.x,d.y,d.width,d.height)}else if(e!=null){for(var m=0;m<e.length;m++)if(e[m]!=null){var g=mxUtils$1.clone(e[m]);l.push(this.transformControlPoint(t,g))}}var x=t.absolutePoints;l.push(x[x.length-1]),t.absolutePoints=l}}transformControlPoint(t,e,n){if(t!=null&&e!=null){var s=t.origin,l=n?1:this.scale;return new mxPoint(l*(e.x+this.translate.x+s.x),l*(e.y+this.translate.y+s.y))}return null}isLoopStyleEnabled(t,e,n,s){var l=this.graph.getConnectionConstraint(t,n,!0),r=this.graph.getConnectionConstraint(t,s,!1);return(e==null||e.length<2)&&(!mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ORTHOGONAL_LOOP,!1)||(l==null||l.point==null)&&(r==null||r.point==null))?n!=null&&n==s:!1}getEdgeStyle(t,e,n,s){var l=this.isLoopStyleEnabled(t,e,n,s)?mxUtils$1.getValue(t.style,mxConstants$1.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils$1.getValue(t.style,mxConstants$1.STYLE_NOEDGESTYLE,!1)?null:t.style[mxConstants$1.STYLE_EDGE];if(typeof l=="string"){var r=mxStyleRegistry.getValue(l);r==null&&this.isAllowEval()&&(r=mxUtils$1.eval(l)),l=r}return typeof l=="function"?l:null}updateFloatingTerminalPoints(t,e,n){var s=t.absolutePoints,l=s[0],r=s[s.length-1];r==null&&n!=null&&this.updateFloatingTerminalPoint(t,n,e,!1),l==null&&e!=null&&this.updateFloatingTerminalPoint(t,e,n,!0)}updateFloatingTerminalPoint(t,e,n,s){t.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,n,s),s)}getFloatingTerminalPoint(t,e,n,s){e=this.getTerminalPort(t,e,s);var l=this.getNextPoint(t,n,s),r=this.graph.isOrthogonal(t),o=mxUtils$1.toRadians(Number(e.style[mxConstants$1.STYLE_ROTATION]||"0")),h=new mxPoint(e.getCenterX(),e.getCenterY());if(o!=0){var u=Math.cos(-o),d=Math.sin(-o);l=mxUtils$1.getRotatedPoint(l,u,d,h)}var m=parseFloat(t.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);m+=parseFloat(t.style[s?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var g=this.getPerimeterPoint(e,l,o==0&&r,m);if(o!=0){var u=Math.cos(o),d=Math.sin(o);g=mxUtils$1.getRotatedPoint(g,u,d,h)}return g}getTerminalPort(t,e,n){var s=n?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT,l=mxUtils$1.getValue(t.style,s);if(l!=null){var r=this.getState(this.graph.getModel().getCell(l));r!=null&&(e=r)}return e}getPerimeterPoint(t,e,n,s){var l=null;if(t!=null){var r=this.getPerimeterFunction(t);if(r!=null&&e!=null){var o=this.getPerimeterBounds(t,s);if(o.width>0||o.height>0){l=new mxPoint(e.x,e.y);var h=!1,u=!1;this.graph.model.isVertex(t.cell)&&(h=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPH,0)==1,u=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPV,0)==1,t.shape!=null&&t.shape.stencil!=null&&(h=mxUtils$1.getValue(t.style,"stencilFlipH",0)==1||h,u=mxUtils$1.getValue(t.style,"stencilFlipV",0)==1||u),h&&(l.x=2*o.getCenterX()-l.x),u&&(l.y=2*o.getCenterY()-l.y)),l=r(o,t,l,n),l!=null&&(h&&(l.x=2*o.getCenterX()-l.x),u&&(l.y=2*o.getCenterY()-l.y))}}l==null&&(l=this.getPoint(t))}return l}getRoutingCenterX(t){var e=t.style!=null&&parseFloat(t.style[mxConstants$1.STYLE_ROUTING_CENTER_X])||0;return t.getCenterX()+e*t.width}getRoutingCenterY(t){var e=t.style!=null&&parseFloat(t.style[mxConstants$1.STYLE_ROUTING_CENTER_Y])||0;return t.getCenterY()+e*t.height}getPerimeterBounds(t,e){return e=e??0,t!=null&&(e+=parseFloat(t.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0)),t.getPerimeterBounds(e*this.scale)}getPerimeterFunction(t){var e=t.style[mxConstants$1.STYLE_PERIMETER];if(typeof e=="string"){var n=mxStyleRegistry.getValue(e);n==null&&this.isAllowEval()&&(n=mxUtils$1.eval(e)),e=n}return typeof e=="function"?e:null}getNextPoint(t,e,n){var s=t.absolutePoints,l=null;if(s!=null&&s.length>=2){var r=s.length;l=s[n?Math.min(1,r-1):Math.max(0,r-2)]}return l==null&&e!=null&&(l=new mxPoint(e.getCenterX(),e.getCenterY())),l}getVisibleTerminal(t,e){for(var n=this.graph.getModel(),s=n.getTerminal(t,e),l=s;s!=null&&s!=this.currentRoot;)(!this.graph.isCellVisible(l)||this.isCellCollapsed(s))&&(l=s),s=n.getParent(s);return l!=null&&(!n.contains(l)||n.getParent(l)==n.getRoot()||l==this.currentRoot)&&(l=null),l}updateEdgeBounds(t){var e=t.absolutePoints,n=e[0],s=e[e.length-1];if(n.x!=s.x||n.y!=s.y){var l=s.x-n.x,r=s.y-n.y;t.terminalDistance=Math.sqrt(l*l+r*r)}else t.terminalDistance=0;var o=0,h=[],u=n;if(u!=null){for(var d=u.x,m=u.y,g=d,x=m,v=1;v<e.length;v++){var C=e[v];if(C!=null){var l=u.x-C.x,r=u.y-C.y,E=Math.sqrt(l*l+r*r);h.push(E),o+=E,u=C,d=Math.min(u.x,d),m=Math.min(u.y,m),g=Math.max(u.x,g),x=Math.max(u.y,x)}}t.length=o,t.segments=h;var b=1;t.x=d,t.y=m,t.width=Math.max(b,g-d),t.height=Math.max(b,x-m)}}getPoint(t,e){var n=t.getCenterX(),s=t.getCenterY();if(t.segments!=null&&(e==null||e.relative)){for(var l=e!=null?e.x/2:0,r=t.absolutePoints.length,o=Math.round((l+.5)*t.length),h=t.segments[0],u=0,d=1;o>=Math.round(u+h)&&d<r-1;)u+=h,h=t.segments[d++];var m=h==0?0:(o-u)/h,g=t.absolutePoints[d-1],x=t.absolutePoints[d];if(g!=null&&x!=null){var v=0,C=0,E=0;if(e!=null){v=e.y;var b=e.offset;b!=null&&(C=b.x,E=b.y)}var w=x.x-g.x,$=x.y-g.y,P=h==0?0:$/h,M=h==0?0:w/h;n=g.x+w*m+(P*v+C)*this.scale,s=g.y+$*m-(M*v-E)*this.scale}}else if(e!=null){var b=e.offset;b!=null&&(n+=b.x,s+=b.y)}return new mxPoint(n,s)}getRelativePoint(t,e,n){var s=this.graph.getModel(),l=s.getGeometry(t.cell);if(l!=null){var r=t.absolutePoints.length;if(l.relative&&r>1){for(var o=t.length,h=t.segments,u=t.absolutePoints[0],d=t.absolutePoints[1],m=mxUtils$1.ptSegDistSq(u.x,u.y,d.x,d.y,e,n),g=0,x=0,v=0,C=2;C<r;C++){x+=h[C-2],d=t.absolutePoints[C];var E=mxUtils$1.ptSegDistSq(u.x,u.y,d.x,d.y,e,n);E<=m&&(m=E,g=C-1,v=x),u=d}var b=h[g];u=t.absolutePoints[g],d=t.absolutePoints[g+1];var w=u.x,$=u.y,P=d.x,M=d.y,D=e,k=n,Z=w-P,q=$-M;D-=P,k-=M;var j=0;D=Z-D,k=q-k;var X=D*Z+k*q;X<=0?j=0:j=X*X/(Z*Z+q*q);var rt=Math.sqrt(j);rt>b&&(rt=b);var et=Math.sqrt(mxUtils$1.ptSegDistSq(u.x,u.y,d.x,d.y,e,n)),Y=mxUtils$1.relativeCcw(u.x,u.y,d.x,d.y,e,n);return Y==-1&&(et=-et),new mxPoint((o/2-v-rt)/o*-2,et/this.scale)}}return new mxPoint}updateEdgeLabelOffset(t){var e=t.absolutePoints;if(t.absoluteOffset.x=t.getCenterX(),t.absoluteOffset.y=t.getCenterY(),e!=null&&e.length>0&&t.segments!=null){var n=this.graph.getCellGeometry(t.cell);if(n.relative){var s=this.getPoint(t,n);s!=null&&(t.absoluteOffset=s)}else{var l=e[0],r=e[e.length-1];if(l!=null&&r!=null){var o=r.x-l.x,h=r.y-l.y,u=0,d=0,m=n.offset;m!=null&&(u=m.x,d=m.y);var g=l.x+o/2+u*this.scale,x=l.y+h/2+d*this.scale;t.absoluteOffset.x=g,t.absoluteOffset.y=x}}}}getState(t,e){e=e||!1;var n=null;return t!=null&&(n=this.states.get(t),e&&(n==null||this.updateStyle)&&this.graph.isCellVisible(t)&&(n==null?(n=this.createState(t),this.states.put(t,n)):n.style=this.graph.getCellStyle(t))),n}isRendering(){return this.rendering}setRendering(t){this.rendering=t}isAllowEval(){return this.allowEval}setAllowEval(t){this.allowEval=t}getStates(){return this.states}setStates(t){this.states=t}getCellStates(t){if(t==null)return this.states;for(var e=[],n=0;n<t.length;n++){var s=this.getState(t[n]);s!=null&&e.push(s)}return e}removeState(t){var e=null;return t!=null&&(e=this.states.remove(t),e!=null&&(this.graph.cellRenderer.destroy(e),e.invalid=!0,e.destroy())),e}createState(t){return new mxCellState(this,t,this.graph.getCellStyle(t))}getCanvas(){return this.canvas}getBackgroundPane(){return this.backgroundPane}getDrawPane(){return this.drawPane}getOverlayPane(){return this.overlayPane}getDecoratorPane(){return this.decoratorPane}isContainerEvent(t){var e=mxEvent$1.getSource(t);return e==this.graph.container||e.parentNode==this.backgroundPane||e.parentNode!=null&&e.parentNode.parentNode==this.backgroundPane||e==this.canvas.parentNode||e==this.canvas||e==this.backgroundPane||e==this.drawPane||e==this.overlayPane||e==this.decoratorPane}isScrollEvent(t){var e=mxUtils$1.getOffset(this.graph.container),n=new mxPoint(t.clientX-e.x,t.clientY-e.y),s=this.graph.container.offsetWidth,l=this.graph.container.clientWidth;if(s>l&&n.x>l+2&&n.x<=s)return!0;var r=this.graph.container.offsetHeight,o=this.graph.container.clientHeight;return r>o&&n.y>o+2&&n.y<=r}init(){this.installListeners();var t=this.graph;t.dialect==mxConstants$1.DIALECT_SVG?this.createSvg():t.dialect==mxConstants$1.DIALECT_VML?this.createVml():this.createHtml()}installListeners(){var t=this.graph,e=t.container;if(e!=null){mxClient.IS_TOUCH&&(mxEvent$1.addListener(e,"gesturestart",s=>{t.fireGestureEvent(s),mxEvent$1.consume(s)}),mxEvent$1.addListener(e,"gesturechange",s=>{t.fireGestureEvent(s),mxEvent$1.consume(s)}),mxEvent$1.addListener(e,"gestureend",s=>{t.fireGestureEvent(s),mxEvent$1.consume(s)})),mxEvent$1.addGestureListeners(e,s=>{this.isContainerEvent(s)&&(!mxClient.IS_IE11&&!mxClient.IS_GC&&!mxClient.IS_OP&&!mxClient.IS_SF||!this.isScrollEvent(s))&&t.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(s))},s=>{this.isContainerEvent(s)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(s))},s=>{this.isContainerEvent(s)&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(s))}),mxEvent$1.addListener(e,"dblclick",s=>{this.isContainerEvent(s)&&t.dblClick(s)});var n=function(s){var l=null;if(mxClient.IS_TOUCH){var r=mxEvent$1.getClientX(s),o=mxEvent$1.getClientY(s),h=mxUtils$1.convertPoint(e,r,o);l=t.view.getState(t.getCellAt(h.x,h.y))}return l};t.addMouseListener({mouseDown:function(s,l){t.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=s=>{t.tooltipHandler!=null&&t.tooltipHandler.isHideOnHover()&&t.tooltipHandler.hide(),this.captureDocumentGesture&&t.isMouseDown&&t.container!=null&&!this.isContainerEvent(s)&&t.container.style.display!="none"&&t.container.style.visibility!="hidden"&&!mxEvent$1.isConsumed(s)&&t.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(s,n(s)))},this.endHandler=s=>{this.captureDocumentGesture&&t.isMouseDown&&t.container!=null&&!this.isContainerEvent(s)&&t.container.style.display!="none"&&t.container.style.visibility!="hidden"&&t.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(s))},mxEvent$1.addGestureListeners(document,null,this.moveHandler,this.endHandler)}}createHtml(){var t=this.graph.container;if(t!=null&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas),this.updateContainerStyle(t),mxClient.IS_QUIRKS)){var e=n=>{var s=this.getGraphBounds(),l=s.x+s.width+this.graph.border,r=s.y+s.height+this.graph.border;this.updateHtmlCanvasSize(l,r)};mxEvent$1.addListener(window,"resize",e)}}updateHtmlCanvasSize(t,e){if(this.graph.container!=null){var n=this.graph.container.offsetWidth,s=this.graph.container.offsetHeight;n<t?this.canvas.style.width=t+"px":this.canvas.style.width="100%",s<e?this.canvas.style.height=e+"px":this.canvas.style.height="100%"}}createHtmlPane(t,e){var n=document.createElement("DIV");return t!=null&&e!=null?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=t,n.style.height=e):n.style.position="relative",n}createVml(){var t=this.graph.container;if(t!=null){var e=t.offsetWidth,n=t.offsetHeight;this.canvas=this.createVmlPane(e,n),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(e,n),this.drawPane=this.createVmlPane(e,n),this.overlayPane=this.createVmlPane(e,n),this.decoratorPane=this.createVmlPane(e,n),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas)}}createVmlPane(t,e){var n=document.createElement(mxClient.VML_PREFIX+":group");return n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=t+"px",n.style.height=e+"px",n.setAttribute("coordsize",t+","+e),n.setAttribute("coordorigin","0,0"),n}createSvg(){var t=this.graph.container;this.canvas=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants$1.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var e=document.createElementNS(mxConstants$1.NS_SVG,"svg");e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.display="block",e.appendChild(this.canvas),mxClient.IS_IE11&&(e.style.overflow="hidden"),t!=null&&(t.appendChild(e),this.updateContainerStyle(t))}updateContainerStyle(t){var e=mxUtils$1.getCurrentStyle(t);e!=null&&e.position=="static"&&(t.style.position="relative"),mxClient.IS_POINTER&&(t.style.touchAction="none")}destroy(){var t=this.canvas!=null?this.canvas.ownerSVGElement:null;t==null&&(t=this.canvas),t!=null&&t.parentNode!=null&&(this.clear(this.currentRoot,!0),mxEvent$1.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent$1.release(this.graph.container),t.parentNode.removeChild(t),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)}}class mxPerimeter{static RectanglePerimeter(i,t,e,n){var s=i.getCenterX(),l=i.getCenterY(),r=e.x-s,o=e.y-l,h=Math.atan2(o,r),u=new mxPoint(0,0),d=Math.PI,m=Math.PI/2,g=m-h,x=Math.atan2(i.height,i.width);return h<-d+x||h>d-x?(u.x=i.x,u.y=l-i.width*Math.tan(h)/2):h<-x?(u.y=i.y,u.x=s-i.height*Math.tan(g)/2):h<x?(u.x=i.x+i.width,u.y=l+i.width*Math.tan(h)/2):(u.y=i.y+i.height,u.x=s+i.height*Math.tan(g)/2),n&&(e.x>=i.x&&e.x<=i.x+i.width?u.x=e.x:e.y>=i.y&&e.y<=i.y+i.height&&(u.y=e.y),e.x<i.x?u.x=i.x:e.x>i.x+i.width&&(u.x=i.x+i.width),e.y<i.y?u.y=i.y:e.y>i.y+i.height&&(u.y=i.y+i.height)),u}static EllipsePerimeter(i,t,e,n){var s=i.x,l=i.y,r=i.width/2,o=i.height/2,h=s+r,u=l+o,d=e.x,m=e.y,g=parseInt(d-h),x=parseInt(m-u);if(g==0&&x!=0)return new mxPoint(h,u+o*x/Math.abs(x));if(g==0&&x==0)return new mxPoint(d,m);if(n){if(m>=l&&m<=l+i.height){var v=m-u,C=Math.sqrt(r*r*(1-v*v/(o*o)))||0;return d<=s&&(C=-C),new mxPoint(h+C,m)}if(d>=s&&d<=s+i.width){var C=d-h,v=Math.sqrt(o*o*(1-C*C/(r*r)))||0;return m<=l&&(v=-v),new mxPoint(d,u+v)}}var E=x/g,b=u-E*h,w=r*r*E*E+o*o,$=-2*h*w,P=r*r*E*E*h*h+o*o*h*h-r*r*o*o,M=Math.sqrt($*$-4*w*P),D=(-$+M)/(2*w),k=(-$-M)/(2*w),Z=E*D+b,q=E*k+b,j=Math.sqrt(Math.pow(D-d,2)+Math.pow(Z-m,2)),X=Math.sqrt(Math.pow(k-d,2)+Math.pow(q-m,2)),rt=0,et=0;return j<X?(rt=D,et=Z):(rt=k,et=q),new mxPoint(rt,et)}static RhombusPerimeter(i,t,e,n){var s=i.x,l=i.y,r=i.width,o=i.height,h=s+r/2,u=l+o/2,d=e.x,m=e.y;if(h==d)return u>m?new mxPoint(h,l):new mxPoint(h,l+o);if(u==m)return h>d?new mxPoint(s,u):new mxPoint(s+r,u);var g=h,x=u;return n&&(d>=s&&d<=s+r?g=d:m>=l&&m<=l+o&&(x=m)),d<h?m<u?mxUtils$1.intersection(d,m,g,x,h,l,s,u):mxUtils$1.intersection(d,m,g,x,h,l+o,s,u):m<u?mxUtils$1.intersection(d,m,g,x,h,l,s+r,u):mxUtils$1.intersection(d,m,g,x,h,l+o,s+r,u)}static TrianglePerimeter(i,t,e,n){var s=t!=null?t.style[mxConstants$1.STYLE_DIRECTION]:null,l=s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_SOUTH,r=i.x,o=i.y,h=i.width,u=i.height,d=r+h/2,m=o+u/2,g=new mxPoint(r,o),x=new mxPoint(r+h,m),v=new mxPoint(r,o+u);s==mxConstants$1.DIRECTION_NORTH?(g=v,x=new mxPoint(d,o),v=new mxPoint(r+h,o+u)):s==mxConstants$1.DIRECTION_SOUTH?(x=new mxPoint(d,o+u),v=new mxPoint(r+h,o)):s==mxConstants$1.DIRECTION_WEST&&(g=new mxPoint(r+h,o),x=new mxPoint(r,m),v=new mxPoint(r+h,o+u));var C=e.x-d,E=e.y-m,b=l?Math.atan2(C,E):Math.atan2(E,C),w=l?Math.atan2(h,u):Math.atan2(u,h),$=!1;s==mxConstants$1.DIRECTION_NORTH||s==mxConstants$1.DIRECTION_WEST?$=b>-w&&b<w:$=b<-Math.PI+w||b>Math.PI-w;var P=null;if($)n&&(l&&e.x>=g.x&&e.x<=v.x||!l&&e.y>=g.y&&e.y<=v.y)?l?P=new mxPoint(e.x,g.y):P=new mxPoint(g.x,e.y):s==mxConstants$1.DIRECTION_NORTH?P=new mxPoint(r+h/2+u*Math.tan(b)/2,o+u):s==mxConstants$1.DIRECTION_SOUTH?P=new mxPoint(r+h/2-u*Math.tan(b)/2,o):s==mxConstants$1.DIRECTION_WEST?P=new mxPoint(r+h,o+u/2+h*Math.tan(b)/2):P=new mxPoint(r,o+u/2-h*Math.tan(b)/2);else{if(n){var M=new mxPoint(d,m);e.y>=o&&e.y<=o+u?(M.x=l?d:s==mxConstants$1.DIRECTION_WEST?r+h:r,M.y=e.y):e.x>=r&&e.x<=r+h&&(M.x=e.x,M.y=l?s==mxConstants$1.DIRECTION_NORTH?o+u:o:m),C=e.x-M.x,E=e.y-M.y,d=M.x,m=M.y}l&&e.x<=r+h/2||!l&&e.y<=o+u/2?P=mxUtils$1.intersection(e.x,e.y,d,m,g.x,g.y,x.x,x.y):P=mxUtils$1.intersection(e.x,e.y,d,m,x.x,x.y,v.x,v.y)}return P==null&&(P=new mxPoint(d,m)),P}static HexagonPerimeter(i,t,e,n){var s=i.x,l=i.y,r=i.width,o=i.height,h=i.getCenterX(),u=i.getCenterY(),d=e.x,m=e.y,g=d-h,x=m-u,v=-Math.atan2(x,g),C=Math.PI,E=Math.PI/2,b=new mxPoint(h,u),w=t!=null?mxUtils$1.getValue(t.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,$=w==mxConstants$1.DIRECTION_NORTH||w==mxConstants$1.DIRECTION_SOUTH,P=new mxPoint,M=new mxPoint;if((d<s&&m<l||d<s&&m>l+o||d>s+r&&m<l||d>s+r&&m>l+o)&&(n=!1),n){if($){if(d==h){if(m<=l)return new mxPoint(h,l);if(m>=l+o)return new mxPoint(h,l+o)}else if(d<s){if(m==l+o/4)return new mxPoint(s,l+o/4);if(m==l+3*o/4)return new mxPoint(s,l+3*o/4)}else if(d>s+r){if(m==l+o/4)return new mxPoint(s+r,l+o/4);if(m==l+3*o/4)return new mxPoint(s+r,l+3*o/4)}else if(d==s){if(m<u)return new mxPoint(s,l+o/4);if(m>u)return new mxPoint(s,l+3*o/4)}else if(d==s+r){if(m<u)return new mxPoint(s+r,l+o/4);if(m>u)return new mxPoint(s+r,l+3*o/4)}if(m==l)return new mxPoint(h,l);if(m==l+o)return new mxPoint(h,l+o);d<h?m>l+o/4&&m<l+3*o/4?(P=new mxPoint(s,l),M=new mxPoint(s,l+o)):m<l+o/4?(P=new mxPoint(s-Math.floor(.5*r),l+Math.floor(.5*o)),M=new mxPoint(s+r,l-Math.floor(.25*o))):m>l+3*o/4&&(P=new mxPoint(s-Math.floor(.5*r),l+Math.floor(.5*o)),M=new mxPoint(s+r,l+Math.floor(1.25*o))):d>h&&(m>l+o/4&&m<l+3*o/4?(P=new mxPoint(s+r,l),M=new mxPoint(s+r,l+o)):m<l+o/4?(P=new mxPoint(s,l-Math.floor(.25*o)),M=new mxPoint(s+Math.floor(1.5*r),l+Math.floor(.5*o))):m>l+3*o/4&&(P=new mxPoint(s+Math.floor(1.5*r),l+Math.floor(.5*o)),M=new mxPoint(s,l+Math.floor(1.25*o))))}else{if(m==u){if(d<=s)return new mxPoint(s,l+o/2);if(d>=s+r)return new mxPoint(s+r,l+o/2)}else if(m<l){if(d==s+r/4)return new mxPoint(s+r/4,l);if(d==s+3*r/4)return new mxPoint(s+3*r/4,l)}else if(m>l+o){if(d==s+r/4)return new mxPoint(s+r/4,l+o);if(d==s+3*r/4)return new mxPoint(s+3*r/4,l+o)}else if(m==l){if(d<h)return new mxPoint(s+r/4,l);if(d>h)return new mxPoint(s+3*r/4,l)}else if(m==l+o){if(d<h)return new mxPoint(s+r/4,l+o);if(m>u)return new mxPoint(s+3*r/4,l+o)}if(d==s)return new mxPoint(s,u);if(d==s+r)return new mxPoint(s+r,u);m<u?d>s+r/4&&d<s+3*r/4?(P=new mxPoint(s,l),M=new mxPoint(s+r,l)):d<s+r/4?(P=new mxPoint(s-Math.floor(.25*r),l+o),M=new mxPoint(s+Math.floor(.5*r),l-Math.floor(.5*o))):d>s+3*r/4&&(P=new mxPoint(s+Math.floor(.5*r),l-Math.floor(.5*o)),M=new mxPoint(s+Math.floor(1.25*r),l+o)):m>u&&(d>s+r/4&&d<s+3*r/4?(P=new mxPoint(s,l+o),M=new mxPoint(s+r,l+o)):d<s+r/4?(P=new mxPoint(s-Math.floor(.25*r),l),M=new mxPoint(s+Math.floor(.5*r),l+Math.floor(1.5*o))):d>s+3*r/4&&(P=new mxPoint(s+Math.floor(.5*r),l+Math.floor(1.5*o)),M=new mxPoint(s+Math.floor(1.25*r),l)))}var D=h,k=u;d>=s&&d<=s+r?(D=d,m<u?k=l+o:k=l):m>=l&&m<=l+o&&(k=m,d<h?D=s+r:D=s),b=mxUtils$1.intersection(D,k,e.x,e.y,P.x,P.y,M.x,M.y)}else{if($){var Z=Math.atan2(o/4,r/2);if(v==Z)return new mxPoint(s+r,l+Math.floor(.25*o));if(v==E)return new mxPoint(s+Math.floor(.5*r),l);if(v==C-Z)return new mxPoint(s,l+Math.floor(.25*o));if(v==-Z)return new mxPoint(s+r,l+Math.floor(.75*o));if(v==-E)return new mxPoint(s+Math.floor(.5*r),l+o);if(v==-C+Z)return new mxPoint(s,l+Math.floor(.75*o));v<Z&&v>-Z?(P=new mxPoint(s+r,l),M=new mxPoint(s+r,l+o)):v>Z&&v<E?(P=new mxPoint(s,l-Math.floor(.25*o)),M=new mxPoint(s+Math.floor(1.5*r),l+Math.floor(.5*o))):v>E&&v<C-Z?(P=new mxPoint(s-Math.floor(.5*r),l+Math.floor(.5*o)),M=new mxPoint(s+r,l-Math.floor(.25*o))):v>C-Z&&v<=C||v<-C+Z&&v>=-C?(P=new mxPoint(s,l),M=new mxPoint(s,l+o)):v<-Z&&v>-E?(P=new mxPoint(s+Math.floor(1.5*r),l+Math.floor(.5*o)),M=new mxPoint(s,l+Math.floor(1.25*o))):v<-E&&v>-C+Z&&(P=new mxPoint(s-Math.floor(.5*r),l+Math.floor(.5*o)),M=new mxPoint(s+r,l+Math.floor(1.25*o)))}else{var Z=Math.atan2(o/2,r/4);if(v==Z)return new mxPoint(s+Math.floor(.75*r),l);if(v==C-Z)return new mxPoint(s+Math.floor(.25*r),l);if(v==C||v==-C)return new mxPoint(s,l+Math.floor(.5*o));if(v==0)return new mxPoint(s+r,l+Math.floor(.5*o));if(v==-Z)return new mxPoint(s+Math.floor(.75*r),l+o);if(v==-C+Z)return new mxPoint(s+Math.floor(.25*r),l+o);v>0&&v<Z?(P=new mxPoint(s+Math.floor(.5*r),l-Math.floor(.5*o)),M=new mxPoint(s+Math.floor(1.25*r),l+o)):v>Z&&v<C-Z?(P=new mxPoint(s,l),M=new mxPoint(s+r,l)):v>C-Z&&v<C?(P=new mxPoint(s-Math.floor(.25*r),l+o),M=new mxPoint(s+Math.floor(.5*r),l-Math.floor(.5*o))):v<0&&v>-Z?(P=new mxPoint(s+Math.floor(.5*r),l+Math.floor(1.5*o)),M=new mxPoint(s+Math.floor(1.25*r),l)):v<-Z&&v>-C+Z?(P=new mxPoint(s,l+o),M=new mxPoint(s+r,l+o)):v<-C+Z&&v>-C&&(P=new mxPoint(s-Math.floor(.25*r),l),M=new mxPoint(s+Math.floor(.5*r),l+Math.floor(1.5*o)))}b=mxUtils$1.intersection(h,u,e.x,e.y,P.x,P.y,M.x,M.y)}return b??new mxPoint(h,u)}}class mxStylesheet{constructor(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}createDefaultVertexStyle(){var i=new Object;return i[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_RECTANGLE,i[mxConstants$1.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,i[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,i[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,i[mxConstants$1.STYLE_FILLCOLOR]="#C3D9FF",i[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",i[mxConstants$1.STYLE_FONTCOLOR]="#774400",i}createDefaultEdgeStyle(){var i=new Object;return i[mxConstants$1.STYLE_SHAPE]=mxConstants$1.SHAPE_CONNECTOR,i[mxConstants$1.STYLE_ENDARROW]=mxConstants$1.ARROW_CLASSIC,i[mxConstants$1.STYLE_VERTICAL_ALIGN]=mxConstants$1.ALIGN_MIDDLE,i[mxConstants$1.STYLE_ALIGN]=mxConstants$1.ALIGN_CENTER,i[mxConstants$1.STYLE_STROKECOLOR]="#6482B9",i[mxConstants$1.STYLE_FONTCOLOR]="#446299",i}putDefaultVertexStyle(i){this.putCellStyle("defaultVertex",i)}putDefaultEdgeStyle(i){this.putCellStyle("defaultEdge",i)}getDefaultVertexStyle(){return this.styles.defaultVertex}getDefaultEdgeStyle(){return this.styles.defaultEdge}putCellStyle(i,t){this.styles[i]=t}getCellStyle(i,t){var e=t;if(i!=null&&i.length>0){var n=i.split(";");e!=null&&i.charAt(0)!=";"?e=mxUtils$1.clone(e):e=new Object;for(var s=0;s<n.length;s++){var l=n[s],r=l.indexOf("=");if(r>=0){var o=l.substring(0,r),h=l.substring(r+1);h==mxConstants$1.NONE?delete e[o]:mxUtils$1.isNumeric(h)?e[o]=parseFloat(h):e[o]=h}else{var u=this.styles[l];if(u!=null)for(var o in u)e[o]=u[o]}}}return e}}class mxSelectionChange{constructor(i,t,e){this.selectionModel=i,this.added=t!=null?t.slice():null,this.removed=e!=null?e.slice():null}execute(){var i=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources$1.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,this.removed!=null)for(var t=0;t<this.removed.length;t++)this.selectionModel.cellRemoved(this.removed[t]);if(this.added!=null)for(var t=0;t<this.added.length;t++)this.selectionModel.cellAdded(this.added[t]);var e=this.added;this.added=this.removed,this.removed=e,window.status=mxResources$1.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",i),this.selectionModel.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"added",this.added,"removed",this.removed))}}class mxGraphSelectionModel extends mxEventSource{constructor(t){super();c(this,"doneResource",mxClient.language!="none"?"done":"");c(this,"updatingSelectionResource",mxClient.language!="none"?"updatingSelection":"");c(this,"singleSelection",!1);this.graph=t,this.cells=[]}isSingleSelection(){return this.singleSelection}setSingleSelection(t){this.singleSelection=t}isSelected(t){return t!=null?mxUtils$1.indexOf(this.cells,t)>=0:!1}isEmpty(){return this.cells.length==0}clear(){this.changeSelection(null,this.cells)}setCell(t){t!=null&&this.setCells([t])}setCells(t){if(t!=null){this.singleSelection&&(t=[this.getFirstSelectableCell(t)]);for(var e=[],n=0;n<t.length;n++)this.graph.isCellSelectable(t[n])&&e.push(t[n]);this.changeSelection(e,this.cells)}}getFirstSelectableCell(t){if(t!=null){for(var e=0;e<t.length;e++)if(this.graph.isCellSelectable(t[e]))return t[e]}return null}addCell(t){t!=null&&this.addCells([t])}addCells(t){if(t!=null){var e=null;this.singleSelection&&(e=this.cells,t=[this.getFirstSelectableCell(t)]);for(var n=[],s=0;s<t.length;s++)!this.isSelected(t[s])&&this.graph.isCellSelectable(t[s])&&n.push(t[s]);this.changeSelection(n,e)}}removeCell(t){t!=null&&this.removeCells([t])}removeCells(t){if(t!=null){for(var e=[],n=0;n<t.length;n++)this.isSelected(t[n])&&e.push(t[n]);this.changeSelection(null,e)}}changeSelection(t,e){if(t!=null&&t.length>0&&t[0]!=null||e!=null&&e.length>0&&e[0]!=null){var n=new mxSelectionChange(this,t,e);n.execute();var s=new mxUndoableEdit(this,!1);s.add(n),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",s))}}cellAdded(t){t!=null&&!this.isSelected(t)&&this.cells.push(t)}cellRemoved(t){if(t!=null){var e=mxUtils$1.indexOf(this.cells,t);e>=0&&this.cells.splice(e,1)}}}class mxPopupMenuHandler extends mxPopupMenu{constructor(t,e){super();c(this,"graph",null);c(this,"selectOnPopup",!0);c(this,"clearSelectionOnBackground",!0);c(this,"triggerX",null);c(this,"triggerY",null);c(this,"screenX",null);c(this,"screenY",null);t!=null&&(this.graph=t,this.factoryMethod=e,this.graph.addMouseListener(this),this.gestureHandler=(n,s)=>{this.inTolerance=!1},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.init())}init(){super.init(),mxEvent$1.addGestureListeners(this.div,t=>{this.graph.tooltipHandler.hide()})}isSelectOnPopup(t){return this.selectOnPopup}mouseDown(t,e){this.isEnabled()&&!mxEvent$1.isMultiTouchEvent(e.getEvent())&&(this.hideMenu(),this.triggerX=e.getGraphX(),this.triggerY=e.getGraphY(),this.screenX=mxEvent$1.getMainEvent(e.getEvent()).screenX,this.screenY=mxEvent$1.getMainEvent(e.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(e),this.inTolerance=!0)}mouseMove(t,e){this.inTolerance&&this.screenX!=null&&this.screenY!=null&&(Math.abs(mxEvent$1.getMainEvent(e.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent$1.getMainEvent(e.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)}mouseUp(t,e){if(this.popupTrigger&&this.inTolerance&&this.triggerX!=null&&this.triggerY!=null){var n=this.getCellForPopupEvent(e);this.graph.isEnabled()&&this.isSelectOnPopup(e)&&n!=null&&!this.graph.isCellSelected(n)?this.graph.setSelectionCell(n):this.clearSelectionOnBackground&&n==null&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var s=mxUtils$1.getScrollOrigin();this.popup(e.getX()+s.x+1,e.getY()+s.y+1,n,e.getEvent()),e.consume()}this.popupTrigger=!1,this.inTolerance=!1}getCellForPopupEvent(t){return t.getCell()}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),super.destroy()}}class mxPanningHandler extends mxEventSource{constructor(t){super();c(this,"graph",null);c(this,"useLeftButtonForPanning",!1);c(this,"usePopupTrigger",!0);c(this,"ignoreCell",!1);c(this,"previewEnabled",!0);c(this,"useGrid",!1);c(this,"panningEnabled",!0);c(this,"pinchEnabled",!0);c(this,"maxScale",8);c(this,"minScale",.01);c(this,"dx",null);c(this,"dy",null);c(this,"startX",0);c(this,"startY",0);t!=null&&(this.graph=t,this.graph.addMouseListener(this),this.forcePanningHandler=(e,n)=>{var s=n.getProperty("eventName"),l=n.getProperty("event");s==mxEvent$1.MOUSE_DOWN&&this.isForcePanningEvent(l)&&(this.start(l),this.active=!0,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",l)),l.consume())},this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=(e,n)=>{if(this.isPinchEnabled()){var s=n.getProperty("event");!mxEvent$1.isConsumed(s)&&s.type=="gesturestart"?(this.initialScale=this.graph.view.scale,!this.active&&this.mouseDownEvent!=null&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)):s.type=="gestureend"&&this.initialScale!=null&&(this.initialScale=null),this.initialScale!=null&&this.zoomGraph(s)}},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler),this.mouseUpListener=()=>{this.active&&this.reset()},mxEvent$1.addListener(document,"mouseup",this.mouseUpListener))}isActive(){return this.active||this.initialScale!=null}isPanningEnabled(){return this.panningEnabled}setPanningEnabled(t){this.panningEnabled=t}isPinchEnabled(){return this.pinchEnabled}setPinchEnabled(t){this.pinchEnabled=t}isPanningTrigger(t){var e=t.getEvent();return this.useLeftButtonForPanning&&t.getState()==null&&mxEvent$1.isLeftMouseButton(e)||mxEvent$1.isControlDown(e)&&mxEvent$1.isShiftDown(e)||this.usePopupTrigger&&mxEvent$1.isPopupTrigger(e)}isForcePanningEvent(t){return this.ignoreCell||mxEvent$1.isMultiTouchEvent(t.getEvent())}mouseDown(t,e){this.mouseDownEvent=e,!e.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(e)&&(this.start(e),this.consumePanningTrigger(e))}start(t){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=t.getX(),this.startY=t.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0}consumePanningTrigger(t){t.consume()}mouseMove(t,e){if(this.dx=e.getX()-this.startX,this.dy=e.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject$1(mxEvent$1.PAN,"event",e));else if(this.panningTrigger){var n=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n&&this.active&&this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_START,"event",e))}(this.active||this.panningTrigger)&&e.consume()}mouseUp(t,e){if(this.active){if(this.dx!=null&&this.dy!=null){if(!this.graph.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.graph.container)){var n=this.graph.getView().scale,s=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(s.x+this.dx/n,s.y+this.dy/n)}e.consume()}this.fireEvent(new mxEventObject$1(mxEvent$1.PAN_END,"event",e))}this.reset()}zoomGraph(t){var e=Math.round(this.initialScale*t.scale*100)/100;this.minScale!=null&&(e=Math.max(this.minScale,e)),this.maxScale!=null&&(e=Math.min(this.maxScale,e)),this.graph.view.scale!=e&&(this.graph.zoomTo(e),mxEvent$1.consume(t))}reset(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null}panGraph(t,e){this.graph.getView().setTranslate(t,e)}destroy(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent$1.removeListener(document,"mouseup",this.mouseUpListener)}}class ConnectionCellMarker extends mxCellMarker{constructor(i,t,e){super(e),this.connectionHandler=i,this.hotspotEnabled=t}getCell(i){var t=super.getCell(i);if(this.connectionHandler==null)return t;if(this.connectionHandler.error=null,t==null&&this.connectionHandler.currentPoint!=null&&(t=this.connectionHandler.graph.getCellAt(this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)),t!=null&&!this.connectionHandler.graph.isCellConnectable(t)){var e=this.connectionHandler.graph.getModel().getParent(t);this.connectionHandler.graph.getModel().isVertex(e)&&this.connectionHandler.graph.isCellConnectable(e)&&(t=e)}return(this.connectionHandler.graph.isSwimlane(t)&&this.connectionHandler.currentPoint!=null&&this.connectionHandler.graph.hitsSwimlaneContent(t,this.connectionHandler.currentPoint.x,this.connectionHandler.currentPoint.y)||!this.connectionHandler.isConnectableCell(t))&&(t=null),t!=null?this.connectionHandler.isConnecting()?this.connectionHandler.previous!=null&&(this.connectionHandler.error=this.connectionHandler.validateConnection(this.connectionHandler.previous.cell,t),this.connectionHandler.error!=null&&this.connectionHandler.error.length==0&&(t=null,this.connectionHandler.isCreateTarget(i.getEvent())&&(this.connectionHandler.error=null))):this.connectionHandler.isValidSource(t,i)||(t=null):this.connectionHandler.isConnecting()&&!this.connectionHandler.isCreateTarget(i.getEvent())&&!this.connectionHandler.graph.allowDanglingEdges&&(this.connectionHandler.error=""),t}isValidState(i){return this.connectionHandler.isConnecting()?this.connectionHandler.error==null:super.isValidState(i)}getMarkerColor(i,t,e){return this.connectionHandler.connectImage==null||this.connectionHandler.isConnecting()?super.getMarkerColor(i,t,e):null}intersects(i,t){return this.connectionHandler.connectImage!=null||this.connectionHandler.isConnecting()?!0:super.intersects(i,t)}}class mxConnectionHandler extends mxEventSource{constructor(t,e){super();c(this,"graph",null);c(this,"factoryMethod",!0);c(this,"moveIconFront",!1);c(this,"moveIconBack",!1);c(this,"connectImage",null);c(this,"targetConnectImage",!1);c(this,"enabled",!0);c(this,"select",!0);c(this,"createTarget",!1);c(this,"marker",null);c(this,"constraintHandler",null);c(this,"error",null);c(this,"waypointsEnabled",!1);c(this,"ignoreMouseDown",!1);c(this,"first",null);c(this,"connectIconOffset",new mxPoint(0,mxConstants$1.TOOLTIP_VERTICAL_OFFSET));c(this,"edgeState",null);c(this,"changeHandler",null);c(this,"drillHandler",null);c(this,"mouseDownCounter",0);c(this,"movePreviewAway",!1);c(this,"outlineConnect",!1);c(this,"livePreview",!1);c(this,"cursor",null);c(this,"insertBeforeSource",!1);t!=null&&(this.graph=t,this.factoryMethod=e,this.init(),this.escapeHandler=(n,s)=>{this.reset()},this.graph.addListener(mxEvent$1.ESCAPE,this.escapeHandler))}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}isInsertBefore(t,e,n,s,l){return this.insertBeforeSource&&e!=n}isCreateTarget(t){return this.createTarget}setCreateTarget(t){this.createTarget=t}createShape(){var t=this.livePreview&&this.edgeState!=null?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants$1.INVALID_COLOR);return t.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,t.scale=this.graph.view.scale,t.pointerEvents=!1,t.isDashed=!0,t.init(this.graph.getView().getOverlayPane()),mxEvent$1.redirectMouseEvents(t.node,this.graph,null),t}init(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=t=>{this.iconState!=null&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),this.iconState!=null?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):this.previous!=null&&this.graph.view.getState(this.previous.cell)==null&&this.reset()},this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=t=>{this.reset()},this.graph.addListener(mxEvent$1.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent$1.UP,this.drillHandler)}isConnectableCell(t){return!0}createMarker(){var t=new ConnectionCellMarker(this,!0,this.graph);return t}start(t,e,n,s){this.previous=t,this.first=new mxPoint(e,n),this.edgeState=s??this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=t,this.marker.mark(),this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous))}isConnecting(){return this.first!=null&&this.shape!=null}isValidSource(t,e){return this.graph.isValidSource(t)}isValidTarget(t){return!0}validateConnection(t,e){return this.isValidTarget(e)?this.graph.getEdgeValidationError(null,t,e):""}getConnectImage(t){return this.connectImage}isMoveIconToFrontForState(t){return t.text!=null&&t.text.node.parentNode==this.graph.container?!0:this.moveIconFront}createIcons(t){var e=this.getConnectImage(t);if(e!=null&&t!=null){this.iconState=t;var n=[],s=new mxRectangle(0,0,e.width,e.height),l=new mxImageShape(s,e.src,null,null,0);l.preserveImageAspect=!1,this.isMoveIconToFrontForState(t)?(l.dialect=mxConstants$1.DIALECT_STRICTHTML,l.init(this.graph.container)):(l.dialect=this.graph.dialect==mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_SVG:mxConstants$1.DIALECT_VML,l.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&l.node.previousSibling!=null&&l.node.parentNode.insertBefore(l.node,l.node.parentNode.firstChild)),l.node.style.cursor=mxConstants$1.CURSOR_CONNECT;var r=()=>this.currentState!=null?this.currentState:t,o=h=>{mxEvent$1.isConsumed(h)||(this.icon=l,this.graph.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(h,r())))};return mxEvent$1.redirectMouseEvents(l.node,this.graph,r,o),n.push(l),this.redrawIcons(n,this.iconState),n}return null}redrawIcons(t,e){if(t!=null&&t[0]!=null&&e!=null){var n=this.getIconPosition(t[0],e);t[0].bounds.x=n.x,t[0].bounds.y=n.y,t[0].redraw()}}getIconPosition(t,e){var n=this.graph.getView().scale,s=e.getCenterX(),l=e.getCenterY();if(this.graph.isSwimlane(e.cell)){var r=this.graph.getStartSize(e.cell);s=r.width!=0?e.x+r.width*n/2:s,l=r.height!=0?e.y+r.height*n/2:l;var o=mxUtils$1.toRadians(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROTATION)||0);if(o!=0){var h=Math.cos(o),u=Math.sin(o),d=new mxPoint(e.getCenterX(),e.getCenterY()),m=mxUtils$1.getRotatedPoint(new mxPoint(s,l),h,u,d);s=m.x,l=m.y}}return new mxPoint(s-t.bounds.width/2,l-t.bounds.height/2)}destroyIcons(){if(this.icons!=null){for(var t=0;t<this.icons.length;t++)this.icons[t].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}}isStartEvent(t){return this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null||this.previous!=null&&this.error==null&&(this.icons==null||this.icons!=null&&this.icon!=null)}mouseDown(t,e){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!e.isConsumed()&&!this.isConnecting()&&this.isStartEvent(e)){if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.edgeState=this.createEdgeState(e),this.mouseDownCounter=1,this.waypointsEnabled&&this.shape==null&&(this.waypoints=null,this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState)),this.previous==null&&this.edgeState!=null){var n=this.graph.getPointForEvent(e.getEvent());this.edgeState.cell.geometry.setTerminalPoint(n,!0)}this.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.previous)),e.consume()}this.selectedIcon=this.icon,this.icon=null}isImmediateConnectSource(t){return!this.graph.isCellMovable(t.cell)}createEdgeState(t){return null}isOutlineConnectEvent(t){var e=mxUtils$1.getOffset(this.graph.container),n=t.getEvent(),s=mxEvent$1.getClientX(n),l=mxEvent$1.getClientY(n),r=document.documentElement,o=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),h=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),u=this.currentPoint.x-this.graph.container.scrollLeft+e.x-o,d=this.currentPoint.y-this.graph.container.scrollTop+e.y-h;return this.outlineConnect&&!mxEvent$1.isShiftDown(t.getEvent())&&(t.isSource(this.marker.highlight.shape)||mxEvent$1.isAltDown(t.getEvent())&&t.getState()!=null||this.marker.highlight.isHighlightAt(s,l)||(u!=s||d!=l)&&t.getState()==null&&this.marker.highlight.isHighlightAt(u,d))}updateCurrentState(t,e){if(this.constraintHandler.update(t,this.first==null,!1,this.first==null||t.isSource(this.marker.highlight.shape)?null:e),this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentConstraint!=null)this.marker.highlight!=null&&this.marker.highlight.state!=null&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?this.marker.highlight.shape.stroke!="transparent"&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),this.previous!=null&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),this.error==null&&(this.currentState=this.constraintHandler.currentFocus),(this.error!=null||this.currentState!=null&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(t),this.currentState=this.marker.getValidState()),this.currentState!=null&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);var n=this.isOutlineConnectEvent(t);if(this.currentState!=null&&n){t.isSource(this.marker.highlight.shape)&&(e=new mxPoint(t.getGraphX(),t.getGraphY()));var s=this.graph.getOutlineConstraint(e,this.currentState,t);this.constraintHandler.setFocus(t,this.currentState,!1),this.constraintHandler.currentConstraint=s,this.constraintHandler.currentPoint=e}if(this.outlineConnect&&this.marker.highlight!=null&&this.marker.highlight.shape!=null){var l=this.graph.view.scale;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null?(this.marker.highlight.shape.stroke=mxConstants$1.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.OUTLINE_HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(t.getCell())&&this.marker.getValidState()!=t.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants$1.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants$1.HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint())}}}isCellEnabled(t){return!0}convertWaypoint(t){var e=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t.x=t.x/e-n.x,t.y=t.y/e-n.y}snapToPreview(t,e){if(!mxEvent$1.isAltDown(t.getEvent())&&this.previous!=null){var n=this.graph.gridSize*this.graph.view.scale/2,s=this.sourceConstraint!=null?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(s.x-t.getGraphX())<n&&(e.x=s.x),Math.abs(s.y-t.getGraphY())<n&&(e.y=s.y)}}mouseMove(t,e){if(!e.isConsumed()&&(this.ignoreMouseDown||this.first!=null||!this.graph.isMouseDown)){!this.isEnabled()&&this.currentState!=null&&(this.destroyIcons(),this.currentState=null);var n=this.graph.getView(),s=n.scale,l=n.translate,r=new mxPoint(e.getGraphX(),e.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(e.getEvent())&&(r=new mxPoint((this.graph.snap(r.x/s-l.x)+l.x)*s,(this.graph.snap(r.y/s-l.y)+l.y)*s)),this.snapToPreview(e,r),this.currentPoint=r,(this.first!=null||this.isEnabled()&&this.graph.isEnabled())&&(this.shape!=null||this.first==null||Math.abs(e.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(e.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(e,r),this.first!=null){var o=null,h=r;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&this.constraintHandler.currentPoint!=null?(o=this.constraintHandler.currentConstraint,h=this.constraintHandler.currentPoint.clone()):this.previous!=null&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&mxEvent$1.isShiftDown(e.getEvent())&&(Math.abs(this.previous.getCenterX()-r.x)<Math.abs(this.previous.getCenterY()-r.y)?r.x=this.previous.getCenterX():r.y=this.previous.getCenterY());var u=this.first;if(this.selectedIcon!=null){var d=this.selectedIcon.bounds.width,m=this.selectedIcon.bounds.height;if(this.currentState!=null&&this.targetConnectImage){var g=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=g.x,this.selectedIcon.bounds.y=g.y}else{var x=new mxRectangle(e.getGraphX()+this.connectIconOffset.x,e.getGraphY()+this.connectIconOffset.y,d,m);this.selectedIcon.bounds=x}this.selectedIcon.redraw()}if(this.edgeState!=null)this.updateEdgeState(h,o),h=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],u=this.edgeState.absolutePoints[0];else{if(this.currentState!=null&&this.constraintHandler.currentConstraint==null){var v=this.getTargetPerimeterPoint(this.currentState,e);v!=null&&(h=v)}if(this.sourceConstraint==null&&this.previous!=null){var C=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[0]:h,v=this.getSourcePerimeterPoint(this.previous,C,e);v!=null&&(u=v)}}if(this.currentState==null&&this.movePreviewAway){var v=u;if(this.edgeState!=null&&this.edgeState.absolutePoints.length>=2){var E=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];E!=null&&(v=E)}var b=h.x-v.x,w=h.y-v.y,$=Math.sqrt(b*b+w*w);if($==0)return;this.originalPoint=h.clone(),h.x-=b*4/$,h.y-=w*4/$}else this.originalPoint=null;if(this.shape==null){var b=Math.abs(e.getGraphX()-this.first.x),w=Math.abs(e.getGraphY()-this.first.y);(b>this.graph.tolerance||w>this.graph.tolerance)&&(this.shape=this.createShape(),this.edgeState!=null&&this.shape.apply(this.edgeState),this.updateCurrentState(e,r))}if(this.shape!=null){if(this.edgeState!=null)this.shape.points=this.edgeState.absolutePoints;else{var P=[u];this.waypoints!=null&&(P=P.concat(this.waypoints)),P.push(h),this.shape.points=P}this.drawPreview()}this.cursor!=null&&(this.graph.container.style.cursor=this.cursor),mxEvent$1.consume(e.getEvent()),e.consume()}else!this.isEnabled()||!this.graph.isEnabled()?this.constraintHandler.reset():this.previous!=this.currentState&&this.edgeState==null?(this.destroyIcons(),this.currentState!=null&&this.error==null&&this.constraintHandler.currentConstraint==null&&(this.icons=this.createIcons(this.currentState),this.icons==null&&(this.currentState.setCursor(mxConstants$1.CURSOR_CONNECT),e.consume())),this.previous=this.currentState):this.previous==this.currentState&&this.currentState!=null&&this.icons==null&&!this.graph.isMouseDown&&e.consume();if(!this.graph.isMouseDown&&this.currentState!=null&&this.icons!=null){for(var M=!1,D=e.getSource(),k=0;k<this.icons.length&&!M;k++)M=D==this.icons[k].node||D.parentNode==this.icons[k].node;M||this.updateIcons(this.currentState,this.icons,e)}}else this.constraintHandler.reset()}updateEdgeState(t,e){this.sourceConstraint!=null&&this.sourceConstraint.point!=null&&(this.edgeState.style[mxConstants$1.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants$1.STYLE_EXIT_Y]=this.sourceConstraint.point.y),e!=null&&e.point!=null?(this.edgeState.style[mxConstants$1.STYLE_ENTRY_X]=e.point.x,this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]=e.point.y):(delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants$1.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,this.currentState!=null?null:t],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),this.currentState!=null&&(e==null&&(e=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,e));var n=null;if(this.waypoints!=null){n=[];for(var s=0;s<this.waypoints.length;s++){var l=this.waypoints[s].clone();this.convertWaypoint(l),n[s]=l}}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)}getTargetPerimeterPoint(t,e){var n=null,s=t.view,l=s.getPerimeterFunction(t);if(l!=null){var r=this.waypoints!=null&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),o=l(s.getPerimeterBounds(t),this.edgeState,r,!1);o!=null&&(n=o)}else n=new mxPoint(t.getCenterX(),t.getCenterY());return n}getSourcePerimeterPoint(t,e,n){var s=null,l=t.view,r=l.getPerimeterFunction(t),o=new mxPoint(t.getCenterX(),t.getCenterY());if(r!=null){var h=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION,0),u=-h*(Math.PI/180);h!=0&&(e=mxUtils$1.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(u),Math.sin(u),o));var d=r(l.getPerimeterBounds(t),t,e,!1);d!=null&&(h!=0&&(d=mxUtils$1.getRotatedPoint(new mxPoint(d.x,d.y),Math.cos(-u),Math.sin(-u),o)),s=d)}else s=o;return s}updateIcons(t,e,n){}isStopEvent(t){return t.getState()!=null}addWaypointForEvent(t){var e=mxUtils$1.convertPoint(this.graph.container,t.getX(),t.getY()),n=Math.abs(e.x-this.first.x),s=Math.abs(e.y-this.first.y),l=this.waypoints!=null||this.mouseDownCounter>1&&(n>this.graph.tolerance||s>this.graph.tolerance);if(l){this.waypoints==null&&(this.waypoints=[]);var r=this.graph.view.scale,e=new mxPoint(this.graph.snap(t.getGraphX()/r)*r,this.graph.snap(t.getGraphY()/r)*r);this.waypoints.push(e)}}checkConstraints(t,e){return t==null||e==null||t.point==null||e.point==null||!t.point.equals(e.point)||t.dx!=e.dx||t.dy!=e.dy||t.perimeter!=e.perimeter}mouseUp(t,e){if(!e.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(e)){this.addWaypointForEvent(e),e.consume();return}var n=this.sourceConstraint,s=this.constraintHandler.currentConstraint,l=this.previous!=null?this.previous.cell:null,r=null;this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null&&(r=this.constraintHandler.currentFocus.cell),r==null&&this.currentState!=null&&(r=this.currentState.cell),this.error==null&&(l==null||r==null||l!=r||this.checkConstraints(n,s))?this.connect(l,r,e.getEvent(),e.getCell()):(this.previous!=null&&this.marker.validState!=null&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,e.getEvent()),this.error!=null&&this.error.length>0&&this.graph.validationAlert(this.error)),this.destroyIcons(),e.consume()}this.first!=null&&this.reset()}reset(){this.shape!=null&&(this.shape.destroy(),this.shape=null),this.cursor!=null&&this.graph.container!=null&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject$1(mxEvent$1.RESET))}drawPreview(){this.updatePreview(this.error==null),this.shape.redraw()}updatePreview(t){this.shape.strokewidth=this.getEdgeWidth(t),this.shape.stroke=this.getEdgeColor(t)}getEdgeColor(t){return t?mxConstants$1.VALID_COLOR:mxConstants$1.INVALID_COLOR}getEdgeWidth(t){return t?3:1}connect(t,e,n,s){if(e!=null||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var l=this.graph.getModel(),r=!1,o=null;l.beginUpdate();try{if(t!=null&&e==null&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&(e=this.createTargetVertex(n,t),e!=null)){if(s=this.graph.getDropTarget([e],n,s),r=!0,s==null||!this.graph.getModel().isEdge(s)){var h=this.graph.getView().getState(s);if(h!=null){var u=l.getGeometry(e);u.x-=h.origin.x,u.y-=h.origin.y}}else s=this.graph.getDefaultParent();this.graph.addCell(e,s)}var d=this.graph.getDefaultParent();t!=null&&e!=null&&l.getParent(t)==l.getParent(e)&&l.getParent(l.getParent(t))!=l.getRoot()&&(d=l.getParent(t),t.geometry!=null&&t.geometry.relative&&e.geometry!=null&&e.geometry.relative&&(d=l.getParent(d)));var m=null,g=null;if(this.edgeState!=null&&(m=this.edgeState.cell.value,g=this.edgeState.cell.style),o=this.insertEdge(d,null,m,t,e,g),o!=null){this.graph.setConnectionConstraint(o,t,!0,this.sourceConstraint),this.graph.setConnectionConstraint(o,e,!1,this.constraintHandler.currentConstraint),this.edgeState!=null&&l.setGeometry(o,this.edgeState.cell.geometry);var d=l.getParent(t);if(this.isInsertBefore(o,t,e,n,s)){for(var x=null,u=t;u.parent!=null&&u.geometry!=null&&u.geometry.relative&&u.parent!=o.parent;)u=this.graph.model.getParent(u);u!=null&&u.parent!=null&&u.parent==o.parent&&l.add(d,o,u.parent.getIndex(u))}var v=l.getGeometry(o);if(v==null&&(v=new mxGeometry,v.relative=!0,l.setGeometry(o,v)),this.waypoints!=null&&this.waypoints.length>0){var C=this.graph.view.scale,E=this.graph.view.translate;v.points=[];for(var b=0;b<this.waypoints.length;b++){var w=this.waypoints[b];v.points.push(new mxPoint(w.x/C-E.x,w.y/C-E.y))}}if(e==null){var $=this.graph.view.translate,C=this.graph.view.scale,w=this.originalPoint!=null?new mxPoint(this.originalPoint.x/C-$.x,this.originalPoint.y/C-$.y):new mxPoint(this.currentPoint.x/C-$.x,this.currentPoint.y/C-$.y);w.x-=this.graph.panDx/this.graph.view.scale,w.y-=this.graph.panDy/this.graph.view.scale,v.setTerminalPoint(w,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT,"cell",o,"terminal",e,"event",n,"target",s,"terminalInserted",r))}}catch(P){mxLog.show(),mxLog.debug(P.message)}finally{l.endUpdate()}this.select&&this.selectCells(o,r?e:null)}}selectCells(t,e){this.graph.setSelectionCell(t)}insertEdge(t,e,n,s,l,r){if(this.factoryMethod==null)return this.graph.insertEdge(t,e,n,s,l,r);var o=this.createEdge(n,s,l,r);return o=this.graph.addEdge(o,t,s,l),o}createTargetVertex(t,e){for(var s=this.graph.getCellGeometry(e);s!=null&&s.relative;)e=this.graph.getModel().getParent(e),s=this.graph.getCellGeometry(e);var n=this.graph.cloneCell(e),s=this.graph.getModel().getGeometry(n);if(s!=null){var l=this.graph.view.translate,r=this.graph.view.scale,o=new mxPoint(this.currentPoint.x/r-l.x,this.currentPoint.y/r-l.y);s.x=Math.round(o.x-s.width/2-this.graph.panDx/r),s.y=Math.round(o.y-s.height/2-this.graph.panDy/r);var h=this.getAlignmentTolerance();if(h>0){var u=this.graph.view.getState(e);if(u!=null){var d=u.x/r-l.x,m=u.y/r-l.y;Math.abs(d-s.x)<=h&&(s.x=Math.round(d)),Math.abs(m-s.y)<=h&&(s.y=Math.round(m))}}}return n}getAlignmentTolerance(t){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance}createEdge(t,e,n,s){var l=null;if(this.factoryMethod!=null&&(l=this.factoryMethod(e,n,s)),l==null){l=new mxCell(t||""),l.setEdge(!0),l.setStyle(s);var r=new mxGeometry;r.relative=!0,l.setGeometry(r)}return l}destroy(){this.graph.removeMouseListener(this),this.shape!=null&&(this.shape.destroy(),this.shape=null),this.marker!=null&&(this.marker.destroy(),this.marker=null),this.constraintHandler!=null&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),this.drillHandler!=null&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),this.escapeHandler!=null&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)}}class mxSelectionCellsHandler extends mxEventSource{constructor(t){super();c(this,"enabled",!0);c(this,"maxHandlers",100);this.graph=t,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=(e,n)=>{this.isEnabled()&&this.refresh()},this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent$1.UP,this.refreshHandler)}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}getHandler(t){return this.handlers.get(t)}isHandled(t){return this.getHandler(t)!=null}reset(){this.handlers.visit(function(t,e){e.reset.apply(e)})}getHandledSelectionCells(){return this.graph.getSelectionCells()}refresh(){var t=this.handlers;this.handlers=new mxDictionary;for(var e=mxUtils$1.sortCells(this.getHandledSelectionCells(),!1),n=0;n<e.length;n++){var s=this.graph.view.getState(e[n]);if(s!=null){var l=t.remove(e[n]);l!=null&&(l.state!=s?(l.destroy(),l=null):this.isHandlerActive(l)||(l.refresh!=null&&l.refresh(),l.redraw())),l==null&&(l=this.graph.createHandler(s),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"state",s))),l!=null&&this.handlers.put(e[n],l)}}t.visit((r,o)=>{this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE,"state",o.state)),o.destroy()})}isHandlerActive(t){return t.index!=null}updateHandler(t){var e=this.handlers.remove(t.cell);if(e!=null){var n=e.index,s=e.startX,l=e.startY;e.destroy(),e=this.graph.createHandler(t),e!=null&&(this.handlers.put(t.cell,e),n!=null&&s!=null&&l!=null&&e.start(s,l,n))}}mouseDown(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var n=[t,e];this.handlers.visit(function(s,l){l.mouseDown.apply(l,n)})}}mouseMove(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var n=[t,e];this.handlers.visit(function(s,l){l.mouseMove.apply(l,n)})}}mouseUp(t,e){if(this.graph.isEnabled()&&this.isEnabled()){var n=[t,e];this.handlers.visit(function(s,l){l.mouseUp.apply(l,n)})}}destroy(){this.graph.removeMouseListener(this),this.refreshHandler!=null&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)}}class mxTooltipHandler{constructor(i,t){c(this,"zIndex",10005);c(this,"graph",null);c(this,"delay",null);c(this,"ignoreTouchEvents",!0);c(this,"hideOnHover",!1);c(this,"destroyed",!1);c(this,"enabled",!0);i!=null&&(this.graph=i,this.delay=t||500,this.graph.addMouseListener(this))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}isHideOnHover(){return this.hideOnHover}setHideOnHover(i){this.hideOnHover=i}init(){document.body!=null&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent$1.addGestureListeners(this.div,i=>{this.hideTooltip()}))}getStateForEvent(i){return i.getState()}mouseDown(i,t){this.reset(t,!1),this.hideTooltip()}mouseMove(i,t){if(t.getX()!=this.lastX||t.getY()!=this.lastY){this.reset(t,!0);var e=this.getStateForEvent(t);(this.isHideOnHover()||e!=this.state||t.getSource()!=this.node&&(!this.stateSource||e!=null&&this.stateSource==(t.isSource(e.shape)||!t.isSource(e.text))))&&this.hideTooltip()}this.lastX=t.getX(),this.lastY=t.getY()}mouseUp(i,t){this.reset(t,!0),this.hideTooltip()}resetTimer(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null)}reset(i,t,e){if((!this.ignoreTouchEvents||mxEvent$1.isMouseEvent(i.getEvent()))&&(this.resetTimer(),e=e??this.getStateForEvent(i),t&&this.isEnabled()&&e!=null&&(this.div==null||this.div.style.visibility=="hidden"))){var n=i.getSource(),s=i.getX(),l=i.getY(),r=i.isSource(e.shape)||i.isSource(e.text);this.thread=window.setTimeout(()=>{if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var o=this.graph.getTooltip(e,n,s,l);this.show(o,s,l),this.state=e,this.node=n,this.stateSource=r}},this.delay)}}hide(){this.resetTimer(),this.hideTooltip()}hideTooltip(){this.div!=null&&(this.div.style.visibility="hidden",this.div.innerHTML="")}show(i,t,e){if(!this.destroyed&&i!=null&&i.length>0){this.div==null&&this.init();var n=mxUtils$1.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=t+n.x+"px",this.div.style.top=e+mxConstants$1.TOOLTIP_VERTICAL_OFFSET+n.y+"px",mxUtils$1.isNode(i)?(this.div.innerHTML="",this.div.appendChild(i)):this.div.innerHTML=i.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils$1.fit(this.div)}}destroy(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent$1.release(this.div),this.div!=null&&this.div.parentNode!=null&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)}}class mxVisibleChange{constructor(i,t,e){this.model=i,this.cell=t,this.visible=e,this.previous=e}execute(){this.cell!=null&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))}}class mxCollapseChange{constructor(i,t,e){this.model=i,this.cell=t,this.collapsed=e,this.previous=e}execute(){this.cell!=null&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))}}class mxGraphModel extends mxEventSource{constructor(t){super();c(this,"root",null);c(this,"cells",null);c(this,"maintainEdgeParent",!0);c(this,"ignoreRelativeEdgeParent",!0);c(this,"createIds",!0);c(this,"prefix","");c(this,"postfix","");c(this,"nextId",0);c(this,"updateLevel",0);c(this,"endingUpdate",!1);this.currentEdit=this.createUndoableEdit(),t!=null?this.setRoot(t):this.clear()}clear(){this.setRoot(this.createRoot())}isCreateIds(){return this.createIds}setCreateIds(t){this.createIds=t}createRoot(){var t=new mxCell;return t.insert(new mxCell),t}getCell(t){return this.cells!=null?this.cells[t]:null}filterCells(t,e){var n=null;if(t!=null){n=[];for(var s=0;s<t.length;s++)e(t[s])&&n.push(t[s])}return n}getDescendants(t){return this.filterDescendants(null,t)}filterDescendants(t,e){var n=[];e=e||this.getRoot(),(t==null||t(e))&&n.push(e);for(var s=this.getChildCount(e),l=0;l<s;l++){var r=this.getChildAt(e,l);n=n.concat(this.filterDescendants(t,r))}return n}getRoot(t){var e=t||this.root;if(t!=null)for(;t!=null;)e=t,t=this.getParent(t);return e}setRoot(t){return this.execute(new mxRootChange(this,t)),t}rootChanged(t){var e=this.root;return this.root=t,this.nextId=0,this.cells=null,this.cellAdded(t),e}isRoot(t){return t!=null&&this.root==t}isLayer(t){return this.isRoot(this.getParent(t))}isAncestor(t,e){for(;e!=null&&e!=t;)e=this.getParent(e);return e==t}contains(t){return this.isAncestor(this.root,t)}getParent(t){return t!=null?t.getParent():null}add(t,e,n){if(e!=t&&t!=null&&e!=null){n==null&&(n=this.getChildCount(t));var s=t!=this.getParent(e);this.execute(new mxChildChange(this,t,e,n)),this.maintainEdgeParent&&s&&this.updateEdgeParents(e)}return e}cellAdded(t){if(t!=null){if(t.getId()==null&&this.createIds&&t.setId(this.createId(t)),t.getId()!=null){var e=this.getCell(t.getId());if(e!=t){for(;e!=null;)t.setId(this.createId(t)),e=this.getCell(t.getId());this.cells==null&&(this.cells=new Object),this.cells[t.getId()]=t}}mxUtils$1.isNumeric(t.getId())&&(this.nextId=Math.max(this.nextId,t.getId()));for(var n=this.getChildCount(t),s=0;s<n;s++)this.cellAdded(this.getChildAt(t,s))}}createId(t){var e=this.nextId;return this.nextId++,this.prefix+e+this.postfix}updateEdgeParents(t,e){e=e||this.getRoot(t);for(var n=this.getChildCount(t),s=0;s<n;s++){var l=this.getChildAt(t,s);this.updateEdgeParents(l,e)}for(var r=this.getEdgeCount(t),o=[],s=0;s<r;s++)o.push(this.getEdgeAt(t,s));for(var s=0;s<o.length;s++){var h=o[s];this.isAncestor(e,h)&&this.updateEdgeParent(h,e)}}updateEdgeParent(t,e){for(var n=this.getTerminal(t,!0),s=this.getTerminal(t,!1),l=null;n!=null&&!this.isEdge(n)&&n.geometry!=null&&n.geometry.relative;)n=this.getParent(n);for(;s!=null&&this.ignoreRelativeEdgeParent&&!this.isEdge(s)&&s.geometry!=null&&s.geometry.relative;)s=this.getParent(s);if(this.isAncestor(e,n)&&this.isAncestor(e,s)&&(n==s?l=this.getParent(n):l=this.getNearestCommonAncestor(n,s),l!=null&&(this.getParent(l)!=this.root||this.isAncestor(l,t))&&this.getParent(t)!=l)){var r=this.getGeometry(t);if(r!=null){var o=this.getOrigin(this.getParent(t)),h=this.getOrigin(l),u=h.x-o.x,d=h.y-o.y;r=r.clone(),r.translate(-u,-d),this.setGeometry(t,r)}this.add(l,t,this.getChildCount(l))}}getOrigin(t){var e=null;if(t!=null){if(e=this.getOrigin(this.getParent(t)),!this.isEdge(t)){var n=this.getGeometry(t);n!=null&&(e.x+=n.x,e.y+=n.y)}}else e=new mxPoint;return e}getNearestCommonAncestor(t,e){if(t!=null&&e!=null){var n=mxCellPath.create(e);if(n!=null&&n.length>0){var s=t,l=mxCellPath.create(s);if(n.length<l.length){s=e;var r=l;l=n,n=r}for(;s!=null;){var o=this.getParent(s);if(n.indexOf(l+mxCellPath.PATH_SEPARATOR)==0&&o!=null)return s;l=mxCellPath.getParentPath(l),s=o}}}return null}remove(t){return t==this.root?this.setRoot(null):this.getParent(t)!=null&&this.execute(new mxChildChange(this,null,t)),t}cellRemoved(t){if(t!=null&&this.cells!=null){for(var e=this.getChildCount(t),n=e-1;n>=0;n--)this.cellRemoved(this.getChildAt(t,n));this.cells!=null&&t.getId()!=null&&delete this.cells[t.getId()]}}parentForCellChanged(t,e,n){var s=this.getParent(t);if(e!=null)(e!=s||s.getIndex(t)!=n)&&e.insert(t,n);else if(s!=null){var l=s.getIndex(t);s.remove(l)}var r=this.contains(e),o=this.contains(s);return r&&!o?this.cellAdded(t):o&&!r&&this.cellRemoved(t),s}getChildCount(t){return t!=null?t.getChildCount():0}getChildAt(t,e){return t!=null?t.getChildAt(e):null}getChildren(t){return t!=null?t.children:null}getChildVertices(t){return this.getChildCells(t,!0,!1)}getChildEdges(t){return this.getChildCells(t,!1,!0)}getChildCells(t,e,n){e=e??!1,n=n??!1;for(var s=this.getChildCount(t),l=[],r=0;r<s;r++){var o=this.getChildAt(t,r);(!n&&!e||n&&this.isEdge(o)||e&&this.isVertex(o))&&l.push(o)}return l}getTerminal(t,e){return t!=null?t.getTerminal(e):null}setTerminal(t,e,n){var s=e!=this.getTerminal(t,n);return this.execute(new mxTerminalChange(this,t,e,n)),this.maintainEdgeParent&&s&&this.updateEdgeParent(t,this.getRoot()),e}setTerminals(t,e,n){this.beginUpdate();try{this.setTerminal(t,e,!0),this.setTerminal(t,n,!1)}finally{this.endUpdate()}}terminalForCellChanged(t,e,n){var s=this.getTerminal(t,n);return e!=null?e.insertEdge(t,n):s!=null&&s.removeEdge(t,n),s}getEdgeCount(t){return t!=null?t.getEdgeCount():0}getEdgeAt(t,e){return t!=null?t.getEdgeAt(e):null}getDirectedEdgeCount(t,e,n){for(var s=0,l=this.getEdgeCount(t),r=0;r<l;r++){var o=this.getEdgeAt(t,r);o!=n&&this.getTerminal(o,e)==t&&s++}return s}getConnections(t){return this.getEdges(t,!0,!0,!1)}getIncomingEdges(t){return this.getEdges(t,!0,!1,!1)}getOutgoingEdges(t){return this.getEdges(t,!1,!0,!1)}getEdges(t,e,n,s){e=e??!0,n=n??!0,s=s??!0;for(var l=this.getEdgeCount(t),r=[],o=0;o<l;o++){var h=this.getEdgeAt(t,o),u=this.getTerminal(h,!0),d=this.getTerminal(h,!1);(s&&u==d||u!=d&&(e&&d==t||n&&u==t))&&r.push(h)}return r}getEdgesBetween(t,e,n){n=n??!1;var s=this.getEdgeCount(t),l=this.getEdgeCount(e),r=t,o=s;l<s&&(o=l,r=e);for(var h=[],u=0;u<o;u++){var d=this.getEdgeAt(r,u),m=this.getTerminal(d,!0),g=this.getTerminal(d,!1),x=m==t&&g==e,v=g==t&&m==e;(x||!n&&v)&&h.push(d)}return h}getOpposites(t,e,n,s){n=n??!0,s=s??!0;var l=[];if(t!=null)for(var r=0;r<t.length;r++){var o=this.getTerminal(t[r],!0),h=this.getTerminal(t[r],!1);o==e&&h!=null&&h!=e&&s?l.push(h):h==e&&o!=null&&o!=e&&n&&l.push(o)}return l}getTopmostCells(t){for(var e=new mxDictionary,n=[],s=0;s<t.length;s++)e.put(t[s],!0);for(var s=0;s<t.length;s++){for(var l=t[s],r=!0,o=this.getParent(l);o!=null;){if(e.get(o)){r=!1;break}o=this.getParent(o)}r&&n.push(l)}return n}isVertex(t){return t!=null?t.isVertex():!1}isEdge(t){return t!=null?t.isEdge():!1}isConnectable(t){return t!=null?t.isConnectable():!1}getValue(t){return t!=null?t.getValue():null}setValue(t,e){return this.execute(new mxValueChange(this,t,e)),e}valueForCellChanged(t,e){return t.valueChanged(e)}getGeometry(t){return t!=null?t.getGeometry():null}setGeometry(t,e){return e!=this.getGeometry(t)&&this.execute(new mxGeometryChange(this,t,e)),e}geometryForCellChanged(t,e){var n=this.getGeometry(t);return t.setGeometry(e),n}getStyle(t){return t!=null?t.getStyle():null}setStyle(t,e){return e!=this.getStyle(t)&&this.execute(new mxStyleChange(this,t,e)),e}styleForCellChanged(t,e){var n=this.getStyle(t);return t.setStyle(e),n}isCollapsed(t){return t!=null?t.isCollapsed():!1}setCollapsed(t,e){return e!=this.isCollapsed(t)&&this.execute(new mxCollapseChange(this,t,e)),e}collapsedStateForCellChanged(t,e){var n=this.isCollapsed(t);return t.setCollapsed(e),n}isVisible(t){return t!=null?t.isVisible():!1}setVisible(t,e){return e!=this.isVisible(t)&&this.execute(new mxVisibleChange(this,t,e)),e}visibleStateForCellChanged(t,e){var n=this.isVisible(t);return t.setVisible(e),n}execute(t){t.execute(),this.beginUpdate(),this.currentEdit.add(t),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTE,"change",t)),this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTED,"change",t)),this.endUpdate()}beginUpdate(){this.updateLevel++,this.fireEvent(new mxEventObject$1(mxEvent$1.BEGIN_UPDATE)),this.updateLevel==1&&this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDIT))}endUpdate(){if(this.updateLevel--,this.updateLevel==0&&this.fireEvent(new mxEventObject$1(mxEvent$1.END_EDIT)),!this.endingUpdate){this.endingUpdate=this.updateLevel==0,this.fireEvent(new mxEventObject$1(mxEvent$1.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject$1(mxEvent$1.BEFORE_UNDO,"edit",this.currentEdit));var t=this.currentEdit;this.currentEdit=this.createUndoableEdit(),t.notify(),this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",t))}}finally{this.endingUpdate=!1}}}createUndoableEdit(t){var e=new mxUndoableEdit(this,t??!0);return e.notify=function(){e.source.fireEvent(new mxEventObject$1(mxEvent$1.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject$1(mxEvent$1.NOTIFY,"edit",e,"changes",e.changes))},e}mergeChildren(t,e,n){n=n??!0,this.beginUpdate();try{var s=new Object;this.mergeChildrenImpl(t,e,n,s);for(var l in s){var r=s[l],o=this.getTerminal(r,!0);o!=null&&(o=s[mxCellPath.create(o)],this.setTerminal(r,o,!0)),o=this.getTerminal(r,!1),o!=null&&(o=s[mxCellPath.create(o)],this.setTerminal(r,o,!1))}}finally{this.endUpdate()}}mergeChildrenImpl(t,e,n,s){this.beginUpdate();try{for(var l=t.getChildCount(),r=0;r<l;r++){var o=t.getChildAt(r);if(typeof o.getId=="function"){var h=o.getId(),u=h!=null&&(!this.isEdge(o)||!n)?this.getCell(h):null;if(u==null){var d=o.clone();d.setId(h),d.setTerminal(o.getTerminal(!0),!0),d.setTerminal(o.getTerminal(!1),!1),u=e.insert(d),this.cellAdded(u)}s[mxCellPath.create(o)]=u,this.mergeChildrenImpl(o,u,n,s)}}}finally{this.endUpdate()}}getParents(t){var e=[];if(t!=null)for(var n=new mxDictionary,s=0;s<t.length;s++){var l=this.getParent(t[s]);l!=null&&!n.get(l)&&(n.put(l,!0),e.push(l))}return e}cloneCell(t,e){return t!=null?this.cloneCells([t],e)[0]:null}cloneCells(t,e,n){e=e??!0,n=n??new Object;for(var s=[],l=0;l<t.length;l++)t[l]!=null?s.push(this.cloneCellImpl(t[l],n,e)):s.push(null);for(var l=0;l<s.length;l++)s[l]!=null&&this.restoreClone(s[l],t[l],n);return s}cloneCellImpl(t,e,n){var s=mxObjectIdentity.get(t),l=e[s];if(l==null&&(l=this.cellCloned(t),e[s]=l,n))for(var r=this.getChildCount(t),o=0;o<r;o++){var h=this.cloneCellImpl(this.getChildAt(t,o),e,!0);l.insert(h)}return l}cellCloned(t){return t.clone()}restoreClone(t,e,n){var s=this.getTerminal(e,!0);if(s!=null){var l=n[mxObjectIdentity.get(s)];l!=null&&l.insertEdge(t,!0)}var r=this.getTerminal(e,!1);if(r!=null){var l=n[mxObjectIdentity.get(r)];l!=null&&l.insertEdge(t,!1)}for(var o=this.getChildCount(t),h=0;h<o;h++)this.restoreClone(this.getChildAt(t,h),this.getChildAt(e,h),n)}}class mxGraph extends mxEventSource{constructor(t,e,n,s){super();c(this,"isMouseDown",!1);c(this,"stylesheet",null);c(this,"selectionModel",null);c(this,"cellEditor",null);c(this,"dialect",null);c(this,"gridSize",10);c(this,"gridEnabled",!0);c(this,"portsEnabled",!0);c(this,"nativeDblClickEnabled",!0);c(this,"doubleTapEnabled",!0);c(this,"doubleTapTimeout",500);c(this,"doubleTapTolerance",25);c(this,"lastTouchY",0);c(this,"lastTouchY",0);c(this,"lastTouchTime",0);c(this,"tapAndHoldEnabled",!0);c(this,"tapAndHoldDelay",500);c(this,"tapAndHoldInProgress",!1);c(this,"tapAndHoldValid",!1);c(this,"initialTouchX",0);c(this,"initialTouchY",0);c(this,"tolerance",4);c(this,"defaultOverlap",.5);c(this,"defaultParent",null);c(this,"alternateEdgeStyle",null);c(this,"backgroundImage",null);c(this,"pageVisible",!1);c(this,"pageBreaksVisible",!1);c(this,"pageBreakColor","gray");c(this,"pageBreakDashed",!0);c(this,"minPageBreakDist",20);c(this,"preferPageSize",!1);c(this,"pageFormat",mxConstants$1.PAGE_FORMAT_A4_PORTRAIT);c(this,"pageScale",1.5);c(this,"enabled",!0);c(this,"escapeEnabled",!0);c(this,"invokesStopCellEditing",!0);c(this,"enterStopsCellEditing",!1);c(this,"useScrollbarsForPanning",!0);c(this,"exportEnabled",!0);c(this,"importEnabled",!0);c(this,"cellsLocked",!1);c(this,"cellsCloneable",!0);c(this,"foldingEnabled",!0);c(this,"cellsEditable",!0);c(this,"cellsDeletable",!0);c(this,"cellsMovable",!0);c(this,"edgeLabelsMovable",!0);c(this,"vertexLabelsMovable",!1);c(this,"dropEnabled",!1);c(this,"splitEnabled",!0);c(this,"cellsResizable",!0);c(this,"cellsBendable",!0);c(this,"cellsSelectable",!0);c(this,"cellsDisconnectable",!0);c(this,"autoSizeCells",!1);c(this,"autoSizeCellsOnAdd",!1);c(this,"autoScroll",!0);c(this,"ignoreScrollbars",!1);c(this,"translateToScrollPosition",!1);c(this,"timerAutoScroll",!1);c(this,"allowAutoPanning",!1);c(this,"autoExtend",!0);c(this,"maximumGraphBounds",null);c(this,"minimumGraphSize",null);c(this,"minimumContainerSize",null);c(this,"maximumContainerSize",null);c(this,"resizeContainer",!1);c(this,"border",0);c(this,"keepEdgesInForeground",!1);c(this,"keepEdgesInBackground",!1);c(this,"allowNegativeCoordinates",!0);c(this,"constrainChildren",!0);c(this,"constrainRelativeChildren",!1);c(this,"extendParents",!0);c(this,"extendParentsOnAdd",!0);c(this,"extendParentsOnMove",!1);c(this,"recursiveResize",!1);c(this,"collapseToPreferredSize",!0);c(this,"zoomFactor",1.2);c(this,"keepSelectionVisibleOnZoom",!1);c(this,"centerZoom",!0);c(this,"resetViewOnRootChange",!0);c(this,"resetEdgesOnResize",!1);c(this,"resetEdgesOnMove",!1);c(this,"resetEdgesOnConnect",!0);c(this,"allowLoops",!1);c(this,"defaultLoopStyle",mxEdgeStyle.Loop);c(this,"multigraph",!0);c(this,"connectableEdges",!1);c(this,"allowDanglingEdges",!0);c(this,"cloneInvalidEdges",!1);c(this,"disconnectOnMove",!0);c(this,"labelsVisible",!0);c(this,"htmlLabels",!1);c(this,"swimlaneSelectionEnabled",!0);c(this,"swimlaneNesting",!0);c(this,"swimlaneIndicatorColorAttribute",mxConstants$1.STYLE_FILLCOLOR);c(this,"minFitScale",.1);c(this,"maxFitScale",8);c(this,"panDx",0);c(this,"panDy",0);c(this,"collapsedImage",new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9));c(this,"expandedImage",new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9));c(this,"warningImage",new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16));c(this,"alreadyConnectedResource",mxClient.language!="none"?"alreadyConnected":"");c(this,"containsValidationErrorsResource",mxClient.language!="none"?"containsValidationErrors":"");c(this,"collapseExpandResource",mxClient.language!="none"?"collapse-expand":"");this.mouseListeners=null,this.renderHint=n,mxClient.IS_SVG?this.dialect=mxConstants$1.DIALECT_SVG:n==mxConstants$1.RENDERING_HINT_FASTEST?this.dialect=mxConstants$1.DIALECT_STRICTHTML:n==mxConstants$1.RENDERING_HINT_FASTER?this.dialect=mxConstants$1.DIALECT_PREFERHTML:this.dialect=mxConstants$1.DIALECT_MIXEDHTML,this.model=e??new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(s??this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=(l,r)=>{this.graphModelChanged(r.getProperty("edit").changes)},this.model.addListener(mxEvent$1.CHANGE,this.graphModelChangeListener),this.createHandlers(),t!=null&&this.init(t),this.view.revalidate()}init(t){this.container=t,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent$1.addListener(t,"mouseleave",()=>{this.tooltipHandler!=null&&this.tooltipHandler.hide()}),document.documentMode==8&&t.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")}createHandlers(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()}createTooltipHandler(){return new mxTooltipHandler(this)}createSelectionCellsHandler(){return new mxSelectionCellsHandler(this)}createConnectionHandler(){return new mxConnectionHandler(this)}createGraphHandler(){return new mxGraphHandler(this)}createPanningHandler(){return new mxPanningHandler(this)}createPopupMenuHandler(){return new mxPopupMenuHandler(this)}createSelectionModel(){return new mxGraphSelectionModel(this)}createStylesheet(){return new mxStylesheet}createGraphView(){return new mxGraphView(this)}createCellRenderer(){return new mxCellRenderer}createCellEditor(){return new mxCellEditor(this)}getModel(){return this.model}getView(){return this.view}getStylesheet(){return this.stylesheet}setStylesheet(t){this.stylesheet=t}getSelectionModel(){return this.selectionModel}setSelectionModel(t){this.selectionModel=t}getSelectionCellsForChanges(t,e){for(var n=new mxDictionary,s=[],l=u=>{if(!n.get(u)&&this.model.contains(u))if(this.model.isEdge(u)||this.model.isVertex(u))n.put(u,!0),s.push(u);else for(var d=this.model.getChildCount(u),m=0;m<d;m++)l(this.model.getChildAt(u,m))},r=0;r<t.length;r++){var o=t[r];if(o.constructor!=mxRootChange&&(e==null||!e(o))){var h=null;o instanceof mxChildChange?h=o.child:o.cell!=null&&o.cell instanceof mxCell&&(h=o.cell),h!=null&&l(h)}}return s}graphModelChanged(t){for(var e=0;e<t.length;e++)this.processChange(t[e]);this.updateSelection(),this.view.validate(),this.sizeDidChange()}updateSelection(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)if(!this.model.contains(t[n])||!this.isCellVisible(t[n]))e.push(t[n]);else for(var s=this.model.getParent(t[n]);s!=null&&s!=this.view.currentRoot;){if(this.isCellCollapsed(s)||!this.isCellVisible(s)){e.push(t[n]);break}s=this.model.getParent(s)}this.removeSelectionCells(e)}processChange(t){if(t instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(t.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT));else if(t instanceof mxChildChange){var e=this.model.getParent(t.child);this.view.invalidate(t.child,!0,!0),(!this.model.contains(e)||this.isCellCollapsed(e))&&(this.view.invalidate(t.child,!0,!0),this.removeStateForCell(t.child),this.view.currentRoot==t.child&&this.home()),e!=t.previous&&(e!=null&&this.view.invalidate(e,!1,!1),t.previous!=null&&this.view.invalidate(t.previous,!1,!1))}else if(t instanceof mxTerminalChange||t instanceof mxGeometryChange)(t instanceof mxTerminalChange||t.previous==null&&t.geometry!=null||t.previous!=null&&!t.previous.equals(t.geometry))&&this.view.invalidate(t.cell);else if(t instanceof mxValueChange)this.view.invalidate(t.cell,!1,!1);else if(t instanceof mxStyleChange){this.view.invalidate(t.cell,!0,!0);var n=this.view.getState(t.cell);n!=null&&(n.invalidStyle=!0)}else t.cell!=null&&t.cell instanceof mxCell&&this.removeStateForCell(t.cell)}removeStateForCell(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.removeStateForCell(this.model.getChildAt(t,n));this.view.invalidate(t,!1,!0),this.view.removeState(t)}addCellOverlay(t,e){t.overlays==null&&(t.overlays=[]),t.overlays.push(e);var n=this.view.getState(t);return n!=null&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_OVERLAY,"cell",t,"overlay",e)),e}getCellOverlays(t){return t.overlays}removeCellOverlay(t,e){if(e==null)this.removeCellOverlays(t);else{var n=mxUtils$1.indexOf(t.overlays,e);if(n>=0){t.overlays.splice(n,1),t.overlays.length==0&&(t.overlays=null);var s=this.view.getState(t);s!=null&&this.cellRenderer.redraw(s),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",t,"overlay",e))}else e=null}return e}removeCellOverlays(t){var e=t.overlays;if(e!=null){t.overlays=null;var n=this.view.getState(t);n!=null&&this.cellRenderer.redraw(n);for(var s=0;s<e.length;s++)this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_OVERLAY,"cell",t,"overlay",e[s]))}return e}clearCellOverlays(t){t=t??this.model.getRoot(),this.removeCellOverlays(t);for(var e=this.model.getChildCount(t),n=0;n<e;n++){var s=this.model.getChildAt(t,n);this.clearCellOverlays(s)}}setCellWarning(t,e,n,s){if(e!=null&&e.length>0){n=n??this.warningImage;var l=new mxCellOverlay(n,"<font color=red>"+e+"</font>");return s&&l.addListener(mxEvent$1.CLICK,(r,o)=>{this.isEnabled()&&this.setSelectionCell(t)}),this.addCellOverlay(t,l)}else this.removeCellOverlays(t);return null}startEditing(t){this.startEditingAtCell(null,t)}startEditingAtCell(t,e){(e==null||!mxEvent$1.isMultiTouchEvent(e))&&(t==null&&(t=this.getSelectionCell(),t!=null&&!this.isCellEditable(t)&&(t=null)),t!=null&&(this.fireEvent(new mxEventObject$1(mxEvent$1.START_EDITING,"cell",t,"event",e)),this.cellEditor.startEditing(t,e),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STARTED,"cell",t,"event",e))))}getEditingValue(t,e){return this.convertValueToString(t)}stopEditing(t){this.cellEditor.stopEditing(t),this.fireEvent(new mxEventObject$1(mxEvent$1.EDITING_STOPPED,"cancel",t))}labelChanged(t,e,n){this.model.beginUpdate();try{var s=t.value;this.cellLabelChanged(t,e,this.isAutoSizeCell(t)),this.fireEvent(new mxEventObject$1(mxEvent$1.LABEL_CHANGED,"cell",t,"value",e,"old",s,"event",n))}finally{this.model.endUpdate()}return t}cellLabelChanged(t,e,n){this.model.beginUpdate();try{this.model.setValue(t,e),n&&this.cellSizeUpdated(t,!1)}finally{this.model.endUpdate()}}escape(t){this.fireEvent(new mxEventObject$1(mxEvent$1.ESCAPE,"event",t))}click(t){var e=t.getEvent(),n=t.getCell(),s=new mxEventObject$1(mxEvent$1.CLICK,"event",e,"cell",n);if(t.isConsumed()&&s.consume(),this.fireEvent(s),this.isEnabled()&&!mxEvent$1.isConsumed(e)&&!s.isConsumed()){if(n!=null){if(this.isTransparentClickEvent(e)){var l=!1,r=this.getCellAt(t.graphX,t.graphY,null,null,null,m=>{var g=this.isCellSelected(m.cell);return l=l||g,!l||g||m.cell!=n&&this.model.isAncestor(m.cell,n)});r!=null&&(n=r)}}else if(this.isSwimlaneSelectionEnabled()&&(n=this.getSwimlaneAt(t.getGraphX(),t.getGraphY()),n!=null&&(!this.isToggleEvent(e)||!mxEvent$1.isAltDown(e)))){for(var o=n,h=[];o!=null;){o=this.model.getParent(o);var u=this.view.getState(o);this.isSwimlane(o)&&u!=null&&h.push(o)}if(h.length>0){h=h.reverse(),h.splice(0,0,n),h.push(n);for(var d=0;d<h.length-1;d++)this.isCellSelected(h[d])&&(n=h[this.isToggleEvent(e)?d:d+1])}}n!=null?this.selectCellForEvent(n,e):this.isToggleEvent(e)||this.clearSelection()}}isSiblingSelected(t){for(var e=this.model,n=e.getParent(t),s=e.getChildCount(n),l=0;l<s;l++){var r=e.getChildAt(n,l);if(t!=r&&this.isCellSelected(r))return!0}return!1}dblClick(t,e){var n=new mxEventObject$1(mxEvent$1.DOUBLE_CLICK,"event",t,"cell",e);this.fireEvent(n),this.isEnabled()&&!mxEvent$1.isConsumed(t)&&!n.isConsumed()&&e!=null&&this.isCellEditable(e)&&!this.isEditing(e)&&(this.startEditingAtCell(e,t),mxEvent$1.consume(t))}tapAndHold(t){var e=t.getEvent(),n=new mxEventObject$1(mxEvent$1.TAP_AND_HOLD,"event",e,"cell",t.getCell());if(this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent$1.isConsumed(e)&&!n.isConsumed()&&this.connectionHandler.isEnabled()){var s=this.view.getState(this.connectionHandler.marker.getCell(t));s!=null&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=s,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(t),this.connectionHandler.previous=s,this.connectionHandler.fireEvent(new mxEventObject$1(mxEvent$1.START,"state",this.connectionHandler.previous)))}}scrollPointToVisible(t,e,n,s){if(!this.timerAutoScroll&&(this.ignoreScrollbars||mxUtils$1.hasScrollbars(this.container))){var l=this.container;if(s=s??20,t>=l.scrollLeft&&e>=l.scrollTop&&t<=l.scrollLeft+l.clientWidth&&e<=l.scrollTop+l.clientHeight){var r=l.scrollLeft+l.clientWidth-t;if(r<s){var o=l.scrollLeft;if(l.scrollLeft+=s-r,n&&o==l.scrollLeft){if(this.dialect==mxConstants$1.DIALECT_SVG){var h=this.view.getDrawPane().ownerSVGElement,u=this.container.scrollWidth+s-r;h.style.width=u+"px"}else{var u=Math.max(l.clientWidth,l.scrollWidth)+s-r,d=this.view.getCanvas();d.style.width=u+"px"}l.scrollLeft+=s-r}}else r=t-l.scrollLeft,r<s&&(l.scrollLeft-=s-r);var m=l.scrollTop+l.clientHeight-e;if(m<s){var o=l.scrollTop;if(l.scrollTop+=s-m,o==l.scrollTop&&n){if(this.dialect==mxConstants$1.DIALECT_SVG){var h=this.view.getDrawPane().ownerSVGElement,g=this.container.scrollHeight+s-m;h.style.height=g+"px"}else{var g=Math.max(l.clientHeight,l.scrollHeight)+s-m,d=this.view.getCanvas();d.style.height=g+"px"}l.scrollTop+=s-m}}else m=e-l.scrollTop,m<s&&(l.scrollTop-=s-m)}}else this.allowAutoPanning&&!this.panningHandler.isActive()&&(this.panningManager==null&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(t+this.panDx,e+this.panDy))}createPanningManager(){return new mxPanningManager(this)}getBorderSizes(){var t=mxUtils$1.getCurrentStyle(this.container);return new mxRectangle(mxUtils$1.parseCssNumber(t.paddingLeft)+(t.borderLeftStyle!="none"?mxUtils$1.parseCssNumber(t.borderLeftWidth):0),mxUtils$1.parseCssNumber(t.paddingTop)+(t.borderTopStyle!="none"?mxUtils$1.parseCssNumber(t.borderTopWidth):0),mxUtils$1.parseCssNumber(t.paddingRight)+(t.borderRightStyle!="none"?mxUtils$1.parseCssNumber(t.borderRightWidth):0),mxUtils$1.parseCssNumber(t.paddingBottom)+(t.borderBottomStyle!="none"?mxUtils$1.parseCssNumber(t.borderBottomWidth):0))}getPreferredPageSize(t,e,n){this.view.scale;var s=this.view.translate,l=this.pageFormat,r=this.pageScale,o=new mxRectangle(0,0,Math.ceil(l.width*r),Math.ceil(l.height*r)),h=this.pageBreaksVisible?Math.ceil(e/o.width):1,u=this.pageBreaksVisible?Math.ceil(n/o.height):1;return new mxRectangle(0,0,h*o.width+2+s.x,u*o.height+2+s.y)}fit(t,e,n,s,l,r,o){if(this.container!=null){t=t??this.getBorder(),e=e??!1,n=n??0,s=s??!0,l=l??!1,r=r??!1;var h=this.getBorderSizes(),u=this.container.offsetWidth-h.x-h.width-1,d=o??this.container.offsetHeight-h.y-h.height-1,m=this.view.getGraphBounds();if(m.width>0&&m.height>0){e&&m.x!=null&&m.y!=null&&(m=m.clone(),m.width+=m.x,m.height+=m.y,m.x=0,m.y=0);var g=this.view.scale,x=m.width/g,v=m.height/g;this.backgroundImage!=null&&(x=Math.max(x,this.backgroundImage.width-m.x/g),v=Math.max(v,this.backgroundImage.height-m.y/g));var C=(e?t:2*t)+n+1;u-=C,d-=C;var E=l?d/v:r?u/x:Math.min(u/x,d/v);if(this.minFitScale!=null&&(E=Math.max(E,this.minFitScale)),this.maxFitScale!=null&&(E=Math.min(E,this.maxFitScale)),s)if(e)this.view.scale!=E&&this.view.setScale(E);else if(mxUtils$1.hasScrollbars(this.container)){this.view.setScale(E);var $=this.getGraphBounds();$.x!=null&&(this.container.scrollLeft=$.x),$.y!=null&&(this.container.scrollTop=$.y)}else{var b=m.x!=null?Math.floor(this.view.translate.x-m.x/g+t/E+n/2):t,w=m.y!=null?Math.floor(this.view.translate.y-m.y/g+t/E+n/2):t;this.view.scaleAndTranslate(E,b,w)}else return E}}return this.view.scale}sizeDidChange(){var t=this.getGraphBounds();if(this.container!=null){var e=this.getBorder(),n=Math.max(0,t.x)+t.width+2*e,s=Math.max(0,t.y)+t.height+2*e;if(this.minimumContainerSize!=null&&(n=Math.max(n,this.minimumContainerSize.width),s=Math.max(s,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(n,s),this.preferPageSize||this.pageVisible){var l=this.getPreferredPageSize(t,Math.max(1,n),Math.max(1,s));l!=null&&(n=l.width*this.view.scale,s=l.height*this.view.scale)}if(this.minimumGraphSize!=null&&(n=Math.max(n,this.minimumGraphSize.width*this.view.scale),s=Math.max(s,this.minimumGraphSize.height*this.view.scale)),n=Math.ceil(n),s=Math.ceil(s),this.dialect==mxConstants$1.DIALECT_SVG){var r=this.view.getDrawPane().ownerSVGElement;r!=null&&(r.style.minWidth=Math.max(1,n)+"px",r.style.minHeight=Math.max(1,s)+"px",r.style.width="100%",r.style.height="100%")}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,n),Math.max(1,s)):(this.view.canvas.style.minWidth=Math.max(1,n)+"px",this.view.canvas.style.minHeight=Math.max(1,s)+"px");this.updatePageBreaks(this.pageBreaksVisible,n,s)}this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",t))}doResizeContainer(t,e){this.maximumContainerSize!=null&&(t=Math.min(this.maximumContainerSize.width,t),e=Math.min(this.maximumContainerSize.height,e)),this.container.style.width=Math.ceil(t)+"px",this.container.style.height=Math.ceil(e)+"px"}updatePageBreaks(t,e,n){var s=this.view.scale,l=this.view.translate,r=this.pageFormat,o=s*this.pageScale,h=new mxRectangle(0,0,r.width*o,r.height*o),u=mxRectangle.fromRectangle(this.getGraphBounds());u.width=Math.max(1,u.width),u.height=Math.max(1,u.height),h.x=Math.floor((u.x-l.x*s)/h.width)*h.width+l.x*s,h.y=Math.floor((u.y-l.y*s)/h.height)*h.height+l.y*s,u.width=Math.ceil((u.width+(u.x-h.x))/h.width)*h.width,u.height=Math.ceil((u.height+(u.y-h.y))/h.height)*h.height,t=t&&Math.min(h.width,h.height)>this.minPageBreakDist;var d=t?Math.ceil(u.height/h.height)+1:0,m=t?Math.ceil(u.width/h.width)+1:0,g=(m-1)*h.width,x=(d-1)*h.height;this.horizontalPageBreaks==null&&d>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&m>0&&(this.verticalPageBreaks=[]);var v=C=>{if(C!=null){for(var E=C==this.horizontalPageBreaks?d:m,b=0;b<=E;b++){var w=C==this.horizontalPageBreaks?[new mxPoint(Math.round(h.x),Math.round(h.y+b*h.height)),new mxPoint(Math.round(h.x+g),Math.round(h.y+b*h.height))]:[new mxPoint(Math.round(h.x+b*h.width),Math.round(h.y)),new mxPoint(Math.round(h.x+b*h.width),Math.round(h.y+x))];if(C[b]!=null)C[b].points=w,C[b].redraw();else{var $=new mxPolyline(w,this.pageBreakColor);$.dialect=this.dialect,$.pointerEvents=!1,$.isDashed=this.pageBreakDashed,$.init(this.view.backgroundPane),$.redraw(),C[b]=$}}for(var b=E;b<C.length;b++)C[b].destroy();C.splice(E,C.length-E)}};v(this.horizontalPageBreaks),v(this.verticalPageBreaks)}getCurrentCellStyle(t,e){var n=e?null:this.view.getState(t);return n!=null?n.style:this.getCellStyle(t)}getCellStyle(t){var e=this.model.getStyle(t),n=null;return this.model.isEdge(t)?n=this.stylesheet.getDefaultEdgeStyle():n=this.stylesheet.getDefaultVertexStyle(),e!=null&&(n=this.postProcessCellStyle(this.stylesheet.getCellStyle(e,n))),n==null&&(n=new Object),n}postProcessCellStyle(t){if(t!=null){var e=t[mxConstants$1.STYLE_IMAGE],n=this.getImageFromBundles(e);if(n!=null?t[mxConstants$1.STYLE_IMAGE]=n:n=e,n!=null&&n.substring(0,11)=="data:image/"){if(n.substring(0,20)=="data:image/svg+xml,<")n=n.substring(0,19)+encodeURIComponent(n.substring(19));else if(n.substring(0,22)!="data:image/svg+xml,%3C"){var s=n.indexOf(",");s>0&&n.substring(s-7,s+1)!=";base64,"&&(n=n.substring(0,s)+";base64,"+n.substring(s+1))}t[mxConstants$1.STYLE_IMAGE]=n}}return t}setCellStyle(t,e){if(e=e||this.getSelectionCells(),e!=null){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setStyle(e[n],t)}finally{this.model.endUpdate()}}}toggleCellStyle(t,e,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(t,e,[n])}toggleCellStyles(t,e,n){e=e??!1,n=n||this.getSelectionCells();var s=null;if(n!=null&&n.length>0){var l=this.getCurrentCellStyle(n[0]);s=mxUtils$1.getValue(l,t,e)?0:1,this.setCellStyles(t,s,n)}return s}setCellStyles(t,e,n){n=n||this.getSelectionCells(),mxUtils$1.setCellStyles(this.model,n,t,e)}toggleCellStyleFlags(t,e,n){this.setCellStyleFlags(t,e,null,n)}setCellStyleFlags(t,e,n,s){if(s=s||this.getSelectionCells(),s!=null&&s.length>0){if(n==null){var l=this.getCurrentCellStyle(s[0]),r=parseInt(l[t]||0);n=(r&e)!=e}mxUtils$1.setCellStyleFlags(this.model,s,t,e,n)}}alignCells(t,e,n){if(e==null&&(e=this.getSelectionCells()),e!=null&&e.length>1){if(n==null)for(var s=0;s<e.length;s++){var l=this.view.getState(e[s]);if(l!=null&&!this.model.isEdge(e[s]))if(n==null)if(t==mxConstants$1.ALIGN_CENTER){n=l.x+l.width/2;break}else if(t==mxConstants$1.ALIGN_RIGHT)n=l.x+l.width;else if(t==mxConstants$1.ALIGN_TOP)n=l.y;else if(t==mxConstants$1.ALIGN_MIDDLE){n=l.y+l.height/2;break}else t==mxConstants$1.ALIGN_BOTTOM?n=l.y+l.height:n=l.x;else t==mxConstants$1.ALIGN_RIGHT?n=Math.max(n,l.x+l.width):t==mxConstants$1.ALIGN_TOP?n=Math.min(n,l.y):t==mxConstants$1.ALIGN_BOTTOM?n=Math.max(n,l.y+l.height):n=Math.min(n,l.x)}if(n!=null){var r=this.view.scale;this.model.beginUpdate();try{for(var s=0;s<e.length;s++){var l=this.view.getState(e[s]);if(l!=null){var o=this.getCellGeometry(e[s]);o!=null&&!this.model.isEdge(e[s])&&(o=o.clone(),t==mxConstants$1.ALIGN_CENTER?o.x+=(n-l.x-l.width/2)/r:t==mxConstants$1.ALIGN_RIGHT?o.x+=(n-l.x-l.width)/r:t==mxConstants$1.ALIGN_TOP?o.y+=(n-l.y)/r:t==mxConstants$1.ALIGN_MIDDLE?o.y+=(n-l.y-l.height/2)/r:t==mxConstants$1.ALIGN_BOTTOM?o.y+=(n-l.y-l.height)/r:o.x+=(n-l.x)/r,this.resizeCell(e[s],o))}}this.fireEvent(new mxEventObject$1(mxEvent$1.ALIGN_CELLS,"align",t,"cells",e))}finally{this.model.endUpdate()}}}return e}flipEdge(t){if(t!=null&&this.alternateEdgeStyle!=null){this.model.beginUpdate();try{var e=this.model.getStyle(t);e==null||e.length==0?this.model.setStyle(t,this.alternateEdgeStyle):this.model.setStyle(t,null),this.resetEdge(t),this.fireEvent(new mxEventObject$1(mxEvent$1.FLIP_EDGE,"edge",t))}finally{this.model.endUpdate()}}return t}addImageBundle(t){this.imageBundles.push(t)}removeImageBundle(t){for(var e=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=t&&e.push(this.imageBundles[n]);this.imageBundles=e}getImageFromBundles(t){if(t!=null)for(var e=0;e<this.imageBundles.length;e++){var n=this.imageBundles[e].getImage(t);if(n!=null)return n}return null}orderCells(t,e){e==null&&(e=mxUtils$1.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(e,t),this.fireEvent(new mxEventObject$1(mxEvent$1.ORDER_CELLS,"back",t,"cells",e))}finally{this.model.endUpdate()}return e}cellsOrdered(t,e){if(t!=null){this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var s=this.model.getParent(t[n]);e?this.model.add(s,t[n],n):this.model.add(s,t[n],this.model.getChildCount(s)-1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ORDERED,"back",e,"cells",t))}finally{this.model.endUpdate()}}}groupCells(t,e,n){n==null&&(n=mxUtils$1.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),t==null&&(t=this.createGroupCell(n));var s=this.getBoundsForGroup(t,n,e);if(n.length>0&&s!=null){var l=this.model.getParent(t);l==null&&(l=this.model.getParent(n[0])),this.model.beginUpdate();try{this.getCellGeometry(t)==null&&this.model.setGeometry(t,new mxGeometry);var r=this.model.getChildCount(l);this.cellsAdded([t],l,r,null,null,!1,!1,!1),r=this.model.getChildCount(t),this.cellsAdded(n,t,r,null,null,!1,!1,!1),this.cellsMoved(n,-s.x,-s.y,!1,!1,!1),this.cellsResized([t],[s],!1),this.fireEvent(new mxEventObject$1(mxEvent$1.GROUP_CELLS,"group",t,"border",e,"cells",n))}finally{this.model.endUpdate()}}return t}getCellsForGroup(t){var e=[];if(t!=null&&t.length>0){var n=this.model.getParent(t[0]);e.push(t[0]);for(var s=1;s<t.length;s++)this.model.getParent(t[s])==n&&e.push(t[s])}return e}getBoundsForGroup(t,e,n){var s=this.getBoundingBoxFromGeometry(e,!0);if(s!=null){if(this.isSwimlane(t)){var l=this.getStartSize(t);s.x-=l.width,s.y-=l.height,s.width+=l.width,s.height+=l.height}n!=null&&(s.x-=n,s.y-=n,s.width+=2*n,s.height+=2*n)}return s}createGroupCell(t){var e=new mxCell("");return e.setVertex(!0),e.setConnectable(!1),e}ungroupCells(t){var e=[];if(t==null){t=this.getSelectionCells();for(var n=[],s=0;s<t.length;s++)this.model.getChildCount(t[s])>0&&n.push(t[s]);t=n}if(t!=null&&t.length>0){this.model.beginUpdate();try{for(var s=0;s<t.length;s++){var l=this.model.getChildren(t[s]);if(l!=null&&l.length>0){l=l.slice();var r=this.model.getParent(t[s]),o=this.model.getChildCount(r);this.cellsAdded(l,r,o,null,null,!0),e=e.concat(l)}}this.removeCellsAfterUngroup(t),this.fireEvent(new mxEventObject$1(mxEvent$1.UNGROUP_CELLS,"cells",t))}finally{this.model.endUpdate()}}return e}removeCellsAfterUngroup(t){this.cellsRemoved(this.addAllEdges(t))}removeCellsFromParent(t){t==null&&(t=this.getSelectionCells()),this.model.beginUpdate();try{var e=this.getDefaultParent(),n=this.model.getChildCount(e);this.cellsAdded(t,e,n,null,null,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS_FROM_PARENT,"cells",t))}finally{this.model.endUpdate()}return t}updateGroupBounds(t,e,n,s,l,r,o){t==null&&(t=this.getSelectionCells()),e=e??0,n=n??!1,s=s??0,l=l??0,r=r??0,o=o??0,this.model.beginUpdate();try{for(var h=t.length-1;h>=0;h--){var u=this.getCellGeometry(t[h]);if(u!=null){var d=this.getChildCells(t[h]);if(d!=null&&d.length>0){var m=this.getBoundingBoxFromGeometry(d,!0);if(m!=null&&m.width>0&&m.height>0){var g=0,x=0;if(this.isSwimlane(t[h])){var v=this.getStartSize(t[h]);g=v.width,x=v.height}u=u.clone(),n&&(u.x=Math.round(u.x+m.x-e-g-o),u.y=Math.round(u.y+m.y-e-x-s)),u.width=Math.round(m.width+2*e+g+o+l),u.height=Math.round(m.height+2*e+x+s+r),this.model.setGeometry(t[h],u),this.moveCells(d,e+g-m.x+o,e+x-m.y+s)}}}}}finally{this.model.endUpdate()}return t}getBoundingBox(t){var e=null;if(t!=null&&t.length>0){for(var n=0;n<t.length;n++)if(this.model.isVertex(t[n])||this.model.isEdge(t[n])){var s=this.view.getBoundingBox(this.view.getState(t[n]),!0);s!=null&&(e==null?e=mxRectangle.fromRectangle(s):e.add(s))}}return e}cloneCell(t,e,n,s){return this.cloneCells([t],e,n,s)[0]}cloneCells(t,e,n,s){e=e??!0;var l=null;if(t!=null){for(var r=new mxDictionary,o=[],h=0;h<t.length;h++)r.put(t[h],!0),o.push(t[h]);if(o.length>0){var u=this.view.scale,d=this.view.translate;l=this.model.cloneCells(t,!0,n);for(var h=0;h<t.length;h++)if(!e&&this.model.isEdge(l[h])&&this.getEdgeValidationError(l[h],this.model.getTerminal(l[h],!0),this.model.getTerminal(l[h],!1))!=null)l[h]=null;else{var m=this.model.getGeometry(l[h]);if(m!=null){var g=this.view.getState(t[h]),x=this.view.getState(this.model.getParent(t[h]));if(g!=null&&x!=null){var v=s?0:x.origin.x,C=s?0:x.origin.y;if(this.model.isEdge(l[h])){var E=g.absolutePoints;if(E!=null){for(var b=this.model.getTerminal(t[h],!0);b!=null&&!r.get(b);)b=this.model.getParent(b);b==null&&E[0]!=null&&m.setTerminalPoint(new mxPoint(E[0].x/u-d.x,E[0].y/u-d.y),!0);for(var w=this.model.getTerminal(t[h],!1);w!=null&&!r.get(w);)w=this.model.getParent(w);var $=E.length-1;w==null&&E[$]!=null&&m.setTerminalPoint(new mxPoint(E[$].x/u-d.x,E[$].y/u-d.y),!1);var P=m.points;if(P!=null)for(var M=0;M<P.length;M++)P[M].x+=v,P[M].y+=C}}else m.translate(v,C)}}}}else l=[]}return l}insertVertex(t,e,n,s,l,r,o,h,u){var d=this.createVertex(t,e,n,s,l,r,o,h,u);return this.addCell(d,t)}createVertex(t,e,n,s,l,r,o,h,u){var d=new mxGeometry(s,l,r,o);d.relative=u??!1;var m=new mxCell(n,d,h);return m.setId(e),m.setVertex(!0),m.setConnectable(!0),m}insertEdge(t,e,n,s,l,r){var o=this.createEdge(t,e,n,s,l,r);return this.addEdge(o,t,s,l)}createEdge(t,e,n,s,l,r){var o=new mxCell(n,new mxGeometry,r);return o.setId(e),o.setEdge(!0),o.geometry.relative=!0,o}addEdge(t,e,n,s,l){return this.addCell(t,e,l,n,s)}addCell(t,e,n,s,l){return this.addCells([t],e,n,s,l)[0]}addCells(t,e,n,s,l,r){e==null&&(e=this.getDefaultParent()),n==null&&(n=this.model.getChildCount(e)),this.model.beginUpdate();try{this.cellsAdded(t,e,n,s,l,r??!1,!0),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_CELLS,"cells",t,"parent",e,"index",n,"source",s,"target",l))}finally{this.model.endUpdate()}return t}cellsAdded(t,e,n,s,l,r,o,h){if(t!=null&&e!=null&&n!=null){this.model.beginUpdate();try{for(var u=r?this.view.getState(e):null,d=u!=null?u.origin:null,m=new mxPoint(0,0),g=0;g<t.length;g++)if(t[g]==null)n--;else{var x=this.model.getParent(t[g]);if(d!=null&&t[g]!=e&&e!=x){var v=this.view.getState(x),C=v!=null?v.origin:m,E=this.model.getGeometry(t[g]);if(E!=null){var b=C.x-d.x,w=C.y-d.y;E=E.clone(),E.translate(b,w),!E.relative&&this.model.isVertex(t[g])&&!this.isAllowNegativeCoordinates()&&(E.x=Math.max(0,E.x),E.y=Math.max(0,E.y)),this.model.setGeometry(t[g],E)}}e==x&&n+g>this.model.getChildCount(e)&&n--,this.model.add(e,t[g],n+g),this.autoSizeCellsOnAdd&&this.autoSizeCell(t[g],!0),(h==null||h)&&this.isExtendParentsOnAdd(t[g])&&this.isExtendParent(t[g])&&this.extendParent(t[g]),(o==null||o)&&this.constrainChild(t[g]),s!=null&&this.cellConnected(t[g],s,!0),l!=null&&this.cellConnected(t[g],l,!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_ADDED,"cells",t,"parent",e,"index",n,"source",s,"target",l,"absolute",r))}finally{this.model.endUpdate()}}}autoSizeCell(t,e){if(e=e??!0,e)for(var n=this.model.getChildCount(t),s=0;s<n;s++)this.autoSizeCell(this.model.getChildAt(t,s));this.getModel().isVertex(t)&&this.isAutoSizeCell(t)&&this.updateCellSize(t)}removeCells(t,e){if(e=e??!0,t==null&&(t=this.getDeletableCells(this.getSelectionCells())),e)t=this.getDeletableCells(this.addAllEdges(t));else{t=t.slice();for(var n=this.getDeletableCells(this.getAllEdges(t)),s=new mxDictionary,l=0;l<t.length;l++)s.put(t[l],!0);for(var l=0;l<n.length;l++)this.view.getState(n[l])==null&&!s.get(n[l])&&(s.put(n[l],!0),t.push(n[l]))}this.model.beginUpdate();try{this.cellsRemoved(t),this.fireEvent(new mxEventObject$1(mxEvent$1.REMOVE_CELLS,"cells",t,"includeEdges",e))}finally{this.model.endUpdate()}return t}cellsRemoved(t){if(t!=null&&t.length>0){var e=this.view.scale,n=this.view.translate;this.model.beginUpdate();try{for(var s=new mxDictionary,l=0;l<t.length;l++)s.put(t[l],!0);for(var l=0;l<t.length;l++){for(var r=this.getAllEdges([t[l]]),o=(d,m)=>{var g=this.model.getGeometry(d);if(g!=null){for(var x=this.model.getTerminal(d,m),v=!1,C=x;C!=null;){if(t[l]==C){v=!0;break}C=this.model.getParent(C)}if(v){g=g.clone();var E=this.view.getState(d);if(E!=null&&E.absolutePoints!=null){var b=E.absolutePoints,w=m?0:b.length-1;g.setTerminalPoint(new mxPoint(b[w].x/e-n.x-E.origin.x,b[w].y/e-n.y-E.origin.y),m)}else{var $=this.view.getState(x);$!=null&&g.setTerminalPoint(new mxPoint($.getCenterX()/e-n.x,$.getCenterY()/e-n.y),m)}this.model.setGeometry(d,g),this.model.setTerminal(d,null,m)}}},h=0;h<r.length;h++)s.get(r[h])||(s.put(r[h],!0),o(r[h],!0),o(r[h],!1));this.model.remove(t[l])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_REMOVED,"cells",t))}finally{this.model.endUpdate()}}}splitEdge(t,e,n,s,l,r,o,h){s=s||0,l=l||0,h=h??this.model.getParent(t);var u=this.model.getTerminal(t,!0);this.model.beginUpdate();try{if(n==null){n=this.cloneCell(t);var d=this.view.getState(t),m=this.getCellGeometry(n);if(m!=null&&m.points!=null&&d!=null){var g=this.view.translate,x=this.view.scale,v=mxUtils$1.findNearestSegment(d,(s+g.x)*x,(l+g.y)*x);m.points=m.points.slice(0,v),m=this.getCellGeometry(t),m!=null&&m.points!=null&&(m=m.clone(),m.points=m.points.slice(v),this.model.setGeometry(t,m))}}this.cellsMoved(e,s,l,!1,!1),this.cellsAdded(e,h,this.model.getChildCount(h),null,null,!0),this.cellsAdded([n],h,this.model.getChildCount(h),u,e[0],!1),this.cellConnected(t,e[0],!0),this.fireEvent(new mxEventObject$1(mxEvent$1.SPLIT_EDGE,"edge",t,"cells",e,"newEdge",n,"dx",s,"dy",l))}finally{this.model.endUpdate()}return n}toggleCells(t,e,n){e==null&&(e=this.getSelectionCells()),n&&(e=this.addAllEdges(e)),this.model.beginUpdate();try{this.cellsToggled(e,t),this.fireEvent(new mxEventObject$1(mxEvent$1.TOGGLE_CELLS,"show",t,"cells",e,"includeEdges",n))}finally{this.model.endUpdate()}return e}cellsToggled(t,e){if(t!=null&&t.length>0){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setVisible(t[n],e)}finally{this.model.endUpdate()}}}foldCells(t,e,n,s,l){e=e??!1,n==null&&(n=this.getFoldableCells(this.getSelectionCells(),t)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,t,e,s),this.fireEvent(new mxEventObject$1(mxEvent$1.FOLD_CELLS,"collapse",t,"recurse",e,"cells",n))}finally{this.model.endUpdate()}return n}cellsFolded(t,e,n,s){if(t!=null&&t.length>0){this.model.beginUpdate();try{for(var l=0;l<t.length;l++)if((!s||this.isCellFoldable(t[l],e))&&e!=this.isCellCollapsed(t[l])){if(this.model.setCollapsed(t[l],e),this.swapBounds(t[l],e),this.isExtendParent(t[l])&&this.extendParent(t[l]),n){var r=this.model.getChildren(t[l]);this.cellsFolded(r,e,n)}this.constrainChild(t[l])}this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_FOLDED,"cells",t,"collapse",e,"recurse",n))}finally{this.model.endUpdate()}}}swapBounds(t,e){if(t!=null){var n=this.model.getGeometry(t);n!=null&&(n=n.clone(),this.updateAlternateBounds(t,n,e),n.swap(),this.model.setGeometry(t,n))}}updateAlternateBounds(t,e,n){if(t!=null&&e!=null){var s=this.getCurrentCellStyle(t);if(e.alternateBounds==null){var l=e;if(this.collapseToPreferredSize){var r=this.getPreferredSizeForCell(t);if(r!=null){l=r;var o=mxUtils$1.getValue(s,mxConstants$1.STYLE_STARTSIZE);o>0&&(l.height=Math.max(l.height,o))}}e.alternateBounds=new mxRectangle(0,0,l.width,l.height)}if(e.alternateBounds!=null){e.alternateBounds.x=e.x,e.alternateBounds.y=e.y;var h=mxUtils$1.toRadians(s[mxConstants$1.STYLE_ROTATION]||0);if(h!=0){var u=e.alternateBounds.getCenterX()-e.getCenterX(),d=e.alternateBounds.getCenterY()-e.getCenterY(),m=Math.cos(h),g=Math.sin(h),x=m*u-g*d,v=g*u+m*d;e.alternateBounds.x+=x-u,e.alternateBounds.y+=v-d}}}}addAllEdges(t){var e=t.slice();return mxUtils$1.removeDuplicates(e.concat(this.getAllEdges(t)))}getAllEdges(t){var e=[];if(t!=null)for(var n=0;n<t.length;n++){for(var s=this.model.getEdgeCount(t[n]),l=0;l<s;l++)e.push(this.model.getEdgeAt(t[n],l));var r=this.model.getChildren(t[n]);e=e.concat(this.getAllEdges(r))}return e}updateCellSize(t,e){e=e??!1,this.model.beginUpdate();try{this.cellSizeUpdated(t,e),this.fireEvent(new mxEventObject$1(mxEvent$1.UPDATE_CELL_SIZE,"cell",t,"ignoreChildren",e))}finally{this.model.endUpdate()}return t}cellSizeUpdated(t,e){if(t!=null){this.model.beginUpdate();try{var n=this.getPreferredSizeForCell(t),s=this.model.getGeometry(t);if(n!=null&&s!=null){var l=this.isCellCollapsed(t);if(s=s.clone(),this.isSwimlane(t)){var r=this.getCellStyle(t),o=this.model.getStyle(t);o==null&&(o=""),mxUtils$1.getValue(r,mxConstants$1.STYLE_HORIZONTAL,!0)?(o=mxUtils$1.setStyle(o,mxConstants$1.STYLE_STARTSIZE,n.height+8),l&&(s.height=n.height+8),s.width=n.width):(o=mxUtils$1.setStyle(o,mxConstants$1.STYLE_STARTSIZE,n.width+8),l&&(s.width=n.width+8),s.height=n.height),this.model.setStyle(t,o)}else{var h=this.view.createState(t),u=h.style[mxConstants$1.STYLE_ALIGN]||mxConstants$1.ALIGN_CENTER;u==mxConstants$1.ALIGN_RIGHT?s.x+=s.width-n.width:u==mxConstants$1.ALIGN_CENTER&&(s.x+=Math.round((s.width-n.width)/2));var d=this.getVerticalAlign(h);d==mxConstants$1.ALIGN_BOTTOM?s.y+=s.height-n.height:d==mxConstants$1.ALIGN_MIDDLE&&(s.y+=Math.round((s.height-n.height)/2)),s.width=n.width,s.height=n.height}if(!e&&!l){var m=this.view.getBounds(this.model.getChildren(t));if(m!=null){var g=this.view.translate,x=this.view.scale,v=(m.x+m.width)/x-s.x-g.x,C=(m.y+m.height)/x-s.y-g.y;s.width=Math.max(s.width,v),s.height=Math.max(s.height,C)}}this.cellsResized([t],[s],!1)}}finally{this.model.endUpdate()}}}getPreferredSizeForCell(t,e){var n=null;if(t!=null){var s=this.view.createState(t),l=s.style;if(!this.model.isEdge(t)){var r=l[mxConstants$1.STYLE_FONTSIZE]||mxConstants$1.DEFAULT_FONTSIZE,o=0,h=0;(this.getImage(s)!=null||l[mxConstants$1.STYLE_IMAGE]!=null)&&l[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_LABEL&&(l[mxConstants$1.STYLE_VERTICAL_ALIGN]==mxConstants$1.ALIGN_MIDDLE&&(o+=parseFloat(l[mxConstants$1.STYLE_IMAGE_WIDTH])||mxLabel.imageSize),l[mxConstants$1.STYLE_ALIGN]!=mxConstants$1.ALIGN_CENTER&&(h+=parseFloat(l[mxConstants$1.STYLE_IMAGE_HEIGHT])||mxLabel.imageSize)),o+=2*(l[mxConstants$1.STYLE_SPACING]||0),o+=l[mxConstants$1.STYLE_SPACING_LEFT]||0,o+=l[mxConstants$1.STYLE_SPACING_RIGHT]||0,h+=2*(l[mxConstants$1.STYLE_SPACING]||0),h+=l[mxConstants$1.STYLE_SPACING_TOP]||0,h+=l[mxConstants$1.STYLE_SPACING_BOTTOM]||0;var u=this.getFoldingImage(s);u!=null&&(o+=u.width+8);var d=this.cellRenderer.getLabelValue(s);if(d!=null&&d.length>0){this.isHtmlLabel(s.cell)||(d=mxUtils$1.htmlEntities(d,!1)),d=d.replace(/\n/g,"<br>");var m=mxUtils$1.getSizeForString(d,r,l[mxConstants$1.STYLE_FONTFAMILY],e,l[mxConstants$1.STYLE_FONTSTYLE]),g=m.width+o,x=m.height+h;if(!mxUtils$1.getValue(l,mxConstants$1.STYLE_HORIZONTAL,!0)){var v=x;x=g,g=v}this.gridEnabled&&(g=this.snap(g+this.gridSize/2),x=this.snap(x+this.gridSize/2)),n=new mxRectangle(0,0,g,x)}else{var C=4*this.gridSize;n=new mxRectangle(0,0,C,C)}}}return n}resizeCell(t,e,n){return this.resizeCells([t],[e],n)[0]}resizeCells(t,e,n){n=n??this.isRecursiveResize(),this.model.beginUpdate();try{var s=this.cellsResized(t,e,n);this.fireEvent(new mxEventObject$1(mxEvent$1.RESIZE_CELLS,"cells",t,"bounds",e,"previous",s))}finally{this.model.endUpdate()}return t}cellsResized(t,e,n){n=n??!1;var s=[];if(t!=null&&e!=null&&t.length==e.length){this.model.beginUpdate();try{for(var l=0;l<t.length;l++)s.push(this.cellResized(t[l],e[l],!1,n)),this.isExtendParent(t[l])&&this.extendParent(t[l]),this.constrainChild(t[l]);this.resetEdgesOnResize&&this.resetEdges(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_RESIZED,"cells",t,"bounds",e,"previous",s))}finally{this.model.endUpdate()}}return s}cellResized(t,e,n,s){var l=this.model.getGeometry(t);if(l!=null&&(l.x!=e.x||l.y!=e.y||l.width!=e.width||l.height!=e.height)){var r=l.clone();if(!n&&r.relative){var o=r.offset;o!=null&&(o.x+=e.x-r.x,o.y+=e.y-r.y)}else r.x=e.x,r.y=e.y;r.width=e.width,r.height=e.height,!r.relative&&this.model.isVertex(t)&&!this.isAllowNegativeCoordinates()&&(r.x=Math.max(0,r.x),r.y=Math.max(0,r.y)),this.model.beginUpdate();try{s&&this.resizeChildCells(t,r),this.model.setGeometry(t,r),this.constrainChildCells(t)}finally{this.model.endUpdate()}}return l}resizeChildCells(t,e){for(var n=this.model.getGeometry(t),s=e.width/n.width,l=e.height/n.height,r=this.model.getChildCount(t),o=0;o<r;o++)this.scaleCell(this.model.getChildAt(t,o),s,l,!0)}constrainChildCells(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.constrainChild(this.model.getChildAt(t,n))}scaleCell(t,e,n,s){var l=this.model.getGeometry(t);if(l!=null){var r=this.getCurrentCellStyle(t);l=l.clone();var o=l.x,h=l.y,u=l.width,d=l.height;l.scale(e,n,r[mxConstants$1.STYLE_ASPECT]=="fixed"),r[mxConstants$1.STYLE_RESIZE_WIDTH]=="1"?l.width=u*e:r[mxConstants$1.STYLE_RESIZE_WIDTH]=="0"&&(l.width=u),r[mxConstants$1.STYLE_RESIZE_HEIGHT]=="1"?l.height=d*n:r[mxConstants$1.STYLE_RESIZE_HEIGHT]=="0"&&(l.height=d),this.isCellMovable(t)||(l.x=o,l.y=h),this.isCellResizable(t)||(l.width=u,l.height=d),this.model.isVertex(t)?this.cellResized(t,l,!0,s):this.model.setGeometry(t,l)}}extendParent(t){if(t!=null){var e=this.model.getParent(t),n=this.getCellGeometry(e);if(e!=null&&n!=null&&!this.isCellCollapsed(e)){var s=this.getCellGeometry(t);s!=null&&!s.relative&&(n.width<s.x+s.width||n.height<s.y+s.height)&&(n=n.clone(),n.width=Math.max(n.width,s.x+s.width),n.height=Math.max(n.height,s.y+s.height),this.cellsResized([e],[n],!1))}}}importCells(t,e,n,s,l,r){return this.moveCells(t,e,n,!0,s,l,r)}moveCells(t,e,n,s,l,r,o){if(e=e??0,n=n??0,s=s??!1,t!=null&&(e!=0||n!=0||s||l!=null)){t=this.model.getTopmostCells(t),this.model.beginUpdate();try{for(var h=new mxDictionary,u=0;u<t.length;u++)h.put(t[u],!0);for(var d=E=>{for(;E!=null;){if(h.get(E))return!0;E=this.model.getParent(E)}return!1},m=[],u=0;u<t.length;u++){var g=this.getCellGeometry(t[u]),x=this.model.getParent(t[u]);(g==null||!g.relative||!this.model.isEdge(x)||!d(this.model.getTerminal(x,!0))&&!d(this.model.getTerminal(x,!1)))&&m.push(t[u])}t=m,s&&(t=this.cloneCells(t,this.isCloneInvalidEdges(),o),l==null&&(l=this.getDefaultParent()));var v=this.isAllowNegativeCoordinates();if(l!=null&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(t,e,n,!s&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),l==null,this.isExtendParentsOnMove()&&l==null),this.setAllowNegativeCoordinates(v),l!=null){var C=this.model.getChildCount(l);this.cellsAdded(t,l,C,null,null,!0)}this.fireEvent(new mxEventObject$1(mxEvent$1.MOVE_CELLS,"cells",t,"dx",e,"dy",n,"clone",s,"target",l,"event",r))}finally{this.model.endUpdate()}}return t}cellsMoved(t,e,n,s,l,r){if(t!=null&&(e!=0||n!=0)){r=r??!1,this.model.beginUpdate();try{s&&this.disconnectGraph(t);for(var o=0;o<t.length;o++)this.translateCell(t[o],e,n),r&&this.isExtendParent(t[o])?this.extendParent(t[o]):l&&this.constrainChild(t[o]);this.resetEdgesOnMove&&this.resetEdges(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELLS_MOVED,"cells",t,"dx",e,"dy",n,"disconnect",s))}finally{this.model.endUpdate()}}}translateCell(t,e,n){var s=this.model.getGeometry(t);if(s!=null){if(e=parseFloat(e),n=parseFloat(n),s=s.clone(),s.translate(e,n),!s.relative&&this.model.isVertex(t)&&!this.isAllowNegativeCoordinates()&&(s.x=Math.max(0,parseFloat(s.x)),s.y=Math.max(0,parseFloat(s.y))),s.relative&&!this.model.isEdge(t)){var l=this.model.getParent(t),r=0;if(this.model.isVertex(l)){var o=this.getCurrentCellStyle(l);r=mxUtils$1.getValue(o,mxConstants$1.STYLE_ROTATION,0)}if(r!=0){var h=mxUtils$1.toRadians(-r),u=Math.cos(h),d=Math.sin(h),m=mxUtils$1.getRotatedPoint(new mxPoint(e,n),u,d,new mxPoint(0,0));e=m.x,n=m.y}s.offset==null?s.offset=new mxPoint(e,n):(s.offset.x=parseFloat(s.offset.x)+e,s.offset.y=parseFloat(s.offset.y)+n)}this.model.setGeometry(t,s)}}getCellContainmentArea(t){if(t!=null&&!this.model.isEdge(t)){var e=this.model.getParent(t);if(e!=null&&e!=this.getDefaultParent()){var n=this.model.getGeometry(e);if(n!=null){var s=0,l=0,r=n.width,o=n.height;if(this.isSwimlane(e)){var h=this.getStartSize(e),u=this.getCurrentCellStyle(e),d=mxUtils$1.getValue(u,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),m=mxUtils$1.getValue(u,mxConstants$1.STYLE_FLIPH,0)==1,g=mxUtils$1.getValue(u,mxConstants$1.STYLE_FLIPV,0)==1;if(d==mxConstants$1.DIRECTION_SOUTH||d==mxConstants$1.DIRECTION_NORTH){var x=h.width;h.width=h.height,h.height=x}(d==mxConstants$1.DIRECTION_EAST&&!g||d==mxConstants$1.DIRECTION_NORTH&&!m||d==mxConstants$1.DIRECTION_WEST&&g||d==mxConstants$1.DIRECTION_SOUTH&&m)&&(s=h.width,l=h.height),r-=h.width,o-=h.height}return new mxRectangle(s,l,r,o)}}}return null}getMaximumGraphBounds(){return this.maximumGraphBounds}constrainChild(t,e){if(t!=null){var n=this.getCellGeometry(t);if(n!=null&&(this.isConstrainRelativeChildren()||!n.relative)){var s=this.model.getParent(t);this.getCellGeometry(s);var l=this.getMaximumGraphBounds();if(l!=null){var r=this.getBoundingBoxFromGeometry([s],!1);r!=null&&(l=mxRectangle.fromRectangle(l),l.x-=r.x,l.y-=r.y)}if(this.isConstrainChild(t)){var o=this.getCellContainmentArea(t);if(o!=null){var h=this.getOverlap(t);h>0&&(o=mxRectangle.fromRectangle(o),o.x-=o.width*h,o.y-=o.height*h,o.width+=2*o.width*h,o.height+=2*o.height*h),l==null?l=o:(l=mxRectangle.fromRectangle(l),l.intersect(o))}}if(l!=null){var u=[t];if(!this.isCellCollapsed(t))for(var d=this.model.getDescendants(t),m=0;m<d.length;m++)this.isCellVisible(d[m])&&u.push(d[m]);var g=this.getBoundingBoxFromGeometry(u,!1);if(g!=null){n=n.clone();var x=0;n.width>l.width&&(x=n.width-l.width,n.width-=x),g.x+g.width>l.x+l.width&&(x-=g.x+g.width-l.x-l.width-x);var v=0;n.height>l.height&&(v=n.height-l.height,n.height-=v),g.y+g.height>l.y+l.height&&(v-=g.y+g.height-l.y-l.height-v),g.x<l.x&&(x-=g.x-l.x),g.y<l.y&&(v-=g.y-l.y),(x!=0||v!=0)&&(n.relative?(n.offset==null&&(n.offset=new mxPoint),n.offset.x+=x,n.offset.y+=v):(n.x+=x,n.y+=v)),this.model.setGeometry(t,n)}}}}}resetEdges(t){if(t!=null){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var s=this.model.getEdges(t[n]);if(s!=null)for(var l=0;l<s.length;l++){var r=this.view.getState(s[l]),o=r!=null?r.getVisibleTerminal(!0):this.view.getVisibleTerminal(s[l],!0),h=r!=null?r.getVisibleTerminal(!1):this.view.getVisibleTerminal(s[l],!1);(!e.get(o)||!e.get(h))&&this.resetEdge(s[l])}this.resetEdges(this.model.getChildren(t[n]))}}finally{this.model.endUpdate()}}}resetEdge(t){var e=this.model.getGeometry(t);return e!=null&&e.points!=null&&e.points.length>0&&(e=e.clone(),e.points=[],this.model.setGeometry(t,e)),t}getOutlineConstraint(t,e,n){if(e.shape!=null){var s=this.view.getPerimeterBounds(e),l=e.style[mxConstants$1.STYLE_DIRECTION];if(l==mxConstants$1.DIRECTION_NORTH||l==mxConstants$1.DIRECTION_SOUTH){s.x+=s.width/2-s.height/2,s.y+=s.height/2-s.width/2;var r=s.width;s.width=s.height,s.height=r}var o=mxUtils$1.toRadians(e.shape.getShapeRotation());if(o!=0){var h=Math.cos(-o),u=Math.sin(-o),d=new mxPoint(s.getCenterX(),s.getCenterY());t=mxUtils$1.getRotatedPoint(t,h,u,d)}var m=1,g=1,x=0,v=0;if(this.getModel().isVertex(e.cell)){var C=e.style[mxConstants$1.STYLE_FLIPH],E=e.style[mxConstants$1.STYLE_FLIPV];if(e.shape!=null&&e.shape.stencil!=null&&(C=mxUtils$1.getValue(e.style,"stencilFlipH",0)==1||C,E=mxUtils$1.getValue(e.style,"stencilFlipV",0)==1||E),l==mxConstants$1.DIRECTION_NORTH||l==mxConstants$1.DIRECTION_SOUTH){var r=C;C=E,E=r}C&&(m=-1,x=-s.width),E&&(g=-1,v=-s.height)}t=new mxPoint((t.x-s.x)*m-x+s.x,(t.y-s.y)*g-v+s.y);var b=s.width==0?0:Math.round((t.x-s.x)*1e3/s.width)/1e3,w=s.height==0?0:Math.round((t.y-s.y)*1e3/s.height)/1e3;return new mxConnectionConstraint(new mxPoint(b,w),!1)}return null}getAllConnectionConstraints(t,e){return t!=null&&t.shape!=null&&t.shape.stencil!=null?t.shape.stencil.constraints:null}getConnectionConstraint(t,e,n){var s=null,l=t.style[n?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X];if(l!=null){var r=t.style[n?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y];r!=null&&(s=new mxPoint(parseFloat(l),parseFloat(r)))}var o=!1,h=0,u=0;return s!=null&&(o=mxUtils$1.getValue(t.style,n?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,!0),h=parseFloat(t.style[n?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX]),u=parseFloat(t.style[n?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY]),h=isFinite(h)?h:0,u=isFinite(u)?u:0),new mxConnectionConstraint(s,o,null,h,u)}setConnectionConstraint(t,e,n,s){if(s!=null){this.model.beginUpdate();try{s==null||s.point==null?(this.setCellStyles(n?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,null,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,null,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,null,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,null,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[t])):s.point!=null&&(this.setCellStyles(n?mxConstants$1.STYLE_EXIT_X:mxConstants$1.STYLE_ENTRY_X,s.point.x,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_Y:mxConstants$1.STYLE_ENTRY_Y,s.point.y,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_DX:mxConstants$1.STYLE_ENTRY_DX,s.dx,[t]),this.setCellStyles(n?mxConstants$1.STYLE_EXIT_DY:mxConstants$1.STYLE_ENTRY_DY,s.dy,[t]),s.perimeter?this.setCellStyles(n?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,null,[t]):this.setCellStyles(n?mxConstants$1.STYLE_EXIT_PERIMETER:mxConstants$1.STYLE_ENTRY_PERIMETER,"0",[t]))}finally{this.model.endUpdate()}}}getConnectionPoint(t,e,n){n=n??!0;var s=null;if(t!=null&&e.point!=null){var l=this.view.getPerimeterBounds(t),r=new mxPoint(l.getCenterX(),l.getCenterY()),o=t.style[mxConstants$1.STYLE_DIRECTION],h=0;o!=null&&mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ANCHOR_POINT_DIRECTION,1)==1&&(o==mxConstants$1.DIRECTION_NORTH?h+=270:o==mxConstants$1.DIRECTION_WEST?h+=180:o==mxConstants$1.DIRECTION_SOUTH&&(h+=90),(o==mxConstants$1.DIRECTION_NORTH||o==mxConstants$1.DIRECTION_SOUTH)&&l.rotate90());var u=this.view.scale;s=new mxPoint(l.x+e.point.x*l.width+e.dx*u,l.y+e.point.y*l.height+e.dy*u);var d=t.style[mxConstants$1.STYLE_ROTATION]||0;if(e.perimeter){if(h!=0){var m=0,g=0;h==90?g=1:h==180?m=-1:h==270&&(g=-1),s=mxUtils$1.getRotatedPoint(s,m,g,r)}s=this.view.getPerimeterPoint(t,s,!1)}else if(d+=h,this.getModel().isVertex(t.cell)){var x=t.style[mxConstants$1.STYLE_FLIPH]==1,v=t.style[mxConstants$1.STYLE_FLIPV]==1;if(t.shape!=null&&t.shape.stencil!=null&&(x=mxUtils$1.getValue(t.style,"stencilFlipH",0)==1||x,v=mxUtils$1.getValue(t.style,"stencilFlipV",0)==1||v),o==mxConstants$1.DIRECTION_NORTH||o==mxConstants$1.DIRECTION_SOUTH){var C=x;x=v,v=C}x&&(s.x=2*l.getCenterX()-s.x),v&&(s.y=2*l.getCenterY()-s.y)}if(d!=0&&s!=null){var E=mxUtils$1.toRadians(d),m=Math.cos(E),g=Math.sin(E);s=mxUtils$1.getRotatedPoint(s,m,g,r)}}return n&&s!=null&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),s}connectCell(t,e,n,s){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.cellConnected(t,e,n,s),this.fireEvent(new mxEventObject$1(mxEvent$1.CONNECT_CELL,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}return t}cellConnected(t,e,n,s){if(t!=null){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);if(this.setConnectionConstraint(t,e,n,s),this.isPortsEnabled()){var r=null;this.isPort(e)&&(r=e.getId(),e=this.getTerminalForPort(e,n));var o=n?mxConstants$1.STYLE_SOURCE_PORT:mxConstants$1.STYLE_TARGET_PORT;this.setCellStyles(o,r,[t])}this.model.setTerminal(t,e,n),this.resetEdgesOnConnect&&this.resetEdge(t),this.fireEvent(new mxEventObject$1(mxEvent$1.CELL_CONNECTED,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}}}disconnectGraph(t){if(t!=null){this.model.beginUpdate();try{for(var e=this.view.scale,n=this.view.translate,s=new mxDictionary,l=0;l<t.length;l++)s.put(t[l],!0);for(var l=0;l<t.length;l++)if(this.model.isEdge(t[l])){var r=this.model.getGeometry(t[l]);if(r!=null){var o=this.view.getState(t[l]),h=this.view.getState(this.model.getParent(t[l]));if(o!=null&&h!=null){r=r.clone();var u=-h.origin.x,d=-h.origin.y,m=o.absolutePoints,g=this.model.getTerminal(t[l],!0);if(g!=null&&this.isCellDisconnectable(t[l],g,!0)){for(;g!=null&&!s.get(g);)g=this.model.getParent(g);g==null&&(r.setTerminalPoint(new mxPoint(m[0].x/e-n.x+u,m[0].y/e-n.y+d),!0),this.model.setTerminal(t[l],null,!0))}var x=this.model.getTerminal(t[l],!1);if(x!=null&&this.isCellDisconnectable(t[l],x,!1)){for(;x!=null&&!s.get(x);)x=this.model.getParent(x);if(x==null){var v=m.length-1;r.setTerminalPoint(new mxPoint(m[v].x/e-n.x+u,m[v].y/e-n.y+d),!1),this.model.setTerminal(t[l],null,!1)}}this.model.setGeometry(t[l],r)}}}}finally{this.model.endUpdate()}}}getCurrentRoot(){return this.view.currentRoot}getTranslateForRoot(t){return null}isPort(t){return!1}getTerminalForPort(t,e){return this.model.getParent(t)}getChildOffsetForCell(t){return null}enterGroup(t){t=t||this.getSelectionCell(),t!=null&&this.isValidRoot(t)&&(this.view.setCurrentRoot(t),this.clearSelection())}exitGroup(){var t=this.model.getRoot(),e=this.getCurrentRoot();if(e!=null){for(var n=this.model.getParent(e);n!=t&&!this.isValidRoot(n)&&this.model.getParent(n)!=t;)n=this.model.getParent(n);n==t||this.model.getParent(n)==t?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n);var s=this.view.getState(e);s!=null&&this.setSelectionCell(e)}}home(){var t=this.getCurrentRoot();if(t!=null){this.view.setCurrentRoot(null);var e=this.view.getState(t);e!=null&&this.setSelectionCell(t)}}isValidRoot(t){return t!=null}getGraphBounds(){return this.view.getGraphBounds()}getCellBounds(t,e,n){var s=[t];e&&(s=s.concat(this.model.getEdges(t)));var l=this.view.getBounds(s);if(n)for(var r=this.model.getChildCount(t),o=0;o<r;o++){var h=this.getCellBounds(this.model.getChildAt(t,o),e,!0);l!=null?l.add(h):l=h}return l}getBoundingBoxFromGeometry(t,e){e=e??!1;var n=null;if(t!=null){for(var s=0;s<t.length;s++)if(e||this.model.isVertex(t[s])){var l=this.getCellGeometry(t[s]);if(l!=null){var r=null;if(this.model.isEdge(t[s])){var o=function(v){v!=null&&(u==null?u=new mxRectangle(v.x,v.y,0,0):u.add(new mxRectangle(v.x,v.y,0,0)))};this.model.getTerminal(t[s],!0)==null&&o(l.getTerminalPoint(!0)),this.model.getTerminal(t[s],!1)==null&&o(l.getTerminalPoint(!1));var h=l.points;if(h!=null&&h.length>0)for(var u=new mxRectangle(h[0].x,h[0].y,0,0),d=1;d<h.length;d++)o(h[d]);r=u}else{var m=this.model.getParent(t[s]);if(l.relative){if(this.model.isVertex(m)&&m!=this.view.currentRoot){var u=this.getBoundingBoxFromGeometry([m],!1);u!=null&&(r=new mxRectangle(l.x*u.width,l.y*u.height,l.width,l.height),mxUtils$1.indexOf(t,m)>=0&&(r.x+=u.x,r.y+=u.y))}}else if(r=mxRectangle.fromRectangle(l),this.model.isVertex(m)&&mxUtils$1.indexOf(t,m)>=0){var u=this.getBoundingBoxFromGeometry([m],!1);u!=null&&(r.x+=u.x,r.y+=u.y)}r!=null&&l.offset!=null&&(r.x+=l.offset.x,r.y+=l.offset.y);var g=this.getCurrentCellStyle(t[s]);if(r!=null){var x=mxUtils$1.getValue(g,mxConstants$1.STYLE_ROTATION,0);x!=0&&(r=mxUtils$1.getBoundingBox(r,x))}}r!=null&&(n==null?n=mxRectangle.fromRectangle(r):n.add(r))}}}return n}refresh(t){this.view.clear(t,t==null),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject$1(mxEvent$1.REFRESH))}snap(t){return this.gridEnabled&&(t=Math.round(t/this.gridSize)*this.gridSize),t}snapDelta(t,e,n,s,l){var r=this.view.translate,o=this.view.scale;if(!n&&this.gridEnabled){var h=this.gridSize*o*.5;if(!s){var u=e.x-(this.snap(e.x/o-r.x)+r.x)*o;Math.abs(t.x-u)<h?t.x=0:t.x=this.snap(t.x/o)*o-u}if(!l){var d=e.y-(this.snap(e.y/o-r.y)+r.y)*o;Math.abs(t.y-d)<h?t.y=0:t.y=this.snap(t.y/o)*o-d}}else{var h=.5*o;if(!s){var u=e.x-(Math.round(e.x/o-r.x)+r.x)*o;Math.abs(t.x-u)<h?t.x=0:t.x=Math.round(t.x/o)*o-u}if(!l){var d=e.y-(Math.round(e.y/o-r.y)+r.y)*o;Math.abs(t.y-d)<h?t.y=0:t.y=Math.round(t.y/o)*o-d}}return t}panGraph(t,e){if(this.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.container))this.container.scrollLeft=-t,this.container.scrollTop=-e;else{var n=this.view.getCanvas();if(this.dialect==mxConstants$1.DIALECT_SVG)if(t==0&&e==0){if(n.removeAttribute("transform"),this.shiftPreview1!=null){for(var s=this.shiftPreview1.firstChild;s!=null;){var l=s.nextSibling;this.container.appendChild(s),s=l}for(this.shiftPreview1.parentNode!=null&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode),s=this.shiftPreview2.firstChild;s!=null;){var l=s.nextSibling;this.container.appendChild(s),s=l}this.shiftPreview2.parentNode!=null&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(n.setAttribute("transform","translate("+t+","+e+")"),this.shiftPreview1==null){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var r=this.shiftPreview1,s=this.container.firstChild;s!=null;){var l=s.nextSibling;s!=n.parentNode?r.appendChild(s):r=this.shiftPreview2,s=l}this.shiftPreview1.firstChild!=null&&this.container.insertBefore(this.shiftPreview1,n.parentNode),this.shiftPreview2.firstChild!=null&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=t+"px",this.shiftPreview1.style.top=e+"px",this.shiftPreview2.style.left=t+"px",this.shiftPreview2.style.top=e+"px"}else n.style.left=t+"px",n.style.top=e+"px";this.panDx=t,this.panDy=e,this.fireEvent(new mxEventObject$1(mxEvent$1.PAN))}}zoomIn(){this.zoom(this.zoomFactor)}zoomOut(){this.zoom(1/this.zoomFactor)}zoomActual(){this.view.scale==1?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))}zoomTo(t,e){this.zoom(t/this.view.scale,e)}center(t,e,n,s){t=t??!0,e=e??!0,n=n??.5,s=s??.5;var l=mxUtils$1.hasScrollbars(this.container),r=2*this.getBorder(),o=this.container.clientWidth-r,h=this.container.clientHeight-r,u=this.getGraphBounds(),d=this.view.translate,m=this.view.scale,g=t?o-u.width:0,x=e?h-u.height:0;if(!l)this.view.setTranslate(t?Math.floor(d.x-u.x*m+g*n/m):d.x,e?Math.floor(d.y-u.y*m+x*s/m):d.y);else{u.x-=d.x,u.y-=d.y;var v=this.container.scrollWidth,C=this.container.scrollHeight;v>o&&(g=0),C>h&&(x=0),this.view.setTranslate(Math.floor(g/2-u.x),Math.floor(x/2-u.y)),this.container.scrollLeft=(v-o)/2,this.container.scrollTop=(C-h)/2}}zoom(t,e){e=e??this.centerZoom;var n=Math.round(this.view.scale*t*100)/100,s=this.view.getState(this.getSelectionCell());if(t=n/this.view.scale,this.keepSelectionVisibleOnZoom&&s!=null){var l=new mxRectangle(s.x*t,s.y*t,s.width*t,s.height*t);this.view.scale=n,this.scrollRectToVisible(l)||(this.view.revalidate(),this.view.setScale(n))}else{var r=mxUtils$1.hasScrollbars(this.container);if(e&&!r){var o=this.container.offsetWidth,h=this.container.offsetHeight;if(t>1){var u=(t-1)/(n*2);o*=-u,h*=-u}else{var u=(1/t-1)/(this.view.scale*2);o*=u,h*=u}this.view.scaleAndTranslate(n,this.view.translate.x+o,this.view.translate.y+h)}else{var d=this.view.translate.x,m=this.view.translate.y,g=this.container.scrollLeft,x=this.container.scrollTop;if(this.view.setScale(n),r){var o=0,h=0;e&&(o=this.container.offsetWidth*(t-1)/2,h=this.container.offsetHeight*(t-1)/2),this.container.scrollLeft=(this.view.translate.x-d)*this.view.scale+Math.round(g*t+o),this.container.scrollTop=(this.view.translate.y-m)*this.view.scale+Math.round(x*t+h)}}}}zoomToRect(t){var e=this.container.clientWidth/t.width,n=this.container.clientHeight/t.height,s=e/n;t.x=Math.max(0,t.x),t.y=Math.max(0,t.y);var l=Math.min(this.container.scrollWidth,t.x+t.width),r=Math.min(this.container.scrollHeight,t.y+t.height);if(t.width=l-t.x,t.height=r-t.y,s<1){var o=t.height/s,h=(o-t.height)/2;t.height=o;var u=Math.min(t.y,h);t.y=t.y-u,r=Math.min(this.container.scrollHeight,t.y+t.height),t.height=r-t.y}else{var d=t.width*s,m=(d-t.width)/2;t.width=d;var g=Math.min(t.x,m);t.x=t.x-g,l=Math.min(this.container.scrollWidth,t.x+t.width),t.width=l-t.x}var x=this.container.clientWidth/t.width,v=this.view.scale*x;mxUtils$1.hasScrollbars(this.container)?(this.view.setScale(v),this.container.scrollLeft=Math.round(t.x*x),this.container.scrollTop=Math.round(t.y*x)):this.view.scaleAndTranslate(v,this.view.translate.x-t.x/this.view.scale,this.view.translate.y-t.y/this.view.scale)}scrollCellToVisible(t,e){var n=-this.view.translate.x,s=-this.view.translate.y,l=this.view.getState(t);if(l!=null){var r=new mxRectangle(n+l.x,s+l.y,l.width,l.height);if(e&&this.container!=null){var o=this.container.clientWidth,h=this.container.clientHeight;r.x=r.getCenterX()-o/2,r.width=o,r.y=r.getCenterY()-h/2,r.height=h}var u=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(r)){var d=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=u.x,this.view.translate.y=u.y,this.view.setTranslate(d.x,d.y)}}}scrollRectToVisible(t){var e=!1;if(t!=null){var n=this.container.offsetWidth,s=this.container.offsetHeight,l=Math.min(n,t.width),r=Math.min(s,t.height);if(mxUtils$1.hasScrollbars(this.container)){var o=this.container;t.x+=this.view.translate.x,t.y+=this.view.translate.y;var h=o.scrollLeft-t.x,u=Math.max(h-o.scrollLeft,0);h>0?o.scrollLeft-=h+2:(h=t.x+l-o.scrollLeft-o.clientWidth,h>0&&(o.scrollLeft+=h+2));var d=o.scrollTop-t.y,m=Math.max(0,d-o.scrollTop);d>0?o.scrollTop-=d+2:(d=t.y+r-o.scrollTop-o.clientHeight,d>0&&(o.scrollTop+=d+2)),!this.useScrollbarsForPanning&&(u!=0||m!=0)&&this.view.setTranslate(u,m)}else{var g=-this.view.translate.x,x=-this.view.translate.y,v=this.view.scale;t.x+l>g+n&&(this.view.translate.x-=(t.x+l-n-g)/v,e=!0),t.y+r>x+s&&(this.view.translate.y-=(t.y+r-s-x)/v,e=!0),t.x<g&&(this.view.translate.x+=(g-t.x)/v,e=!0),t.y<x&&(this.view.translate.y+=(x-t.y)/v,e=!0),e&&(this.view.refresh(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.refresh())}}return e}getCellGeometry(t){return this.model.getGeometry(t)}isCellVisible(t){return this.model.isVisible(t)}isCellCollapsed(t){return this.model.isCollapsed(t)}isCellConnectable(t){return this.model.isConnectable(t)}isOrthogonal(t){var e=t.style[mxConstants$1.STYLE_ORTHOGONAL];if(e!=null)return e;var n=this.view.getEdgeStyle(t);return n==mxEdgeStyle.SegmentConnector||n==mxEdgeStyle.ElbowConnector||n==mxEdgeStyle.SideToSide||n==mxEdgeStyle.TopToBottom||n==mxEdgeStyle.EntityRelation||n==mxEdgeStyle.OrthConnector}isLoop(t){var e=t.getVisibleTerminalState(!0),n=t.getVisibleTerminalState(!1);return e!=null&&e==n}isCloneEvent(t){return mxEvent$1.isControlDown(t)}isTransparentClickEvent(t){return!1}isToggleEvent(t){return mxClient.IS_MAC?mxEvent$1.isMetaDown(t):mxEvent$1.isControlDown(t)}isGridEnabledEvent(t){return t!=null&&!mxEvent$1.isAltDown(t)}isConstrainedEvent(t){return mxEvent$1.isShiftDown(t)}isIgnoreTerminalEvent(t){return!1}validationAlert(t){mxUtils$1.alert(t)}isEdgeValid(t,e,n){return this.getEdgeValidationError(t,e,n)==null}getEdgeValidationError(t,e,n){if(t!=null&&!this.isAllowDanglingEdges()&&(e==null||n==null))return"";if(t!=null&&this.model.getTerminal(t,!0)==null&&this.model.getTerminal(t,!1)==null)return null;if(!this.allowLoops&&e==n&&e!=null||!this.isValidConnection(e,n))return"";if(e!=null&&n!=null){var s="";if(!this.multigraph){var l=this.model.getEdgesBetween(e,n,!0);(l.length>1||l.length==1&&l[0]!=t)&&(s+=(mxResources$1.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+`
`)}var r=this.model.getDirectedEdgeCount(e,!0,t),o=this.model.getDirectedEdgeCount(n,!1,t);if(this.multiplicities!=null)for(var h=0;h<this.multiplicities.length;h++){var u=this.multiplicities[h].check(this,t,e,n,r,o);u!=null&&(s+=u)}var u=this.validateEdge(t,e,n);return u!=null&&(s+=u),s.length>0?s:null}return this.allowDanglingEdges?null:""}validateEdge(t,e,n){return null}validateGraph(t,e){t=t??this.model.getRoot(),e=e??new Object;for(var n=!0,s=this.model.getChildCount(t),l=0;l<s;l++){var r=this.model.getChildAt(t,l),o=e;this.isValidRoot(r)&&(o=new Object);var h=this.validateGraph(r,o);h!=null?this.setCellWarning(r,h.replace(/\n/g,"<br>")):this.setCellWarning(r,null),n=n&&h==null}var u="";this.isCellCollapsed(t)&&!n&&(u+=(mxResources$1.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+`
`),this.model.isEdge(t)?u+=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),this.model.getTerminal(t,!1))||"":u+=this.getCellValidationError(t)||"";var d=this.validateCell(t,e);return d!=null&&(u+=d),this.model.getParent(t)==null&&this.view.validate(),u.length>0||!n?u:null}getCellValidationError(t){var e=this.model.getDirectedEdgeCount(t,!0),n=this.model.getDirectedEdgeCount(t,!1),s=this.model.getValue(t),l="";if(this.multiplicities!=null)for(var r=0;r<this.multiplicities.length;r++){var o=this.multiplicities[r];(o.source&&mxUtils$1.isNode(s,o.type,o.attr,o.value)&&(e>o.max||e<o.min)||!o.source&&mxUtils$1.isNode(s,o.type,o.attr,o.value)&&(n>o.max||n<o.min))&&(l+=o.countError+`
`)}return l.length>0?l:null}validateCell(t,e){return null}getBackgroundImage(){return this.backgroundImage}setBackgroundImage(t){this.backgroundImage=t}getFoldingImage(t){if(t!=null&&this.foldingEnabled&&!this.getModel().isEdge(t.cell)){var e=this.isCellCollapsed(t.cell);if(this.isCellFoldable(t.cell,!e))return e?this.collapsedImage:this.expandedImage}return null}convertValueToString(t){var e=this.model.getValue(t);if(e!=null){if(mxUtils$1.isNode(e))return e.nodeName;if(typeof e.toString=="function")return e.toString()}return""}getLabel(t){var e="";if(this.labelsVisible&&t!=null){var n=this.getCurrentCellStyle(t);mxUtils$1.getValue(n,mxConstants$1.STYLE_NOLABEL,!1)||(e=this.convertValueToString(t))}return e}isHtmlLabel(t){return this.isHtmlLabels()}isHtmlLabels(){return this.htmlLabels}setHtmlLabels(t){this.htmlLabels=t}isWrapping(t){return this.getCurrentCellStyle(t)[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"}isLabelClipped(t){return this.getCurrentCellStyle(t)[mxConstants$1.STYLE_OVERFLOW]=="hidden"}getTooltip(t,e,n,s){var l=null;if(t!=null){if(t.control!=null&&(e==t.control.node||e.parentNode==t.control.node)&&(l=this.collapseExpandResource,l=mxUtils$1.htmlEntities(mxResources$1.get(l)||l).replace(/\\n/g,"<br>")),l==null&&t.overlays!=null&&t.overlays.visit(function(o,h){l==null&&(e==h.node||e.parentNode==h.node)&&(l=h.overlay.toString())}),l==null){var r=this.selectionCellsHandler.getHandler(t.cell);r!=null&&typeof r.getTooltipForNode=="function"&&(l=r.getTooltipForNode(e))}l==null&&(l=this.getTooltipForCell(t.cell))}return l}getTooltipForCell(t){var e=null;return t!=null&&t.getTooltip!=null?e=t.getTooltip():e=this.convertValueToString(t),e}getLinkForCell(t){return null}getCursorForMouseEvent(t){return this.getCursorForCell(t.getCell())}getCursorForCell(t){return null}getStartSize(t,e){var n=new mxRectangle,s=this.getCurrentCellStyle(t,e),l=parseInt(mxUtils$1.getValue(s,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(s,mxConstants$1.STYLE_HORIZONTAL,!0)?n.height=l:n.width=l,n}getSwimlaneDirection(t){var e=mxUtils$1.getValue(t,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST),n=mxUtils$1.getValue(t,mxConstants$1.STYLE_FLIPH,0)==1,s=mxUtils$1.getValue(t,mxConstants$1.STYLE_FLIPV,0)==1,l=mxUtils$1.getValue(t,mxConstants$1.STYLE_HORIZONTAL,!0),r=l?0:3;e==mxConstants$1.DIRECTION_NORTH?r--:e==mxConstants$1.DIRECTION_WEST?r+=2:e==mxConstants$1.DIRECTION_SOUTH&&(r+=1);var o=mxUtils$1.mod(r,2);return n&&o==1&&(r+=2),s&&o==0&&(r+=2),[mxConstants$1.DIRECTION_NORTH,mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST][mxUtils$1.mod(r,4)]}getActualStartSize(t,e){var n=new mxRectangle;if(this.isSwimlane(t,e)){var s=this.getCurrentCellStyle(t,e),l=parseInt(mxUtils$1.getValue(s,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE)),r=this.getSwimlaneDirection(s);r==mxConstants$1.DIRECTION_NORTH?n.y=l:r==mxConstants$1.DIRECTION_WEST?n.x=l:r==mxConstants$1.DIRECTION_SOUTH?n.height=l:n.width=l}return n}getImage(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_IMAGE]:null}isTransparentState(t){var e=!1;if(t!=null){var n=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),s=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);e=n==mxConstants$1.NONE&&s==mxConstants$1.NONE&&this.getImage(t)==null}return e}getVerticalAlign(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_VERTICAL_ALIGN]||mxConstants$1.ALIGN_MIDDLE:null}getIndicatorColor(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_COLOR]:null}getIndicatorGradientColor(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_GRADIENTCOLOR]:null}getIndicatorShape(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_SHAPE]:null}getIndicatorImage(t){return t!=null&&t.style!=null?t.style[mxConstants$1.STYLE_INDICATOR_IMAGE]:null}getBorder(){return this.border}setBorder(t){this.border=t}isSwimlane(t,e){return t!=null&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)?this.getCurrentCellStyle(t,e)[mxConstants$1.STYLE_SHAPE]==mxConstants$1.SHAPE_SWIMLANE:!1}isResizeContainer(){return this.resizeContainer}setResizeContainer(t){this.resizeContainer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}isEscapeEnabled(){return this.escapeEnabled}setEscapeEnabled(t){this.escapeEnabled=t}isInvokesStopCellEditing(){return this.invokesStopCellEditing}setInvokesStopCellEditing(t){this.invokesStopCellEditing=t}isEnterStopsCellEditing(){return this.enterStopsCellEditing}setEnterStopsCellEditing(t){this.enterStopsCellEditing=t}isCellLocked(t){var e=this.model.getGeometry(t);return this.isCellsLocked()||e!=null&&this.model.isVertex(t)&&e.relative}isCellsLocked(){return this.cellsLocked}setCellsLocked(t){this.cellsLocked=t}getCloneableCells(t){return this.model.filterCells(t,e=>this.isCellCloneable(e))}isCellCloneable(t){var e=this.getCurrentCellStyle(t);return this.isCellsCloneable()&&e[mxConstants$1.STYLE_CLONEABLE]!=0}isCellsCloneable(){return this.cellsCloneable}setCellsCloneable(t){this.cellsCloneable=t}getExportableCells(t){return this.model.filterCells(t,e=>this.canExportCell(e))}canExportCell(t){return this.exportEnabled}getImportableCells(t){return this.model.filterCells(t,e=>this.canImportCell(e))}canImportCell(t){return this.importEnabled}isCellSelectable(t){return this.isCellsSelectable()}isCellsSelectable(){return this.cellsSelectable}setCellsSelectable(t){this.cellsSelectable=t}getDeletableCells(t){return this.model.filterCells(t,e=>this.isCellDeletable(e))}isCellDeletable(t){var e=this.getCurrentCellStyle(t);return this.isCellsDeletable()&&e[mxConstants$1.STYLE_DELETABLE]!=0}isCellsDeletable(){return this.cellsDeletable}setCellsDeletable(t){this.cellsDeletable=t}isLabelMovable(t){return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&this.vertexLabelsMovable)}isCellRotatable(t){var e=this.getCurrentCellStyle(t);return e[mxConstants$1.STYLE_ROTATABLE]!=0}getMovableCells(t){return this.model.filterCells(t,e=>this.isCellMovable(e))}isCellMovable(t){var e=this.getCurrentCellStyle(t);return this.isCellsMovable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_MOVABLE]!=0}isCellsMovable(){return this.cellsMovable}setCellsMovable(t){this.cellsMovable=t}isGridEnabled(){return this.gridEnabled}setGridEnabled(t){this.gridEnabled=t}isPortsEnabled(){return this.portsEnabled}setPortsEnabled(t){this.portsEnabled=t}getGridSize(){return this.gridSize}setGridSize(t){this.gridSize=t}getTolerance(){return this.tolerance}setTolerance(t){this.tolerance=t}isVertexLabelsMovable(){return this.vertexLabelsMovable}setVertexLabelsMovable(t){this.vertexLabelsMovable=t}isEdgeLabelsMovable(){return this.edgeLabelsMovable}setEdgeLabelsMovable(t){this.edgeLabelsMovable=t}isSwimlaneNesting(){return this.swimlaneNesting}setSwimlaneNesting(t){this.swimlaneNesting=t}isSwimlaneSelectionEnabled(){return this.swimlaneSelectionEnabled}setSwimlaneSelectionEnabled(t){this.swimlaneSelectionEnabled=t}isMultigraph(){return this.multigraph}setMultigraph(t){this.multigraph=t}isAllowLoops(){return this.allowLoops}setAllowDanglingEdges(t){this.allowDanglingEdges=t}isAllowDanglingEdges(){return this.allowDanglingEdges}setConnectableEdges(t){this.connectableEdges=t}isConnectableEdges(){return this.connectableEdges}setCloneInvalidEdges(t){this.cloneInvalidEdges=t}isCloneInvalidEdges(){return this.cloneInvalidEdges}setAllowLoops(t){this.allowLoops=t}isDisconnectOnMove(){return this.disconnectOnMove}setDisconnectOnMove(t){this.disconnectOnMove=t}isDropEnabled(){return this.dropEnabled}setDropEnabled(t){this.dropEnabled=t}isSplitEnabled(){return this.splitEnabled}setSplitEnabled(t){this.splitEnabled=t}isCellResizable(t){var e=this.getCurrentCellStyle(t);return this.isCellsResizable()&&!this.isCellLocked(t)&&mxUtils$1.getValue(e,mxConstants$1.STYLE_RESIZABLE,"1")!="0"}isCellsResizable(){return this.cellsResizable}setCellsResizable(t){this.cellsResizable=t}isTerminalPointMovable(t,e){return!0}isCellBendable(t){var e=this.getCurrentCellStyle(t);return this.isCellsBendable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_BENDABLE]!=0}isCellsBendable(){return this.cellsBendable}setCellsBendable(t){this.cellsBendable=t}isCellEditable(t){var e=this.getCurrentCellStyle(t);return this.isCellsEditable()&&!this.isCellLocked(t)&&e[mxConstants$1.STYLE_EDITABLE]!=0}isCellsEditable(){return this.cellsEditable}setCellsEditable(t){this.cellsEditable=t}isCellDisconnectable(t,e,n){return this.isCellsDisconnectable()&&!this.isCellLocked(t)}isCellsDisconnectable(){return this.cellsDisconnectable}setCellsDisconnectable(t){this.cellsDisconnectable=t}isValidSource(t){return t==null&&this.allowDanglingEdges||t!=null&&(!this.model.isEdge(t)||this.connectableEdges)&&this.isCellConnectable(t)}isValidTarget(t){return this.isValidSource(t)}isValidConnection(t,e){return this.isValidSource(t)&&this.isValidTarget(e)}setConnectable(t){this.connectionHandler.setEnabled(t)}isConnectable(){return this.connectionHandler.isEnabled()}setTooltips(t){this.tooltipHandler.setEnabled(t)}setPanning(t){this.panningHandler.panningEnabled=t}isEditing(t){if(this.cellEditor!=null){var e=this.cellEditor.getEditingCell();return t==null?e!=null:t==e}return!1}isAutoSizeCell(t){var e=this.getCurrentCellStyle(t);return this.isAutoSizeCells()||e[mxConstants$1.STYLE_AUTOSIZE]==1}isAutoSizeCells(){return this.autoSizeCells}setAutoSizeCells(t){this.autoSizeCells=t}isExtendParent(t){return!this.getModel().isEdge(t)&&this.isExtendParents()}isExtendParents(){return this.extendParents}setExtendParents(t){this.extendParents=t}isExtendParentsOnAdd(t){return this.extendParentsOnAdd}setExtendParentsOnAdd(t){this.extendParentsOnAdd=t}isExtendParentsOnMove(){return this.extendParentsOnMove}setExtendParentsOnMove(t){this.extendParentsOnMove=t}isRecursiveResize(t){return this.recursiveResize}setRecursiveResize(t){this.recursiveResize=t}isConstrainChild(t){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(t))}isConstrainChildren(){return this.constrainChildren}setConstrainChildren(t){this.constrainChildren=t}isConstrainRelativeChildren(){return this.constrainRelativeChildren}setConstrainRelativeChildren(t){this.constrainRelativeChildren=t}isAllowNegativeCoordinates(){return this.allowNegativeCoordinates}setAllowNegativeCoordinates(t){this.allowNegativeCoordinates=t}getOverlap(t){return this.isAllowOverlapParent(t)?this.defaultOverlap:0}isAllowOverlapParent(t){return!1}getFoldableCells(t,e){return this.model.filterCells(t,n=>this.isCellFoldable(n,e))}isCellFoldable(t,e){var n=this.getCurrentCellStyle(t);return this.model.getChildCount(t)>0&&n[mxConstants$1.STYLE_FOLDABLE]!=0}isValidDropTarget(t,e,n){return t!=null&&(this.isSplitEnabled()&&this.isSplitTarget(t,e,n)||!this.model.isEdge(t)&&(this.isSwimlane(t)||this.model.getChildCount(t)>0&&!this.isCellCollapsed(t)))}isSplitTarget(t,e,n){if(this.model.isEdge(t)&&e!=null&&e.length==1&&this.isCellConnectable(e[0])&&this.getEdgeValidationError(t,this.model.getTerminal(t,!0),e[0])==null){var s=this.model.getTerminal(t,!0),l=this.model.getTerminal(t,!1);return!this.model.isAncestor(e[0],s)&&!this.model.isAncestor(e[0],l)}return!1}getDropTarget(t,e,n,s){if(!this.isSwimlaneNesting()){for(var l=0;l<t.length;l++)if(this.isSwimlane(t[l]))return null}var r=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e));r.x-=this.panDx,r.y-=this.panDy;var o=this.getSwimlaneAt(r.x,r.y);if(n==null)n=o;else if(o!=null){for(var h=this.model.getParent(o);h!=null&&this.isSwimlane(h)&&h!=n;)h=this.model.getParent(h);h==n&&(n=o)}for(;n!=null&&!this.isValidDropTarget(n,t,e)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(s==null||!s)for(var u=n;u!=null&&mxUtils$1.indexOf(t,u)<0;)u=this.model.getParent(u);return!this.model.isLayer(n)&&u==null?n:null}getDefaultParent(){var t=this.getCurrentRoot();if(t==null&&(t=this.defaultParent,t==null)){var e=this.model.getRoot();t=this.model.getChildAt(e,0)}return t}setDefaultParent(t){this.defaultParent=t}getSwimlane(t){for(;t!=null&&!this.isSwimlane(t);)t=this.model.getParent(t);return t}getSwimlaneAt(t,e,n){if(n==null&&(n=this.getCurrentRoot(),n==null&&(n=this.model.getRoot())),n!=null)for(var s=this.model.getChildCount(n),l=0;l<s;l++){var r=this.model.getChildAt(n,l);if(r!=null){var o=this.getSwimlaneAt(t,e,r);if(o!=null)return o;if(this.isCellVisible(r)&&this.isSwimlane(r)){var h=this.view.getState(r);if(this.intersects(h,t,e))return r}}}return null}getCellAt(t,e,n,s,l,r){if(s=s??!0,l=l??!0,n==null&&(n=this.getCurrentRoot(),n==null&&(n=this.getModel().getRoot())),n!=null)for(var o=this.model.getChildCount(n),h=o-1;h>=0;h--){var u=this.model.getChildAt(n,h),d=this.getCellAt(t,e,u,s,l,r);if(d!=null)return d;if(this.isCellVisible(u)&&(l&&this.model.isEdge(u)||s&&this.model.isVertex(u))){var m=this.view.getState(u);if(m!=null&&(r==null||!r(m,t,e))&&this.intersects(m,t,e))return u}}return null}intersects(t,e,n){if(t!=null){var s=t.absolutePoints;if(s!=null)for(var l=this.tolerance*this.tolerance,r=s[0],o=1;o<s.length;o++){var h=s[o],u=mxUtils$1.ptSegDistSq(r.x,r.y,h.x,h.y,e,n);if(u<=l)return!0;r=h}else{var d=mxUtils$1.toRadians(mxUtils$1.getValue(t.style,mxConstants$1.STYLE_ROTATION)||0);if(d!=0){var m=Math.cos(-d),g=Math.sin(-d),x=new mxPoint(t.getCenterX(),t.getCenterY()),r=mxUtils$1.getRotatedPoint(new mxPoint(e,n),m,g,x);e=r.x,n=r.y}if(mxUtils$1.contains(t,e,n))return!0}}return!1}hitsSwimlaneContent(t,e,n){var s=this.getView().getState(t),l=this.getStartSize(t);if(s!=null){var r=this.getView().getScale();if(e-=s.x,n-=s.y,l.width>0&&e>0&&e>l.width*r)return!0;if(l.height>0&&n>0&&n>l.height*r)return!0}return!1}getChildVertices(t){return this.getChildCells(t,!0,!1)}getChildEdges(t){return this.getChildCells(t,!1,!0)}getChildCells(t,e,n){t=t??this.getDefaultParent(),e=e??!1,n=n??!1;for(var s=this.model.getChildCells(t,e,n),l=[],r=0;r<s.length;r++)this.isCellVisible(s[r])&&l.push(s[r]);return l}getConnections(t,e){return this.getEdges(t,e,!0,!0,!1)}getIncomingEdges(t,e){return this.getEdges(t,e,!0,!1,!1)}getOutgoingEdges(t,e){return this.getEdges(t,e,!1,!0,!1)}getEdges(t,e,n,s,l,r){n=n??!0,s=s??!0,l=l??!0,r=r??!1;for(var o=[],h=this.isCellCollapsed(t),u=this.model.getChildCount(t),d=0;d<u;d++){var m=this.model.getChildAt(t,d);(h||!this.isCellVisible(m))&&(o=o.concat(this.model.getEdges(m,n,s)))}o=o.concat(this.model.getEdges(t,n,s));for(var g=[],d=0;d<o.length;d++){var x=this.view.getState(o[d]),v=x!=null?x.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[d],!0),C=x!=null?x.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[d],!1);(l&&v==C||v!=C&&(n&&C==t&&(e==null||this.isValidAncestor(v,e,r))||s&&v==t&&(e==null||this.isValidAncestor(C,e,r))))&&g.push(o[d])}return g}isValidAncestor(t,e,n){return n?this.model.isAncestor(e,t):this.model.getParent(t)==e}getOpposites(t,e,n,s){n=n??!0,s=s??!0;var l=[],r=new mxDictionary;if(t!=null)for(var o=0;o<t.length;o++){var h=this.view.getState(t[o]),u=h!=null?h.getVisibleTerminal(!0):this.view.getVisibleTerminal(t[o],!0),d=h!=null?h.getVisibleTerminal(!1):this.view.getVisibleTerminal(t[o],!1);u==e&&d!=null&&d!=e&&s?r.get(d)||(r.put(d,!0),l.push(d)):d==e&&u!=null&&u!=e&&n&&(r.get(u)||(r.put(u,!0),l.push(u)))}return l}getEdgesBetween(t,e,n){n=n??!1;for(var s=this.getEdges(t),l=[],r=0;r<s.length;r++){var o=this.view.getState(s[r]),h=o!=null?o.getVisibleTerminal(!0):this.view.getVisibleTerminal(s[r],!0),u=o!=null?o.getVisibleTerminal(!1):this.view.getVisibleTerminal(s[r],!1);(h==t&&u==e||!n&&h==e&&u==t)&&l.push(s[r])}return l}getPointForEvent(t,e){var n=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(t),mxEvent$1.getClientY(t)),s=this.view.scale,l=this.view.translate,r=e!=!1?this.gridSize/2:0;return n.x=this.snap(n.x/s-l.x-r),n.y=this.snap(n.y/s-l.y-r),n}getCells(t,e,n,s,l,r){if(r=r??[],n>0||s>0){var o=this.getModel(),h=t+n,u=e+s;if(l==null&&(l=this.getCurrentRoot(),l==null&&(l=o.getRoot())),l!=null)for(var d=o.getChildCount(l),m=0;m<d;m++){var g=o.getChildAt(l,m),x=this.view.getState(g);if(x!=null&&this.isCellVisible(g)){var v=mxUtils$1.getValue(x.style,mxConstants$1.STYLE_ROTATION)||0,C=x;v!=0&&(C=mxUtils$1.getBoundingBox(C,v)),(o.isEdge(g)||o.isVertex(g))&&C.x>=t&&C.y+C.height<=u&&C.y>=e&&C.x+C.width<=h?r.push(g):this.getCells(t,e,n,s,g,r)}}}return r}getCellsBeyond(t,e,n,s,l){var r=[];if((s||l)&&(n==null&&(n=this.getDefaultParent()),n!=null))for(var o=this.model.getChildCount(n),h=0;h<o;h++){var u=this.model.getChildAt(n,h),d=this.view.getState(u);this.isCellVisible(u)&&d!=null&&(!s||d.x>=t)&&(!l||d.y>=e)&&r.push(u)}return r}findTreeRoots(t,e,n){e=e??!1,n=n??!1;var s=[];if(t!=null){for(var l=this.getModel(),r=l.getChildCount(t),o=null,h=0,u=0;u<r;u++){var d=l.getChildAt(t,u);if(this.model.isVertex(d)&&this.isCellVisible(d)){for(var m=this.getConnections(d,e?t:null),g=0,x=0,v=0;v<m.length;v++){var C=this.view.getVisibleTerminal(m[v],!0);C==d?g++:x++}(n&&g==0&&x>0||!n&&x==0&&g>0)&&s.push(d);var E=n?x-g:g-x;E>h&&(h=E,o=d)}}s.length==0&&o!=null&&s.push(o)}return s}traverse(t,e,n,s,l,r){if(n!=null&&t!=null&&(e=e??!0,r=r??!1,l=l||new mxDictionary,!l.get(t))){l.put(t,!0);var o=n(t,s);if(o==null||o){var h=this.model.getEdgeCount(t);if(h>0)for(var u=0;u<h;u++){var d=this.model.getEdgeAt(t,u),m=this.model.getTerminal(d,!0)==t;if(!e||!r==m){var g=this.model.getTerminal(d,!m);this.traverse(g,e,n,d,l,r)}}}}}isCellSelected(t){return this.getSelectionModel().isSelected(t)}isSelectionEmpty(){return this.getSelectionModel().isEmpty()}clearSelection(){return this.getSelectionModel().clear()}getSelectionCount(){return this.getSelectionModel().cells.length}getSelectionCell(){return this.getSelectionModel().cells[0]}getSelectionCells(){return this.getSelectionModel().cells.slice()}setSelectionCell(t){this.getSelectionModel().setCell(t)}setSelectionCells(t){this.getSelectionModel().setCells(t)}addSelectionCell(t){this.getSelectionModel().addCell(t)}addSelectionCells(t){this.getSelectionModel().addCells(t)}removeSelectionCell(t){this.getSelectionModel().removeCell(t)}removeSelectionCells(t){this.getSelectionModel().removeCells(t)}selectRegion(t,e){var n=this.getCells(t.x,t.y,t.width,t.height);return this.selectCellsForEvent(n,e),n}selectNextCell(){this.selectCell(!0)}selectPreviousCell(){this.selectCell()}selectParentCell(){this.selectCell(!1,!0)}selectChildCell(){this.selectCell(!1,!1,!0)}selectCell(t,e,n){var s=this.selectionModel,l=s.cells.length>0?s.cells[0]:null;s.cells.length>1&&s.clear();var r=l!=null?this.model.getParent(l):this.getDefaultParent(),o=this.model.getChildCount(r);if(l==null&&o>0){var h=this.model.getChildAt(r,0);this.setSelectionCell(h)}else if((l==null||e)&&this.view.getState(r)!=null&&this.model.getGeometry(r)!=null)this.getCurrentRoot()!=r&&this.setSelectionCell(r);else if(l!=null&&n){var u=this.model.getChildCount(l);if(u>0){var h=this.model.getChildAt(l,0);this.setSelectionCell(h)}}else if(o>0){var d=r.getIndex(l);if(t){d++;var h=this.model.getChildAt(r,d%o);this.setSelectionCell(h)}else{d--;var m=d<0?o-1:d,h=this.model.getChildAt(r,m);this.setSelectionCell(h)}}}selectAll(t,e){t=t||this.getDefaultParent();var n=e?this.model.filterDescendants(s=>s!=t&&this.view.getState(s)!=null,t):this.model.getChildren(t);n!=null&&this.setSelectionCells(n)}selectVertices(t,e){this.selectCells(!0,!1,t,e)}selectEdges(t){this.selectCells(!1,!0,t)}selectCells(t,e,n,s){n=n||this.getDefaultParent();var l=o=>this.view.getState(o)!=null&&((s||this.model.getChildCount(o)==0)&&this.model.isVertex(o)&&t&&!this.model.isEdge(this.model.getParent(o))||this.model.isEdge(o)&&e),r=this.model.filterDescendants(l,n);r!=null&&this.setSelectionCells(r)}selectCellForEvent(t,e){var n=this.isCellSelected(t);this.isToggleEvent(e)?n?this.removeSelectionCell(t):this.addSelectionCell(t):(!n||this.getSelectionCount()!=1)&&this.setSelectionCell(t)}selectCellsForEvent(t,e){this.isToggleEvent(e)?this.addSelectionCells(t):this.setSelectionCells(t)}createHandler(t){var e=null;if(t!=null)if(this.model.isEdge(t.cell)){var n=t.getVisibleTerminalState(!0),s=t.getVisibleTerminalState(!1),l=this.getCellGeometry(t.cell),r=this.view.getEdgeStyle(t,l!=null?l.points:null,n,s);e=this.createEdgeHandler(t,r)}else e=this.createVertexHandler(t);return e}createVertexHandler(t){return new mxVertexHandler(t)}createEdgeHandler(t,e){var n=null;return e==mxEdgeStyle.Loop||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom?n=this.createElbowEdgeHandler(t):e==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.OrthConnector?n=this.createEdgeSegmentHandler(t):n=new mxEdgeHandler(t),n}createEdgeSegmentHandler(t){return new mxEdgeSegmentHandler(t)}createElbowEdgeHandler(t){return new mxElbowEdgeHandler$1(t)}addMouseListener(t){this.mouseListeners==null&&(this.mouseListeners=[]),this.mouseListeners.push(t)}removeMouseListener(t){if(this.mouseListeners!=null){for(var e=0;e<this.mouseListeners.length;e++)if(this.mouseListeners[e]==t){this.mouseListeners.splice(e,1);break}}}updateMouseEvent(t,e){if(t.graphX==null||t.graphY==null){var n=mxUtils$1.convertPoint(this.container,t.getX(),t.getY());t.graphX=n.x-this.panDx,t.graphY=n.y-this.panDy,t.getCell()==null&&this.isMouseDown&&e==mxEvent$1.MOUSE_MOVE&&(t.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(s){return s.shape==null||s.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||mxUtils$1.getValue(s.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"||s.shape.fill!=null&&s.shape.fill!=mxConstants$1.NONE})))}return t}getStateForTouchEvent(t){var e=mxEvent$1.getClientX(t),n=mxEvent$1.getClientY(t),s=mxUtils$1.convertPoint(this.container,e,n);return this.view.getState(this.getCellAt(s.x,s.y))}isEventIgnored(t,e,n){var s=mxEvent$1.isMouseEvent(e.getEvent()),l=!1;return e.getEvent()==this.lastEvent?l=!0:this.lastEvent=e.getEvent(),this.eventSource!=null&&t!=mxEvent$1.MOUSE_MOVE?(mxEvent$1.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):!mxClient.IS_GC&&this.eventSource!=null&&e.getSource()!=this.eventSource?l=!0:mxClient.IS_TOUCH&&t==mxEvent$1.MOUSE_DOWN&&!s&&!mxEvent$1.isPenEvent(e.getEvent())&&(this.eventSource=e.getSource(),this.mouseMoveRedirect=r=>{this.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(r,this.getStateForTouchEvent(r)))},this.mouseUpRedirect=r=>{this.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(r,this.getStateForTouchEvent(r)))},mxEvent$1.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)),this.isSyntheticEventIgnored(t,e,n)&&(l=!0),!mxEvent$1.isPopupTrigger(this.lastEvent)&&t!=mxEvent$1.MOUSE_MOVE&&this.lastEvent.detail==2?!0:(t==mxEvent$1.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:t==mxEvent$1.MOUSE_DOWN&&!this.isMouseDown?(this.isMouseDown=!0,this.isMouseTrigger=s):!l&&((!mxClient.IS_FF||t!=mxEvent$1.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=s||t==mxEvent$1.MOUSE_DOWN&&this.isMouseDown||t==mxEvent$1.MOUSE_UP&&!this.isMouseDown)&&(l=!0),!l&&t==mxEvent$1.MOUSE_DOWN&&(this.lastMouseX=e.getX(),this.lastMouseY=e.getY()),l)}isSyntheticEventIgnored(t,e,n){var s=!1,l=mxEvent$1.isMouseEvent(e.getEvent());return this.ignoreMouseEvents&&l&&t!=mxEvent$1.MOUSE_MOVE?(this.ignoreMouseEvents=t!=mxEvent$1.MOUSE_UP,s=!0):mxClient.IS_FF&&!l&&t==mxEvent$1.MOUSE_UP&&(this.ignoreMouseEvents=!0),s}isEventSourceIgnored(t,e){var n=e.getSource(),s=n.nodeName!=null?n.nodeName.toLowerCase():"",l=!mxEvent$1.isMouseEvent(e.getEvent())||mxEvent$1.isLeftMouseButton(e.getEvent());return t==mxEvent$1.MOUSE_DOWN&&l&&(s=="select"||s=="option"||s=="input"&&n.type!="checkbox"&&n.type!="radio"&&n.type!="button"&&n.type!="submit"&&n.type!="file")}getEventState(t){return t}fireMouseEvent(t,e,n){if(this.isEventSourceIgnored(t,e)){this.tooltipHandler!=null&&this.tooltipHandler.hide();return}if(n==null&&(n=this),e=this.updateMouseEvent(e,t),!this.nativeDblClickEnabled&&!mxEvent$1.isPopupTrigger(e.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))){var s=new Date().getTime();if(!mxClient.IS_QUIRKS&&t==mxEvent$1.MOUSE_DOWN||mxClient.IS_QUIRKS&&t==mxEvent$1.MOUSE_UP&&!this.fireDoubleClick)if(this.lastTouchEvent!=null&&this.lastTouchEvent!=e.getEvent()&&s-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var l=!1;if(t==mxEvent$1.MOUSE_UP){if(e.getCell()==this.lastTouchCell&&this.lastTouchCell!=null){this.lastTouchTime=0;var r=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&e.getSource().fireEvent("ondblclick"),this.dblClick(e.getEvent(),r),l=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||l){mxEvent$1.consume(e.getEvent());return}}else(this.lastTouchEvent==null||this.lastTouchEvent!=e.getEvent())&&(this.lastTouchCell=e.getCell(),this.lastTouchX=e.getX(),this.lastTouchY=e.getY(),this.lastTouchTime=s,this.lastTouchEvent=e.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||t==mxEvent$1.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1;var r=this.lastTouchCell;this.lastTouchCell=null,this.isMouseDown=!1;var o=r!=null||(mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF);o&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance?this.dblClick(e.getEvent(),r):mxEvent$1.consume(e.getEvent());return}}if(!this.isEventIgnored(t,e,n)){if(e.state=this.getEventState(e.getState()),this.fireEvent(new mxEventObject$1(mxEvent$1.FIRE_MOUSE_EVENT,"eventName",t,"event",e)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||e.getEvent().target!=this.container){if(t==mxEvent$1.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent$1.isMultiTouchEvent(e.getEvent))this.scrollPointToVisible(e.getGraphX(),e.getGraphY(),this.autoExtend);else if(t==mxEvent$1.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(this.container.scrollLeft!=0||this.container.scrollTop!=0)){var h=this.view.scale,u=this.view.translate;this.view.setTranslate(u.x-this.container.scrollLeft/h,u.y-this.container.scrollTop/h),this.container.scrollLeft=0,this.container.scrollTop=0}if(this.mouseListeners!=null){var d=[n,e];e.getEvent().preventDefault||(e.getEvent().returnValue=!0);for(var m=0;m<this.mouseListeners.length;m++){var g=this.mouseListeners[m];t==mxEvent$1.MOUSE_DOWN?g.mouseDown.apply(g,d):t==mxEvent$1.MOUSE_MOVE?g.mouseMove.apply(g,d):t==mxEvent$1.MOUSE_UP&&g.mouseUp.apply(g,d)}}t==mxEvent$1.MOUSE_UP&&this.click(e)}if((mxEvent$1.isTouchEvent(e.getEvent())||mxEvent$1.isPenEvent(e.getEvent()))&&t==mxEvent$1.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress){this.tapAndHoldInProgress=!0,this.initialTouchX=e.getGraphX(),this.initialTouchY=e.getGraphY();var x=function(){this.tapAndHoldValid&&this.tapAndHold(e),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1};this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils$1.bind(this,x),this.tapAndHoldDelay),this.tapAndHoldValid=!0}else t==mxEvent$1.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-e.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-e.getGraphY())<this.tolerance);t==mxEvent$1.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(e.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(t,e,n)}}consumeMouseEvent(t,e,n){t==mxEvent$1.MOUSE_DOWN&&mxEvent$1.isTouchEvent(e.getEvent())&&e.consume(!1)}fireGestureEvent(t,e){this.lastTouchTime=0,this.fireEvent(new mxEventObject$1(mxEvent$1.GESTURE,"event",t,"cell",e))}destroy(){this.destroyed||(this.destroyed=!0,this.tooltipHandler!=null&&this.tooltipHandler.destroy(),this.selectionCellsHandler!=null&&this.selectionCellsHandler.destroy(),this.panningHandler!=null&&this.panningHandler.destroy(),this.popupMenuHandler!=null&&this.popupMenuHandler.destroy(),this.connectionHandler!=null&&this.connectionHandler.destroy(),this.graphHandler!=null&&this.graphHandler.destroy(),this.cellEditor!=null&&this.cellEditor.destroy(),this.view!=null&&this.view.destroy(),this.model!=null&&this.graphModelChangeListener!=null&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)}}class mxOutline{constructor(i,t){c(this,"outline",null);c(this,"graphRenderHint",mxConstants$1.RENDERING_HINT_FASTER);c(this,"enabled",!0);c(this,"showViewport",!0);c(this,"border",10);c(this,"sizerSize",8);c(this,"labelsVisible",!1);c(this,"updateOnPan",!1);c(this,"sizerImage",null);c(this,"minScale",1e-4);c(this,"suspended",!1);c(this,"forceVmlHandles",document.documentMode==8);this.source=i,t!=null&&this.init(t)}createGraph(i){var t=new mxGraph(i,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return t.foldingEnabled=!1,t.autoScroll=!1,t}init(i){this.outline=this.createGraph(i);var t=this.outline.graphModelChanged;if(this.outline.graphModelChanged=l=>{!this.suspended&&this.outline!=null&&t.apply(this.outline,arguments)},mxClient.IS_SVG){var e=this.outline.getView().getCanvas().parentNode;e.setAttribute("shape-rendering","optimizeSpeed"),e.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=(l,r)=>{!this.suspended&&!this.active&&this.update()},this.source.getModel().addListener(mxEvent$1.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var n=this.source.getView();n.addListener(mxEvent$1.SCALE,this.updateHandler),n.addListener(mxEvent$1.TRANSLATE,this.updateHandler),n.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.updateHandler),n.addListener(mxEvent$1.DOWN,this.updateHandler),n.addListener(mxEvent$1.UP,this.updateHandler),mxEvent$1.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=l=>{this.updateOnPan&&this.updateHandler.apply(this,arguments)},this.source.addListener(mxEvent$1.PAN,this.panHandler),this.refreshHandler=l=>{this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()},this.source.addListener(mxEvent$1.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants$1.OUTLINE_COLOR,mxConstants$1.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var s=l=>{var r=mxEvent$1.getSource(l),o=u=>{this.outline.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(u))},h=u=>{mxEvent$1.removeGestureListeners(r,null,o,h),this.outline.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(u))};mxEvent$1.addGestureListeners(r,null,o,h),this.outline.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(l))};mxEvent$1.addGestureListeners(this.selectionBorder.node,s),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent$1.addGestureListeners(this.sizer.node,s),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}setZoomEnabled(i){this.sizer.node.style.visibility=i?"visible":"hidden"}refresh(){this.update(!0)}createSizer(){if(this.sizerImage!=null){var i=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src);return i.dialect=this.outline.dialect,i}else{var i=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants$1.OUTLINE_HANDLE_FILLCOLOR,mxConstants$1.OUTLINE_HANDLE_STROKECOLOR);return i.dialect=this.outline.dialect,i}}getSourceContainerSize(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)}getOutlineOffset(i){return null}getSourceGraphBounds(){return this.source.getGraphBounds()}update(i){if(this.source!=null&&this.source.container!=null&&this.outline!=null&&this.outline.container!=null){var t=this.source.view.scale,e=this.getSourceGraphBounds(),n=new mxRectangle(e.x/t+this.source.panDx,e.y/t+this.source.panDy,e.width/t,e.height/t),s=new mxRectangle(0,0,this.source.container.clientWidth/t,this.source.container.clientHeight/t),l=n.clone();l.add(s);var r=this.getSourceContainerSize(),o=Math.max(r.width/t,l.width),h=Math.max(r.height/t,l.height),u=Math.max(0,this.outline.container.clientWidth-this.border),d=Math.max(0,this.outline.container.clientHeight-this.border),m=Math.min(u/o,d/h),g=isNaN(m)?this.minScale:Math.max(this.minScale,m);if(g>0){this.outline.getView().scale!=g&&(this.outline.getView().scale=g,i=!0);var x=this.outline.getView();x.currentRoot!=this.source.getView().currentRoot&&x.setCurrentRoot(this.source.getView().currentRoot);var v=this.source.view.translate,C=v.x+this.source.panDx,E=v.y+this.source.panDy,b=this.getOutlineOffset(g);b!=null&&(C+=b.x,E+=b.y),n.x<0&&(C=C-n.x),n.y<0&&(E=E-n.y),(x.translate.x!=C||x.translate.y!=E)&&(x.translate.x=C,x.translate.y=E,i=!0);var w=x.translate;g=this.source.getView().scale;var $=g/x.scale,P=1/x.scale,M=this.source.container;this.bounds=new mxRectangle((w.x-v.x-this.source.panDx)/P,(w.y-v.y-this.source.panDy)/P,M.clientWidth/$,M.clientHeight/$),this.bounds.x+=this.source.container.scrollLeft*x.scale/g,this.bounds.y+=this.source.container.scrollTop*x.scale/g;var D=this.selectionBorder.bounds;(D.x!=this.bounds.x||D.y!=this.bounds.y||D.width!=this.bounds.width||D.height!=this.bounds.height)&&(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var D=this.sizer.bounds,k=new mxRectangle(this.bounds.x+this.bounds.width-D.width/2,this.bounds.y+this.bounds.height-D.height/2,D.width,D.height);(D.x!=k.x||D.y!=k.y||D.width!=k.width||D.height!=k.height)&&(this.sizer.bounds=k,this.sizer.node.style.visibility!="hidden"&&this.sizer.redraw()),i&&this.outline.view.revalidate()}}}mouseDown(i,t){if(this.enabled&&this.showViewport){var e=mxEvent$1.isMouseEvent(t.getEvent())?0:this.source.tolerance,n=this.source.allowHandleBoundsCheck&&e>0?new mxRectangle(t.getGraphX()-e,t.getGraphY()-e,2*e,2*e):null;this.zoom=t.isSource(this.sizer)||n!=null&&mxUtils$1.intersects(shape.bounds,n),this.startX=t.getX(),this.startY=t.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils$1.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}t.consume()}mouseMove(i,t){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var e=this.getTranslateForEvent(t),n=e.x,s=e.y,l=null;if(this.zoom){var o=this.source.container,h=o.clientWidth/o.clientHeight;s=n/h,l=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+n),Math.max(1,this.bounds.height+s)),this.selectionBorder.bounds=l,this.selectionBorder.redraw()}else{var r=this.outline.getView().scale;l=new mxRectangle(this.bounds.x+n,this.bounds.y+s,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=l,this.selectionBorder.redraw(),n/=r,n*=this.source.getView().scale,s/=r,s*=this.source.getView().scale,this.source.panGraph(-n-this.dx0,-s-this.dy0)}var u=this.sizer.bounds;this.sizer.bounds=new mxRectangle(l.x+l.width-u.width/2,l.y+l.height-u.height/2,u.width,u.height),this.sizer.node.style.visibility!="hidden"&&this.sizer.redraw(),t.consume()}}getTranslateForEvent(i){return new mxPoint(i.getX()-this.startX,i.getY()-this.startY)}mouseUp(i,t){if(this.active){var e=this.getTranslateForEvent(t),n=e.x,s=e.y;if(Math.abs(n)>0||Math.abs(s)>0){if(this.zoom){var r=this.selectionBorder.bounds.width,o=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,o-n*o/r),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.source.container)){this.source.panGraph(0,0),n/=this.outline.getView().scale,s/=this.outline.getView().scale;var l=this.source.getView().translate;this.source.getView().setTranslate(l.x-n,l.y-s)}this.update(),t.consume()}this.index=null,this.active=!1}}destroy(){this.source!=null&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent$1.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),this.outline!=null&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),this.selectionBorder!=null&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.sizer!=null&&(this.sizer.destroy(),this.sizer=null)}}class mxForm{constructor(i){this.table=document.createElement("table"),this.table.className=i,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}getTable(){return this.table}addButtons(i,t){var e=document.createElement("tr"),n=document.createElement("td");e.appendChild(n),n=document.createElement("td");var s=document.createElement("button");mxUtils$1.write(s,mxResources$1.get("ok")||"OK"),n.appendChild(s),mxEvent$1.addListener(s,"click",function(){i()}),s=document.createElement("button"),mxUtils$1.write(s,mxResources$1.get("cancel")||"Cancel"),n.appendChild(s),mxEvent$1.addListener(s,"click",function(){t()}),e.appendChild(n),this.body.appendChild(e)}addText(i,t,e){var n=document.createElement("input");return n.setAttribute("type",e||"text"),n.value=t,this.addField(i,n)}addCheckbox(i,t){var e=document.createElement("input");return e.setAttribute("type","checkbox"),this.addField(i,e),t&&(e.checked=!0),e}addTextarea(i,t,e){var n=document.createElement("textarea");return mxClient.IS_NS&&e--,n.setAttribute("rows",e||2),n.value=t,this.addField(i,n)}addCombo(i,t,e){var n=document.createElement("select");return e!=null&&n.setAttribute("size",e),t&&n.setAttribute("multiple","true"),this.addField(i,n)}addOption(i,t,e,n){var s=document.createElement("option");mxUtils$1.writeln(s,t),s.setAttribute("value",e),n&&s.setAttribute("selected",n),i.appendChild(s)}addField(i,t){var e=document.createElement("tr"),n=document.createElement("td");return mxUtils$1.write(n,i),e.appendChild(n),n=document.createElement("td"),n.appendChild(t),e.appendChild(n),this.body.appendChild(e),t}}class mxGraphLayout{constructor(i){c(this,"useBoundingBox",!0);c(this,"parent",null);this.graph=i}moveCell(i,t,e){}resizeCell(i,t){}execute(i){}getGraph(){return this.graph}getConstraint(i,t,e,n){return this.graph.getCurrentCellStyle(t)[i]}static traverse(i,t,e,n,s){if(e!=null&&i!=null&&(t=t??!0,s=s||new mxDictionary,!s.get(i))){s.put(i,!0);var l=e(i,n);if(l==null||l){var r=this.graph.model.getEdgeCount(i);if(r>0)for(var o=0;o<r;o++){var h=this.graph.model.getEdgeAt(i,o),u=this.graph.model.getTerminal(h,!0)==i;if(!t||u){var d=this.graph.view.getVisibleTerminal(h,!u);this.traverse(d,t,e,h,s)}}}}}isAncestor(i,t,e){if(!e)return this.graph.model.getParent(t)==i;if(t==i)return!1;for(;t!=null&&t!=i;)t=this.graph.model.getParent(t);return t==i}isVertexMovable(i){return this.graph.isCellMovable(i)}isVertexIgnored(i){return!this.graph.getModel().isVertex(i)||!this.graph.isCellVisible(i)}isEdgeIgnored(i){var t=this.graph.getModel();return!t.isEdge(i)||!this.graph.isCellVisible(i)||t.getTerminal(i,!0)==null||t.getTerminal(i,!1)==null}setEdgeStyleEnabled(i,t){this.graph.setCellStyles(mxConstants$1.STYLE_NOEDGESTYLE,t?"0":"1",[i])}setOrthogonalEdge(i,t){this.graph.setCellStyles(mxConstants$1.STYLE_ORTHOGONAL,t?"1":"0",[i])}getParentOffset(i){var t=new mxPoint;if(i!=null&&i!=this.parent){var e=this.graph.getModel();if(e.isAncestor(this.parent,i))for(var n=e.getGeometry(i);i!=this.parent;)t.x=t.x+n.x,t.y=t.y+n.y,i=e.getParent(i),n=e.getGeometry(i)}return t}setEdgePoints(i,t){if(i!=null){var e=this.graph.model,n=e.getGeometry(i);if(n==null?(n=new mxGeometry,n.setRelative(!0)):n=n.clone(),this.parent!=null&&t!=null)for(var s=e.getParent(i),l=this.getParentOffset(s),r=0;r<t.length;r++)t[r].x=t[r].x-l.x,t[r].y=t[r].y-l.y;n.points=t,e.setGeometry(i,n)}}setVertexLocation(i,t,e){var n=this.graph.getModel(),s=n.getGeometry(i),l=null;if(s!=null){if(l=new mxRectangle(t,e,s.width,s.height),this.useBoundingBox){var r=this.graph.getView().getState(i);if(r!=null&&r.text!=null&&r.text.boundingBox!=null){var o=this.graph.getView().scale,h=r.text.boundingBox;r.text.boundingBox.x<r.x&&(t+=(r.x-h.x)/o,l.width=h.width),r.text.boundingBox.y<r.y&&(e+=(r.y-h.y)/o,l.height=h.height)}}if(this.parent!=null){var u=n.getParent(i);if(u!=null&&u!=this.parent){var d=this.getParentOffset(u);t=t-d.x,e=e-d.y}}(s.x!=t||s.y!=e)&&(s=s.clone(),s.x=t,s.y=e,n.setGeometry(i,s))}return l}getVertexBounds(i){var t=this.graph.getModel().getGeometry(i);if(this.useBoundingBox){var e=this.graph.getView().getState(i);if(e!=null&&e.text!=null&&e.text.boundingBox!=null){var n=this.graph.getView().scale,s=e.text.boundingBox,l=Math.max(e.x-s.x,0)/n,r=Math.max(e.y-s.y,0)/n,o=Math.max(s.x+s.width-(e.x+e.width),0)/n,h=Math.max(s.y+s.height-(e.y+e.height),0)/n;t=new mxRectangle(t.x-l,t.y-r,t.width+l+o,t.height+r+h)}}if(this.parent!=null){var u=this.graph.getModel().getParent(i);if(t=t.clone(),u!=null&&u!=this.parent){var d=this.getParentOffset(u);t.x=t.x+d.x,t.y=t.y+d.y}}return new mxRectangle(t.x,t.y,t.width,t.height)}arrangeGroups(i,t,e,n,s,l){return this.graph.updateGroupBounds(i,t,!0,e,n,s,l)}}class WeightedCellSorter{constructor(i,t){c(this,"nudge",!1);c(this,"visited",!1);c(this,"rankIndex",null);this.cell=i,this.weightedValue=t}static compare(i,t){return i!=null&&t!=null?t.weightedValue>i.weightedValue?-1:t.weightedValue<i.weightedValue?1:t.nudge?-1:1:0}}class mxCompactTreeLayout extends mxGraphLayout{constructor(t,e,n){super(t);c(this,"resizeParent",!0);c(this,"maintainParentLocation",!1);c(this,"groupPadding",10);c(this,"groupPaddingTop",0);c(this,"groupPaddingRight",0);c(this,"groupPaddingBottom",0);c(this,"groupPaddingLeft",0);c(this,"parentsChanged",null);c(this,"moveTree",!1);c(this,"visited",null);c(this,"levelDistance",10);c(this,"nodeDistance",20);c(this,"resetEdges",!0);c(this,"prefHozEdgeSep",5);c(this,"prefVertEdgeOff",4);c(this,"minEdgeJetty",8);c(this,"channelBuffer",4);c(this,"edgeRouting",!0);c(this,"sortEdges",!1);c(this,"alignRanks",!1);c(this,"maxRankHeight",null);c(this,"root",null);c(this,"node",null);this.horizontal=e??!0,this.invert=n??!1}isVertexIgnored(t){return super.isVertexIgnored(t)||this.graph.getConnections(t).length==0}isHorizontal(){return this.horizontal}execute(t,e){this.parent=t;var n=this.graph.getModel();if(e==null)if(this.graph.getEdges(t,n.getParent(t),this.invert,!this.invert,!1).length>0)this.root=t;else{var s=this.graph.findTreeRoots(t,!0,this.invert);if(s.length>0){for(var l=0;l<s.length;l++)if(!this.isVertexIgnored(s[l])&&this.graph.getEdges(s[l],null,this.invert,!this.invert,!1).length>0){this.root=s[l];break}}}else this.root=e;if(this.root!=null){if(this.resizeParent?this.parentsChanged=new Object:this.parentsChanged=null,this.parentX=null,this.parentY=null,t!=this.root&&n.isVertex(t)!=null&&this.maintainParentLocation){var r=this.graph.getCellGeometry(t);r!=null&&(this.parentX=r.x,this.parentY=r.y)}n.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,t),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),this.node!=null){this.layout(this.node);var o=this.graph.gridSize,h=o;if(!this.moveTree){var u=this.getVertexBounds(this.root);u!=null&&(o=u.x,h=u.y)}var d=null;if(this.isHorizontal()?d=this.horizontalLayout(this.node,o,h):d=this.verticalLayout(this.node,null,o,h),d!=null){var m=0,g=0;d.x<0&&(m=Math.abs(o-d.x)),d.y<0&&(g=Math.abs(h-d.y)),(m!=0||g!=0)&&this.moveNode(this.node,m,g),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}if(this.parentX!=null&&this.parentY!=null){var r=this.graph.getCellGeometry(t);r!=null&&(r=r.clone(),r.x=this.parentX,r.y=this.parentY,n.setGeometry(t,r))}}}finally{n.endUpdate()}}}moveNode(t,e,n){t.x+=e,t.y+=n,this.apply(t);for(var s=t.child;s!=null;)this.moveNode(s,e,n),s=s.next}sortOutgoingEdges(t,e){var n=new mxDictionary;e.sort(function(s,l){var r=s.getTerminal(s.getTerminal(!1)==t),o=n.get(r);o==null&&(o=mxCellPath.create(r).split(mxCellPath.PATH_SEPARATOR),n.put(r,o));var h=l.getTerminal(l.getTerminal(!1)==t),u=n.get(h);return u==null&&(u=mxCellPath.create(h).split(mxCellPath.PATH_SEPARATOR),n.put(h,u)),mxCellPath.compare(o,u)})}findRankHeights(t,e){(this.maxRankHeight[e]==null||this.maxRankHeight[e]<t.height)&&(this.maxRankHeight[e]=t.height);for(var n=t.child;n!=null;)this.findRankHeights(n,e+1),n=n.next}setCellHeights(t,e){this.maxRankHeight[e]!=null&&this.maxRankHeight[e]>t.height&&(t.height=this.maxRankHeight[e]);for(var n=t.child;n!=null;)this.setCellHeights(n,e+1),n=n.next}dfs(t,e){var n=mxCellPath.create(t),s=null;if(t!=null&&this.visited[n]==null&&!this.isVertexIgnored(t)){this.visited[n]=t,s=this.createNode(t);var l=this.graph.getModel(),r=null,o=this.graph.getEdges(t,e,this.invert,!this.invert,!1,!0),h=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(t,o);for(var u=0;u<o.length;u++){var d=o[u];if(!this.isEdgeIgnored(d)){this.resetEdges&&this.setEdgePoints(d,null),this.edgeRouting&&(this.setEdgeStyleEnabled(d,!1),this.setEdgePoints(d,null));var m=h.getState(d),g=m!=null?m.getVisibleTerminal(this.invert):h.getVisibleTerminal(d,this.invert),x=this.dfs(g,e);x!=null&&l.getGeometry(g)!=null&&(r==null?s.child=x:r.next=x,r=x)}}}return s}layout(t){if(t!=null){for(var e=t.child;e!=null;)this.layout(e),e=e.next;t.child!=null?this.attachParent(t,this.join(t)):this.layoutLeaf(t)}}horizontalLayout(t,e,n,s){t.x+=e+t.offsetX,t.y+=n+t.offsetY,s=this.apply(t,s);var l=t.child;if(l!=null){s=this.horizontalLayout(l,t.x,t.y,s);for(var r=t.y+l.offsetY,o=l.next;o!=null;)s=this.horizontalLayout(o,t.x+l.offsetX,r,s),r+=o.offsetY,o=o.next}return s}verticalLayout(t,e,n,s,l){t.x+=n+t.offsetY,t.y+=s+t.offsetX,l=this.apply(t,l);var r=t.child;if(r!=null){l=this.verticalLayout(r,t,t.x,t.y,l);for(var o=t.x+r.offsetY,h=r.next;h!=null;)l=this.verticalLayout(h,t,o,t.y+r.offsetX,l),o+=h.offsetY,h=h.next}return l}attachParent(t,e){var n=this.nodeDistance+this.levelDistance,s=(e-t.width)/2-this.nodeDistance,l=s+t.width+2*this.nodeDistance-e;t.child.offsetX=n+t.height,t.child.offsetY=l,t.contour.upperHead=this.createLine(t.height,0,this.createLine(n,l,t.contour.upperHead)),t.contour.lowerHead=this.createLine(t.height,0,this.createLine(n,s,t.contour.lowerHead))}layoutLeaf(t){var e=2*this.nodeDistance;t.contour.upperTail=this.createLine(t.height+e,0),t.contour.upperHead=t.contour.upperTail,t.contour.lowerTail=this.createLine(0,-t.width-e),t.contour.lowerHead=this.createLine(t.height+e,0,t.contour.lowerTail)}join(t){var e=2*this.nodeDistance,n=t.child;t.contour=n.contour;var s=n.width+e,l=s;for(n=n.next;n!=null;){var r=this.merge(t.contour,n.contour);n.offsetY=r+s,n.offsetX=0,s=n.width+e,l+=r+s,n=n.next}return l}merge(t,e){for(var n=0,s=0,l=0,r=t.lowerHead,o=e.upperHead;o!=null&&r!=null;){var h=this.offset(n,s,o.dx,o.dy,r.dx,r.dy);s+=h,l+=h,n+o.dx<=r.dx?(n+=o.dx,s+=o.dy,o=o.next):(n-=r.dx,s-=r.dy,r=r.next)}if(o!=null){var u=this.bridge(t.upperTail,0,0,o,n,s);t.upperTail=u.next!=null?e.upperTail:u,t.lowerTail=e.lowerTail}else{var u=this.bridge(e.lowerTail,n,s,r,0,0);u.next==null&&(t.lowerTail=u)}return t.lowerHead=e.lowerHead,l}offset(t,e,n,s,l,r){var o=0;if(l<=t||t+n<=0)return 0;var h=l*s-n*r;if(h>0)if(t<0){var u=t*s;o=u/n-e}else if(t>0){var u=t*r;o=u/l-e}else o=-e;else if(l<t+n){var u=(l-t)*s;o=r-(e+u/n)}else if(l>t+n){var u=(n+t)*r;o=u/l-(e+s)}else o=r-(e+s);return o>0?o:0}bridge(t,e,n,s,l,r){var o=l+s.dx-e,h=0,u=0;s.dx==0?h=s.dy:(u=o*s.dy,h=u/s.dx);var d=this.createLine(o,h,s.next);return t.next=this.createLine(0,r+s.dy-h-n,d),d}createNode(t){var e=new Object;e.cell=t,e.x=0,e.y=0,e.width=0,e.height=0;var n=this.getVertexBounds(t);return n!=null&&(this.isHorizontal()?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height)),e.offsetX=0,e.offsetY=0,e.contour=new Object,e}apply(t,e){var n=this.graph.getModel(),s=t.cell,l=n.getGeometry(s);if(s!=null&&l!=null){if(this.isVertexMovable(s)&&(l=this.setVertexLocation(s,t.x,t.y),this.resizeParent)){var r=n.getParent(s),o=mxCellPath.create(r);this.parentsChanged[o]==null&&(this.parentsChanged[o]=r)}e==null?e=new mxRectangle(l.x,l.y,l.width,l.height):e=new mxRectangle(Math.min(e.x,l.x),Math.min(e.y,l.y),Math.max(e.x+e.width,l.x+l.width),Math.max(e.y+e.height,l.y+l.height))}return e}createLine(t,e,n){var s=new Object;return s.dx=t,s.dy=e,s.next=n,s}adjustParents(){var t=[];for(var e in this.parentsChanged)t.push(this.parentsChanged[e]);this.arrangeGroups(mxUtils$1.sortCells(t,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)}localEdgeProcessing(t){this.processNodeOutgoing(t);for(var e=t.child;e!=null;)this.localEdgeProcessing(e),e=e.next}processNodeOutgoing(t){for(var e=t.child,n=t.cell,s=0,l=[];e!=null;){s++;var r=e.x;this.horizontal&&(r=e.y),l.push(new WeightedCellSorter(e,r)),e=e.next}l.sort(WeightedCellSorter.compare);var o=t.width,h=(s+1)*this.prefHozEdgeSep;o>h+2*this.prefHozEdgeSep&&(o-=2*this.prefHozEdgeSep);var u=o/s,d=u/2;o>h+2*this.prefHozEdgeSep&&(d+=this.prefHozEdgeSep);var m=this.minEdgeJetty-this.prefVertEdgeOff,g=this.getVertexBounds(n);e=t.child;for(var x=0;x<l.length;x++){for(var v=l[x].cell.cell,C=this.getVertexBounds(v),E=this.graph.getEdgesBetween(n,v,!1),b=[],w=0,$=0,P=0;P<E.length;P++)this.horizontal?(w=g.x+g.width,$=g.y+d,b.push(new mxPoint(w,$)),w=g.x+g.width+m,b.push(new mxPoint(w,$)),$=C.y+C.height/2,b.push(new mxPoint(w,$)),this.setEdgePoints(E[P],b)):(w=g.x+d,$=g.y+g.height,b.push(new mxPoint(w,$)),$=g.y+g.height+m,b.push(new mxPoint(w,$)),w=C.x+C.width/2,b.push(new mxPoint(w,$)),this.setEdgePoints(E[P],b));x<s/2?m+=this.prefVertEdgeOff:x>s/2&&(m-=this.prefVertEdgeOff),d+=u}}}class mxStackLayout extends mxGraphLayout{constructor(t,e,n,s,l,r){super(t);c(this,"marginTop",0);c(this,"marginLeft",0);c(this,"marginRight",0);c(this,"marginBottom",0);c(this,"keepFirstLocation",!1);c(this,"fill",!1);c(this,"resizeParent",!1);c(this,"resizeParentMax",!1);c(this,"resizeLast",!1);c(this,"wrap",null);c(this,"borderCollapse",!0);c(this,"allowGaps",!1);c(this,"gridSize",0);this.horizontal=e??!0,this.spacing=n??0,this.x0=s??0,this.y0=l??0,this.border=r??0}isHorizontal(){return this.horizontal}moveCell(t,e,n){var s=this.graph.getModel(),l=s.getParent(t),r=this.isHorizontal();if(t!=null&&l!=null){var o=0,h=0,u=s.getChildCount(l),d=r?e:n,m=this.graph.getView().getState(l);for(m!=null&&(d-=r?m.x:m.y),d/=this.graph.view.scale,o=0;o<u;o++){var g=s.getChildAt(l,o);if(g!=t){var x=s.getGeometry(g);if(x!=null){var v=r?x.x+x.width/2:x.y+x.height/2;if(h<=d&&v>d)break;h=v}}}var C=l.getIndex(t);C=Math.max(0,o-(o>C?1:0)),s.add(l,t,C)}}getParentSize(t){var e=this.graph.getModel(),n=e.getGeometry(t);if(this.graph.container!=null&&(n==null&&e.isLayer(t)||t==this.graph.getView().currentRoot)){var s=this.graph.container.offsetWidth-1,l=this.graph.container.offsetHeight-1;n=new mxRectangle(0,0,s,l)}return n}getLayoutCells(t){for(var e=this.graph.getModel(),n=e.getChildCount(t),s=[],l=0;l<n;l++){var r=e.getChildAt(t,l);!this.isVertexIgnored(r)&&this.isVertexMovable(r)&&s.push(r)}return this.allowGaps&&s.sort((o,h)=>{var u=this.graph.getCellGeometry(o),d=this.graph.getCellGeometry(h);return u.y==d.y?0:u.y>d.y>0?1:-1}),s}snap(t){if(this.gridSize!=null&&this.gridSize>0&&(t=Math.max(t,this.gridSize),t/this.gridSize>1)){var e=t%this.gridSize;t+=e>this.gridSize/2?this.gridSize-e:-e}return t}execute(t){if(t!=null){var e=this.getParentSize(t),n=this.isHorizontal(),s=this.graph.getModel(),l=null;e!=null&&(l=n?e.height-this.marginTop-this.marginBottom:e.width-this.marginLeft-this.marginRight),l-=2*this.border;var r=this.x0+this.border+this.marginLeft,o=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(t)){var h=this.graph.getCellStyle(t),u=mxUtils$1.getNumber(h,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE),d=mxUtils$1.getValue(h,mxConstants$1.STYLE_HORIZONTAL,!0)==1;e!=null&&(d?u=Math.min(u,e.height):u=Math.min(u,e.width)),n==d&&(l-=u),d?o+=u:r+=u}s.beginUpdate();try{for(var m=0,g=null,x=0,v=null,C=this.getLayoutCells(t),E=0;E<C.length;E++){var b=C[E],w=s.getGeometry(b);if(w!=null){w=w.clone(),this.wrap!=null&&g!=null&&(n&&g.x+g.width+w.width+2*this.spacing>this.wrap||!n&&g.y+g.height+w.height+2*this.spacing>this.wrap)&&(g=null,n?o+=m+this.spacing:r+=m+this.spacing,m=0),m=Math.max(m,n?w.height:w.width);var $=0;if(!this.borderCollapse){var P=this.graph.getCellStyle(b);$=mxUtils$1.getNumber(P,mxConstants$1.STYLE_STROKEWIDTH,1)}if(g!=null){var M=x+this.spacing+Math.floor($/2);n?w.x=this.snap((this.allowGaps?Math.max(M,w.x):M)-this.marginLeft)+this.marginLeft:w.y=this.snap((this.allowGaps?Math.max(M,w.y):M)-this.marginTop)+this.marginTop}else this.keepFirstLocation||(n?w.x=this.allowGaps&&w.x>r?Math.max(this.snap(w.x-this.marginLeft)+this.marginLeft,r):r:w.y=this.allowGaps&&w.y>o?Math.max(this.snap(w.y-this.marginTop)+this.marginTop,o):o);n?w.y=o:w.x=r,this.fill&&l!=null&&(n?w.height=l:w.width=l),n?w.width=this.snap(w.width):w.height=this.snap(w.height),this.setChildGeometry(b,w),v=b,g=w,n?x=g.x+g.width+Math.floor($/2):x=g.y+g.height+Math.floor($/2)}}this.resizeParent&&e!=null&&g!=null&&!this.graph.isCellCollapsed(t)?this.updateParentGeometry(t,e,g):this.resizeLast&&e!=null&&g!=null&&v!=null&&(n?g.width=e.width-g.x-this.spacing-this.marginRight-this.marginLeft:g.height=e.height-g.y-this.spacing-this.marginBottom,this.setChildGeometry(v,g))}finally{s.endUpdate()}}}setChildGeometry(t,e){var n=this.graph.getCellGeometry(t);(n==null||e.x!=n.x||e.y!=n.y||e.width!=n.width||e.height!=n.height)&&this.graph.getModel().setGeometry(t,e)}updateParentGeometry(t,e,n){var s=this.isHorizontal(),l=this.graph.getModel(),r=e.clone();if(s){var o=n.x+n.width+this.marginRight+this.border;this.resizeParentMax?r.width=Math.max(r.width,o):r.width=o}else{var o=n.y+n.height+this.marginBottom+this.border;this.resizeParentMax?r.height=Math.max(r.height,o):r.height=o}(e.x!=r.x||e.y!=r.y||e.width!=r.width||e.height!=r.height)&&l.setGeometry(t,r)}}class mxCellAttributeChange{constructor(i,t,e){this.cell=i,this.attribute=t,this.value=e,this.previous=e}execute(){if(this.cell!=null){var i=this.cell.getAttribute(this.attribute);this.previous==null?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=i}}}class mxDivResizer{constructor(i,t){c(this,"resizeWidth",!0);c(this,"resizeHeight",!0);c(this,"handlingResize",!1);if(i.nodeName.toLowerCase()=="div"){t==null&&(t=window),this.div=i;var e=mxUtils$1.getCurrentStyle(i);e!=null&&(this.resizeWidth=e.width=="auto",this.resizeHeight=e.height=="auto"),mxEvent$1.addListener(t,"resize",n=>{this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)}),this.resize()}}resize(){var i=this.getDocumentWidth(),t=this.getDocumentHeight(),e=parseInt(this.div.style.left),n=parseInt(this.div.style.right),s=parseInt(this.div.style.top),l=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(e)&&!isNaN(n)&&e>=0&&n>=0&&i-n-e>0&&(this.div.style.width=i-n-e+"px"),this.resizeHeight&&!isNaN(s)&&!isNaN(l)&&s>=0&&l>=0&&t-s-l>0&&(this.div.style.height=t-s-l+"px")}getDocumentWidth(){return document.body.clientWidth}getDocumentHeight(){return document.body.clientHeight}}class mxRubberband{constructor(i){c(this,"defaultOpacity",20);c(this,"enabled",!0);c(this,"div",null);c(this,"sharedDiv",null);c(this,"currentX",0);c(this,"currentY",0);c(this,"fadeOut",!1);i!=null&&(this.graph=i,this.graph.addMouseListener(this),this.forceRubberbandHandler=(t,e)=>{var n=e.getProperty("eventName"),s=e.getProperty("event");if(n==mxEvent$1.MOUSE_DOWN&&this.isForceRubberbandEvent(s)){var l=mxUtils$1.getOffset(this.graph.container),r=mxUtils$1.getScrollOrigin(this.graph.container);r.x-=l.x,r.y-=l.y,this.start(s.getX()+r.x,s.getY()+r.y),s.consume(!1)}},this.graph.addListener(mxEvent$1.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=()=>{this.repaint()},this.graph.addListener(mxEvent$1.PAN,this.panHandler),this.gestureHandler=(t,e)=>{this.first!=null&&this.reset()},this.graph.addListener(mxEvent$1.GESTURE,this.gestureHandler))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}isForceRubberbandEvent(i){return mxEvent$1.isAltDown(i.getEvent())}mouseDown(i,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&t.getState()==null&&!mxEvent$1.isMultiTouchEvent(t.getEvent())){var e=mxUtils$1.getOffset(this.graph.container),n=mxUtils$1.getScrollOrigin(this.graph.container);n.x-=e.x,n.y-=e.y,this.start(t.getX()+n.x,t.getY()+n.y),t.consume(!1)}}start(i,t){this.first=new mxPoint(i,t);var e=this.graph.container;function n(s){var l=new mxMouseEvent(s),r=mxUtils$1.convertPoint(e,l.getX(),l.getY());return l.graphX=r.x,l.graphY=r.y,l}this.dragHandler=s=>{this.mouseMove(this.graph,n(s))},this.dropHandler=s=>{this.mouseUp(this.graph,n(s))},mxClient.IS_FF&&mxEvent$1.addGestureListeners(document,null,this.dragHandler,this.dropHandler)}mouseMove(i,t){if(!t.isConsumed()&&this.first!=null){var e=mxUtils$1.getScrollOrigin(this.graph.container),n=mxUtils$1.getOffset(this.graph.container);e.x-=n.x,e.y-=n.y;var s=t.getX()+e.x,l=t.getY()+e.y,r=this.first.x-s,o=this.first.y-l,h=this.graph.tolerance;(this.div!=null||Math.abs(r)>h||Math.abs(o)>h)&&(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(s,l),t.consume())}}createShape(){this.sharedDiv==null&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils$1.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var i=this.sharedDiv;return mxClient.IS_SVG&&document.documentMode>=10&&this.fadeOut&&(this.sharedDiv=null),i}isActive(i,t){return this.div!=null&&this.div.style.display!="none"}mouseUp(i,t){var e=this.isActive();this.reset(),e&&(this.execute(t.getEvent()),t.consume())}execute(i){var t=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(t,i)}reset(){if(this.div!=null)if(mxClient.IS_SVG&&document.documentMode>=10&&this.fadeOut){var i=this.div;mxUtils$1.setPrefixedStyle(i.style,"transition","all 0.2s linear"),i.style.pointerEvents="none",i.style.opacity=0,window.setTimeout(function(){i.parentNode.removeChild(i)},200)}else this.div.parentNode.removeChild(this.div);mxEvent$1.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null}update(i,t){this.currentX=i,this.currentY=t,this.repaint()}repaint(){if(this.div!=null){var i=this.currentX-this.graph.panDx,t=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,i),this.y=Math.min(this.first.y,t),this.width=Math.max(this.first.x,i)-this.x,this.height=Math.max(this.first.y,t)-this.y;var e=0,n=0;this.div.style.left=this.x+e+"px",this.div.style.top=this.y+n+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}}destroy(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),this.sharedDiv!=null&&(this.sharedDiv=null))}}class mxLayoutManager extends mxEventSource{constructor(t){super();c(this,"graph",null);c(this,"bubbling",!0);c(this,"enabled",!0);this.undoHandler=(e,n)=>{this.isEnabled()&&this.beforeUndo(n.getProperty("edit"))},this.moveHandler=(e,n)=>{this.isEnabled()&&this.cellsMoved(n.getProperty("cells"),n.getProperty("event"))},this.resizeHandler=(e,n)=>{this.isEnabled()&&this.cellsResized(n.getProperty("cells"),n.getProperty("bounds"),n.getProperty("previous"))},this.setGraph(t)}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}isBubbling(){return this.bubbling}setBubbling(t){this.bubbling=t}getGraph(){return this.graph}setGraph(t){if(this.graph!=null){var e=this.graph.getModel();e.removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)}if(this.graph=t,this.graph!=null){var e=this.graph.getModel();e.addListener(mxEvent$1.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent$1.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent$1.RESIZE_CELLS,this.resizeHandler)}}hasLayout(t){return this.getLayout(t,mxEvent$1.LAYOUT_CELLS)}getLayout(t,e){return null}beforeUndo(t){this.executeLayoutForCells(this.getCellsForChanges(t.changes))}cellsMoved(t,e){if(t!=null&&e!=null)for(var n=mxUtils$1.convertPoint(this.getGraph().container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),s=0;s<t.length;s++){var l=this.getAncestorLayout(t[s],mxEvent$1.MOVE_CELLS);l!=null&&l.moveCell(t[s],n.x,n.y)}}cellsResized(t,e,n){if(t!=null&&e!=null)for(var s=0;s<t.length;s++){var l=this.getAncestorLayout(t[s],mxEvent$1.RESIZE_CELLS);l!=null&&l.resizeCell(t[s],e[s],n[s])}}getAncestorLayout(t,e){for(var n=this.getGraph().getModel();t!=null;){var s=this.getLayout(t,e);if(s!=null)return s;t=n.getParent(t)}return null}getCellsForChanges(t){for(var e=[],n=0;n<t.length;n++){var s=t[n];if(s instanceof mxRootChange)return[];e=e.concat(this.getCellsForChange(s))}return e}getCellsForChange(t){return t instanceof mxChildChange?this.addCellsWithLayout(t.child,this.addCellsWithLayout(t.previous)):t instanceof mxTerminalChange||t instanceof mxGeometryChange?this.addCellsWithLayout(t.cell):t instanceof mxVisibleChange||t instanceof mxStyleChange?this.addCellsWithLayout(t.cell):[]}addCellsWithLayout(t,e){return this.addDescendantsWithLayout(t,this.addAncestorsWithLayout(t,e))}addAncestorsWithLayout(t,e){if(e=e??[],t!=null){var n=this.hasLayout(t);if(n!=null&&e.push(t),this.isBubbling()){var s=this.getGraph().getModel();this.addAncestorsWithLayout(s.getParent(t),e)}}return e}addDescendantsWithLayout(t,e){if(e=e??[],t!=null&&this.hasLayout(t))for(var n=this.getGraph().getModel(),s=0;s<n.getChildCount(t);s++){var l=n.getChildAt(t,s);this.hasLayout(l)&&(e.push(l),this.addDescendantsWithLayout(l,e))}return e}executeLayoutForCells(t){var e=mxUtils$1.sortCells(t,!1);this.layoutCells(e,!0),this.layoutCells(e.reverse(),!1)}layoutCells(t,e){if(t.length>0){var n=this.getGraph().getModel();n.beginUpdate();try{for(var s=null,l=0;l<t.length;l++)t[l]!=n.getRoot()&&t[l]!=s&&(this.executeLayout(t[l],e),s=t[l]);this.fireEvent(new mxEventObject$1(mxEvent$1.LAYOUT_CELLS,"cells",t))}finally{n.endUpdate()}}}executeLayout(t,e){var n=this.getLayout(t,e?mxEvent$1.BEGIN_UPDATE:mxEvent$1.END_UPDATE);n!=null&&n.execute(t)}destroy(){this.setGraph(null)}}class mxSwimlaneManager extends mxEventSource{constructor(t,e,n,s){super();c(this,"graph",null);c(this,"enabled",!0);this.horizontal=e??!0,this.addEnabled=n??!0,this.resizeEnabled=s??!0,this.addHandler=(l,r)=>{this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(r.getProperty("cells"))},this.resizeHandler=(l,r)=>{this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(r.getProperty("cells"))},this.setGraph(t)}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}isHorizontal(){return this.horizontal}setHorizontal(t){this.horizontal=t}isAddEnabled(){return this.addEnabled}setAddEnabled(t){this.addEnabled=t}isResizeEnabled(){return this.resizeEnabled}setResizeEnabled(t){this.resizeEnabled=t}getGraph(){return this.graph}setGraph(t){this.graph!=null&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,this.graph!=null&&(this.graph.addListener(mxEvent$1.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent$1.CELLS_RESIZED,this.resizeHandler))}isSwimlaneIgnored(t){return!this.getGraph().isSwimlane(t)}isCellHorizontal(t){if(this.graph.isSwimlane(t)){var e=this.graph.getCellStyle(t);return mxUtils$1.getValue(e,mxConstants$1.STYLE_HORIZONTAL,1)==1}return!this.isHorizontal()}cellsAdded(t){if(t!=null){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)this.isSwimlaneIgnored(t[n])||this.swimlaneAdded(t[n])}finally{e.endUpdate()}}}swimlaneAdded(t){for(var e=this.getGraph().getModel(),n=e.getParent(t),s=e.getChildCount(n),l=null,r=0;r<s;r++){var o=e.getChildAt(n,r);if(o!=t&&!this.isSwimlaneIgnored(o)&&(l=e.getGeometry(o),l!=null))break}if(l!=null){var h=n!=null?this.isCellHorizontal(n):this.horizontal;this.resizeSwimlane(t,l.width,l.height,h)}}cellsResized(t){if(t!=null){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)if(!this.isSwimlaneIgnored(t[n])){var s=e.getGeometry(t[n]);if(s!=null){for(var l=new mxRectangle(0,0,s.width,s.height),r=t[n],o=r;o!=null;){r=o,o=e.getParent(o);var h=this.graph.isSwimlane(o)?this.graph.getStartSize(o):new mxRectangle;l.width+=h.width,l.height+=h.height}var u=o!=null?this.isCellHorizontal(o):this.horizontal;this.resizeSwimlane(r,l.width,l.height,u)}}}finally{e.endUpdate()}}}resizeSwimlane(t,e,n,s){var l=this.getGraph().getModel();l.beginUpdate();try{var r=this.isCellHorizontal(t);if(!this.isSwimlaneIgnored(t)){var o=l.getGeometry(t);o!=null&&(s&&o.height!=n||!s&&o.width!=e)&&(o=o.clone(),s?o.height=n:o.width=e,l.setGeometry(t,o))}var h=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle;e-=h.width,n-=h.height;for(var u=l.getChildCount(t),d=0;d<u;d++){var m=l.getChildAt(t,d);this.resizeSwimlane(m,e,n,r)}}finally{l.endUpdate()}}destroy(){this.setGraph(null)}}const me=class me{static setCells(i){me.cells=i}static getCells(){return me.cells}static isEmpty(){return me.getCells()==null}static cut(i,t){return t=me.copy(i,t),me.insertCount=0,me.removeCells(i,t),t}static removeCells(i,t){i.removeCells(t)}static copy(i,t){t=t||i.getSelectionCells();var e=i.getExportableCells(i.model.getTopmostCells(t));return me.insertCount=1,me.setCells(i.cloneCells(e)),e}static paste(i){var t=null;if(!me.isEmpty()){t=i.getImportableCells(me.getCells());var e=me.insertCount*me.STEPSIZE,n=i.getDefaultParent();t=i.importCells(t,e,e,n),me.insertCount++,i.setSelectionCells(t)}return t}};c(me,"STEPSIZE",10),c(me,"insertCount",1),c(me,"cells",null);let mxClipboard=me;class mxPrintPreview{constructor(i,t,e,n,s,l,r,o,h){c(this,"marginTop",0);c(this,"marginBottom",0);c(this,"autoOrigin",!0);c(this,"printOverlays",!1);c(this,"printControls",!1);c(this,"printBackgroundImage",!1);c(this,"backgroundColor","#ffffff");c(this,"wnd",null);c(this,"targetWindow",null);c(this,"pageCount",0);c(this,"clipping",!0);this.graph=i,this.scale=t??1/i.pageScale,this.border=n??0,this.pageFormat=mxRectangle.fromRectangle(e??i.pageFormat),this.title=o??"Printer-friendly version",this.x0=s??0,this.y0=l??0,this.borderColor=r,this.pageSelector=h??!0}getWindow(){return this.wnd}getDoctype(){var i="";return document.documentMode==5?i='<meta http-equiv="X-UA-Compatible" content="IE=5">':document.documentMode==8?i='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(i='<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->'),i}appendGraph(i,t,e,n,s,l){this.graph=i,this.scale=t??1/i.pageScale,this.x0=e,this.y0=n,this.open(null,null,s,l)}open(i,t,e,n){var s=this.graph.cellRenderer.initializeOverlay,l=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(X,rt){rt.init(X.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(X,rt,et,Y){rt.dialect=X.view.graph.dialect,rt.init(X.view.getDrawPane())}),this.wnd=t??this.wnd;var r=!1;this.wnd==null&&(r=!0,this.wnd=window.open());var o=this.wnd.document;if(r){var h=this.getDoctype();h!=null&&h.length>0&&o.writeln(h),document.compatMode==="CSS1Compat"&&o.writeln("<!DOCTYPE html>"),o.writeln("<html>"),o.writeln("<head>"),this.writeHead(o,i),o.writeln("</head>"),o.writeln('<body class="mxPage">')}var u=this.graph.getGraphBounds().clone(),d=this.graph.getView().getScale(),m=d/this.scale,g=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=g.x*this.scale,this.y0-=g.y*this.scale,u.width+=u.x,u.height+=u.y,u.x=0,u.y=0,this.border=0);var x=this.pageFormat.width-this.border*2,v=this.pageFormat.height-this.border*2;this.pageFormat.height+=this.marginTop+this.marginBottom,u.width/=m,u.height/=m;var C=Math.max(1,Math.ceil((u.width+this.x0)/x)),E=Math.max(1,Math.ceil((u.height+this.y0)/v));this.pageCount=C*E;var b=()=>{if(this.pageSelector&&(E>1||C>1)){var X=this.createPageSelector(E,C);o.body.appendChild(X)}},w=(X,rt)=>{if(this.borderColor!=null&&(X.style.borderColor=this.borderColor,X.style.borderStyle="solid",X.style.borderWidth="1px"),X.style.background=this.backgroundColor,(e||rt)&&(X.style.pageBreakAfter="always"),r&&(document.documentMode>=11||mxClient.IS_EDGE))o.writeln(X.outerHTML),X.parentNode.removeChild(X);else if(document.documentMode>=11||mxClient.IS_EDGE){var et=o.createElement("div");et.innerHTML=X.outerHTML,et=et.getElementsByTagName("div")[0],o.body.appendChild(et),X.parentNode.removeChild(X)}else X.parentNode.removeChild(X),o.body.appendChild(X);(e||rt)&&this.addPageBreak(o)},$=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if($!=null)for(var P=0;P<$.length;P++)w($[P],!0);for(var M=this.getAppendices(this.pageFormat.width,this.pageFormat.height),P=0;P<E;P++)for(var D=P*v/this.scale-this.y0/this.scale+(u.y-g.y*d)/d,k=0;k<C;k++){if(this.wnd==null)return null;var Z=k*x/this.scale-this.x0/this.scale+(u.x-g.x*d)/d,q=P*C+k+1,j=new mxRectangle(Z,D,x,v);l=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,rt=>{this.addGraphFragment(-Z,-D,this.scale,q,rt,j),this.printBackgroundImage&&this.insertBackgroundImage(rt,-Z,-D)},q),l.setAttribute("id","mxPage-"+q),w(l,M!=null||P<E-1||k<C-1)}if(M!=null)for(var P=0;P<M.length;P++)w(M[P],P<M.length-1);r&&!n&&(this.closeDocument(),b()),this.wnd.focus()}catch{l!=null&&l.parentNode!=null&&l.parentNode.removeChild(l)}finally{this.graph.cellRenderer.initializeOverlay=s}return this.wnd}addPageBreak(i){var t=i.createElement("hr");t.className="mxPageBreak",i.body.appendChild(t)}closeDocument(){try{if(this.wnd!=null&&this.wnd.document!=null){var i=this.wnd.document;this.writePostfix(i),i.writeln("</body>"),i.writeln("</html>"),i.close(),mxEvent$1.release(i.body)}}catch{}}writeHead(i,t){this.title!=null&&i.writeln("<title>"+this.title+"</title>"),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",i),i.writeln('<style type="text/css">'),i.writeln("@media print {"),i.writeln("  * { -webkit-print-color-adjust: exact; }"),i.writeln("  table.mxPageSelector { display: none; }"),i.writeln("  hr.mxPageBreak { display: none; }"),i.writeln("}"),i.writeln("@media screen {"),i.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),i.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),i.writeln("  body.mxPage { background: gray; }"),i.writeln("}"),t!=null&&i.writeln(t),i.writeln("</style>")}writePostfix(i){}createPageSelector(i,t){var e=this.wnd.document,n=e.createElement("table");n.className="mxPageSelector",n.setAttribute("border","0");for(var s=e.createElement("tbody"),l=0;l<i;l++){for(var r=e.createElement("tr"),o=0;o<t;o++){var h=l*t+o+1,u=e.createElement("td"),d=e.createElement("a");if(d.setAttribute("href","#mxPage-"+h),mxClient.IS_NS&&!mxClient.IS_SF&&!mxClient.IS_GC){var m="var page = document.getElementById('mxPage-"+h+"');page.scrollIntoView(true);event.preventDefault();";d.setAttribute("onclick",m)}mxUtils$1.write(d,h,e),u.appendChild(d),r.appendChild(u)}s.appendChild(r)}return n.appendChild(s),n}renderPage(i,t,e,n,s,l){var r=this.wnd.document,o=document.createElement("div"),h=null;try{if(e!=0||n!=0){o.style.position="relative",o.style.width=i+"px",o.style.height=t+"px",o.style.pageBreakInside="avoid";var u=document.createElement("div");u.style.position="relative",u.style.top=this.border+"px",u.style.left=this.border+"px",u.style.width=i-2*this.border+"px",u.style.height=t-2*this.border+"px",u.style.overflow="hidden";var d=document.createElement("div");d.style.position="relative",d.style.marginLeft=e+"px",d.style.marginTop=n+"px",r.documentMode==8&&(u.style.position="absolute",d.style.position="absolute"),r.documentMode==10&&(d.style.width="100%",d.style.height="100%"),u.appendChild(d),o.appendChild(u),document.body.appendChild(o),h=d}else{o.style.width=i+"px",o.style.height=t+"px",o.style.overflow="hidden",o.style.pageBreakInside="avoid",r.documentMode==8&&(o.style.position="relative");var u=document.createElement("div");u.style.width=i-2*this.border+"px",u.style.height=t-2*this.border+"px",u.style.overflow="hidden",u.style.top=this.border+"px",u.style.left=this.border+"px",this.graph.dialect==mxConstants$1.DIALECT_VML&&(u.style.position="absolute"),o.appendChild(u),document.body.appendChild(o),h=u}}catch(m){throw o.parentNode.removeChild(o),o=null,m}return s(h),o}getRoot(){var i=this.graph.view.currentRoot;return i==null&&(i=this.graph.getModel().getRoot()),i}addGraphFragment(i,t,e,n,s,l){var r=this.graph.getView(),o=this.graph.container;this.graph.container=s;var h=r.getCanvas(),u=r.getBackgroundPane(),d=r.getDrawPane(),m=r.getOverlayPane(),g=e;if(this.graph.dialect==mxConstants$1.DIALECT_SVG){if(r.createSvg(),!mxClient.NO_FO){var x=r.getDrawPane().parentNode;x.getAttribute("transform"),x.setAttribute("transformOrigin","0 0"),x.setAttribute("transform","scale("+e+","+e+")translate("+i+","+t+")"),e=1,i=0,t=0}}else this.graph.dialect==mxConstants$1.DIALECT_VML?r.createVml():r.createHtml();var v=r.isEventsEnabled();r.setEventsEnabled(!1);var C=this.graph.isEnabled();this.graph.setEnabled(!1);var E=r.getTranslate();r.translate=new mxPoint(i,t);var b=this.graph.cellRenderer.redraw,w=r.states,$=r.scale;if(this.clipping){var P=new mxRectangle((l.x+E.x)*$,(l.y+E.y)*$,l.width*$/g,l.height*$/g);this.graph.cellRenderer.redraw=function(X,rt,et){if(X!=null){var Y=w.get(X.cell);if(Y!=null){var G=r.getBoundingBox(Y,!1);if(G!=null&&G.width>0&&G.height>0&&!mxUtils$1.intersects(P,G))return}}b.apply(this,arguments)}}var M=null;try{var D=[this.getRoot()];M=new mxTemporaryCellStates(r,e,D,null,X=>this.getLinkForCellState(X))}finally{for(var k=s.firstChild;k!=null;){var Z=k.nextSibling,q=k.nodeName.toLowerCase();q=="svg"?(k.style.overflow="hidden",k.style.position="relative",k.style.top=this.marginTop+"px",k.setAttribute("width",l.width),k.setAttribute("height",l.height),k.style.width="",k.style.height=""):k.style.cursor!="default"&&q!="div"&&k.parentNode.removeChild(k),k=Z}if(this.printBackgroundImage){var j=s.getElementsByTagName("svg");j.length>0&&(j[0].style.position="absolute")}r.overlayPane.parentNode.removeChild(r.overlayPane),this.graph.setEnabled(C),this.graph.container=o,this.graph.cellRenderer.redraw=b,r.canvas=h,r.backgroundPane=u,r.drawPane=d,r.overlayPane=m,r.translate=E,M.destroy(),r.setEventsEnabled(v)}}getLinkForCellState(i){return this.graph.getLinkForCell(i.cell)}insertBackgroundImage(i,t,e){var n=this.graph.backgroundImage;if(n!=null){var s=document.createElement("img");s.style.position="absolute",s.style.marginLeft=Math.round(t*this.scale)+"px",s.style.marginTop=Math.round(e*this.scale)+"px",s.setAttribute("width",Math.round(this.scale*n.width)),s.setAttribute("height",Math.round(this.scale*n.height)),s.src=n.src,i.insertBefore(s,i.firstChild)}}getCoverPages(){return null}getAppendices(){return null}print(i){var t=this.open(i);t!=null&&t.print()}close(){this.wnd!=null&&(this.wnd.close(),this.wnd=null)}}class mxUndoManager extends mxEventSource{constructor(t){super();c(this,"history",null);c(this,"indexOfNextAdd",0);this.size=t??100,this.clear()}isEmpty(){return this.history.length==0}clear(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject$1(mxEvent$1.CLEAR))}canUndo(){return this.indexOfNextAdd>0}undo(){for(;this.indexOfNextAdd>0;){var t=this.history[--this.indexOfNextAdd];if(t.undo(),t.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.UNDO,"edit",t));break}}}canRedo(){return this.indexOfNextAdd<this.history.length}redo(){for(var t=this.history.length;this.indexOfNextAdd<t;){var e=this.history[this.indexOfNextAdd++];if(e.redo(),e.isSignificant()){this.fireEvent(new mxEventObject$1(mxEvent$1.REDO,"edit",e));break}}}undoableEditHappened(t){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(t),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject$1(mxEvent$1.ADD,"edit",t))}trim(){if(this.history.length>this.indexOfNextAdd)for(var t=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),e=0;e<t.length;e++)t[e].die()}}class mxEditor extends mxEventSource{constructor(t){super();c(this,"askZoomResource",mxClient.language!="none"?"askZoom":"");c(this,"lastSavedResource",mxClient.language!="none"?"lastSaved":"");c(this,"currentFileResource",mxClient.language!="none"?"currentFile":"");c(this,"propertiesResource",mxClient.language!="none"?"properties":"");c(this,"tasksResource",mxClient.language!="none"?"tasks":"");c(this,"helpResource",mxClient.language!="none"?"help":"");c(this,"outlineResource",mxClient.language!="none"?"outline":"");c(this,"outline",null);c(this,"graph",null);c(this,"graphRenderHint",null);c(this,"toolbar",null);c(this,"status",null);c(this,"popupHandler",null);c(this,"undoManager",null);c(this,"keyHandler",null);c(this,"dblClickAction","edit");c(this,"swimlaneRequired",!1);c(this,"disableContextMenu",!0);c(this,"insertFunction",null);c(this,"forcedInserting",!1);c(this,"templates",null);c(this,"defaultEdge",null);c(this,"defaultEdgeStyle",null);c(this,"defaultGroup",null);c(this,"groupBorderSize",null);c(this,"filename",null);c(this,"linefeed","&#xa;");c(this,"postParameterName","xml");c(this,"escapePostData",!0);c(this,"urlPost",null);c(this,"urlImage",null);c(this,"horizontalFlow",!1);c(this,"layoutDiagram",!1);c(this,"swimlaneSpacing",0);c(this,"maintainSwimlanes",!1);c(this,"layoutSwimlanes",!1);c(this,"cycleAttributeValues",null);c(this,"cycleAttributeIndex",0);c(this,"cycleAttributeName","fillColor");c(this,"tasks",null);c(this,"tasksWindowImage",null);c(this,"tasksTop",20);c(this,"help",null);c(this,"helpWindowImage",null);c(this,"urlHelp",null);c(this,"helpWidth",300);c(this,"helpHeight",260);c(this,"propertiesWidth",240);c(this,"propertiesHeight",null);c(this,"movePropertiesDialog",!1);c(this,"validating",!1);c(this,"modified",!1);this.actions=[],this.addActions(),document.body!=null&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(t),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,this.onInit!=null&&this.onInit())}isModified(){return this.modified}setModified(t){this.modified=t}addActions(){this.addAction("save",function(t){t.save()}),this.addAction("print",function(t){var e=new mxPrintPreview(t.graph,1);e.open()}),this.addAction("show",function(t){mxUtils$1.show(t.graph,null,10,10)}),this.addAction("exportImage",function(t){var e=t.getUrlImage();if(e==null||mxClient.IS_LOCAL)t.execute("show");else{var n=mxUtils$1.getViewXml(t.graph,1),s=mxUtils$1.getXml(n,`
`);mxUtils$1.submit(e,t.postParameterName+"="+encodeURIComponent(s),document,"_blank")}}),this.addAction("refresh",function(t){t.graph.refresh()}),this.addAction("cut",function(t){t.graph.isEnabled()&&mxClipboard.cut(t.graph)}),this.addAction("copy",function(t){t.graph.isEnabled()&&mxClipboard.copy(t.graph)}),this.addAction("paste",function(t){t.graph.isEnabled()&&mxClipboard.paste(t.graph)}),this.addAction("delete",function(t){t.graph.isEnabled()&&t.graph.removeCells()}),this.addAction("group",function(t){t.graph.isEnabled()&&t.graph.setSelectionCell(t.groupCells())}),this.addAction("ungroup",function(t){t.graph.isEnabled()&&t.graph.setSelectionCells(t.graph.ungroupCells())}),this.addAction("removeFromParent",function(t){t.graph.isEnabled()&&t.graph.removeCellsFromParent()}),this.addAction("undo",function(t){t.graph.isEnabled()&&t.undo()}),this.addAction("redo",function(t){t.graph.isEnabled()&&t.redo()}),this.addAction("zoomIn",function(t){t.graph.zoomIn()}),this.addAction("zoomOut",function(t){t.graph.zoomOut()}),this.addAction("actualSize",function(t){t.graph.zoomActual()}),this.addAction("fit",function(t){t.graph.fit()}),this.addAction("showProperties",function(t,e){t.showProperties(e)}),this.addAction("selectAll",function(t){t.graph.isEnabled()&&t.graph.selectAll()}),this.addAction("selectNone",function(t){t.graph.isEnabled()&&t.graph.clearSelection()}),this.addAction("selectVertices",function(t){t.graph.isEnabled()&&t.graph.selectVertices()}),this.addAction("selectEdges",function(t){t.graph.isEnabled()&&t.graph.selectEdges()}),this.addAction("edit",function(t,e){t.graph.isEnabled()&&t.graph.isCellEditable(e)&&t.graph.startEditingAtCell(e)}),this.addAction("toBack",function(t,e){t.graph.isEnabled()&&t.graph.orderCells(!0)}),this.addAction("toFront",function(t,e){t.graph.isEnabled()&&t.graph.orderCells(!1)}),this.addAction("enterGroup",function(t,e){t.graph.enterGroup(e)}),this.addAction("exitGroup",function(t){t.graph.exitGroup()}),this.addAction("home",function(t){t.graph.home()}),this.addAction("selectPrevious",function(t){t.graph.isEnabled()&&t.graph.selectPreviousCell()}),this.addAction("selectNext",function(t){t.graph.isEnabled()&&t.graph.selectNextCell()}),this.addAction("selectParent",function(t){t.graph.isEnabled()&&t.graph.selectParentCell()}),this.addAction("selectChild",function(t){t.graph.isEnabled()&&t.graph.selectChildCell()}),this.addAction("collapse",function(t){t.graph.isEnabled()&&t.graph.foldCells(!0)}),this.addAction("collapseAll",function(t){if(t.graph.isEnabled()){var e=t.graph.getChildVertices();t.graph.foldCells(!0,!1,e)}}),this.addAction("expand",function(t){t.graph.isEnabled()&&t.graph.foldCells(!1)}),this.addAction("expandAll",function(t){if(t.graph.isEnabled()){var e=t.graph.getChildVertices();t.graph.foldCells(!1,!1,e)}}),this.addAction("bold",function(t){t.graph.isEnabled()&&t.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_BOLD)}),this.addAction("italic",function(t){t.graph.isEnabled()&&t.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_ITALIC)}),this.addAction("underline",function(t){t.graph.isEnabled()&&t.graph.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,mxConstants$1.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(t){t.graph.isEnabled()&&t.graph.alignCells(mxConstants$1.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(t){t.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(t){t.graph.isEnabled()&&t.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER)}),this.addAction("alignFontRight",function(t){t.graph.isEnabled()&&t.graph.setCellStyles(mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(t){t.graph.isEnabled()&&t.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(t){t.graph.isEnabled()&&t.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(t){t.graph.isEnabled()&&t.graph.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_BOTTOM)}),this.addAction("zoom",function(t){var e=t.graph.getView().scale*100,n=parseFloat(mxUtils$1.prompt(mxResources$1.get(t.askZoomResource)||t.askZoomResource,e))/100;isNaN(n)||t.graph.getView().setScale(n)}),this.addAction("toggleTasks",function(t){t.tasks!=null?t.tasks.setVisible(!t.tasks.isVisible()):t.showTasks()}),this.addAction("toggleHelp",function(t){t.help!=null?t.help.setVisible(!t.help.isVisible()):t.showHelp()}),this.addAction("toggleOutline",function(t){t.outline==null?t.showOutline():t.outline.setVisible(!t.outline.isVisible())}),this.addAction("toggleConsole",function(t){mxLog.setVisible(!mxLog.isVisible())})}configure(t){if(t!=null){var e=new mxCodec(t.ownerDocument);e.decode(t,this),this.resetHistory()}}resetFirstTime(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"}resetHistory(){this.lastSnapshot=new Date().getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)}addAction(t,e){this.actions[t]=e}execute(t,e,n){var s=this.actions[t];if(s!=null)try{var l=arguments;l[0]=this,s.apply(this,l)}catch(r){throw mxUtils$1.error("Cannot execute "+t+": "+r.message,280,!0),r}else mxUtils$1.error("Cannot find action "+t,280,!0)}addTemplate(t,e){this.templates[t]=e}getTemplate(t){return this.templates[t]}createGraph(){var t=new mxGraph(null,null,this.graphRenderHint);return t.setTooltips(!0),t.setPanning(!0),this.installDblClickHandler(t),this.installUndoHandler(t),this.installDrillHandler(t),this.installChangeHandler(t),this.installInsertHandler(t),t.popupMenuHandler.factoryMethod=(e,n,s)=>this.createPopupMenu(e,n,s),t.connectionHandler.factoryMethod=(e,n)=>this.createEdge(e,n),this.createSwimlaneManager(t),this.createLayoutManager(t),t}createSwimlaneManager(t){var e=new mxSwimlaneManager(t,!1);return e.isHorizontal=()=>this.horizontalFlow,e.isEnabled=()=>this.maintainSwimlanes,e}createLayoutManager(t){var e=new mxLayoutManager(t),n=this;return e.getLayout=function(s){var l=null,r=n.graph.getModel();return r.getParent(s)!=null&&(n.layoutSwimlanes&&t.isSwimlane(s)?(n.swimlaneLayout==null&&(n.swimlaneLayout=n.createSwimlaneLayout()),l=n.swimlaneLayout):n.layoutDiagram&&(t.isValidRoot(s)||r.getParent(r.getParent(s))==null)&&(n.diagramLayout==null&&(n.diagramLayout=n.createDiagramLayout()),l=n.diagramLayout)),l},e}setGraphContainer(t){this.graph.container==null&&(this.graph.init(t),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent$1.disableContextMenu(t),mxClient.IS_QUIRKS&&new mxDivResizer(t))}installDblClickHandler(t){t.addListener(mxEvent$1.DOUBLE_CLICK,(e,n)=>{var s=n.getProperty("cell");s!=null&&t.isEnabled()&&this.dblClickAction!=null&&(this.execute(this.dblClickAction,s),n.consume())})}installUndoHandler(t){var e=(s,l)=>{var r=l.getProperty("edit");this.undoManager.undoableEditHappened(r)};t.getModel().addListener(mxEvent$1.UNDO,e),t.getView().addListener(mxEvent$1.UNDO,e);var n=function(s,l){var r=l.getProperty("edit").changes;t.setSelectionCells(t.getSelectionCellsForChanges(r))};this.undoManager.addListener(mxEvent$1.UNDO,n),this.undoManager.addListener(mxEvent$1.REDO,n)}installDrillHandler(t){var e=n=>{this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT))};t.getView().addListener(mxEvent$1.DOWN,e),t.getView().addListener(mxEvent$1.UP,e)}installChangeHandler(t){var e=(n,s)=>{this.setModified(!0),this.validating==!0&&t.validateGraph();for(var l=s.getProperty("edit").changes,r=0;r<l.length;r++){var o=l[r];if(o instanceof mxRootChange||o instanceof mxValueChange&&o.cell==this.graph.model.root||o instanceof mxCellAttributeChange&&o.cell==this.graph.model.root){this.fireEvent(new mxEventObject$1(mxEvent$1.ROOT));break}}};t.getModel().addListener(mxEvent$1.CHANGE,e)}installInsertHandler(t){var e=this,n={mouseDown:function(s,l){e.insertFunction!=null&&!l.isPopupTrigger()&&(e.forcedInserting||l.getState()==null)&&(e.graph.clearSelection(),e.insertFunction(l.getEvent(),l.getCell()),this.isActive=!0,l.consume())},mouseMove:function(s,l){this.isActive&&l.consume()},mouseUp:function(s,l){this.isActive&&(this.isActive=!1,l.consume())}};t.addMouseListener(n)}createDiagramLayout(){var t=this.graph.gridSize,e=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*t,2*t);return e.isVertexIgnored=function(n){return!e.graph.isSwimlane(n)},e}createSwimlaneLayout(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)}createToolbar(){return new mxDefaultToolbar(null,this)}setToolbarContainer(t){this.toolbar.init(t),mxClient.IS_QUIRKS&&new mxDivResizer(t)}setStatusContainer(t){this.status==null&&(this.status=t,this.addListener(mxEvent$1.SAVE,()=>{var e=new Date().toLocaleString();this.setStatus((mxResources$1.get(this.lastSavedResource)||this.lastSavedResource)+": "+e)}),this.addListener(mxEvent$1.OPEN,()=>{this.setStatus((mxResources$1.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)}),mxClient.IS_QUIRKS&&new mxDivResizer(t))}setStatus(t){this.status!=null&&t!=null&&(this.status.innerHTML=t)}setTitleContainer(t){this.addListener(mxEvent$1.ROOT,e=>{t.innerHTML=this.getTitle()}),mxClient.IS_QUIRKS&&new mxDivResizer(t)}treeLayout(t,e){if(t!=null){var n=new mxCompactTreeLayout(this.graph,e);n.execute(t)}}getTitle(){for(var t="",e=this.graph,n=e.getCurrentRoot();n!=null&&e.getModel().getParent(e.getModel().getParent(n))!=null;)e.isValidRoot(n)&&(t=" > "+e.convertValueToString(n)+t),n=e.getModel().getParent(n);var s=this.getRootTitle();return s+t}getRootTitle(){var t=this.graph.getModel().getRoot();return this.graph.convertValueToString(t)}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}groupCells(){var t=this.groupBorderSize!=null?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),t)}createGroup(){var t=this.graph.getModel();return t.cloneCell(this.defaultGroup)}open(t){if(t!=null){var e=mxUtils$1.load(t).getXml();this.readGraphModel(e.documentElement),this.filename=t,this.fireEvent(new mxEventObject$1(mxEvent$1.OPEN,"filename",t))}}readGraphModel(t){var e=new mxCodec(t.ownerDocument);e.decode(t,this.graph.getModel()),this.resetHistory()}save(t,e){if(t=t||this.getUrlPost(),t!=null&&t.length>0){var n=this.writeGraphModel(e);this.postDiagram(t,n),this.setModified(!1)}this.fireEvent(new mxEventObject$1(mxEvent$1.SAVE,"url",t))}postDiagram(t,e){this.escapePostData&&(e=encodeURIComponent(e)),mxUtils$1.post(t,this.postParameterName+"="+e,n=>{this.fireEvent(new mxEventObject$1(mxEvent$1.POST,"request",n,"url",t,"data",e))})}writeGraphModel(t){t=t??this.linefeed;var e=new mxCodec,n=e.encode(this.graph.getModel());return mxUtils$1.getXml(n,t)}getUrlPost(){return this.urlPost}getUrlImage(){return this.urlImage}swapStyles(t,e){var n=this.graph.getStylesheet().styles[e];this.graph.getView().getStylesheet().putCellStyle(e,this.graph.getStylesheet().styles[t]),this.graph.getStylesheet().putCellStyle(t,n),this.graph.refresh()}showProperties(t){if(t=t||this.graph.getSelectionCell(),t==null&&(t=this.graph.getCurrentRoot(),t==null&&(t=this.graph.getModel().getRoot())),t!=null){this.graph.stopEditing(!0);var e=mxUtils$1.getOffset(this.graph.container),n=e.x+10,s=e.y;if(this.properties!=null&&!this.movePropertiesDialog)n=this.properties.getX(),s=this.properties.getY();else{var l=this.graph.getCellBounds(t);l!=null&&(n+=l.x+Math.min(200,l.width),s+=l.y)}this.hideProperties();var r=this.createProperties(t);r!=null&&(this.properties=new mxWindow(mxResources$1.get(this.propertiesResource)||this.propertiesResource,r,n,s,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}}isPropertiesVisible(){return this.properties!=null}createProperties(t){var e=this.graph.getModel(),n=e.getValue(t);if(mxUtils$1.isNode(n)){var s=new mxForm("properties"),l=s.addText("ID",t.getId());l.setAttribute("readonly","true");var r=null,o=null,h=null,u=null,d=null;e.isVertex(t)&&(r=e.getGeometry(t),r!=null&&(o=s.addText("top",r.y),h=s.addText("left",r.x),u=s.addText("width",r.width),d=s.addText("height",r.height)));for(var m=e.getStyle(t),g=s.addText("Style",m||""),x=n.attributes,v=[],C=0;C<x.length;C++){var E=x[C].value;v[C]=s.addTextarea(x[C].nodeName,E,x[C].nodeName=="label"?4:2)}var b=()=>{this.hideProperties(),e.beginUpdate();try{r!=null&&(r=r.clone(),r.x=parseFloat(h.value),r.y=parseFloat(o.value),r.width=parseFloat(u.value),r.height=parseFloat(d.value),e.setGeometry(t,r)),g.value.length>0?e.setStyle(t,g.value):e.setStyle(t,null);for(var $=0;$<x.length;$++){var P=new mxCellAttributeChange(t,x[$].nodeName,v[$].value);e.execute(P)}this.graph.isAutoSizeCell(t)&&this.graph.updateCellSize(t)}finally{e.endUpdate()}},w=()=>{this.hideProperties()};return s.addButtons(b,w),s.table}return null}hideProperties(){this.properties!=null&&(this.properties.destroy(),this.properties=null)}showTasks(){if(this.tasks==null){var t=document.createElement("div");t.style.padding="4px",t.style.paddingLeft="20px";var e=document.body.clientWidth,n=new mxWindow(mxResources$1.get(this.tasksResource)||this.tasksResource,t,e-220,this.tasksTop,200);n.setClosable(!0),n.destroyOnClose=!1;var s=l=>{mxEvent$1.release(t),t.innerHTML="",this.createTasks(t)};this.graph.getModel().addListener(mxEvent$1.CHANGE,s),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,s),this.graph.addListener(mxEvent$1.ROOT,s),this.tasksWindowImage!=null&&n.setImage(this.tasksWindowImage),this.tasks=n,this.createTasks(t)}this.tasks.setVisible(!0)}refreshTasks(t){if(this.tasks!=null){var t=this.tasks.content;mxEvent$1.release(t),t.innerHTML="",this.createTasks(t)}}createTasks(t){}showHelp(t){if(this.help==null){var e=document.createElement("iframe");e.setAttribute("src",mxResources$1.get("urlHelp")||this.urlHelp),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("frameBorder","0"),e.style.backgroundColor="white";var n=document.body.clientWidth,s=document.body.clientHeight||document.documentElement.clientHeight,l=new mxWindow(mxResources$1.get(this.helpResource)||this.helpResource,e,(n-this.helpWidth)/2,(s-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(l.setMaximizable(!0),l.setClosable(!0),l.destroyOnClose=!1,l.setResizable(!0),this.helpWindowImage!=null&&l.setImage(this.helpWindowImage),mxClient.IS_NS){var r=function(o){var h=l.div.offsetHeight;e.setAttribute("height",h-26+"px")};l.addListener(mxEvent$1.RESIZE_END,r),l.addListener(mxEvent$1.MAXIMIZE,r),l.addListener(mxEvent$1.NORMALIZE,r),l.addListener(mxEvent$1.SHOW,r)}this.help=l}this.help.setVisible(!0)}showOutline(){var t=this.outline==null;if(t){var e=document.createElement("div");e.style.overflow="hidden",e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.background="white",e.style.cursor="move",document.documentMode==8&&(e.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var n=new mxWindow(mxResources$1.get(this.outlineResource)||this.outlineResource,e,600,480,200,200,!1),s=new mxOutline(this.graph,e);n.setClosable(!0),n.setResizable(!0),n.destroyOnClose=!1,n.addListener(mxEvent$1.RESIZE_END,function(){s.update()}),this.outline=n,this.outline.outline=s}this.outline.setVisible(!0),this.outline.outline.update(!0)}setMode(t){t=="select"?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):t=="connect"?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):t=="pan"&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))}createPopupMenu(t,e,n){this.popupHandler.createMenu(this,t,e,n)}createEdge(t,e){var n=null;if(this.defaultEdge!=null){var s=this.graph.getModel();n=s.cloneCell(this.defaultEdge)}else{n=new mxCell(""),n.setEdge(!0);var l=new mxGeometry;l.relative=!0,n.setGeometry(l)}var r=this.getEdgeStyle();return r!=null&&n.setStyle(r),n}getEdgeStyle(){return this.defaultEdgeStyle}consumeCycleAttribute(t){return this.cycleAttributeValues!=null&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(t)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null}cycleAttribute(t){if(this.cycleAttributeName!=null){var e=this.consumeCycleAttribute(t);e!=null&&t.setStyle(t.getStyle()+";"+this.cycleAttributeName+"="+e)}}addVertex(t,e,n,s){for(var l=this.graph.getModel();t!=null&&!this.graph.isValidDropTarget(t);)t=l.getParent(t);t=t??this.graph.getSwimlaneAt(n,s);var r=this.graph.getView().scale,o=l.getGeometry(e),h=l.getGeometry(t);if(this.graph.isSwimlane(e)&&!this.graph.swimlaneNesting)t=null;else{if(t==null&&this.swimlaneRequired)return null;if(t!=null&&h!=null){var u=this.graph.getView().getState(t);if(u!=null){if(n-=u.origin.x*r,s-=u.origin.y*r,this.graph.isConstrainedMoving){var d=o.width,m=o.height,g=u.x+u.width;n+d>g&&(n-=n+d-g),g=u.y+u.height,s+m>g&&(s-=s+m-g)}}else h!=null&&(n-=h.x*r,s-=h.y*r)}}o=Object.assign(Object.create(Object.getPrototypeOf(o)),o),o.x=this.graph.snap(n/r-this.graph.getView().translate.x-this.graph.gridSize/2),o.y=this.graph.snap(s/r-this.graph.getView().translate.y-this.graph.gridSize/2),e.setGeometry(o),t==null&&(t=this.graph.getDefaultParent()),this.cycleAttribute(e),this.fireEvent(new mxEventObject$1(mxEvent$1.BEFORE_ADD_VERTEX,"vertex",e,"parent",t)),l.beginUpdate();try{e=this.graph.addCell(e,t),e!=null&&(this.graph.constrainChild(e),this.fireEvent(new mxEventObject$1(mxEvent$1.ADD_VERTEX,"vertex",e)))}finally{l.endUpdate()}return e!=null&&(this.graph.setSelectionCell(e),this.graph.scrollCellToVisible(e),this.fireEvent(new mxEventObject$1(mxEvent$1.AFTER_ADD_VERTEX,"vertex",e))),e}destroy(){this.destroyed||(this.destroyed=!0,this.tasks!=null&&this.tasks.destroy(),this.outline!=null&&this.outline.destroy(),this.properties!=null&&this.properties.destroy(),this.keyHandler!=null&&this.keyHandler.destroy(),this.rubberband!=null&&this.rubberband.destroy(),this.toolbar!=null&&this.toolbar.destroy(),this.graph!=null&&this.graph.destroy(),this.status=null,this.templates=null)}}class mxEditorCodec extends mxObjectCodec{constructor(){super(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"])}afterDecode(i,t,e){var n=t.getAttribute("defaultEdge");n!=null&&(t.removeAttribute("defaultEdge"),e.defaultEdge=e.templates[n]);var s=t.getAttribute("defaultGroup");return s!=null&&(t.removeAttribute("defaultGroup"),e.defaultGroup=e.templates[s]),e}decodeChild(i,t,e){if(t.nodeName=="Array"){var n=t.getAttribute("as");if(n=="templates"){this.decodeTemplates(i,t,e);return}}else if(t.nodeName=="ui"){this.decodeUi(i,t,e);return}super.decodeChild(i,t,e)}decodeUi(i,t,e){for(var n=t.firstChild;n!=null;){if(n.nodeName=="add"){var s=n.getAttribute("as"),l=n.getAttribute("element"),r=n.getAttribute("style"),o=null;if(l!=null)o=document.getElementById(l),o!=null&&r!=null&&(o.style.cssText+=";"+r);else{var h=parseInt(n.getAttribute("x")),u=parseInt(n.getAttribute("y")),d=n.getAttribute("width"),m=n.getAttribute("height");o=document.createElement("div"),o.style.cssText=r;var g=new mxWindow(mxResources$1.get(s)||s,o,h,u,d,m,!1,!0);g.setVisible(!0)}s=="graph"?e.setGraphContainer(o):s=="toolbar"?e.setToolbarContainer(o):s=="title"?e.setTitleContainer(o):s=="status"?e.setStatusContainer(o):s=="map"&&e.setMapContainer(o)}else n.nodeName=="resource"?mxResources$1.add(n.getAttribute("basename")):n.nodeName=="stylesheet"&&mxClient.link("stylesheet",n.getAttribute("name"));n=n.nextSibling}}decodeTemplates(i,t,e){e.templates==null&&(e.templates=[]);for(var n=mxUtils$1.getChildNodes(t),s=0;s<n.length;s++){for(var l=n[s].getAttribute("as"),r=n[s].firstChild;r!=null&&r.nodeType!=1;)r=r.nextSibling;r!=null&&(e.templates[l]=i.decodeCell(r))}}}class mxGenericChangeCodec extends mxObjectCodec{constructor(i,t){super(i,["model","previous"],["cell"]),this.variable=t}afterDecode(i,t,e){return mxUtils$1.isNode(e.cell)&&(e.cell=i.decodeCell(e.cell,!1)),e.previous=e[this.variable],e}}class mxGraphCodec extends mxObjectCodec{constructor(){super(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])}}class mxGraphViewCodec extends mxObjectCodec{constructor(){super(new mxGraphView)}encode(i,t){return this.encodeCell(i,t,t.graph.getModel().getRoot())}encodeCell(i,t,e){var n=t.graph.getModel(),s=t.getState(e),l=n.getParent(e);if(l==null||s!=null){var r=n.getChildCount(e),o=t.graph.getCellGeometry(e),h=null;if(l==n.getRoot()?h="layer":l==null?h="graph":n.isEdge(e)?h="edge":r>0&&o!=null?h="group":n.isVertex(e)&&(h="vertex"),h!=null){var u=i.document.createElement(h),d=t.graph.getLabel(e);if(d!=null&&(u.setAttribute("label",t.graph.getLabel(e)),t.graph.isHtmlLabel(e)&&u.setAttribute("html",!0)),l==null){var m=t.getGraphBounds();m!=null&&(u.setAttribute("x",Math.round(m.x)),u.setAttribute("y",Math.round(m.y)),u.setAttribute("width",Math.round(m.width)),u.setAttribute("height",Math.round(m.height))),u.setAttribute("scale",t.scale)}else if(s!=null&&o!=null){for(var g in s.style){var x=s.style[g];typeof x=="function"&&typeof x=="object"&&(x=mxStyleRegistry.getName(x)),x!=null&&typeof x!="function"&&typeof x!="object"&&u.setAttribute(g,x)}var v=s.absolutePoints;if(v!=null&&v.length>0){for(var C=Math.round(v[0].x)+","+Math.round(v[0].y),g=1;g<v.length;g++)C+=" "+Math.round(v[g].x)+","+Math.round(v[g].y);u.setAttribute("points",C)}else u.setAttribute("x",Math.round(s.x)),u.setAttribute("y",Math.round(s.y)),u.setAttribute("width",Math.round(s.width)),u.setAttribute("height",Math.round(s.height));var E=s.absoluteOffset;E!=null&&(E.x!=0&&u.setAttribute("dx",Math.round(E.x)),E.y!=0&&u.setAttribute("dy",Math.round(E.y)))}for(var g=0;g<r;g++){var b=this.encodeCell(i,t,n.getChildAt(e,g));b!=null&&u.appendChild(b)}}}return u}}class mxModelCodec extends mxObjectCodec{constructor(){super(new mxGraphModel)}encodeObject(i,t,e){var n=i.document.createElement("root");i.encodeCell(t.getRoot(),n),e.appendChild(n)}decodeChild(i,t,e){t.nodeName=="root"?this.decodeRoot(i,t,e):super.decodeChild(i,t,e)}decodeRoot(i,t,e){for(var n=null,s=t.firstChild;s!=null;){var l=i.decodeCell(s);l!=null&&l.getParent()==null&&(n=l),s=s.nextSibling}n!=null&&e.setRoot(n)}}class mxRootChangeCodec extends mxObjectCodec{constructor(){super(new mxRootChange,["model","previous","root"])}afterEncode(i,t,e){return i.encodeCell(t.root,e),e}beforeDecode(i,t,e){if(t.firstChild!=null&&t.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT){t=t.cloneNode(!0);var n=t.firstChild;e.root=i.decodeCell(n,!1);var s=n.nextSibling;for(n.parentNode.removeChild(n),n=s;n!=null;)s=n.nextSibling,i.decodeCell(n),n.parentNode.removeChild(n),n=s}return t}afterDecode(i,t,e){return e.previous=e.root,e}}const De=class De extends mxObjectCodec{constructor(){super(new mxStylesheet)}encode(i,t){var e=i.document.createElement(this.getName());for(var n in t.styles){var s=t.styles[n],l=i.document.createElement("add");if(n!=null){l.setAttribute("as",n);for(var r in s){var o=this.getStringValue(r,s[r]);if(o!=null){var h=i.document.createElement("add");h.setAttribute("value",o),h.setAttribute("as",r),l.appendChild(h)}}l.childNodes.length>0&&e.appendChild(l)}}return e}getStringValue(i,t){var e=typeof t;return e=="function"?t=mxStyleRegistry.getName(t):e=="object"&&(t=null),t}decode(i,t,e){var n=e||new this.template.constructor,s=t.getAttribute("id");for(s!=null&&(i.objects[s]=n),t=t.firstChild;t!=null;){if(!this.processInclude(i,t,n)&&t.nodeName=="add"){var l=t.getAttribute("as");if(l!=null){var r=t.getAttribute("extend"),o=r!=null?mxUtils$1.clone(n.styles[r]):null;o==null&&(r!=null&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+r+" not found to extend"),o=new Object);for(var h=t.firstChild;h!=null;){if(h.nodeType==mxConstants$1.NODETYPE_ELEMENT){var u=h.getAttribute("as");if(h.nodeName=="add"){var d=mxUtils$1.getTextContent(h),m=null;d!=null&&d.length>0&&De.allowEval?m=mxUtils$1.eval(d):(m=h.getAttribute("value"),mxUtils$1.isNumeric(m)&&(m=parseFloat(m))),m!=null&&(o[u]=m)}else h.nodeName=="remove"&&delete o[u]}h=h.nextSibling}n.putCellStyle(l,o)}}t=t.nextSibling}return n}};c(De,"allowEval",!0);let mxStylesheetCodec=De;class mxTerminalChangeCodec extends mxObjectCodec{constructor(){super(new mxTerminalChange,["model","previous"],["cell","terminal"])}afterDecode(i,t,e){return e.previous=e.terminal,e}}class mxCylinder extends mxShape{constructor(t,e,n,s){super();c(this,"maxHeight",40);c(this,"svgStrokeTolerance",0);this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=s??1}paintVertexShape(t,e,n,s,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,s,l,!1),t.fillAndStroke(),(!this.outline||this.style==null||mxUtils$1.getValue(this.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0)&&(t.setShadow(!1),t.begin(),this.redrawPath(t,e,n,s,l,!0),t.stroke())}getCylinderSize(t,e,n,s){return Math.min(this.maxHeight,Math.round(s/5))}redrawPath(t,e,n,s,l,r){var o=this.getCylinderSize(e,n,s,l);(r&&this.fill!=null||!r&&this.fill==null)&&(t.moveTo(0,o),t.curveTo(0,2*o,s,2*o,s,o),r||(t.stroke(),t.begin())),r||(t.moveTo(0,o),t.curveTo(0,-o/3,s,-o/3,s,o),t.lineTo(s,l-o),t.curveTo(s,l+o/3,0,l+o/3,0,l-o),t.close())}}class mxRhombus extends mxShape{constructor(i,t,e,n){super(),this.bounds=i,this.fill=t,this.stroke=e,this.strokewidth=n??1}isRoundable(){return!0}paintVertexShape(i,t,e,n,s){var l=n/2,r=s/2,o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;i.begin(),this.addPoints(i,[new mxPoint(t+l,e),new mxPoint(t+n,e+r),new mxPoint(t+l,e+s),new mxPoint(t,e+r)],this.isRounded,o,!0),i.fillAndStroke()}}class mxSwimlane extends mxShape{constructor(t,e,n,s){super();c(this,"imageSize",16);this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=s??1}isRoundable(t,e,n,s,l){return!0}getTitleSize(){return Math.max(0,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE))}getLabelBounds(t){var e=this.getTitleSize(),n=new mxRectangle(t.x,t.y,t.width,t.height),s=this.isHorizontal(),l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPH,0)==1,r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_FLIPV,0)==1,o=this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH,h=s==!o,u=!h&&l!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST),d=h&&r!=(this.direction==mxConstants$1.DIRECTION_SOUTH||this.direction==mxConstants$1.DIRECTION_WEST);if(o){var m=Math.min(n.width,e*this.scale);(u||d)&&(n.x+=n.width-m),n.width=m}else{var m=Math.min(n.height,e*this.scale);(u||d)&&(n.y+=n.height-m),n.height=m}return n}getGradientBounds(t,e,n,s,l){var r=this.getTitleSize();return this.isHorizontal()?(r=Math.min(r,l),new mxRectangle(e,n,s,r)):(r=Math.min(r,s),new mxRectangle(e,n,r,l))}getSwimlaneArcSize(t,e,n){if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")return Math.min(t/2,Math.min(e/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));var s=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;return n*s*3}isHorizontal(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_HORIZONTAL,1)==1}paintVertexShape(t,e,n,s,l){var r=this.getTitleSize(),o=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE),h=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_LINE,1)==1,u=0;this.isHorizontal()?r=Math.min(r,l):r=Math.min(r,s),t.translate(e,n),this.isRounded?(u=this.getSwimlaneArcSize(s,l,r),u=Math.min((this.isHorizontal()?l:s)-r,Math.min(r,u)),this.paintRoundedSwimlane(t,e,n,s,l,r,u,o,h)):this.paintSwimlane(t,e,n,s,l,r,o,h);var d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SEPARATORCOLOR,mxConstants$1.NONE);if(this.paintSeparator(t,e,n,s,l,r,d),this.image!=null){var m=this.getImageBounds(e,n,s,l);t.image(m.x-e,m.y-n,m.width,m.height,this.image,!1,!1,!1)}this.glass&&(t.setShadow(!1),this.paintGlassEffect(t,0,0,s,r,u))}paintSwimlane(t,e,n,s,l,r,o,h){t.begin();var u=!0;this.style!=null&&(u=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!u&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(t.pointerEvents=!1),this.isHorizontal()?(t.moveTo(0,r),t.lineTo(0,0),t.lineTo(s,0),t.lineTo(s,r),t.fillAndStroke(),r<l&&((o==mxConstants$1.NONE||!u)&&(t.pointerEvents=!1),o!=mxConstants$1.NONE&&t.setFillColor(o),t.begin(),t.moveTo(0,r),t.lineTo(0,l),t.lineTo(s,l),t.lineTo(s,r),o==mxConstants$1.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(r,0),t.lineTo(0,0),t.lineTo(0,l),t.lineTo(r,l),t.fillAndStroke(),r<s&&((o==mxConstants$1.NONE||!u)&&(t.pointerEvents=!1),o!=mxConstants$1.NONE&&t.setFillColor(o),t.begin(),t.moveTo(r,0),t.lineTo(s,0),t.lineTo(s,l),t.lineTo(r,l),o==mxConstants$1.NONE?t.stroke():t.fillAndStroke())),h&&this.paintDivider(t,e,n,s,l,r,o==mxConstants$1.NONE)}paintRoundedSwimlane(t,e,n,s,l,r,o,h,u){t.begin();var d=!0;this.style!=null&&(d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),!d&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(t.pointerEvents=!1),this.isHorizontal()?(t.moveTo(s,r),t.lineTo(s,o),t.quadTo(s,0,s-Math.min(s/2,o),0),t.lineTo(Math.min(s/2,o),0),t.quadTo(0,0,0,o),t.lineTo(0,r),t.fillAndStroke(),r<l&&((h==mxConstants$1.NONE||!d)&&(t.pointerEvents=!1),h!=mxConstants$1.NONE&&t.setFillColor(h),t.begin(),t.moveTo(0,r),t.lineTo(0,l-o),t.quadTo(0,l,Math.min(s/2,o),l),t.lineTo(s-Math.min(s/2,o),l),t.quadTo(s,l,s,l-o),t.lineTo(s,r),h==mxConstants$1.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(r,0),t.lineTo(o,0),t.quadTo(0,0,0,Math.min(l/2,o)),t.lineTo(0,l-Math.min(l/2,o)),t.quadTo(0,l,o,l),t.lineTo(r,l),t.fillAndStroke(),r<s&&((h==mxConstants$1.NONE||!d)&&(t.pointerEvents=!1),h!=mxConstants$1.NONE&&t.setFillColor(h),t.begin(),t.moveTo(r,l),t.lineTo(s-o,l),t.quadTo(s,l,s,l-Math.min(l/2,o)),t.lineTo(s,Math.min(l/2,o)),t.quadTo(s,0,s-o,0),t.lineTo(r,0),h==mxConstants$1.NONE?t.stroke():t.fillAndStroke())),u&&this.paintDivider(t,e,n,s,l,r,h==mxConstants$1.NONE)}paintDivider(t,e,n,s,l,r,o){o||t.setShadow(!1),t.begin(),this.isHorizontal()?(t.moveTo(0,r),t.lineTo(s,r)):(t.moveTo(r,0),t.lineTo(r,l)),t.stroke()}paintSeparator(t,e,n,s,l,r,o){o!=mxConstants$1.NONE&&(t.setStrokeColor(o),t.setDashed(!0),t.begin(),this.isHorizontal()?(t.moveTo(s,r),t.lineTo(s,l)):(t.moveTo(r,0),t.lineTo(s,0)),t.stroke(),t.setDashed(!1))}getImageBounds(t,e,n,s){return this.isHorizontal()?new mxRectangle(t+n-this.imageSize,e,this.imageSize,this.imageSize):new mxRectangle(t,e,this.imageSize,this.imageSize)}}class mxDoubleEllipse extends mxShape{constructor(t,e,n,s){super();c(this,"vmlScale",10);this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=s??1}paintBackground(t,e,n,s,l){t.ellipse(e,n,s,l),t.fillAndStroke()}paintForeground(t,e,n,s,l){if(!this.outline){var r=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(s/5,l/5)));e+=r,n+=r,s-=2*r,l-=2*r,s>0&&l>0&&t.ellipse(e,n,s,l),t.stroke()}}getLabelBounds(t){var e=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(t.width/5/this.scale,t.height/5/this.scale)))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)}}class mxArrowConnector extends mxShape{constructor(t,e,n,s,l,r,o){super();c(this,"useSvgBoundingBox",!0);this.points=t,this.fill=e,this.stroke=n,this.strokewidth=s??1,this.arrowWidth=l??mxConstants$1.ARROW_WIDTH,this.arrowSpacing=r??mxConstants$1.ARROW_SPACING,this.startSize=mxConstants$1.ARROW_SIZE/5,this.endSize=mxConstants$1.ARROW_SIZE/5}resetStyles(){super.resetStyles(),this.arrowSpacing=mxConstants$1.ARROW_SPACING}apply(t){super.apply(t),this.style!=null&&(this.startSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3,this.endSize=mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3)}augmentBoundingBox(t){super.augmentBoundingBox(t);var e=this.getEdgeWidth();this.isMarkerStart()&&(e=Math.max(e,this.getStartArrowWidth())),this.isMarkerEnd()&&(e=Math.max(e,this.getEndArrowWidth())),t.grow((e/2+this.strokewidth)*this.scale)}paintEdgeShape(t,e){var n=this.strokewidth;this.outline&&(n=Math.max(1,mxUtils$1.getNumber(this.style,mxConstants$1.STYLE_STROKEWIDTH,this.strokewidth)));for(var s=this.getStartArrowWidth()+n,l=this.getEndArrowWidth()+n,r=this.outline?this.getEdgeWidth()+n:this.getEdgeWidth(),o=this.isOpenEnded(),h=this.isMarkerStart(),u=this.isMarkerEnd(),d=o?0:this.arrowSpacing+n/2,m=this.startSize+n,g=this.endSize+n,x=this.isArrowRounded(),v=e[e.length-1],C=1;C<e.length-1&&e[C].x==e[0].x&&e[C].y==e[0].y;)C++;var E=e[C].x-e[0].x,b=e[C].y-e[0].y,w=Math.sqrt(E*E+b*b);if(w!=0){var $=E/w,P,M=$,D=b/w,k,Z=D,q=r*D,j=-r*$,X=[];x?t.setLineJoin("round"):e.length>2&&t.setMiterLimit(1.42),t.begin();var rt=$,et=D;if(h&&!o)this.paintMarker(t,e[0].x,e[0].y,$,D,m,s,r,d,!0);else{var Y=e[0].x+q/2+d*$,G=e[0].y+j/2+d*D,J=e[0].x-q/2+d*$,tt=e[0].y-j/2+d*D;o?(t.moveTo(Y,G),X.push(function(){t.lineTo(J,tt)})):(t.moveTo(J,tt),t.lineTo(Y,G))}for(var gt=0,dt=0,K=0,nt=0;nt<e.length-2;nt++){var ht=mxUtils$1.relativeCcw(e[nt].x,e[nt].y,e[nt+1].x,e[nt+1].y,e[nt+2].x,e[nt+2].y);if(gt=e[nt+2].x-e[nt+1].x,dt=e[nt+2].y-e[nt+1].y,K=Math.sqrt(gt*gt+dt*dt),K!=0){M=gt/K,Z=dt/K;var bt=$*M+D*Z,$t=Math.max(Math.sqrt((bt+1)/2),.04);P=$+M,k=D+Z;var Dt=Math.sqrt(P*P+k*k);if(Dt!=0){P=P/Dt,k=k/Dt;var ct=Math.max($t,Math.min(this.strokewidth/200+.04,.35)),Et=ht!=0&&x?Math.max(.1,ct):Math.max($t,.06),Ht=e[nt+1].x+k*r/2/Et,Ot=e[nt+1].y-P*r/2/Et,Nt=e[nt+1].x-k*r/2/Et,lt=e[nt+1].y+P*r/2/Et;if(ht==0||!x)t.lineTo(Ht,Ot),function(Wt,Bt){X.push(function(){t.lineTo(Wt,Bt)})}(Nt,lt);else if(ht==-1){var yt=Nt+D*r,_t=lt-$*r,Rt=Nt+Z*r,Yt=lt-M*r;t.lineTo(yt,_t),t.quadTo(Ht,Ot,Rt,Yt),function(Wt,Bt){X.push(function(){t.lineTo(Wt,Bt)})}(Nt,lt)}else t.lineTo(Ht,Ot),function(Wt,Bt){var S=Ht-D*r,A=Ot+$*r,I=Ht-Z*r,N=Ot+M*r;X.push(function(){t.quadTo(Wt,Bt,S,A)}),X.push(function(){t.lineTo(I,N)})}(Nt,lt);$=M,D=Z}}}if(q=r*Z,j=-r*M,u&&!o)this.paintMarker(t,v.x,v.y,-$,-D,g,l,r,d,!1);else{t.lineTo(v.x-d*M+q/2,v.y-d*Z+j/2);var Zt=v.x-d*M-q/2,Qt=v.y-d*Z-j/2;o?(t.moveTo(Zt,Qt),X.splice(0,0,function(){t.moveTo(Zt,Qt)})):t.lineTo(Zt,Qt)}for(var nt=X.length-1;nt>=0;nt--)X[nt]();o?(t.end(),t.stroke()):(t.close(),t.fillAndStroke()),t.setShadow(!1),t.setMiterLimit(4),x&&t.setLineJoin("flat"),e.length>2&&(t.setMiterLimit(4),h&&!o&&(t.begin(),this.paintMarker(t,e[0].x,e[0].y,rt,et,m,s,r,d,!0),t.stroke(),t.end()),u&&!o&&(t.begin(),this.paintMarker(t,v.x,v.y,-$,-D,g,l,r,d,!0),t.stroke(),t.end()))}}paintMarker(t,e,n,s,l,r,o,h,u,d){var m=h/o,g=h*l/2,x=-h*s/2,v=(u+r)*s,C=(u+r)*l;d?t.moveTo(e-g+v,n-x+C):t.lineTo(e-g+v,n-x+C),t.lineTo(e-g/m+v,n-x/m+C),t.lineTo(e+u*s,n+u*l),t.lineTo(e+g/m+v,n+x/m+C),t.lineTo(e+g+v,n+x+C)}isArrowRounded(){return this.isRounded}getStartArrowWidth(){return mxConstants$1.ARROW_WIDTH}getEndArrowWidth(){return mxConstants$1.ARROW_WIDTH}getEdgeWidth(){return mxConstants$1.ARROW_WIDTH/3}isOpenEnded(){return!1}isMarkerStart(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE}isMarkerEnd(){return mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE}}class mxArrow extends mxShape{constructor(i,t,e,n,s,l,r){super(),this.points=i,this.fill=t,this.stroke=e,this.strokewidth=n??1,this.arrowWidth=s??mxConstants$1.ARROW_WIDTH,this.spacing=l??mxConstants$1.ARROW_SPACING,this.endSize=r??mxConstants$1.ARROW_SIZE}augmentBoundingBox(i){super.augmentBoundingBox(i);var t=Math.max(this.arrowWidth,this.endSize);i.grow((t/2+this.strokewidth)*this.scale)}paintEdgeShape(i,t){var e=mxConstants$1.ARROW_SPACING,n=mxConstants$1.ARROW_WIDTH,s=mxConstants$1.ARROW_SIZE,l=t[0],r=t[t.length-1],o=r.x-l.x,h=r.y-l.y,u=Math.sqrt(o*o+h*h),d=u-2*e-s,m=o/u,g=h/u,x=d*m,v=d*g,C=n*g/3,E=-n*m/3,b=l.x-C/2+e*m,w=l.y-E/2+e*g,$=b+C,P=w+E,M=$+x,D=P+v,k=M+C,Z=D+E,q=k-3*C,j=Z-3*E;i.begin(),i.moveTo(b,w),i.lineTo($,P),i.lineTo(M,D),i.lineTo(k,Z),i.lineTo(r.x-e*m,r.y-e*g),i.lineTo(q,j),i.lineTo(q+C,j+E),i.close(),i.fillAndStroke()}}class mxLine extends mxShape{constructor(i,t,e,n){super(),this.bounds=i,this.stroke=t,this.strokewidth=e??1,this.vertical=n??this.vertical}paintVertexShape(i,t,e,n,s){if(i.begin(),this.vertical){var l=t+n/2;i.moveTo(l,e),i.lineTo(l,e+s)}else{var l=e+s/2;i.moveTo(t,l),i.lineTo(t+n,l)}i.stroke()}}class mxActor extends mxShape{constructor(i,t,e,n){super(),this.bounds=i,this.fill=t,this.stroke=e,this.strokewidth=n??1}paintVertexShape(i,t,e,n,s){i.translate(t,e),i.begin(),this.redrawPath(i,t,e,n,s),i.fillAndStroke()}redrawPath(i,t,e,n,s){var l=n/3;i.moveTo(0,s),i.curveTo(0,3*s/5,0,2*s/5,n/2,2*s/5),i.curveTo(n/2-l,2*s/5,n/2-l,0,n/2,0),i.curveTo(n/2+l,0,n/2+l,2*s/5,n/2,2*s/5),i.curveTo(n,2*s/5,n,3*s/5,n,s),i.close()}}class mxCloud extends mxActor{constructor(i,t,e,n){super(),this.bounds=i,this.fill=t,this.stroke=e,this.strokewidth=n??1}redrawPath(i,t,e,n,s){i.moveTo(.25*n,.25*s),i.curveTo(.05*n,.25*s,0,.5*s,.16*n,.55*s),i.curveTo(0,.66*s,.18*n,.9*s,.31*n,.8*s),i.curveTo(.4*n,s,.7*n,s,.8*n,.8*s),i.curveTo(n,.8*s,n,.6*s,.875*n,.5*s),i.curveTo(n,.3*s,.8*n,.1*s,.625*n,.2*s),i.curveTo(.5*n,.05*s,.3*n,.05*s,.25*n,.25*s),i.close()}}class mxHexagon extends mxActor{constructor(){super()}redrawPath(i,t,e,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(i,[new mxPoint(.25*n,0),new mxPoint(.75*n,0),new mxPoint(n,.5*s),new mxPoint(.75*n,s),new mxPoint(.25*n,s),new mxPoint(0,.5*s)],this.isRounded,l,!0)}}class mxTriangle extends mxActor{constructor(){super()}isRoundable(){return!0}redrawPath(i,t,e,n,s){var l=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(i,[new mxPoint(0,0),new mxPoint(n,.5*s),new mxPoint(0,s)],this.isRounded,l,!0)}}function bootstrap(){typeof window.mxLoadResources>"u"&&(window.mxLoadResources=!0),typeof window.mxForceIncludes>"u"&&(window.mxForceIncludes=!1),typeof window.mxResourceExtension>"u"&&(mxResources$1.extension=".txt"),typeof window.mxLoadStylesheets>"u"&&(window.mxLoadStylesheets=!0),typeof window.mxBasePath<"u"&&window.mxBasePath.length>0?(window.mxBasePath.substring(window.mxBasePath.length-1)=="/"&&(window.mxBasePath=window.mxBasePath.substring(0,window.mxBasePath.length-1)),mxClient.basePath=window.mxBasePath):mxClient.basePath=".",typeof window.mxImageBasePath<"u"&&window.mxImageBasePath.length>0?(window.mxImageBasePath.substring(window.mxImageBasePath.length-1)=="/"&&(window.mxImageBasePath=window.mxImageBasePath.substring(0,window.mxImageBasePath.length-1)),mxClient.imageBasePath=window.mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",typeof window.mxLanguage<"u"&&window.mxLanguage!=null?mxClient.language=window.mxLanguage:mxClient.language=mxClient.IS_IE?navigator.userLanguage:navigator.language,typeof window.mxDefaultLanguage<"u"&&window.mxDefaultLanguage!=null?mxClient.defaultLanguage=window.mxDefaultLanguage:mxClient.defaultLanguage="en",window.mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),typeof mxLanguages<"u"&&window.mxLanguages!=null&&(mxClient.languages=window.mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(document.namespaces!=null&&(document.documentMode==8?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office"))),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?function(){var a=document.createElement("style");a.type="text/css",a.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(a)}():document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",window.mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css"))),window.mxLoadResources?mxResources$1.add(mxClient.basePath+"/resources/editor"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/editor"),window.mxLoadResources?mxResources$1.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxMarker.addMarker("classic",createArrow(2)),mxMarker.addMarker("classicThin",createArrow(3)),mxMarker.addMarker("block",createArrow(2)),mxMarker.addMarker("blockThin",createArrow(3)),mxMarker.addMarker("open",createOpenArrow(2)),mxMarker.addMarker("openThin",createOpenArrow(3)),mxMarker.addMarker("oval",oval),mxMarker.addMarker("diamond",diamond),mxMarker.addMarker("diamondThin",diamond),mxCellRenderer.registerShape(mxConstants$1.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants$1.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants$1.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants$1.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants$1.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants$1.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants$1.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants$1.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants$1.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants$1.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants$1.SHAPE_LABEL,mxLabel),mxCodecRegistry.register(new mxChildChangeCodec),mxCodecRegistry.register(new mxCellCodec),mxCodecRegistry.register(new mxDefaultKeyHandlerCodec),mxCodecRegistry.register(new mxDefaultPopupMenuCodec),mxCodecRegistry.register(new mxDefaultToolbarCodec),mxCodecRegistry.register(new mxEditorCodec),mxCodecRegistry.register(new mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(new mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(new mxGraphCodec),mxCodecRegistry.register(new mxGraphViewCodec),mxCodecRegistry.register(new mxModelCodec),mxCodecRegistry.register(new mxRootChangeCodec),mxCodecRegistry.register(new mxStylesheetCodec),mxCodecRegistry.register(new mxTerminalChangeCodec),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants$1.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants$1.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter)}class mxHandle{constructor(i,t,e,n){c(this,"ignoreGrid",!1);c(this,"cursor","default");this.graph=i.view.graph,this.state=i,this.cursor=t??this.cursor,this.image=e??this.image,this.shape=n??null,this.init()}getPosition(i){}setPosition(i,t,e){}execute(i){}copyStyle(i){this.graph.setCellStyles(i,this.state.style[i],[this.state.cell])}processEvent(i){var t=this.graph.view.scale,e=this.graph.view.translate,n=new mxPoint(i.getGraphX()/t-e.x,i.getGraphY()/t-e.y);this.shape!=null&&this.shape.bounds!=null&&(n.x-=this.shape.bounds.width/t/4,n.y-=this.shape.bounds.height/t/4);var s=-mxUtils$1.toRadians(this.getRotation()),l=-mxUtils$1.toRadians(this.getTotalRotation())-s;n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,s),this.ignoreGrid||!this.graph.isGridEnabledEvent(i.getEvent())),l)),this.setPosition(this.state.getPaintBounds(),n,i),this.redraw()}positionChanged(){this.state.text!=null&&this.state.text.apply(this.state),this.state.shape!=null&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)}getRotation(){return this.state.shape!=null?this.state.shape.getRotation():0}getTotalRotation(){return this.state.shape!=null?this.state.shape.getShapeRotation():0}init(){var i=this.isHtmlRequired();this.image!=null?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape==null&&(this.shape=this.createShape(i)),this.initShape(i)}createShape(i){var t=new mxRectangle(0,0,mxConstants$1.HANDLE_SIZE,mxConstants$1.HANDLE_SIZE);return new mxRectangleShape(t,mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}initShape(i){i&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_MIXEDHTML:mxConstants$1.DIALECT_SVG,this.cursor!=null&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent$1.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor}redraw(){if(this.shape!=null&&this.state.shape!=null){var i=this.getPosition(this.state.getPaintBounds());if(i!=null){var t=mxUtils$1.toRadians(this.getTotalRotation());i=this.rotatePoint(this.flipPoint(i),t);var e=this.graph.view.scale,n=this.graph.view.translate;this.shape.bounds.x=Math.floor((i.x+n.x)*e-this.shape.bounds.width/2),isNaN(this.shape.bounds.x)&&console.log("#1 ************ NaN Err"),this.shape.bounds.y=Math.floor((i.y+n.y)*e-this.shape.bounds.height/2),this.shape.redraw()}}}isHtmlRequired(){return this.state.text!=null&&this.state.text.node.parentNode==this.graph.container}rotatePoint(i,t){var e=this.state.getCellBounds(),n=new mxPoint(e.getCenterX(),e.getCenterY()),s=Math.cos(t),l=Math.sin(t);return mxUtils$1.getRotatedPoint(i,s,l,n)}flipPoint(i){if(this.state.shape!=null){var t=this.state.getCellBounds();this.state.shape.flipH&&(i.x=2*t.x+t.width-i.x),this.state.shape.flipV&&(i.y=2*t.y+t.height-i.y)}return i}snapPoint(i,t){return t||(i.x=this.graph.snap(i.x),i.y=this.graph.snap(i.y)),i}setVisible(i){this.shape!=null&&this.shape.node!=null&&(this.shape.node.style.display=i?"":"none")}reset(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()}destroy(){this.shape!=null&&(this.shape.destroy(),this.shape=null)}}class mxCircleLayout extends mxGraphLayout{constructor(t,e){super(t);c(this,"moveCircle",!1);c(this,"x0",0);c(this,"y0",0);c(this,"resetEdges",!0);c(this,"disableEdgeStyle",!0);this.radius=e??100}execute(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0,s=null,l=null,r=[],o=e.getChildCount(t),h=0;h<o;h++){var u=e.getChildAt(t,h);if(this.isVertexIgnored(u))this.isEdgeIgnored(u)||(this.resetEdges&&this.graph.resetEdge(u),this.disableEdgeStyle&&this.setEdgeStyleEnabled(u,!1));else{r.push(u);var d=this.getVertexBounds(u);s==null?s=d.y:s=Math.min(s,d.y),l==null?l=d.x:l=Math.min(l,d.x),n=Math.max(n,Math.max(d.width,d.height))}}var m=this.getRadius(r.length,n);this.moveCircle&&(l=this.x0,s=this.y0),this.circle(r,m,l,s)}finally{e.endUpdate()}}getRadius(t,e){return Math.max(t*e/Math.PI,this.radius)}circle(t,e,n,s){for(var l=t.length,r=2*Math.PI/l,o=0;o<l;o++)this.isVertexMovable(t[o])&&this.setVertexLocation(t[o],Math.round(n+e+e*Math.sin(o*r)),Math.round(s+e+e*Math.cos(o*r)))}}class mxFastOrganicLayout extends mxGraphLayout{constructor(t){super(t);c(this,"useInputOrigin",!0);c(this,"resetEdges",!0);c(this,"disableEdgeStyle",!0);c(this,"forceConstant",50);c(this,"forceConstantSquared",0);c(this,"minDistanceLimit",2);c(this,"maxDistanceLimit",500);c(this,"minDistanceLimitSquared",4);c(this,"initialTemp",200);c(this,"temperature",0);c(this,"maxIterations",0);c(this,"iteration",0);c(this,"vertexArray");c(this,"dispX");c(this,"dispY");c(this,"cellLocation");c(this,"radius");c(this,"radiusSquared");c(this,"isMoveable");c(this,"neighbours");c(this,"indices");c(this,"allowedToRun",!0)}isVertexIgnored(t){return super.isVertexIgnored(t)||this.graph.getConnections(t).length==0}execute(t){var e=this.graph.getModel();this.vertexArray=[];for(var n=this.graph.getChildVertices(t),s=0;s<n.length;s++)this.isVertexIgnored(n[s])||this.vertexArray.push(n[s]);var l=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,r=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(var s=0;s<this.vertexArray.length;s++){var o=this.vertexArray[s];this.cellLocation[s]=[];var h=mxObjectIdentity.get(o);this.indices[h]=s;var u=this.getVertexBounds(o),d=u.width,m=u.height,g=u.x,x=u.y;this.cellLocation[s][0]=g+d/2,this.cellLocation[s][1]=x+m/2,this.radius[s]=Math.min(d,m),this.radiusSquared[s]=this.radius[s]*this.radius[s]}e.beginUpdate();try{for(var s=0;s<r;s++){this.dispX[s]=0,this.dispY[s]=0,this.isMoveable[s]=this.isVertexMovable(this.vertexArray[s]);var v=this.graph.getConnections(this.vertexArray[s],t),n=this.graph.getOpposites(v,this.vertexArray[s]);this.neighbours[s]=[];for(var C=0;C<n.length;C++){this.resetEdges&&this.graph.resetEdge(v[C]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(v[C],!1);var h=mxObjectIdentity.get(n[C]),E=this.indices[h];E!=null?this.neighbours[s][C]=E:this.neighbours[s][C]=s}}for(this.temperature=this.initialTemp,this.maxIterations==0&&(this.maxIterations=20*Math.sqrt(r)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(var b=null,w=null,s=0;s<this.vertexArray.length;s++){var o=this.vertexArray[s];if(this.isVertexMovable(o)){var u=this.getVertexBounds(o);if(u!=null){this.cellLocation[s][0]-=u.width/2,this.cellLocation[s][1]-=u.height/2;var g=this.graph.snap(Math.round(this.cellLocation[s][0])),x=this.graph.snap(Math.round(this.cellLocation[s][1]));this.setVertexLocation(o,g,x),b==null?b=g:b=Math.min(b,g),w==null?w=x:w=Math.min(w,x)}}}var $=-(b||0)+1,P=-(w||0)+1;l!=null&&($+=l.x,P+=l.y),this.graph.moveCells(this.vertexArray,$,P)}finally{e.endUpdate()}}calcPositions(){for(var t=0;t<this.vertexArray.length;t++)if(this.isMoveable[t]){var e=Math.sqrt(this.dispX[t]*this.dispX[t]+this.dispY[t]*this.dispY[t]);e<.001&&(e=.001);var n=this.dispX[t]/e*Math.min(e,this.temperature),s=this.dispY[t]/e*Math.min(e,this.temperature);this.dispX[t]=0,this.dispY[t]=0,this.cellLocation[t][0]+=n,this.cellLocation[t][1]+=s}}calcAttraction(){for(var t=0;t<this.vertexArray.length;t++)for(var e=0;e<this.neighbours[t].length;e++){var n=this.neighbours[t][e];if(t!=n&&this.isMoveable[t]&&this.isMoveable[n]){var s=this.cellLocation[t][0]-this.cellLocation[n][0],l=this.cellLocation[t][1]-this.cellLocation[n][1],r=s*s+l*l-this.radiusSquared[t]-this.radiusSquared[n];r<this.minDistanceLimitSquared&&(r=this.minDistanceLimitSquared);var o=Math.sqrt(r),h=r/this.forceConstant,u=s/o*h,d=l/o*h;this.dispX[t]-=u,this.dispY[t]-=d,this.dispX[n]+=u,this.dispY[n]+=d}}}calcRepulsion(){for(var t=this.vertexArray.length,e=0;e<t;e++)for(var n=e;n<t;n++){if(!this.allowedToRun)return;if(n!=e&&this.isMoveable[e]&&this.isMoveable[n]){var s=this.cellLocation[e][0]-this.cellLocation[n][0],l=this.cellLocation[e][1]-this.cellLocation[n][1];s==0&&(s=.01+Math.random()),l==0&&(l=.01+Math.random());var r=Math.sqrt(s*s+l*l),o=r-this.radius[e]-this.radius[n];if(o>this.maxDistanceLimit)continue;o<this.minDistanceLimit&&(o=this.minDistanceLimit);var h=this.forceConstantSquared/o,u=s/r*h,d=l/r*h;this.dispX[e]+=u,this.dispY[e]+=d,this.dispX[n]-=u,this.dispY[n]-=d}}}reduceTemperature(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)}}class mxRadialTreeLayout extends mxCompactTreeLayout{constructor(t){super(t,!1);c(this,"angleOffset",.5);c(this,"rootx",0);c(this,"rooty",0);c(this,"levelDistance",120);c(this,"nodeDistance",10);c(this,"autoRadius",!1);c(this,"sortEdges",!1);c(this,"rowMinX",[]);c(this,"rowMaxX",[]);c(this,"rowMinCenX",[]);c(this,"rowMaxCenX",[]);c(this,"rowRadi",[]);c(this,"row",[])}isVertexIgnored(t){return super.isVertexIgnored(t)||this.graph.getConnections(t).length==0}execute(t,e){this.parent=t,this.useBoundingBox=!1,this.edgeRouting=!1,super.execute(t,e);var n=null,s=this.getVertexBounds(this.root);this.centerX=s.x+s.width/2,this.centerY=s.y+s.height/2;for(var l in this.visited){var r=this.getVertexBounds(this.visited[l]);n=n??r.clone(),n.add(r)}this.calcRowDims([this.node],0);for(var o=0,h=0,u=0;u<this.row.length;u++){var d=(this.centerX-this.rowMinX[u]-this.nodeDistance)/this.rowRadi[u],m=(this.rowMaxX[u]-this.centerX-this.nodeDistance)/this.rowRadi[u];o=Math.max(o,d),h=Math.max(h,m)}for(var u=0;u<this.row.length;u++)for(var g=this.centerX-this.nodeDistance-o*this.rowRadi[u],x=this.centerX+this.nodeDistance+h*this.rowRadi[u],v=x-g,C=0;C<this.row[u].length;C++){var E=this.row[u],b=E[C],r=this.getVertexBounds(b.cell),w=(r.x+r.width/2-g)/v,$=2*Math.PI*w;b.theta=$}for(var u=this.row.length-2;u>=0;u--)for(var E=this.row[u],C=0;C<E.length;C++){for(var b=E[C],P=b.child,M=0,D=0;P!=null;)D+=P.theta,M++,P=P.next;if(M>0){var k=D/M;if(k>b.theta&&C<E.length-1){var Z=E[C+1].theta;b.theta=Math.min(k,Z-Math.PI/10)}else if(k<b.theta&&C>0){var q=E[C-1].theta;b.theta=Math.max(k,q+Math.PI/10)}}}for(var u=0;u<this.row.length;u++)for(var C=0;C<this.row[u].length;C++){var E=this.row[u],b=E[C],r=this.getVertexBounds(b.cell);this.setVertexLocation(b.cell,this.centerX-r.width/2+this.rowRadi[u]*Math.cos(b.theta),this.centerY-r.height/2+this.rowRadi[u]*Math.sin(b.theta))}}calcRowDims(t,e){if(!(t==null||t.length==0)){this.rowMinX[e]=this.centerX,this.rowMaxX[e]=this.centerX,this.rowMinCenX[e]=this.centerX,this.rowMaxCenX[e]=this.centerX,this.row[e]=[];for(var n=!1,s=0;s<t.length;s++)for(var l=t[s]!=null?t[s].child:null;l!=null;){var r=l.cell,o=this.getVertexBounds(r);this.rowMinX[e]=Math.min(o.x,this.rowMinX[e]),this.rowMaxX[e]=Math.max(o.x+o.width,this.rowMaxX[e]),this.rowMinCenX[e]=Math.min(o.x+o.width/2,this.rowMinCenX[e]),this.rowMaxCenX[e]=Math.max(o.x+o.width/2,this.rowMaxCenX[e]),this.rowRadi[e]=o.y-this.getVertexBounds(this.root).y,l.child!=null&&(n=!0),this.row[e].push(l),l=l.next}n&&this.calcRowDims(this.row[e],e+1)}}}class mxHierarchicalEdgeStyle{}c(mxHierarchicalEdgeStyle,"ORTHOGONAL",1),c(mxHierarchicalEdgeStyle,"POLYLINE",2),c(mxHierarchicalEdgeStyle,"STRAIGHT",3),c(mxHierarchicalEdgeStyle,"CURVE",4);class mxHierarchicalLayoutStage{constructor(){}execute(i){}}class mxCoordinateAssignment extends mxHierarchicalLayoutStage{constructor(t,e,n,s,l,r){super();c(this,"maxIterations",8);c(this,"prefHozEdgeSep",5);c(this,"prefVertEdgeOff",2);c(this,"minEdgeJetty",12);c(this,"channelBuffer",4);c(this,"jettyPositions",null);c(this,"limitX",null);c(this,"currentXDelta",null);c(this,"widestRank",null);c(this,"rankTopY",null);c(this,"rankBottomY",null);c(this,"widestRankValue",null);c(this,"rankWidths",null);c(this,"rankY",null);c(this,"fineTuning",!0);c(this,"nextLayerConnectedCache",null);c(this,"previousLayerConnectedCache",null);c(this,"groupPadding",10);this.layout=t,this.intraCellSpacing=e,this.interRankCellSpacing=n,this.orientation=s,this.initialX=l,this.parallelEdgeSpacing=r}printStatus(){var t=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var e=0;e<t.ranks.length;e++){mxLog.write("Rank ",e," : ");for(var n=t.ranks[e],s=0;s<n.length;s++){var l=n[s];mxLog.write(l.getGeneralPurposeVariable(e),"  ")}mxLog.writeln()}mxLog.writeln("====================================")}execute(t){this.jettyPositions=Object();var e=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),e),this.fineTuning&&this.minNode(e);var n=1e8;if(this.fineTuning)for(var s=0;s<this.maxIterations;s++){if(s!=0&&(this.medianPos(s,e),this.minNode(e)),this.currentXDelta<n){for(var l=0;l<e.ranks.length;l++)for(var r=e.ranks[l],o=0;o<r.length;o++){var h=r[o];h.setX(l,h.getGeneralPurposeVariable(l))}n=this.currentXDelta}else for(var l=0;l<e.ranks.length;l++)for(var r=e.ranks[l],o=0;o<r.length;o++){var h=r[o];h.setGeneralPurposeVariable(l,h.getX(l))}this.minPath(this.layout.getGraph(),e),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),e)}minNode(t){for(var e=[],n=new mxDictionary,s=[],l=0;l<=t.maxRank;l++){s[l]=t.ranks[l];for(var r=0;r<s[l].length;r++){var o=s[l][r],h=new WeightedCellSorter(o,l);h.rankIndex=r,h.visited=!0,e.push(h),n.put(o,h)}}for(var u=e.length*10,d=0,m=1;e.length>0&&d<=u;){var g=e.shift(),x=g.cell,v=g.weightedValue,C=parseInt(g.rankIndex),E=x.getNextLayerConnectedCells(v),b=x.getPreviousLayerConnectedCells(v),w=E.length,$=b.length,P=this.medianXValue(E,v+1),M=this.medianXValue(b,v-1),D=w+$,k=x.getGeneralPurposeVariable(v),Z=k;D>0&&(Z=(P*w+M*$)/D);var q=!1;if(Z<k-m)if(C==0)x.setGeneralPurposeVariable(v,Z),q=!0;else{var j=s[v][C-1],X=j.getGeneralPurposeVariable(v);X=X+j.width/2+this.intraCellSpacing+x.width/2,X<Z?(x.setGeneralPurposeVariable(v,Z),q=!0):X<x.getGeneralPurposeVariable(v)-m&&(x.setGeneralPurposeVariable(v,X),q=!0)}else if(Z>k+m){var rt=s[v].length;if(C==rt-1)x.setGeneralPurposeVariable(v,Z),q=!0;else{var et=s[v][C+1],Y=et.getGeneralPurposeVariable(v);Y=Y-et.width/2-this.intraCellSpacing-x.width/2,Y>Z?(x.setGeneralPurposeVariable(v,Z),q=!0):Y>x.getGeneralPurposeVariable(v)+m&&(x.setGeneralPurposeVariable(v,Y),q=!0)}}if(q){for(var l=0;l<E.length;l++){var G=E[l],J=n.get(G);J!=null&&J.visited==!1&&(J.visited=!0,e.push(J))}for(var l=0;l<b.length;l++){var G=b[l],J=n.get(G);J!=null&&J.visited==!1&&(J.visited=!0,e.push(J))}}g.visited=!1,d++}}medianPos(t,e){var n=t%2==0;if(n)for(var s=e.maxRank;s>0;s--)this.rankMedianPosition(s-1,e,s);else for(var s=0;s<e.maxRank-1;s++)this.rankMedianPosition(s+1,e,s)}rankMedianPosition(t,e,n){for(var s=e.ranks[t],l=[],r=new Object,o=0;o<s.length;o++){var h=s[o];l[o]=new WeightedCellSorter,l[o].cell=h,l[o].rankIndex=o,r[h.id]=l[o];var u=null;n<t?u=h.getPreviousLayerConnectedCells(t):u=h.getNextLayerConnectedCells(t),l[o].weightedValue=this.calculatedWeightedValue(h,u)}l.sort(WeightedCellSorter.compare);for(var o=0;o<l.length;o++){var d=0,m=l[o].cell,u=null,g=0;n<t?u=m.getPreviousLayerConnectedCells(t).slice():u=m.getNextLayerConnectedCells(t).slice(),u!=null&&(d=u.length,d>0?g=this.medianXValue(u,n):g=m.getGeneralPurposeVariable(t));for(var x=0,v=-1e8,C=l[o].rankIndex-1;C>=0;){var E=r[s[C].id];if(E!=null){var b=E.cell;E.visited?(v=b.getGeneralPurposeVariable(t)+b.width/2+this.intraCellSpacing+x+m.width/2,C=-1):(x+=b.width+this.intraCellSpacing,C--)}}for(var w=0,$=1e8,C=l[o].rankIndex+1;C<l.length;){var E=r[s[C].id];if(E!=null){var P=E.cell;E.visited?($=P.getGeneralPurposeVariable(t)-P.width/2-this.intraCellSpacing-w-m.width/2,C=l.length):(w+=P.width+this.intraCellSpacing,C++)}}g>=v&&g<=$?m.setGeneralPurposeVariable(t,g):g<v?(m.setGeneralPurposeVariable(t,v),this.currentXDelta+=v-g):g>$&&(m.setGeneralPurposeVariable(t,$),this.currentXDelta+=g-$),l[o].visited=!0}}calculatedWeightedValue(t,e){for(var n=0,s=0;s<e.length;s++){var l=e[s];t.isVertex()&&l.isVertex()?n++:t.isEdge()&&l.isEdge()?n+=8:n+=2}return n}medianXValue(t,e){if(t.length==0)return 0;for(var n=[],s=0;s<t.length;s++)n[s]=t[s].getGeneralPurposeVariable(e);if(n.sort(function(h,u){return h-u}),t.length%2==1)return n[Math.floor(t.length/2)];var l=t.length/2,r=n[l-1],o=n[l];return(r+o)/2}initialCoords(t,e){this.calculateWidestRank(t,e);for(var n=this.widestRank;n>=0;n--)n<e.maxRank&&this.rankCoordinates(n,t,e);for(var n=this.widestRank+1;n<=e.maxRank;n++)n>0&&this.rankCoordinates(n,t,e)}rankCoordinates(t,e,n){for(var s=n.ranks[t],l=0,r=this.initialX+(this.widestRankValue-this.rankWidths[t])/2,o=!1,h=0;h<s.length;h++){var u=s[h];if(u.isVertex()){var d=this.layout.getVertexBounds(u.cell);d!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(u.width=d.width,u.height=d.height):(u.width=d.height,u.height=d.width):o=!0,l=Math.max(l,u.height)}else if(u.isEdge()){var m=1;u.edges!=null?m=u.edges.length:mxLog.warn("edge.edges is null"),u.width=(m-1)*this.parallelEdgeSpacing}r+=u.width/2,u.setX(t,r),u.setGeneralPurposeVariable(t,r),r+=u.width/2,r+=this.intraCellSpacing}o==!0&&mxLog.warn("At least one cell has no bounds")}calculateWidestRank(t,e){var n=-this.interRankCellSpacing,s=0;this.rankWidths=[],this.rankY=[];for(var l=e.maxRank;l>=0;l--){for(var r=0,o=e.ranks[l],h=this.initialX,u=!1,d=0;d<o.length;d++){var m=o[d];if(m.isVertex()){var g=this.layout.getVertexBounds(m.cell);g!=null?this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(m.width=g.width,m.height=g.height):(m.width=g.height,m.height=g.width):u=!0,r=Math.max(r,m.height)}else if(m.isEdge()){var x=1;m.edges!=null?x=m.edges.length:mxLog.warn("edge.edges is null"),m.width=(x-1)*this.parallelEdgeSpacing}h+=m.width/2,m.setX(l,h),m.setGeneralPurposeVariable(l,h),h+=m.width/2,h+=this.intraCellSpacing,h>this.widestRankValue&&(this.widestRankValue=h,this.widestRank=l),this.rankWidths[l]=h}u==!0&&mxLog.warn("At least one cell has no bounds"),this.rankY[l]=n;var v=r/2+s/2+this.interRankCellSpacing;s=r,this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_WEST?n+=v:n-=v;for(var d=0;d<o.length;d++){var C=o[d];C.setY(l,n)}}}minPath(t,e){for(var n=e.edgeMapper.getValues(),s=0;s<n.length;s++){var l=n[s];if(!(l.maxRank-l.minRank-1<1)){for(var r=l.getGeneralPurposeVariable(l.minRank+1),o=!0,h=0,u=l.minRank+2;u<l.maxRank;u++){var d=l.getGeneralPurposeVariable(u);r!=d?(o=!1,r=d):h++}if(!o){for(var m=0,g=0,x=[],v=[],C=l.getGeneralPurposeVariable(l.minRank+1),u=l.minRank+1;u<l.maxRank-1;u++){var E=l.getX(u+1);C==E||this.repositionValid(e,l,u+1,C)?(x[u-l.minRank-1]=C,m++):(x[u-l.minRank-1]=E,C=E)}C=l.getX(u);for(var u=l.maxRank-1;u>l.minRank+1;u--){var E=l.getX(u-1);C==E||this.repositionValid(e,l,u-1,C)?(v[u-l.minRank-2]=C,g++):(v[u-l.minRank-2]=l.getX(u-1),C=E)}if(g>h||m>h){if(g>=m)for(var u=l.maxRank-2;u>l.minRank;u--)l.setX(u,v[u-l.minRank-1]);else if(m>g)for(var u=l.minRank+2;u<l.maxRank;u++)l.setX(u,x[u-l.minRank-2])}}}}}repositionValid(t,e,n,s){for(var l=t.ranks[n],r=-1,o=0;o<l.length;o++)if(e==l[o]){r=o;break}if(r<0)return!1;var h=e.getGeneralPurposeVariable(n);if(s<h){if(r==0)return!0;var u=l[r-1],d=u.getGeneralPurposeVariable(n);return d=d+u.width/2+this.intraCellSpacing+e.width/2,d<=s}else if(s>h){if(r==l.length-1)return!0;var m=l[r+1],g=m.getGeneralPurposeVariable(n);return g=g-m.width/2-this.intraCellSpacing-e.width/2,g>=s}return!0}setCellLocations(t,e){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<e.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;for(var s=e.vertexMapper.getValues(),n=0;n<s.length;n++)this.setVertexLocation(s[n]);(this.layout.edgeStyle==mxHierarchicalEdgeStyle.ORTHOGONAL||this.layout.edgeStyle==mxHierarchicalEdgeStyle.POLYLINE||this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE)&&this.localEdgeProcessing(e);for(var l=e.edgeMapper.getValues(),n=0;n<l.length;n++)this.setEdgePosition(l[n])}localEdgeProcessing(t){for(var e=0;e<t.ranks.length;e++)for(var n=t.ranks[e],s=0;s<n.length;s++){var l=n[s];if(l.isVertex())for(var r=l.getPreviousLayerConnectedCells(e),o=e-1,h=0;h<2;h++){if(o>-1&&o<t.ranks.length&&r!=null&&r.length>0){for(var u=[],d=0;d<r.length;d++){var m=new WeightedCellSorter(r[d],r[d].getX(o));u.push(m)}u.sort(WeightedCellSorter.compare);for(var g=l.x[0]-l.width/2,x=g+l.width,v=0,C=[],d=0;d<u.length;d++){var E=u[d].cell,b;if(E.isVertex()){h==0?b=l.connectsAsSource:b=l.connectsAsTarget;for(var w=0;w<b.length;w++)(b[w].source==E||b[w].target==E)&&(v+=b[w].edges.length,C.push(b[w]))}else v+=E.edges.length,C.push(E)}var $=(v+1)*this.prefHozEdgeSep;l.width>$+2*this.prefHozEdgeSep&&(g+=this.prefHozEdgeSep,x-=this.prefHozEdgeSep);for(var P=x-g,M=P/v,D=g+M/2,k=this.minEdgeJetty-this.prefVertEdgeOff,d=0;d<C.length;d++){var Z=C[d].edges.length,q=this.jettyPositions[C[d].ids[0]];q==null&&(q=[],this.jettyPositions[C[d].ids[0]]=q),d<v/2?k+=this.prefVertEdgeOff:d>v/2&&(k-=this.prefVertEdgeOff);for(var j=0;j<Z;j++)q[j*4+h*2]=D,D+=M,q[j*4+h*2+1]=k}}r=l.getNextLayerConnectedCells(e),o=e+1}}}setEdgePosition(t){var e=0;if(t.temp[0]!=101207){var n=t.maxRank,s=t.minRank;n==s&&(n=t.source.maxRank,s=t.target.minRank);for(var l=0,r=this.jettyPositions[t.ids[0]],o=t.isReversed?t.target.cell:t.source.cell,h=this.layout.graph,u=this.orientation==mxConstants$1.DIRECTION_EAST||this.orientation==mxConstants$1.DIRECTION_SOUTH,d=0;d<t.edges.length;d++){var m=t.edges[d],g=this.layout.getVisibleTerminal(m,!0),x=[],v=t.isReversed;if(g!=o&&(v=!v),r!=null){var C=v?2:0,E=v?u?this.rankBottomY[s]:this.rankTopY[s]:u?this.rankTopY[n]:this.rankBottomY[n],b=r[l*4+1+C];v!=u&&(b=-b),E+=b;var w=r[l*4+C],$=h.model.getTerminal(m,!0);if(this.layout.isPort($)&&h.model.getParent($)==g){var P=h.view.getState($);P!=null?w=P.x:w=g.geometry.x+t.source.width*$.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(x.push(new mxPoint(w,E)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&x.push(new mxPoint(w,E+b))):(x.push(new mxPoint(E,w)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&x.push(new mxPoint(E+b,w)))}var M=t.x.length-1,D=-1,k=-1,Z=t.maxRank-1;v&&(M=0,D=t.x.length,k=1,Z=t.minRank+1);for(var q=M;t.maxRank!=t.minRank&&q!=D;q+=k){var j=t.x[q]+e,X=(this.rankTopY[Z]+this.rankBottomY[Z+1])/2,rt=(this.rankTopY[Z-1]+this.rankBottomY[Z])/2;if(v){var et=X;X=rt,rt=et}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(x.push(new mxPoint(j,X)),x.push(new mxPoint(j,rt))):(x.push(new mxPoint(X,j)),x.push(new mxPoint(rt,j))),this.limitX=Math.max(this.limitX,j),Z+=k}if(r!=null){var C=v?2:0,Y=v?u?this.rankTopY[n]:this.rankBottomY[n]:u?this.rankBottomY[s]:this.rankTopY[s],b=r[l*4+3-C];v!=u&&(b=-b);var E=Y-b,w=r[l*4+2-C],G=h.model.getTerminal(m,!1),J=this.layout.getVisibleTerminal(m,!1);if(this.layout.isPort(G)&&h.model.getParent(G)==J){var P=h.view.getState(G);P!=null?w=P.x:w=J.geometry.x+t.target.width*G.geometry.x}this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&x.push(new mxPoint(w,E-b)),x.push(new mxPoint(w,E))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&x.push(new mxPoint(E-b,w)),x.push(new mxPoint(E,w)))}t.isReversed&&this.processReversedEdge(t,m),this.layout.setEdgePoints(m,x),e==0?e=this.parallelEdgeSpacing:e>0?e=-e:e=-e+this.parallelEdgeSpacing,l++}t.temp[0]=101207}}setVertexLocation(t){var e=t.cell,n=t.x[0]-t.width/2,s=t.y[0]-t.height/2;this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],s),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],s+t.height),this.orientation==mxConstants$1.DIRECTION_NORTH||this.orientation==mxConstants$1.DIRECTION_SOUTH?this.layout.setVertexLocation(e,n,s):this.layout.setVertexLocation(e,s,n),this.limitX=Math.max(this.limitX,n+t.width)}processReversedEdge(t,e){}}class MedianCellSorter{constructor(){c(this,"medianValue",0);c(this,"cell",!1)}static compare(i,t){return i!=null&&t!=null?t.medianValue>i.medianValue?-1:t.medianValue<i.medianValue?1:0:0}}class mxMedianHybridCrossingReduction extends mxHierarchicalLayoutStage{constructor(t){super();c(this,"maxIterations",24);c(this,"nestedBestRanks",null);c(this,"currentBestCrossings",0);c(this,"iterationsWithoutImprovement",0);c(this,"maxNoImprovementIterations",2);this.layout=t}execute(t){var e=this.layout.getModel();this.nestedBestRanks=[];for(var n=0;n<e.ranks.length;n++)this.nestedBestRanks[n]=e.ranks[n].slice();for(var s=0,l=this.calculateCrossings(e),n=0;n<this.maxIterations&&s<this.maxNoImprovementIterations;n++){this.weightedMedian(n,e),this.transpose(n,e);var r=this.calculateCrossings(e);if(r<l){l=r,s=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var h=e.ranks[o],u=0;u<h.length;u++){var d=h[u];this.nestedBestRanks[o][d.getGeneralPurposeVariable(o)]=d}}else{s++;for(var o=0;o<this.nestedBestRanks.length;o++)for(var h=e.ranks[o],u=0;u<h.length;u++){var d=h[u];d.setGeneralPurposeVariable(o,u)}}if(l==0)break}for(var m=[],g=[],n=0;n<e.maxRank+1;n++)g[n]=[],m[n]=g[n];for(var n=0;n<this.nestedBestRanks.length;n++)for(var o=0;o<this.nestedBestRanks[n].length;o++)g[n].push(this.nestedBestRanks[n][o]);e.ranks=m}calculateCrossings(t){for(var e=t.ranks.length,n=0,s=1;s<e;s++)n+=this.calculateRankCrossing(s,t);return n}calculateRankCrossing(t,e){for(var n=0,s=e.ranks[t],l=e.ranks[t-1],r=[],o=0;o<s.length;o++){for(var h=s[o],u=h.getGeneralPurposeVariable(t),d=h.getPreviousLayerConnectedCells(t),m=[],g=0;g<d.length;g++){var x=d[g],v=x.getGeneralPurposeVariable(t-1);m.push(v)}m.sort(function(M,D){return M-D}),r[u]=m}for(var C=[],o=0;o<r.length;o++)C=C.concat(r[o]);for(var E=1;E<l.length;)E<<=1;var b=2*E-1;E-=1;for(var w=[],o=0;o<b;++o)w[o]=0;for(var o=0;o<C.length;o++){var $=C[o],P=$+E;for(++w[P];P>0;)P%2&&(n+=w[P+1]),P=P-1>>1,++w[P]}return n}transpose(t,e){for(var n=!0,s=0,l=10;n&&s++<l;){var r=t%2==1&&s%2==1;n=!1;for(var o=0;o<e.ranks.length;o++){for(var h=e.ranks[o],u=[],d=0;d<h.length;d++){var m=h[d],g=m.getGeneralPurposeVariable(o);g<0&&(g=d),u[g]=m}for(var x=null,v=null,C=null,E=null,b=null,w=null,$=null,P=null,M=null,D=null,d=0;d<h.length-1;d++){if(d==0){M=u[d],x=M.getNextLayerConnectedCells(o),v=M.getPreviousLayerConnectedCells(o),b=[],w=[];for(var k=0;k<x.length;k++)b[k]=x[k].getGeneralPurposeVariable(o+1);for(var k=0;k<v.length;k++)w[k]=v[k].getGeneralPurposeVariable(o-1)}else x=C,v=E,b=$,w=P,M=D;D=u[d+1],C=D.getNextLayerConnectedCells(o),E=D.getPreviousLayerConnectedCells(o),$=[],P=[];for(var k=0;k<C.length;k++)$[k]=C[k].getGeneralPurposeVariable(o+1);for(var k=0;k<E.length;k++)P[k]=E[k].getGeneralPurposeVariable(o-1);for(var Z=0,q=0,k=0;k<b.length;k++)for(var j=0;j<$.length;j++)b[k]>$[j]&&Z++,b[k]<$[j]&&q++;for(var k=0;k<w.length;k++)for(var j=0;j<P.length;j++)w[k]>P[j]&&Z++,w[k]<P[j]&&q++;if(q<Z||q==Z&&r){var X=M.getGeneralPurposeVariable(o);M.setGeneralPurposeVariable(o,D.getGeneralPurposeVariable(o)),D.setGeneralPurposeVariable(o,X),C=x,E=v,$=b,P=w,D=M,r||(n=!0)}}}}}weightedMedian(t,e){var n=t%2==0;if(n)for(var s=e.maxRank-1;s>=0;s--)this.medianRank(s,n);else for(var s=1;s<e.maxRank;s++)this.medianRank(s,n)}medianRank(t,e){for(var n=this.nestedBestRanks[t].length,s=[],l=[],r=0;r<n;r++){var o=this.nestedBestRanks[t][r],h=new MedianCellSorter;h.cell=o;var u;e?u=o.getNextLayerConnectedCells(t):u=o.getPreviousLayerConnectedCells(t);var d;e?d=t+1:d=t-1,u!=null&&u.length!=0?(h.medianValue=this.medianValue(u,d),s.push(h)):l[o.getGeneralPurposeVariable(t)]=!0}s.sort(MedianCellSorter.compare);for(var r=0;r<n;r++)if(l[r]==null){var o=s.shift().cell;o.setGeneralPurposeVariable(t,r)}}medianValue(t,e){for(var n=[],s=0,l=0;l<t.length;l++){var r=t[l];n[s++]=r.getGeneralPurposeVariable(e)}if(n.sort(function(d,m){return d-m}),s%2==1)return n[Math.floor(s/2)];if(s==2)return(n[0]+n[1])/2;var o=s/2,h=n[o-1]-n[0],u=n[s-1]-n[o];return(n[o-1]*u+n[o]*h)/(h+u)}}class mxMinimumCycleRemover extends mxHierarchicalLayoutStage{constructor(i){super(),this.layout=i}execute(i){for(var t=this.layout.getModel(),e=new Object,n=t.vertexMapper.getValues(),s=new Object,l=0;l<n.length;l++)s[n[l].id]=n[l];var r=null;if(t.roots!=null){var o=t.roots;r=[];for(var l=0;l<o.length;l++)r[l]=t.vertexMapper.get(o[l])}t.visit(function(u,d,m,g,x){d.isAncestor(u)&&(m.invert(),mxUtils$1.remove(m,u.connectsAsSource),u.connectsAsTarget.push(m),mxUtils$1.remove(m,d.connectsAsTarget),d.connectsAsSource.push(m)),e[d.id]=d,delete s[d.id]},r,!0,null);var h=mxUtils$1.clone(e,null,!0);t.visit(function(u,d,m,g,x){d.isAncestor(u)&&(m.invert(),mxUtils$1.remove(m,u.connectsAsSource),d.connectsAsSource.push(m),u.connectsAsTarget.push(m),mxUtils$1.remove(m,d.connectsAsTarget)),e[d.id]=d,delete s[d.id]},s,!0,h)}}class mxGraphAbstractHierarchyCell{constructor(){c(this,"maxRank",-1);c(this,"minRank",-1);c(this,"width",0);c(this,"height",0);c(this,"nextLayerConnectedCells",null);c(this,"previousLayerConnectedCells",null);this.x=[],this.y=[],this.temp=[]}getNextLayerConnectedCells(i){return null}getPreviousLayerConnectedCells(i){return null}isEdge(){return!1}isVertex(){return!1}getGeneralPurposeVariable(i){return null}setGeneralPurposeVariable(i,t){return null}setX(i,t){this.isVertex()?this.x[0]=t:this.isEdge()&&(this.x[i-this.minRank-1]=t)}getX(i){return this.isVertex()?this.x[0]:this.isEdge()?this.x[i-this.minRank-1]:0}setY(i,t){this.isVertex()?this.y[0]=t:this.isEdge()&&(this.y[i-this.minRank-1]=t)}}class mxGraphHierarchyEdge extends mxGraphAbstractHierarchyCell{constructor(t){super(t);c(this,"source",null);c(this,"target",null);c(this,"isReversed",!1);this.edges=t,this.ids=[];for(var e=0;e<t.length;e++)this.ids.push(mxObjectIdentity.get(t[e]))}invert(t){var e=this.source;this.source=this.target,this.target=e,this.isReversed=!this.isReversed}getNextLayerConnectedCells(t){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.nextLayerConnectedCells[e]=[],e==this.temp.length-1?this.nextLayerConnectedCells[e].push(this.source):this.nextLayerConnectedCells[e].push(this)}return this.nextLayerConnectedCells[t-this.minRank-1]}getPreviousLayerConnectedCells(t){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.previousLayerConnectedCells[e]=[],e==0?this.previousLayerConnectedCells[e].push(this.target):this.previousLayerConnectedCells[e].push(this)}return this.previousLayerConnectedCells[t-this.minRank-1]}isEdge(){return!0}getGeneralPurposeVariable(t){return this.temp[t-this.minRank-1]}setGeneralPurposeVariable(t,e){this.temp[t-this.minRank-1]=e}getCoreCell(){return this.edges!=null&&this.edges.length>0?this.edges[0]:null}}class mxGraphHierarchyNode extends mxGraphAbstractHierarchyCell{constructor(t){super(t);c(this,"hashCode",!1);this.cell=t,this.id=mxObjectIdentity.get(t),this.connectsAsTarget=[],this.connectsAsSource=[]}getRankValue(t){return this.maxRank}getNextLayerConnectedCells(t){if(this.nextLayerConnectedCells==null){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsTarget.length;e++){var n=this.connectsAsTarget[e];n.maxRank==-1||n.maxRank==t+1?this.nextLayerConnectedCells[0].push(n.source):this.nextLayerConnectedCells[0].push(n)}}return this.nextLayerConnectedCells[0]}getPreviousLayerConnectedCells(t){if(this.previousLayerConnectedCells==null){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsSource.length;e++){var n=this.connectsAsSource[e];n.minRank==-1||n.minRank==t-1?this.previousLayerConnectedCells[0].push(n.target):this.previousLayerConnectedCells[0].push(n)}}return this.previousLayerConnectedCells[0]}isVertex(){return!0}getGeneralPurposeVariable(t){return this.temp[0]}setGeneralPurposeVariable(t,e){this.temp[0]=e}isAncestor(t){if(t!=null&&this.hashCode!=null&&t.hashCode!=null&&this.hashCode.length<t.hashCode.length){if(this.hashCode==t.hashCode)return!0;if(this.hashCode==null||this.hashCode==null)return!1;for(var e=0;e<this.hashCode.length;e++)if(this.hashCode[e]!=t.hashCode[e])return!1;return!0}return!1}getCoreCell(){return this.cell}}class mxGraphHierarchyModel{constructor(i,t,e,n,s){c(this,"ranks",null);c(this,"dfsCount",0);c(this,"SOURCESCANSTARTRANK",1e8);i.getGraph(),this.tightenToSource=s,this.roots=e,this.parent=n,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var l=[];t==null&&(t=this.graph.getChildVertices(n)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(i,t,l);for(var r=0;r<t.length;r++){for(var o=l[r].connectsAsSource,h=0;h<o.length;h++){var u=o[h],d=u.edges;if(d!=null&&d.length>0){var m=d[0],g=i.getVisibleTerminal(m,!1),x=this.vertexMapper.get(g);l[r]==x&&(g=i.getVisibleTerminal(m,!0),x=this.vertexMapper.get(g)),x!=null&&l[r]!=x&&(u.target=x,x.connectsAsTarget.length==0&&(x.connectsAsTarget=[]),mxUtils$1.indexOf(x.connectsAsTarget,u)<0&&x.connectsAsTarget.push(u))}}l[r].temp[0]=1}}createInternalCells(i,t,e){for(var n=i.getGraph(),s=0;s<t.length;s++){e[s]=new mxGraphHierarchyNode(t[s]),this.vertexMapper.put(t[s],e[s]);var l=i.getEdges(t[s]);e[s].connectsAsSource=[];for(var r=0;r<l.length;r++){var o=i.getVisibleTerminal(l[r],!1);if(o!=t[s]&&i.graph.model.isVertex(o)&&!i.isVertexIgnored(o)){var h=i.getEdgesBetween(t[s],o,!1),u=i.getEdgesBetween(t[s],o,!0);if(h!=null&&h.length>0&&this.edgeMapper.get(h[0])==null&&u.length*2>=h.length){for(var d=new mxGraphHierarchyEdge(h),m=0;m<h.length;m++){var g=h[m];this.edgeMapper.put(g,d),n.resetEdge(g),i.disableEdgeStyle&&(i.setEdgeStyleEnabled(g,!1),i.setOrthogonalEdge(g,!0))}d.source=e[s],mxUtils$1.indexOf(e[s].connectsAsSource,d)<0&&e[s].connectsAsSource.push(d)}}}e[s].temp[0]=0}}initialRank(){var i=[];if(this.roots!=null)for(var t=0;t<this.roots.length;t++){var e=this.vertexMapper.get(this.roots[t]);e!=null&&i.push(e)}for(var n=this.vertexMapper.getValues(),t=0;t<n.length;t++)n[t].temp[0]=-1;for(var s=i.slice();i.length>0;){var e=i[0],l,r;l=e.connectsAsTarget,r=e.connectsAsSource;for(var o=!0,h=this.SOURCESCANSTARTRANK,t=0;t<l.length;t++){var u=l[t];if(u.temp[0]==5270620){var d=u.source;h=Math.min(h,d.temp[0]-1)}else{o=!1;break}}if(o){if(e.temp[0]=h,this.maxRank=Math.min(this.maxRank,h),r!=null)for(var t=0;t<r.length;t++){var u=r[t];u.temp[0]=5270620;var d=u.target;d.temp[0]==-1&&(i.push(d),d.temp[0]=-2)}i.shift()}else{var m=i.shift();if(i.push(e),m==e&&i.length==1)break}}for(var t=0;t<n.length;t++)n[t].temp[0]-=this.maxRank;for(var t=0;t<s.length;t++)for(var e=s[t],g=0,l=e.connectsAsSource,x=0;x<l.length;x++){var u=l[x],d=u.target;e.temp[0]=Math.max(g,d.temp[0]+1),g=e.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank}fixRanks(){var i=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)i[t]=[],this.ranks[t]=i[t];var e=null;if(this.roots!=null){var n=this.roots;e=[];for(var t=0;t<n.length;t++){var s=n[t],l=this.vertexMapper.get(s);e[t]=l}}this.visit(function(r,o,h,u,d){if(d==0&&o.maxRank<0&&o.minRank<0&&(i[o.temp[0]].push(o),o.maxRank=o.temp[0],o.minRank=o.temp[0],o.temp[0]=i[o.maxRank].length-1),r!=null&&h!=null){var m=r.maxRank-o.maxRank;if(m>1){h.maxRank=r.maxRank,h.minRank=o.maxRank,h.temp=[],h.x=[],h.y=[];for(var g=h.minRank+1;g<h.maxRank;g++)i[g].push(h),h.setGeneralPurposeVariable(g,i[g].length-1)}}},e,!1,null)}visit(i,t,e,n){if(t!=null){for(var s=0;s<t.length;s++){var l=t[s];l!=null&&(n==null&&(n=new Object),e?(l.hashCode=[],l.hashCode[0]=this.dfsCount,l.hashCode[1]=s,this.extendedDfs(null,l,null,i,n,l.hashCode,s,0)):this.dfs(null,l,null,i,n,0))}this.dfsCount++}}dfs(i,t,e,n,s,l){if(t!=null){var r=t.id;if(s[r]==null){s[r]=t,n(i,t,e,l,0);for(var o=t.connectsAsSource.slice(),h=0;h<o.length;h++){var u=o[h],d=u.target;this.dfs(t,d,u,n,s,l+1)}}else n(i,t,e,l,1)}}extendedDfs(i,t,e,n,s,l,r,o){if(t!=null){if(i!=null&&(t.hashCode==null||t.hashCode[0]!=i.hashCode[0])){var h=i.hashCode.length+1;t.hashCode=i.hashCode.slice(),t.hashCode[h-1]=r}var u=t.id;if(s[u]==null){s[u]=t,n(i,t,e,o,0);for(var d=t.connectsAsSource.slice(),m=0;m<d.length;m++){var g=d[m],x=g.target;this.extendedDfs(t,x,g,n,s,t.hashCode,m,o+1)}}else n(i,t,e,o,1)}}}class mxHierarchicalLayout extends mxGraphLayout{constructor(t,e,n){super(t);c(this,"roots",null);c(this,"resizeParent",!1);c(this,"maintainParentLocation",!1);c(this,"moveParent",!1);c(this,"parentBorder",0);c(this,"intraCellSpacing",30);c(this,"interRankCellSpacing",100);c(this,"interHierarchySpacing",60);c(this,"parallelEdgeSpacing",10);c(this,"fineTuning",!0);c(this,"tightenToSource",!0);c(this,"disableEdgeStyle",!0);c(this,"traverseAncestors",!0);c(this,"model",null);c(this,"edgesCache",null);c(this,"edgeSourceTermCache",null);c(this,"edgesTargetTermCache",null);c(this,"edgeStyle",mxHierarchicalEdgeStyle.POLYLINE);this.orientation=e??mxConstants$1.DIRECTION_NORTH,this.deterministic=n??!0}getModel(){return this.model}execute(t,e){this.parent=t;var n=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,e!=null&&!(e instanceof Array)&&(e=[e]),!(e==null&&t==null)){if(this.parentX=null,this.parentY=null,t!=this.root&&n.isVertex(t)!=null&&this.maintainParentLocation){var s=this.graph.getCellGeometry(t);s!=null&&(this.parentX=s.x,this.parentY=s.y)}if(e!=null){for(var l=[],r=0;r<e.length;r++){var o=t!=null?n.isAncestor(t,e[r]):!0;o&&n.isVertex(e[r])&&l.push(e[r])}this.roots=l}n.beginUpdate();try{if(this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),this.parentX!=null&&this.parentY!=null){var s=this.graph.getCellGeometry(t);s!=null&&(s=s.clone(),s.x=this.parentX,s.y=this.parentY,n.setGeometry(t,s))}}finally{n.endUpdate()}}}findRoots(t,e){var n=[];if(t!=null&&e!=null){var s=this.graph.model,l=null,r=-1e5;for(var o in e){var h=e[o];if(s.isVertex(h)&&this.graph.isCellVisible(h)){for(var u=this.getEdges(h),d=0,m=0,g=0;g<u.length;g++){var x=this.getVisibleTerminal(u[g],!0);x==h?d++:m++}m==0&&d>0&&n.push(h);var v=d-m;v>r&&(r=v,l=h)}}n.length==0&&l!=null&&n.push(l)}return n}getEdges(t){var e=this.edgesCache.get(t);if(e!=null)return e;for(var n=this.graph.model,s=[],l=this.graph.isCellCollapsed(t),r=n.getChildCount(t),o=0;o<r;o++){var h=n.getChildAt(t,o);(this.isPort(h)||l||!this.graph.isCellVisible(h))&&(s=s.concat(n.getEdges(h,!0,!0)))}s=s.concat(n.getEdges(t,!0,!0));for(var u=[],o=0;o<s.length;o++){var d=this.getVisibleTerminal(s[o],!0),m=this.getVisibleTerminal(s[o],!1);(d==m||d!=m&&(m==t&&(this.parent==null||this.isAncestor(this.parent,d,this.traverseAncestors))||d==t&&(this.parent==null||this.isAncestor(this.parent,m,this.traverseAncestors))))&&u.push(s[o])}return this.edgesCache.put(t,u),u}getVisibleTerminal(t,e){var n=this.edgesTargetTermCache;e&&(n=this.edgeSourceTermCache);var s=n.get(t);if(s!=null)return s;var l=this.graph.view.getState(t),r=l!=null?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e);return r==null&&(r=l!=null?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e)),r!=null&&(this.isPort(r)&&(r=this.graph.model.getParent(r)),n.put(t,r)),r}run(t){var e=[],n=[];if(this.roots==null&&t!=null){var s=Object();this.filterDescendants(t,s),this.roots=[];var l=!0;for(var r in s)if(s[r]!=null){l=!1;break}for(;!l;){for(var o=this.findRoots(t,s),h=0;h<o.length;h++){var u=Object();e.push(u),this.traverse(o[h],!0,null,n,u,e,s)}for(var h=0;h<o.length;h++)this.roots.push(o[h]);l=!0;for(var r in s)if(s[r]!=null){l=!1;break}}}else for(var h=0;h<this.roots.length;h++){var u=Object();e.push(u),this.traverse(this.roots[h],!0,null,n,u,e,null)}for(var d=0,h=0;h<e.length;h++){var u=e[h],m=[];for(var r in u)m.push(u[r]);this.model=new mxGraphHierarchyModel(this,m,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),d=this.placementStage(d,t)}}filterDescendants(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var s=n.getChildCount(t),l=0;l<s;l++){var r=n.getChildAt(t,l);this.isPort(r)||this.filterDescendants(r,e)}}isPort(t){return t!=null&&t.geometry!=null?t.geometry.relative:!1}getEdgesBetween(t,e,n){n=n??!1;for(var s=this.getEdges(t),l=[],r=0;r<s.length;r++){var o=this.getVisibleTerminal(s[r],!0),h=this.getVisibleTerminal(s[r],!1);(o==t&&h==e||!n&&o==e&&h==t)&&l.push(s[r])}return l}traverse(t,e,n,s,l,r,o){if(t!=null&&s!=null){var h=mxObjectIdentity.get(t);if(s[h]==null&&(o==null||o[h]!=null)){l[h]==null&&(l[h]=t),s[h]==null&&(s[h]=t),o!==null&&delete o[h];for(var u=this.getEdges(t),d=[],m=0;m<u.length;m++)d[m]=this.getVisibleTerminal(u[m],!0)==t;for(var m=0;m<u.length;m++)if(!e||d[m]){for(var g=this.getVisibleTerminal(u[m],!d[m]),x=1,v=0;v<u.length;v++)if(v!=m){var C=d[v],E=this.getVisibleTerminal(u[v],!C);E==g&&(C?x++:x--)}x>=0&&(l=this.traverse(g,e,u[m],s,l,r,o))}}else if(l[h]==null)for(var m=0;m<r.length;m++){var b=r[m];if(b[h]!=null){for(var w in b)l[w]=b[w];return r.splice(m,1),l}}}return l}cycleStage(t){var e=new mxMinimumCycleRemover(this);e.execute(t)}layeringStage(){this.model.initialRank(),this.model.fixRanks()}crossingStage(t){var e=new mxMedianHybridCrossingReduction(this);e.execute(t)}placementStage(t,e){var n=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return n.fineTuning=this.fineTuning,n.execute(e),n.limitX+this.interHierarchySpacing}}class mxStencil{constructor(i){c(this,"constraints",null);c(this,"aspect",null);c(this,"w0",null);c(this,"h0",null);c(this,"bgNode",null);c(this,"fgNode",null);c(this,"strokewidth",null);this.desc=i,this.parseDescription(),this.parseConstraints()}parseDescription(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var i=this.desc.getAttribute("aspect");this.aspect=i??"variable";var t=this.desc.getAttribute("strokewidth");this.strokewidth=t??"1"}parseConstraints(){var i=this.desc.getElementsByTagName("connections")[0];if(i!=null){var t=mxUtils$1.getChildNodes(i);if(t!=null&&t.length>0){this.constraints=[];for(var e=0;e<t.length;e++)this.constraints.push(this.parseConstraint(t[e]))}}}parseConstraint(i){var t=Number(i.getAttribute("x")),e=Number(i.getAttribute("y")),n=i.getAttribute("perimeter")=="1",s=i.getAttribute("name");return new mxConnectionConstraint(new mxPoint(t,e),n,s)}evaluateTextAttribute(i,t,e){var n=this.evaluateAttribute(i,t,e),s=i.getAttribute("localized");return s=="1"&&(n=mxResources$1.get(n)),n}evaluateAttribute(i,t,e){var n=i.getAttribute(t);return n==null&&mxUtils$1.getTextContent(i),n}drawShape(i,t,e,n,s,l){var r=i.states.slice(),o=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_DIRECTION,null),h=this.computeAspect(t.style,e,n,s,l,o),u=Math.min(h.width,h.height),d=this.strokewidth=="inherit"?Number(mxUtils$1.getNumber(t.style,mxConstants$1.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*u;i.setStrokeWidth(d),t.style!=null&&mxUtils$1.getValue(t.style,mxConstants$1.STYLE_POINTER_EVENTS,"0")=="1"&&(i.setStrokeColor(mxConstants$1.NONE),i.rect(e,n,s,l),i.stroke(),i.setStrokeColor(t.stroke)),this.drawChildren(i,t,e,n,s,l,this.bgNode,h,!1,!0),this.drawChildren(i,t,e,n,s,l,this.fgNode,h,!0,!t.outline||t.style==null||mxUtils$1.getValue(t.style,mxConstants$1.STYLE_BACKGROUND_OUTLINE,0)==0),i.states.length!=r.length&&(i.states=r)}drawChildren(i,t,e,n,s,l,r,o,h,u){if(r!=null&&s>0&&l>0)for(var d=r.firstChild;d!=null;)d.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(i,t,d,o,h,u),d=d.nextSibling}computeAspect(i,t,e,n,s,l){var r=t,o=e,h=n/this.w0,u=s/this.h0,d=l==mxConstants$1.DIRECTION_NORTH||l==mxConstants$1.DIRECTION_SOUTH;if(d){u=n/this.h0,h=s/this.w0;var m=(n-s)/2;r+=m,o-=m}return this.aspect=="fixed"&&(u=Math.min(h,u),h=u,d?(r+=(s-this.w0*h)/2,o+=(n-this.h0*u)/2):(r+=(n-this.w0*h)/2,o+=(s-this.h0*u)/2)),new mxRectangle(r,o,h,u)}drawNode(i,t,e,n,s,l){var r=e.nodeName,o=n.x,h=n.y,u=n.width,d=n.height,m=Math.min(u,d);if(r=="save")i.save();else if(r=="restore")i.restore();else if(l){if(r=="path"){i.begin();var g=!0;if(e.getAttribute("rounded")=="1"){g=!1;for(var x=Number(e.getAttribute("arcSize")),v=0,C=[],E=e.firstChild;E!=null;){if(E.nodeType==mxConstants$1.NODETYPE_ELEMENT){var b=E.nodeName;if(b=="move"||b=="line")(b=="move"||C.length==0)&&C.push([]),C[C.length-1].push(new mxPoint(o+Number(E.getAttribute("x"))*u,h+Number(E.getAttribute("y"))*d)),v++;else{g=!0;break}}E=E.nextSibling}if(!g&&v>0)for(var w=0;w<C.length;w++){var $=!1,P=C[w][0],M=C[w][C[w].length-1];P.x==M.x&&P.y==M.y&&(C[w].pop(),$=!0),this.addPoints(i,C[w],!0,x,$)}else g=!0}if(g)for(var E=e.firstChild;E!=null;)E.nodeType==mxConstants$1.NODETYPE_ELEMENT&&this.drawNode(i,t,E,n,s,l),E=E.nextSibling}else if(r=="close")i.close();else if(r=="move")i.moveTo(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d);else if(r=="line")i.lineTo(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d);else if(r=="quad")i.quadTo(o+Number(e.getAttribute("x1"))*u,h+Number(e.getAttribute("y1"))*d,o+Number(e.getAttribute("x2"))*u,h+Number(e.getAttribute("y2"))*d);else if(r=="curve")i.curveTo(o+Number(e.getAttribute("x1"))*u,h+Number(e.getAttribute("y1"))*d,o+Number(e.getAttribute("x2"))*u,h+Number(e.getAttribute("y2"))*d,o+Number(e.getAttribute("x3"))*u,h+Number(e.getAttribute("y3"))*d);else if(r=="arc")i.arcTo(Number(e.getAttribute("rx"))*u,Number(e.getAttribute("ry"))*d,Number(e.getAttribute("x-axis-rotation")),Number(e.getAttribute("large-arc-flag")),Number(e.getAttribute("sweep-flag")),o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d);else if(r=="rect")i.rect(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d,Number(e.getAttribute("w"))*u,Number(e.getAttribute("h"))*d);else if(r=="roundrect"){var D=Number(e.getAttribute("arcsize"));D==0&&(D=mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100);var k=Number(e.getAttribute("w"))*u,Z=Number(e.getAttribute("h"))*d,q=Number(D)/100,j=Math.min(k*q,Z*q);i.roundrect(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d,k,Z,j,j)}else if(r=="ellipse")i.ellipse(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d,Number(e.getAttribute("w"))*u,Number(e.getAttribute("h"))*d);else if(r=="image"){if(!t.outline){var X=this.evaluateAttribute(e,"src",t);i.image(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d,Number(e.getAttribute("w"))*u,Number(e.getAttribute("h"))*d,X,!1,e.getAttribute("flipH")=="1",e.getAttribute("flipV")=="1")}}else if(r=="text"){if(!t.outline){var rt=this.evaluateTextAttribute(e,"str",t),et=e.getAttribute("vertical")=="1"?-90:0;if(e.getAttribute("align-shape")=="0"){var Y=t.rotation,G=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPH,0)==1,J=mxUtils$1.getValue(t.style,mxConstants$1.STYLE_FLIPV,0)==1;G&&J?et-=Y:G||J?et+=Y:et-=Y}et-=e.getAttribute("rotation"),i.text(o+Number(e.getAttribute("x"))*u,h+Number(e.getAttribute("y"))*d,0,0,rt,e.getAttribute("align")||"left",e.getAttribute("valign")||"top",!1,"",null,!1,et)}}else if(r=="include-shape"){var tt=mxStencilRegistry.getStencil(e.getAttribute("name"));if(tt!=null){var gt=o+Number(e.getAttribute("x"))*u,dt=h+Number(e.getAttribute("y"))*d,k=Number(e.getAttribute("w"))*u,Z=Number(e.getAttribute("h"))*d;tt.drawShape(i,t,gt,dt,k,Z)}}else if(r=="fillstroke")i.fillAndStroke();else if(r=="fill")i.fill();else if(r=="stroke")i.stroke();else if(r=="strokewidth"){var K=e.getAttribute("fixed")=="1"?1:m;i.setStrokeWidth(Number(e.getAttribute("width"))*K)}else if(r=="dashed")i.setDashed(e.getAttribute("dashed")=="1");else if(r=="dashpattern"){var nt=e.getAttribute("pattern");if(nt!=null){for(var ht=nt.split(" "),bt=[],w=0;w<ht.length;w++)ht[w].length>0&&bt.push(Number(ht[w])*m);nt=bt.join(" "),i.setDashPattern(nt)}}else r=="strokecolor"?i.setStrokeColor(e.getAttribute("color")):r=="linecap"?i.setLineCap(e.getAttribute("cap")):r=="linejoin"?i.setLineJoin(e.getAttribute("join")):r=="miterlimit"?i.setMiterLimit(Number(e.getAttribute("limit"))):r=="fillcolor"?i.setFillColor(e.getAttribute("color")):r=="alpha"||r=="fillalpha"||r=="strokealpha"?i.setAlpha(e.getAttribute("alpha")):r=="fontcolor"?i.setFontColor(e.getAttribute("color")):r=="fontstyle"?i.setFontStyle(e.getAttribute("style")):r=="fontfamily"?i.setFontFamily(e.getAttribute("family")):r=="fontsize"&&i.setFontSize(Number(e.getAttribute("size"))*m);s&&(r=="fillstroke"||r=="fill"||r=="stroke")&&(s=!1,i.setShadow(!1))}}}c(mxStencil,"defaultLocalized",!1),c(mxStencil,"allowEval",!1);class mxAnimation extends mxEventSource{constructor(t){super();c(this,"thread",null);this.delay=t??20}isRunning(){return this.thread!=null}startAnimation(){this.thread==null&&(this.thread=window.setInterval(mxUtils$1.bind(this,this.updateAnimation),this.delay))}updateAnimation(){this.fireEvent(new mxEventObject$1(mxEvent$1.EXECUTE))}stopAnimation(){this.thread!=null&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject$1(mxEvent$1.DONE)))}}class mxImageExport{constructor(){c(this,"includeOverlays",!1)}drawState(i,t){i!=null&&(this.visitStatesRecursive(i,t,()=>{this.drawCellState.apply(this,arguments)}),this.includeOverlays&&this.visitStatesRecursive(i,t,()=>{this.drawOverlays.apply(this,arguments)}))}visitStatesRecursive(i,t,e){if(i!=null){e(i,t);for(var n=i.view.graph,s=n.model.getChildCount(i.cell),l=0;l<s;l++){var r=n.view.getState(n.model.getChildAt(i.cell,l));this.visitStatesRecursive(r,t,e)}}}getLinkForCellState(i,t){return null}drawCellState(i,t){var e=this.getLinkForCellState(i,t);e!=null&&t.setLink(e),this.drawShape(i,t),this.drawText(i,t),e!=null&&t.setLink(null)}drawShape(i,t){i.shape instanceof mxShape&&i.shape.checkBounds()&&(t.save(),i.shape.paint(t),t.restore())}drawText(i,t){i.text!=null&&i.text.checkBounds()&&(t.save(),i.text.paint(t),t.restore())}drawOverlays(i,t){i.overlays!=null&&i.overlays.visit(function(e,n){n instanceof mxShape&&n.paint(t)})}}class mxCellStatePreview{constructor(i){c(this,"count",0);this.deltas=new mxDictionary,this.graph=i}isEmpty(){return this.count==0}moveState(i,t,e,n,s){n=n??!0,s=s??!0;var l=this.deltas.get(i.cell);return l==null?(l={point:new mxPoint(t,e),state:i},this.deltas.put(i.cell,l),this.count++):n?(l.point.x+=t,l.point.y+=e):(l.point.x=t,l.point.y=e),s&&this.addEdges(i),l.point}show(i){this.deltas.visit((t,e)=>{this.translateState(e.state,e.point.x,e.point.y)}),this.deltas.visit((t,e)=>{this.revalidateState(e.state,e.point.x,e.point.y,i)})}translateState(i,t,e){if(i!=null){var n=this.graph.getModel();if(n.isVertex(i.cell)){i.view.updateCellState(i);var s=n.getGeometry(i.cell);(t!=0||e!=0)&&s!=null&&(!s.relative||this.deltas.get(i.cell)!=null)&&(i.x+=t,i.y+=e)}for(var l=n.getChildCount(i.cell),r=0;r<l;r++)this.translateState(i.view.getState(n.getChildAt(i.cell,r)),t,e)}}revalidateState(i,t,e,n){if(i!=null){var s=this.graph.getModel();s.isEdge(i.cell)&&i.view.updateCellState(i);var l=this.graph.getCellGeometry(i.cell),r=i.view.getState(s.getParent(i.cell));(t!=0||e!=0)&&l!=null&&l.relative&&s.isVertex(i.cell)&&(r==null||s.isVertex(r.cell)||this.deltas.get(i.cell)!=null)&&(i.x+=t,i.y+=e),this.graph.cellRenderer.redraw(i),n!=null&&n(i);for(var o=s.getChildCount(i.cell),h=0;h<o;h++)this.revalidateState(this.graph.view.getState(s.getChildAt(i.cell,h)),t,e,n)}}addEdges(i){for(var t=this.graph.getModel(),e=t.getEdgeCount(i.cell),n=0;n<e;n++){var s=i.view.getState(t.getEdgeAt(i.cell,n));s!=null&&this.moveState(s,0,0)}}}class mxMorphing extends mxAnimation{constructor(t,e,n,s){super(s);c(this,"step",0);c(this,"cells",null);this.graph=t,this.steps=e??6,this.ease=n??1.5}updateAnimation(){super.updateAnimation();var t=new mxCellStatePreview(this.graph);if(this.cells!=null)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()}show(t){t.show()}animateCell(t,e,n){var s=this.graph.getView().getState(t),l=null;if(s!=null&&(l=this.getDelta(s),this.graph.getModel().isVertex(t)&&(l.x!=0||l.y!=0))){var r=this.graph.view.getTranslate(),o=this.graph.view.getScale();l.x+=r.x*o,l.y+=r.y*o,e.moveState(s,-l.x/this.ease,-l.y/this.ease)}if(n&&!this.stopRecursion(s,l))for(var h=this.graph.getModel().getChildCount(t),u=0;u<h;u++)this.animateCell(this.graph.getModel().getChildAt(t,u),e,n)}stopRecursion(t,e){return e!=null&&(e.x!=0||e.y!=0)}getDelta(t){var e=this.getOriginForCell(t.cell),n=this.graph.getView().getTranslate(),s=this.graph.getView().getScale(),l=t.x/s-n.x,r=t.y/s-n.y;return new mxPoint((e.x-l)*s,(e.y-r)*s)}getOriginForCell(t){var e=null;if(t!=null){var n=this.graph.getModel().getParent(t),s=this.graph.getCellGeometry(t);if(e=this.getOriginForCell(n),s!=null)if(s.relative){var l=this.graph.getCellGeometry(n);l!=null&&(e.x+=s.x*l.width,e.y+=s.y*l.height)}else e.x+=s.x,e.y+=s.y}if(e==null){var r=this.graph.view.getTranslate();e=new mxPoint(-r.x,-r.y)}return e}}bootstrap();class Sidebar{constructor(i,t){this.editorUi=i,this.container=t,this.palettes=new Object,this.taglist=new Object,this.showTooltips=!0,this.graph=i.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=mxUtils$1.bind(this,function(){this.showTooltips=!0}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=mxUtils$1.bind(this,function(){this.showTooltips=!1,this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=mxUtils$1.bind(this,function(e){for(var n=mxEvent$1.getSource(e);n!=null;){if(n==this.currentElt)return;n=n.parentNode}this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=mxUtils$1.bind(this,function(e){e.toElement==null&&e.relatedTarget==null&&this.hideTooltip()}),mxEvent$1.addListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),mxEvent$1.addListener(t,"scroll",mxUtils$1.bind(this,function(){this.showTooltips=!0,this.hideTooltip()})),this.init()}}Sidebar.prototype.init=function(){var a=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(a),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources$1.get("arrows"),a+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.addBpmnPalette(a,!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",a+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources$1.get("clipart"),a+"/clipart/","_128x128.png",["Earth_globe","Empty_Folder","Full_Folder","Gear","Lock","Software","Virus","Email","Database","Router_Icon","iPad","iMac","Laptop","MacBook","Monitor_Tower","Printer","Server_Tower","Workstation","Firewall_02","Wireless_Router_N","Credit_Card","Piggy_Bank","Graph","Safe","Shopping_Cart","Suit1","Suit2","Suit3","Pilot1","Worker1","Soldier1","Doctor1","Tech1","Security1","Telesales1"],null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif";Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif";Sidebar.prototype.searchImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=":IMAGE_PATH+"/search.png";Sidebar.prototype.dragPreviewBorder="1px dashed black";Sidebar.prototype.enableTooltips=!0;Sidebar.prototype.tooltipBorder=16;Sidebar.prototype.tooltipDelay=300;Sidebar.prototype.dropTargetDelay=200;Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png";Sidebar.prototype.thumbWidth=42;Sidebar.prototype.thumbHeight=42;Sidebar.prototype.minThumbStrokeWidth=1;Sidebar.prototype.thumbAntiAlias=!1;Sidebar.prototype.thumbPadding=document.documentMode>=5?2:3;Sidebar.prototype.thumbBorder=2;urlParams["sidebar-entries"]!="large"&&(Sidebar.prototype.thumbPadding=document.documentMode>=5?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0);Sidebar.prototype.sidebarTitleSize=9;Sidebar.prototype.sidebarTitles=!1;Sidebar.prototype.tooltipTitles=!0;Sidebar.prototype.maxTooltipWidth=400;Sidebar.prototype.maxTooltipHeight=400;Sidebar.prototype.addStencilsToIndex=!0;Sidebar.prototype.defaultImageWidth=80;Sidebar.prototype.defaultImageHeight=80;Sidebar.prototype.getTooltipOffset=function(){return new mxPoint(0,0)};Sidebar.prototype.showTooltip=function(a,i,t,e,n,s){if(this.enableTooltips&&this.showTooltips&&this.currentElt!=a){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null);var l=mxUtils$1.bind(this,function(){this.tooltip==null&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new Graph$1(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative")),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),t>this.maxTooltipWidth||e>this.maxTooltipHeight?this.graph2.view.scale=Math.round(Math.min(this.maxTooltipWidth/t,this.maxTooltipHeight/e)*100)/100:this.graph2.view.scale=1,this.tooltip.style.display="block",this.graph2.labelsVisible=s==null||s;var r=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject;var o=this.graph2.cloneCells(i);this.editorUi.insertHandler(o,null,this.graph2.model),this.graph2.addCells(o),mxClient.NO_FO=r;var h=this.graph2.getGraphBounds(),u=h.width+2*this.tooltipBorder+4,d=h.height+2*this.tooltipBorder;mxClient.IS_QUIRKS?(d+=4,this.tooltip.style.overflow="hidden"):this.tooltip.style.overflow="visible",this.tooltip.style.width=u+"px";var m=u;if(this.tooltipTitles&&n!=null&&n.length>0){this.tooltipTitle==null?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",mxUtils$1.write(this.tooltipTitle,n),m=Math.min(this.maxTooltipWidth,Math.max(u,this.tooltipTitle.scrollWidth+4));var g=this.tooltipTitle.offsetHeight+10;d+=g,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-g+"px":(d-=6,this.tooltipTitle.style.top=d-g+"px")}else this.tooltipTitle!=null&&this.tooltipTitle.parentNode!=null&&(this.tooltipTitle.style.display="none");m>u&&(this.tooltip.style.width=m+"px"),this.tooltip.style.height=d+"px";var x=-Math.round(h.x-this.tooltipBorder)+(m>u?(m-u)/2:0),v=-Math.round(h.y-this.tooltipBorder),C=document.body,E=document.documentElement,b=this.getTooltipOffset(),w=Math.max(C.clientHeight||0,E.clientHeight),$=this.container.clientWidth+this.editorUi.splitSize+3+this.editorUi.container.offsetLeft+b.x,P=Math.min(w-d-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+a.offsetTop-this.container.scrollTop-d/2+16))+b.y;mxClient.IS_SVG?x!=0||v!=0?this.graph2.view.canvas.setAttribute("transform","translate("+x+","+v+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=x+"px",this.graph2.view.drawPane.style.top=v+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=$+"px",this.tooltip.style.top=P+"px"});this.tooltip!=null&&this.tooltip.style.display!="none"?l():this.thread=window.setTimeout(l,this.tooltipDelay),this.currentElt=a}};Sidebar.prototype.hideTooltip=function(){this.thread!=null&&(window.clearTimeout(this.thread),this.thread=null),this.tooltip!=null&&(this.tooltip.style.display="none",this.currentElt=null)};Sidebar.prototype.addDataEntry=function(a,i,t,e,n){return this.addEntry(a,mxUtils$1.bind(this,function(){return this.createVertexTemplateFromData(n,i,t,e)}))};Sidebar.prototype.addEntries=function(a){for(var i=0;i<a.length;i++)mxUtils$1.bind(this,function(t){var e=t.data,n=t.title!=null?t.title:"";t.tags!=null&&(n+=" "+t.tags),e!=null&&n.length>0?this.addEntry(n,mxUtils$1.bind(this,function(){e=this.editorUi.convertDataUri(e);var s="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return t.aspect=="fixed"&&(s+="aspect=fixed;"),this.createVertexTemplate(s+"image="+e,t.w,t.h,"",t.title||"",!1,!1,!0)})):t.xml!=null&&n.length>0&&this.addEntry(n,mxUtils$1.bind(this,function(){var s=this.editorUi.stringToCells(Graph$1.decompress(t.xml));return this.createVertexTemplateFromCells(s,t.w,t.h,t.title||"",!0,!1,!0)}))})(a[i])};Sidebar.prototype.setCurrentSearchEntryLibrary=function(a,i){this.currentSearchEntryLibrary=a!=null?{id:a,lib:i}:null};Sidebar.prototype.addEntry=function(a,i){if(this.taglist!=null&&a!=null&&a.length>0){this.currentSearchEntryLibrary!=null&&(i.parentLibraries=[this.currentSearchEntryLibrary]);for(var t=a.toLowerCase().replace(/[\/\,\(\)]/g," ").split(" "),e=[],n={},s=0;s<t.length;s++){n[t[s]]==null&&(n[t[s]]=!0,e.push(t[s]));var l=t[s].replace(/\.*\d*$/,"");l!=t[s]&&n[l]==null&&(n[l]=!0,e.push(l))}for(var s=0;s<e.length;s++)this.addEntryForTag(e[s],i)}return i};Sidebar.prototype.addEntryForTag=function(a,i){if(a!=null&&a.length>1){var t=this.taglist[a];typeof t!="object"&&(t={entries:[]},this.taglist[a]=t),t.entries.push(i)}};Sidebar.prototype.searchEntries=function(a,i,t,e,n){if(this.taglist!=null&&a!=null){for(var s=a.toLowerCase().split(" "),l=new mxDictionary,r=(t+1)*i,o=[],h=0,u=0;u<s.length;u++)if(s[u].length>0){var d=this.taglist[s[u]],m=new mxDictionary;if(d!=null){var g=d.entries;o=[];for(var x=0;x<g.length;x++){var d=g[x];if(h==0==(l.get(d)==null)&&(m.put(d,d),o.push(d),u==s.length-1&&o.length==r)){e(o.slice(t*i,r),r,!0,s);return}}}else o=[];l=m,h++}var v=o.length;e(o.slice(t*i,(t+1)*i),v,!1,s)}else e([],null,null,s)};Sidebar.prototype.filterTags=function(a){if(a!=null){for(var i=a.split(" "),t=[],e={},n=0;n<i.length;n++)e[i[n]]==null&&(e[i[n]]="1",t.push(i[n]));return t.join(" ")}return null};Sidebar.prototype.cloneCell=function(a,i){var t=a.clone();return i!=null&&(t.value=i),t};Sidebar.prototype.showPopupMenuForEntry=function(a,i,t){};Sidebar.prototype.addSearchPalette=function(a){var i=document.createElement("div");i.style.visibility="hidden",this.container.appendChild(i);var t=document.createElement("div");t.className="geSidebar",t.style.boxSizing="border-box",t.style.overflow="hidden",t.style.width="100%",t.style.padding="8px",t.style.paddingTop="14px",t.style.paddingBottom="0px",a||(t.style.display="none");var e=document.createElement("div");e.style.whiteSpace="nowrap",e.style.textOverflow="clip",e.style.paddingBottom="8px",e.style.cursor="default";var n=document.createElement("input");n.setAttribute("placeholder",mxResources$1.get("searchShapes")),n.setAttribute("type","text"),n.style.fontSize="12px",n.style.overflow="hidden",n.style.boxSizing="border-box",n.style.border="solid 1px #d5d5d5",n.style.borderRadius="4px",n.style.width="100%",n.style.outline="none",n.style.padding="6px",n.style.paddingRight="20px",e.appendChild(n);var s=document.createElement("img");s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search")),s.style.position="relative",s.style.left="-18px",mxClient.IS_QUIRKS?(n.style.height="28px",s.style.top="-4px"):s.style.top="1px",s.style.background="url('"+this.editorUi.editor.transparentImage+"')";var l;e.appendChild(s),t.appendChild(e);var r=document.createElement("center"),o=mxUtils$1.button(mxResources$1.get("moreResults"),function(){l()});o.style.display="none",o.style.lineHeight="normal",o.style.fontSize="12px",o.style.padding="6px 12px 6px 12px",o.style.marginTop="4px",o.style.marginBottom="8px",r.style.paddingTop="4px",r.style.paddingBottom="4px",r.appendChild(o),t.appendChild(r);var h="",u=!1,d=!1,m=0,g=new Object,x=12,v=mxUtils$1.bind(this,function(){u=!1,this.currentSearch=null;for(var E=t.firstChild;E!=null;){var b=E.nextSibling;E!=e&&E!=r&&E.parentNode.removeChild(E),E=b}});mxEvent$1.addListener(s,"click",function(){s.getAttribute("src")==Dialog.prototype.closeImage&&(s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search")),o.style.display="none",n.value="",h="",v()),n.focus()}),l=mxUtils$1.bind(this,function(){if(x=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),n.value!=""){if(r.parentNode!=null&&(h!=n.value&&(v(),h=n.value,g=new Object,d=!1,m=0),!u&&!d)){o.setAttribute("disabled","true"),o.style.display="",o.style.cursor="wait",o.innerHTML=mxResources$1.get("loading")+"...",u=!0;var E=new Object;this.currentSearch=E,this.searchEntries(h,x,m,mxUtils$1.bind(this,function(b,w,$,P){if(this.currentSearch==E){b=b??[],u=!1,m++,this.insertSearchHint(t,h,x,m,b,w,$,P),b.length==0&&m==1&&(h=""),r.parentNode!=null&&r.parentNode.removeChild(r);for(var M=0;M<b.length;M++)mxUtils$1.bind(this,function(D){try{var k=D();g[k.innerHTML]==null?(g[k.innerHTML]=D.parentLibraries!=null?D.parentLibraries.slice():[],t.appendChild(k)):D.parentLibraries!=null&&(g[k.innerHTML]=g[k.innerHTML].concat(D.parentLibraries)),mxEvent$1.addGestureListeners(k,null,null,mxUtils$1.bind(this,function(Z){var q=g[k.innerHTML];mxEvent$1.isPopupTrigger(Z)&&this.showPopupMenuForEntry(k,q,Z)})),mxEvent$1.disableContextMenu(k)}catch{}})(b[M]);$?(o.removeAttribute("disabled"),o.innerHTML=mxResources$1.get("moreResults")):(o.innerHTML=mxResources$1.get("reset"),o.style.display="none",d=!0),o.style.cursor="",t.appendChild(r)}}),mxUtils$1.bind(this,function(){o.style.cursor=""}))}}else v(),n.value="",h="",g=new Object,o.style.display="none",d=!1,n.focus()}),mxEvent$1.addListener(n,"keydown",mxUtils$1.bind(this,function(E){E.keyCode==13&&(l(),mxEvent$1.consume(E))})),mxEvent$1.addListener(n,"keyup",mxUtils$1.bind(this,function(E){n.value==""?(s.setAttribute("src",Sidebar.prototype.searchImage),s.setAttribute("title",mxResources$1.get("search"))):(s.setAttribute("src",Dialog.prototype.closeImage),s.setAttribute("title",mxResources$1.get("reset"))),n.value==""?(d=!0,o.style.display="none"):n.value!=h?(o.style.display="none",d=!1):u||(d?o.style.display="none":o.style.display="")})),mxEvent$1.addListener(n,"mousedown",function(E){E.stopPropagation&&E.stopPropagation(),E.cancelBubble=!0}),mxEvent$1.addListener(n,"selectstart",function(E){E.stopPropagation&&E.stopPropagation(),E.cancelBubble=!0});var C=document.createElement("div");C.appendChild(t),this.container.appendChild(C),this.palettes.search=[i,C]};Sidebar.prototype.insertSearchHint=function(a,i,t,e,n,s,l,r){if(n.length==0&&e==1){var o=document.createElement("div");o.className="geTitle",o.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",mxUtils$1.write(o,mxResources$1.get("noResultsFor",[i])),a.appendChild(o)}};Sidebar.prototype.addGeneralPalette=function(a){var i="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","general");var t=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("shape=roundedRectangle;rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.addEntry("curve",mxUtils$1.bind(this,function(){var e=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return e.geometry.setTerminalPoint(new mxPoint(0,50),!0),e.geometry.setTerminalPoint(new mxPoint(50,0),!1),e.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],e.geometry.relative=!0,e.edge=!0,this.createEdgeTemplateFromCells([e],e.geometry.width,e.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Arrow",null,i+"bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,i+"directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,i+"dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,i+"dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,i+"simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,i+"bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,i+"directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,i+"link"),this.addEntry(i+"edge title",mxUtils$1.bind(this,function(){var e=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.setTerminalPoint(new mxPoint(100,0),!1),e.geometry.relative=!0,e.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");return n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,e.insert(n),this.createEdgeTemplateFromCells([e],100,0,"Connector with Label")})),this.addEntry(i+"edge title multiplicity",mxUtils$1.bind(this,function(){var e=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.setTerminalPoint(new mxPoint(160,0),!1),e.geometry.relative=!0,e.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,e.insert(n);var s=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return s.geometry.relative=!0,s.setConnectable(!1),s.vertex=!0,e.insert(s),this.createEdgeTemplateFromCells([e],160,0,"Connector with 2 Labels")})),this.addEntry(i+"edge title multiplicity",mxUtils$1.bind(this,function(){var e=new mxCell("Label",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.setTerminalPoint(new mxPoint(160,0),!1),e.geometry.relative=!0,e.edge=!0;var n=new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;");n.geometry.relative=!0,n.setConnectable(!1),n.vertex=!0,e.insert(n);var s=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");s.geometry.relative=!0,s.setConnectable(!1),s.vertex=!0,e.insert(s);var l=new mxCell("Target",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;");return l.geometry.relative=!0,l.setConnectable(!1),l.vertex=!0,e.insert(l),this.createEdgeTemplateFromCells([e],160,0,"Connector with 3 Labels")})),this.addEntry(i+"edge shape symbol message mail email",mxUtils$1.bind(this,function(){var e=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;");e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.setTerminalPoint(new mxPoint(100,0),!1),e.geometry.relative=!0,e.edge=!0;var n=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return n.geometry.relative=!0,n.vertex=!0,n.geometry.offset=new mxPoint(-10,-7),e.insert(n),this.createEdgeTemplateFromCells([e],100,0,"Connector with Symbol")}))];this.addPaletteFunctions("general",mxResources$1.get("general"),a??!0,t),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addMiscPalette=function(a){var i=this,t="line lines connector connectors connection connections arrow arrows ";this.setCurrentSearchEntryLibrary("general","misc");var e=[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,`<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1
Section 1.2
Section 1.3</td></tr><tr><td align="center">Section 2.1
Section 2.2
Section 2.3</td></tr></table>`,"HTML Table 4"),this.addEntry("link hyperlink",mxUtils$1.bind(this,function(){var n=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return n.vertex=!0,this.graph.setLinkForCell(n,"https://www.draw.io"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils$1.bind(this,function(){var n=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return n.vertex=!0,this.graph.setAttributeForCell(n,"placeholders","1"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils$1.bind(this,function(){var n=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return n.vertex=!0,this.graph.setAttributeForCell(n,"placeholders","1"),this.graph.setAttributeForCell(n,"name","Variable"),this.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var n=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;");return s.vertex=!0,n.insert(s),i.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,t+"manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,t+"elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,t+"elbow vertical")];this.addPaletteFunctions("misc",mxResources$1.get("misc"),a??!0,e),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addAdvancedPalette=function(a){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources$1.get("advanced"),a??!1,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addBasicPalette=function(a){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources$1.get("basic"),a+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createAdvancedShapes=function(){var a=this,i=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return i.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return a.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(a.cloneCell(i,"Item 1")),t.insert(a.cloneCell(i,"Item 2")),t.insert(a.cloneCell(i,"Item 3")),a.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return a.createVertexTemplateFromCells([a.cloneCell(i,"List Item")],i.geometry.width,i.geometry.height,"List Item")})]};Sidebar.prototype.addUmlPalette=function(a){var i=this,t=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");t.vertex=!0;var e=new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");e.vertex=!0;var n="uml static class ";this.setCurrentSearchEntryLibrary("uml");var s=[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,n+"object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,n+"interface object instance annotated annotation"),this.addEntry(n+"object instance",function(){var l=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return l.vertex=!0,l.insert(t.clone()),l.insert(e.clone()),l.insert(i.cloneCell(t,"+ method(type): type")),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class")}),this.addEntry(n+"section subsection",function(){var l=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return l.vertex=!0,l.insert(t.clone()),l.insert(t.clone()),l.insert(t.clone()),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class 2")}),this.addEntry(n+"item member method function variable field attribute label",function(){return i.createVertexTemplateFromCells([i.cloneCell(t,"+ item: attribute")],t.geometry.width,t.geometry.height,"Item 1")}),this.addEntry(n+"item member method function variable field attribute label",function(){var l=new mxCell("item: attribute",new mxGeometry(0,0,120,t.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+i.gearImage);return l.vertex=!0,i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Item 2")}),this.addEntry(n+"divider hline line separator",function(){return i.createVertexTemplateFromCells([e.clone()],e.geometry.width,e.geometry.height,"Divider")}),this.addEntry(n+"spacer space gap separator",function(){var l=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return l.vertex=!0,i.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,n+"title label"),this.addEntry(n+"component",function(){var l=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;dropTarget=0;");l.vertex=!0;var r=new mxCell("",new mxGeometry(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;");return r.vertex=!0,r.geometry.relative=!0,r.geometry.offset=new mxPoint(-27,7),l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component")}),this.addEntry(n+"component",function(){var l=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;");l.vertex=!0;var r=new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;");return r.vertex=!0,r.geometry.relative=!0,r.geometry.offset=new mxPoint(-24,4),l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,n+"block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,n+"module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,n+"package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,n+"object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,i.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 3")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,i.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 4")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,i.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Class 5")}),this.addEntry(n+"object instance",function(){var l=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return l.vertex=!0,i.createVertexTemplateFromCells([l.clone()],l.geometry.width,l.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",function(){return i.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var l=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;");l.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return r.geometry.setTerminalPoint(new mxPoint(15,90),!1),r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!0),i.createVertexTemplateFromCells([l,r],30,90,"Start")}),this.addEntry("uml activity state",function(){var l=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;");l.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return r.geometry.setTerminalPoint(new mxPoint(60,100),!1),r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!0),i.createVertexTemplateFromCells([l,r],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var l=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;");l.vertex=!0;var r=new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;");r.vertex=!0,l.insert(r);var o=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return o.geometry.setTerminalPoint(new mxPoint(80,120),!1),o.geometry.relative=!0,o.edge=!0,l.insertEdge(o,!0),i.createVertexTemplateFromCells([l,o],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var l=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;");l.vertex=!0;var r=new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");r.geometry.setTerminalPoint(new mxPoint(180,20),!1),r.geometry.relative=!0,r.geometry.x=-1,r.edge=!0,l.insertEdge(r,!0);var o=new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;");return o.geometry.setTerminalPoint(new mxPoint(40,100),!1),o.geometry.relative=!0,o.geometry.x=-1,o.edge=!0,l.insertEdge(o,!0),i.createVertexTemplateFromCells([l,r,o],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var l=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;");l.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;");return r.geometry.setTerminalPoint(new mxPoint(100,80),!1),r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!0),i.createVertexTemplateFromCells([l,r],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation",function(){var l=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var r=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;");return r.geometry.setTerminalPoint(new mxPoint(-60,0),!0),r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!1),i.createVertexTemplateFromCells([l,r],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",function(){var l=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var r=new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;");r.geometry.setTerminalPoint(new mxPoint(-70,0),!0),r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!1);var o=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;");return o.geometry.setTerminalPoint(new mxPoint(-70,76),!1),o.geometry.relative=!0,o.edge=!0,l.insertEdge(o,!0),i.createVertexTemplateFromCells([l,r,o],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation",function(){var l=new mxCell("",new mxGeometry(0,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;");l.vertex=!0;var r=new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;");return r.geometry.setTerminalPoint(new mxPoint(5,0),!0),r.geometry.points=[new mxPoint(30,0)],r.geometry.relative=!0,r.edge=!0,l.insertEdge(r,!1),i.createVertexTemplateFromCells([l,r],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation",function(){return i.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")}),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createVertexTemplateEntry("shape=partialRectangle;html=1;top=1;align=left;dashed=1;",200,20,"Template1 signature","Template signature",null,null,"template signature"),this.createVertexTemplateEntry("shape=partialRectangle;html=1;top=1;align=left;dashed=1;",200,50,`Template parameter 1
Template parameter 2`,"Template signature",null,null,"template signature"),this.createVertexTemplateEntry("shape=note2;boundedLbl=1;whiteSpace=wrap;html=1;size=25;verticalAlign=top;align=center;",120,60,"Comment1 body","Note",null,null,"uml note"),this.addEntry("uml sequence self call recursion delegation activation",function(){var l=new mxCell("Constraint1 specification",new mxGeometry(0,0,160,60),"shape=note2;boundedLbl=1;whiteSpace=wrap;html=1;size=25;verticalAlign=top;align=center;");l.vertex=!0;var r=new mxCell("<<keyword>>",new mxGeometry(0,0,l.geometry.width,25),"resizeWidth=1;part=1;strokeColor=none;fillColor=none;align=left;spacingLeft=5;");return r.geometry.relative=!0,r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Note")}),this.addEntry(n+"classifier",function(){var l=new mxCell("&lt;&lt;keyword&gt;&gt;<br><b>Classifier1</b><br>{abstract}",new mxGeometry(0,0,140,183),"swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=55;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var r=new mxCell("attributes",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");r.vertex=!0,l.insert(r);var o=new mxCell("attribute1",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");o.vertex=!0,l.insert(o);var h=new mxCell("inherited attribute2",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontColor=#808080;");h.vertex=!0,l.insert(h);var u=new mxCell("...",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");u.vertex=!0,l.insert(u),l.insert(e.clone());var d=new mxCell("operations",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");d.vertex=!0,l.insert(d);var m=new mxCell("operation1",new mxGeometry(0,0,140,20),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return m.vertex=!0,l.insert(m),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("shape=process;fixedSize=1;size=5;fontStyle=1;",140,40,"Classifier1","Classifier",null,null,"classifier"),this.addEntry(n+"classifier",function(){var l=new mxCell("Classifier1",new mxGeometry(0,0,140,183),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var r=new mxCell("internal structure",new mxGeometry(0,0,140,30),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");r.vertex=!0,l.insert(r);var o=new mxCell("",new mxGeometry(0,0,140,140),"strokeColor=none;fillColor=none;");o.vertex=!0,l.insert(o);var h=new mxCell("property1",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");h.geometry.relative=!0,h.geometry.offset=new mxPoint(20,20),h.vertex=!0,o.insert(h);var u=new mxCell("property2",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");u.geometry.relative=!0,u.geometry.offset=new mxPoint(20,90),u.vertex=!0,o.insert(u);var d=new mxCell("connector1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;exitX=0.15;exitY=1;entryX=0.15;entryY=0;spacingLeft=4;");return d.geometry.relative=!0,d.edge=!0,h.insertEdge(d,!0),u.insertEdge(d,!1),o.insert(d),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=1;",140,30,"Association1","Association",null,null,"association"),this.addEntry(n+"classifier",function(){var l=new mxCell("Instance1",new mxGeometry(0,0,140,138),"swimlane;fontStyle=4;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var r=new mxCell("slot1",new mxGeometry(0,0,140,30),"html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");r.vertex=!0,l.insert(r),l.insert(e.clone());var o=new mxCell("internal structure",new mxGeometry(0,0,140,20),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");o.vertex=!0,l.insert(o);var h=new mxCell("",new mxGeometry(0,0,140,50),"strokeColor=none;fillColor=none;");h.vertex=!0,l.insert(h);var u=new mxCell("instance2",new mxGeometry(0,0,80,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");return u.geometry.relative=!0,u.geometry.offset=new mxPoint(30,10),u.vertex=!0,h.insert(u),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=0;",120,40,"Instance1 value","Instance",null,null,"instance"),this.addEntry(n+"classifier",function(){var l=new mxCell("&lt;&lt;enumeration&gt;&gt;<br><b>Enum1</b>",new mxGeometry(0,0,140,70),"swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var r=new mxCell("literal1",new mxGeometry(0,0,140,30),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.addEntry(n+"classifier",function(){var l=new mxCell("0..1",new mxGeometry(0,0,120,50),"align=right;verticalAlign=top;spacingRight=2;");l.vertex=!0;var r=new mxCell("Property1",new mxGeometry(0,1,120,30),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;resizeWidth=1;");return r.geometry.relative=!0,r.geometry.offset=new mxPoint(0,-30),r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("fontStyle=0;dashed=1;",140,30,"Property1","Property",null,null,"property"),this.createVertexTemplateEntry("fontStyle=0;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;spacingLeft=2;",30,30,"port1","Port",null,null,"port"),this.addEntry(n+"component",function(){var l=new mxCell("",new mxGeometry(0,0,140,200),"fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;marginBottom=0;");l.vertex=!0;var r=new mxCell("Component",new mxGeometry(0,0,140,40),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");r.vertex=!0,l.insert(r);var o=new mxCell("",new mxGeometry(1,0,16,20),"shape=module;jettyWidth=10;jettyHeight=4;");o.vertex=!0,o.geometry.relative=!0,o.geometry.offset=new mxPoint(-25,9),r.insert(o),l.insert(e.clone());var h=new mxCell("provided interfaces",new mxGeometry(0,0,140,25),"html=1;align=center;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");h.vertex=!0,l.insert(h);var u=new mxCell("Interface1",new mxGeometry(0,0,140,25),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");u.vertex=!0,l.insert(u),l.insert(e.clone());var d=new mxCell("required interfaces",new mxGeometry(0,0,140,25),"html=1;align=center;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");d.vertex=!0,l.insert(d);var m=new mxCell("Interface2",new mxGeometry(0,0,140,30),"html=1;align=left;spacingLeft=4;verticalAlign=top;strokeColor=none;fillColor=none;");return m.vertex=!0,l.insert(m),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Component")}),this.addEntry(n+"classifier",function(){var l=new mxCell("",new mxGeometry(0,0,270,230),"shape=ellipse;container=1;horizontal=1;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;html=1;dashed=1;collapsible=0;");l.vertex=!0;var r=new mxCell("Collaboration1",new mxGeometry(0,0,270,30),"html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];resizeWidth=1;");r.vertex=!0,l.insert(r);var o=new mxCell("",new mxGeometry(.145,0,192,8),"line;strokeWidth=1;fillColor=none;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;dashed=1;resizeWidth=1;");o.geometry.relative=!0,o.geometry.offset=new mxPoint(0,30),o.vertex=!0,l.insert(o);var h=new mxCell("Classifier1",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");h.geometry.relative=!0,h.geometry.offset=new mxPoint(85,50),h.vertex=!0,l.insert(h);var u=new mxCell("Collaboration use 1",new mxGeometry(0,0,140,30),"shape=ellipse;html=1;align=center;verticalAlign=middle;rotatable=0;dashed=1;");u.geometry.relative=!0,u.geometry.offset=new mxPoint(65,110),u.vertex=!0,l.insert(u);var d=new mxCell("property1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;spacingLeft=4;");d.geometry.relative=!0,d.edge=!0,h.insertEdge(d,!0),u.insertEdge(d,!1),l.insert(d);var m=new mxCell("Classifier2",new mxGeometry(0,0,100,30),"html=1;align=center;verticalAlign=middle;rotatable=0;");m.geometry.relative=!0,m.geometry.offset=new mxPoint(85,170),m.vertex=!0,l.insert(m);var g=new mxCell("property1",new mxGeometry(0,0,0,0),"edgeStyle=none;endArrow=none;verticalAlign=middle;labelBackgroundColor=none;endSize=12;html=1;align=left;endFill=0;spacingLeft=4;");return g.geometry.relative=!0,g.edge=!0,u.insertEdge(g,!0),m.insertEdge(g,!1),l.insert(g),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.createVertexTemplateEntry("shape=folder;fontStyle=1;tabWidth=80;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;",150,80,"Package1","Package",null,null,n+"package"),this.addEntry(n+"package",function(){var l=new mxCell("Package1",new mxGeometry(0,0,150,100),"shape=folder;fontStyle=1;tabWidth=110;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;labelInHeader=1;");l.vertex=!0;var r=new mxCell("Packaged element1",new mxGeometry(0,0,110,30),"html=1;");return r.geometry.relative=!0,r.geometry.offset=new mxPoint(20,50),r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Classifier")}),this.addEntry(n+"package",function(){var l=new mxCell("Model1",new mxGeometry(0,0,150,80),"shape=folder;fontStyle=1;tabWidth=110;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;folderSymbol=triangle;");return l.vertex=!0,i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Package")}),this.addEntry(n+"stereotype",function(){var l=new mxCell("",new mxGeometry(0,0,160,75),"shape=note2;size=25;childLayout=stackLayout;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;container=1;");l.vertex=!0;var r=new mxCell("&lt;&lt;stereotype1&gt;&gt;",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");r.vertex=!0,l.insert(r);var o=new mxCell("stereotype property 1",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");o.vertex=!0,l.insert(o);var h=new mxCell("stereotype property 2",new mxGeometry(0,0,160,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return h.vertex=!0,l.insert(h),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Stereotype")}),this.addEntry(n+"class",function(){var l=new mxCell("Class1",new mxGeometry(0,0,140,79),"swimlane;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=29;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;");l.vertex=!0;var r=new mxCell("&lt;&lt;stereotype1&gt;&gt;",new mxGeometry(0,0,140,25),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");r.vertex=!0,l.insert(r);var o=new mxCell("stereotype property 1",new mxGeometry(0,0,140,25),"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return o.vertex=!0,l.insert(o),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"Class")}),this.createVertexTemplateEntry("text;html=1;align=center;",200,25,"&lt;&lt;stereotype1, stereotype2...&gt;&gt;","Label",null,null,n+"label"),this.createVertexTemplateEntry("ellipse;",50,25,"icon","Icon",null,null,n+"icon"),this.addEntry(n+"region",function(){var l=new mxCell("",new mxGeometry(60,0,10,100),"line;strokeWidth=1;direction=south;html=1;dashed=1;dashPattern=20 20;");l.vertex=!0;var r=new mxCell("Region 1",new mxGeometry(0,40,60,20),"text;align=right;");r.vertex=!0;var o=new mxCell("Region 2",new mxGeometry(70,40,60,20),"text;align=left;");return o.vertex=!0,i.createVertexTemplateFromCells([l,r,o],130,l.geometry.height,"Region")}),this.addEntry(n+"State",function(){var l=new mxCell("State1<br>[invariant1]<br>&lt;&lt;extended/final&gt;&gt;",new mxGeometry(0,0,140,176),"swimlane;fontStyle=4;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;html=1;rounded=1;absoluteArcSize=1;arcSize=50;");l.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,140,50),"fillColor=none;strokeColor=none;container=1;collapsible=0;");r.vertex=!0,l.insert(r);var o=new mxCell("State2",new mxGeometry(30,10,80,30),"html=1;align=center;verticalAlign=middle;rounded=1;absoluteArcSize=1;arcSize=10;");o.vertex=!0,r.insert(o),l.insert(e.clone());var h=new mxCell("behavior1",new mxGeometry(0,0,140,25),"fillColor=none;strokeColor=none;align=left;verticalAlign=middle;spacingLeft=5;");h.vertex=!0,l.insert(h),l.insert(e.clone());var u=new mxCell("transition1",new mxGeometry(0,0,140,25),"fillColor=none;strokeColor=none;align=left;verticalAlign=middle;spacingLeft=5;");return u.vertex=!0,l.insert(u),i.createVertexTemplateFromCells([l],l.geometry.width,l.geometry.height,"State")}),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=1;",140,40,"State1","State",null,null,n+"state"),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=0;",140,40,"State","State",null,null,n+"state"),this.createVertexTemplateEntry("shape=folder;align=center;verticalAlign=middle;fontStyle=0;tabWidth=100;tabHeight=30;tabPosition=left;html=1;boundedLbl=1;labelInHeader=1;rounded=1;absoluteArcSize=1;arcSize=10;",140,90,"State1","State",null,null,n+"state"),this.createVertexTemplateEntry("html=1;align=center;verticalAlign=top;rounded=1;absoluteArcSize=1;arcSize=10;dashed=0;",140,40,"State1, State2, ...","State",null,null,n+"state"),this.createVertexTemplateEntry("shape=umlState;rounded=1;verticalAlign=top;spacingTop=5;umlStateSymbol=collapseState;absoluteArcSize=1;arcSize=10;",140,60,"State1","State",null,null,n+"state"),this.addEntry(n+"State",function(){var l=new mxCell("State1",new mxGeometry(40,0,140,50),"shape=umlState;rounded=1;verticalAlign=middle;align=center;absoluteArcSize=1;arcSize=10;umlStateConnection=connPointRefEntry;boundedLbl=1;");l.vertex=!0;var r=new mxCell("Entry1",new mxGeometry(0,40,50,20),"text;verticalAlign=middle;align=center;");return r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l,r],180,60,"State")}),this.addEntry(n+"State",function(){var l=new mxCell("State1",new mxGeometry(40,0,140,50),"shape=umlState;rounded=1;verticalAlign=middle;spacingTop=0;absoluteArcSize=1;arcSize=10;umlStateConnection=connPointRefExit;boundedLbl=1;");l.vertex=!0;var r=new mxCell("Exit1",new mxGeometry(0,40,50,20),"text;verticalAlign=middle;align=center;");return r.vertex=!0,l.insert(r),i.createVertexTemplateFromCells([l,r],180,60,"State")}),this.createVertexTemplateEntry("ellipse;fillColor=#000000;strokeColor=none;",30,30,"","Initial state",null,null,n+"initial state"),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#000000;",30,30,"","Final state",null,null,n+"final state"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"H","Shallow History",null,null,n+"shallow history"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"H*","Deep History",null,null,n+"deep history"),this.createVertexTemplateEntry("ellipse;fillColor=#ffffff;strokeColor=#000000;",30,30,"","Entry Point",null,null,n+"entry point"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",30,30,"","Exit Point",null,null,n+"exit point"),this.createVertexTemplateEntry("ellipse;fillColor=#000000;strokeColor=none;",20,20,"","Junction",null,null,n+"junction"),this.createVertexTemplateEntry("rhombus;",30,30,"","Choice",null,null,n+"choice"),this.createVertexTemplateEntry("shape=umlDestroy;",30,30,"","Terminate",null,null,n+"terminate"),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;fillColor=#000000;strokeColor=none;",5,80,"","Join/Fork",null,null,n+"join fork"),this.createVertexTemplateEntry("text;align=center;verticalAlign=middle;dashed=0;fillColor=#ffffff;strokeColor=#000000;",140,40,"OpaqueAction1 spec.","Opaque Action",null,null,n+"opaque action"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var l=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return l.geometry.setTerminalPoint(new mxPoint(80,0),!0),l.geometry.setTerminalPoint(new mxPoint(0,0),!1),l.geometry.relative=!0,l.edge=!0,i.createEdgeTemplateFromCells([l],80,0,"Return")}),this.addEntry("uml relation",function(){var l=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.edge=!0;var r=new mxCell("1",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");return r.geometry.relative=!0,r.setConnectable(!1),r.vertex=!0,l.insert(r),i.createEdgeTemplateFromCells([l],160,0,"Relation 1")}),this.addEntry("uml association",function(){var l=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.edge=!0;var r=new mxCell("parent",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;");r.geometry.relative=!0,r.setConnectable(!1),r.vertex=!0,l.insert(r);var o=new mxCell("child",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;");return o.geometry.relative=!0,o.setConnectable(!1),o.vertex=!0,l.insert(o),i.createEdgeTemplateFromCells([l],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var l=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.geometry.y=3,l.edge=!0,i.createEdgeTemplateFromCells([l],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var l=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.geometry.x=-1,l.geometry.y=3,l.edge=!0,i.createEdgeTemplateFromCells([l],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var l=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;");l.geometry.setTerminalPoint(new mxPoint(0,0),!0),l.geometry.setTerminalPoint(new mxPoint(160,0),!1),l.geometry.relative=!0,l.edge=!0;var r=new mxCell("0..n",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;");r.geometry.relative=!0,r.setConnectable(!1),r.vertex=!0,l.insert(r);var o=new mxCell("1",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;");return o.geometry.relative=!0,o.setConnectable(!1),o.vertex=!0,l.insert(o),i.createEdgeTemplateFromCells([l],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")];this.addPaletteFunctions("uml",mxResources$1.get("uml"),a||!1,s),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.addBpmnPalette=function(a,i){var t=this;this.setCurrentSearchEntryLibrary("bpmn");var e=[this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;",120,80,"Task","Process",null,null,"bpmn task process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;",120,80,"Transaction","Transaction",null,null,"bpmn transaction"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 4;",120,80,`Event
Sub-Process`,"Event Sub-Process",null,null,"bpmn event subprocess sub process sub-process"),this.createVertexTemplateEntry("shape=ext;rounded=1;html=1;whiteSpace=wrap;strokeWidth=3;",120,80,"Call Activity","Call Activity",null,null,"bpmn call activity"),this.addEntry("bpmn subprocess sub process sub-process",function(){var n=new mxCell("Sub-Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-7,-14),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Sub-Process")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","loop","subprocess sub process sub-process looped").join(" "),function(){var n=new mxCell(`Looped
Sub-Process`,new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=mxgraph.bpmn.loop;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-15,-14),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(1,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Looped Sub-Process")}),this.addEntry("bpmn receive task",function(){var n=new mxCell("Receive",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,20,14),"html=1;shape=message;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(7,7),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Receive Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","user_task").join(" "),function(){var n=new mxCell("User",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=mxgraph.bpmn.user_task;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(7,7),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;outlineConnect=0;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(-7,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"User Task")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var n=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(1,1,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;verticalLabelPosition=bottom;verticalAlign=top;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-40,-15),n.insert(s),t.createVertexTemplateFromCells([n],120,95,"Attached Timer Event 1")}),this.addEntry(this.getTagsForStencil("mxgraph.bpmn","timer_start","attached").join(" "),function(){var n=new mxCell("Process",new mxGeometry(0,0,120,80),"html=1;whiteSpace=wrap;rounded=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(1,0,30,30),"shape=mxgraph.bpmn.timer_start;perimeter=ellipsePerimeter;html=1;labelPosition=right;align=left;outlineConnect=0;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-15,10),n.insert(s),t.createVertexTemplateFromCells([n],135,80,"Attached Timer Event 2")}),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;startSize=20;",320,240,"Pool","Pool",null,null,"bpmn pool"),this.createVertexTemplateEntry("swimlane;html=1;horizontal=0;swimlaneLine=0;",300,120,"Lane","Lane",null,null,"bpmn lane"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;rounded=0;",60,50,"","Conversation",null,null,"bpmn conversation"),this.createVertexTemplateEntry("shape=hexagon;html=1;whiteSpace=wrap;perimeter=hexagonPerimeter;strokeWidth=4;rounded=0;",60,50,"","Call Conversation",null,null,"bpmn call conversation"),this.addEntry("bpmn subconversation sub conversation sub-conversation",function(){var n=new mxCell("",new mxGeometry(0,0,60,50),"shape=hexagon;whiteSpace=wrap;html=1;perimeter=hexagonPerimeter;rounded=0;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;shape=plus;");return s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(-7,-14),n.insert(s),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Sub-Conversation")}),this.addEntry("bpmn data object",function(){var n=new mxCell("",new mxGeometry(0,0,40,60),"shape=note;whiteSpace=wrap;size=16;html=1;dropTarget=0;");n.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,14,14),"html=1;shape=singleArrow;arrowWidth=0.4;arrowSize=0.4;outlineConnect=0;");s.vertex=!0,s.geometry.relative=!0,s.geometry.offset=new mxPoint(2,2),n.insert(s);var l=new mxCell("",new mxGeometry(.5,1,14,14),"html=1;whiteSpace=wrap;shape=parallelMarker;outlineConnect=0;");return l.vertex=!0,l.geometry.relative=!0,l.geometry.offset=new mxPoint(-7,-14),n.insert(l),t.createVertexTemplateFromCells([n],n.geometry.width,n.geometry.height,"Data Object")}),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"bpmn data store"),this.createVertexTemplateEntry("shape=plus;html=1;outlineConnect=0;",14,14,"","Sub-Process Marker",null,null,"bpmn subprocess sub process sub-process marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;",14,14,"","Loop Marker",null,null,"bpmn loop marker"),this.createVertexTemplateEntry("shape=parallelMarker;html=1;outlineConnect=0;",14,14,"","Parallel MI Marker",null,null,"bpmn parallel mi marker"),this.createVertexTemplateEntry("shape=parallelMarker;direction=south;html=1;outlineConnect=0;",14,14,"","Sequential MI Marker",null,null,"bpmn sequential mi marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.ad_hoc;fillColor=#000000;html=1;outlineConnect=0;",14,14,"","Ad Hoc Marker",null,null,"bpmn ad hoc marker"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.compensation;html=1;outlineConnect=0;",14,14,"","Compensation Marker",null,null,"bpmn compensation marker"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;fillColor=#000000;strokeColor=#ffffff;strokeWidth=2;",40,30,"","Send Task",null,null,"bpmn send task"),this.createVertexTemplateEntry("shape=message;whiteSpace=wrap;html=1;outlineConnect=0;",40,30,"","Receive Task",null,null,"bpmn receive task"),this.createVertexTemplateEntry("shape=mxgraph.bpmn.user_task;html=1;outlineConnect=0;",14,14,"","User Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.manual_task;html=1;outlineConnect=0;",14,14,"","Manual Task",null,null,this.getTagsForStencil("mxgraph.bpmn","user_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.business_rule_task;html=1;outlineConnect=0;",14,14,"","Business Rule Task",null,null,this.getTagsForStencil("mxgraph.bpmn","business_rule_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.service_task;html=1;outlineConnect=0;",14,14,"","Service Task",null,null,this.getTagsForStencil("mxgraph.bpmn","service_task").join(" ")),this.createVertexTemplateEntry("shape=mxgraph.bpmn.script_task;html=1;outlineConnect=0;",14,14,"","Script Task",null,null,this.getTagsForStencil("mxgraph.bpmn","script_task").join(" ")),this.createVertexTemplateEntry("html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;",50,100,"","Annotation",null,null,this.getTagsForStencil("bpmn","annotation_1","bpmn business process model ").join(" ")),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.addDataEntry("container swimlane pool horizontal",480,380,"Horizontal Pool 1","zZRLbsIwEIZP4709TlHXhJYNSEicwCIjbNWJkWNKwumZxA6IlrRUaisWlmb+eX8LM5mXzdyrnV66Ai2TL0zm3rkQrbLJ0VoG3BRMzhgAp8fgdSQq+ijfKY9VuKcAYsG7snuMyso5G8U6tDaJ9cGUVlXkTXUoacuZIHOjjS0WqnX7blYd1OZt8KYea3PE1bCI+CAtVUMq7/o5b46uCmroSn18WFMm+XCdse5GpLq0OPqAzejxvZQun6MrMfiWUg6mCDpmZM8RENdotjqVyUFUdRS259oLSzISztto5Se0i44gcHEn3i9A/IQB3GbQpmi69DskAn4BSTaGBB4Jicj+k8nTGBP5SExg8odMyL38eH3s6kM8AQ=="),this.addDataEntry("container swimlane pool horizontal",480,360,"Horizontal Pool 2","zZTBbsIwDIafJvfU6dDOlI0LSEg8QUQtEi1tUBJGy9PPbcJQWTsxaZs4VLJ//07sT1WYKKpm6eRBrW2JhokXJgpnbYhR1RRoDAOuSyYWDIDTx+B1opr1VX6QDutwTwPEhndpjhiVjbUmij60Jon+pCsja8rmKlQ05SKjcKe0KVeytcfuLh/k7u2SzR16fcbNZZDsRlrLhlTenWedPts6SJMEOseFLTkph6Fj212RbGlwdAGbyeV7KW2+RFthcC1ZTroMKjry5wiIK9R7ldrELInSR2H/2XtlSUHCOY5WfEG76ggCz+7E+w2InzCAcQapIf0fAySzESQZ/AKSfAoJPCKS9mbzf0H0NIVIPDAiyP8QEaXX97CvDZ7LDw=="),this.createVertexTemplateEntry("swimlane;startSize=20;horizontal=0;",320,120,"Lane","Horizontal Swimlane",null,null,"swimlane lane pool"),this.addDataEntry("container swimlane pool horizontal",360,480,"Vertical Pool 1","xZRBbsIwEEVP4709ThFrQssGJKSewCIjbNXGyDEl4fSdxKa0NJFQVTULSzP/e+T5b2EmS9esgjrqja/QMvnMZBm8j6lyTYnWMuCmYnLJADgdBi8jruhdflQBD/GRAUgD78qeMClb720S69jaLNZn46w6ULfQ0dGWS0HlThtbrVXrT91bdVS7t2u3CFibC26vi4g7aaMaUjmpNBbiKxnUQyfkjTBEbEZT9VKOtELvMIaWrpxNFXW6IWcpOddo9jqPFfMsqjoJ+8/ZGyQqMqdhZvIHs3WHBrh4kNvvIsNw5Da7OdgXAgKGCMz+gEAxRgCmINDcxZ2CyNMYETkhESj+jwi1t1+r9759ah8="),this.addDataEntry("container swimlane pool vertical",380,480,"Vertical Pool 2","xZTPbsIwDMafJvf86dDOlI0LSEg8QUQtEi1pUBJGy9PPbdJ1G1TqhXGoZH/219g/RSGitM3ay5PaugoMEW9ElN65mCLblGAM4VRXRKwI5xQ/wt8nqqyv0pP0UMc5Bp4Mn9KcISk750wSQ2xNFsNFWyNrzJYqWpxyxTA8KG2qjWzduTsrRHn4GLKlh6CvsBsGYX+krWxQpaiizcc9FjDnnaCc11dXR2lyxyjsuyPy3/Lg4CM0k8v3Ut58Dc5C9C22XHQVVeoQrwkQVaCPKtuKQZQhCcdv78gSg4zzPlpxg3bTEeSUzcR7Q2bWyvz+ytmQr8NPAow/ikAxRYA/kQAr/hPByxQC8cxLsHggAkzH56uv/XrdvgA="),this.createVertexTemplateEntry("swimlane;startSize=20;",120,320,"Lane","Vertical Swimlane",null,null,"swimlane lane pool"),this.createVertexTemplateEntry("rounded=1;arcSize=10;dashed=1;strokeColor=#000000;fillColor=none;gradientColor=none;dashPattern=8 3 1 3;strokeWidth=2;",200,200,"","Group",null,null,this.getTagsForStencil("bpmn","group","bpmn business process model ").join(" ")),this.createEdgeTemplateEntry("endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Sequence Flow",null,"bpmn sequence flow"),this.createEdgeTemplateEntry("startArrow=dash;startSize=8;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Default Flow",null,"bpmn default flow"),this.createEdgeTemplateEntry("startArrow=diamondThin;startFill=0;startSize=14;endArrow=block;endFill=1;endSize=6;html=1;",100,0,"","Conditional Flow",null,"bpmn conditional flow"),this.createEdgeTemplateEntry("startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;",100,0,"","Message Flow 1",null,"bpmn message flow"),this.addEntry("bpmn message flow",function(){var n=new mxCell("",new mxGeometry(0,0,0,0),"startArrow=oval;startFill=0;startSize=7;endArrow=block;endFill=0;endSize=10;dashed=1;html=1;");n.geometry.setTerminalPoint(new mxPoint(0,0),!0),n.geometry.setTerminalPoint(new mxPoint(100,0),!1),n.geometry.relative=!0,n.edge=!0;var s=new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;");return s.geometry.relative=!0,s.vertex=!0,s.geometry.offset=new mxPoint(-10,-7),n.insert(s),t.createEdgeTemplateFromCells([n],100,0,"Message Flow 2")}),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"bpmn link")];this.addPaletteFunctions("bpmn","BPMN "+mxResources$1.get("general"),!1,e),this.setCurrentSearchEntryLibrary()};Sidebar.prototype.createTitle=function(a){var i=document.createElement("a");return i.setAttribute("title",mxResources$1.get("sidebarTooltip")),i.className="geTitle",mxUtils$1.write(i,a),i};Sidebar.prototype.createThumb=function(a,i,t,e,n,s,l,r,o){this.graph.labelsVisible=s==null||s;var h=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),this.graph.addCells(a);var u=this.graph.getGraphBounds(),d=Math.floor(Math.min((i-2*this.thumbBorder)/u.width,(t-2*this.thumbBorder)/u.height)*100)/100;this.graph.view.scaleAndTranslate(d,Math.floor((i-u.width*d)/2/d-u.x),Math.floor((t-u.height*d)/2/d-u.y));var m=null;if(this.graph.dialect==mxConstants$1.DIALECT_SVG&&!mxClient.NO_FO&&this.graph.view.getCanvas().ownerSVGElement!=null?m=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0):(m=this.graph.container.cloneNode(!1),m.innerHTML=this.graph.container.innerHTML,(mxClient.IS_QUIRKS||document.documentMode==8)&&(m.firstChild.style.overflow="visible")),this.graph.getModel().clear(),mxClient.NO_FO=h,mxClient.IS_IE6&&(e.style.backgroundImage="url("+this.editorUi.editor.transparentImage+")"),m.style.position="relative",m.style.overflow="hidden",m.style.left=this.thumbBorder+"px",m.style.top=this.thumbBorder+"px",m.style.width=i+"px",m.style.height=t+"px",m.style.visibility="",m.style.minWidth="",m.style.minHeight="",e.appendChild(m),this.sidebarTitles&&n!=null&&l!=!1){var g=mxClient.IS_QUIRKS?2*this.thumbPadding+2:0;e.style.height=this.thumbHeight+g+this.sidebarTitleSize+8+"px";var x=document.createElement("div");x.style.fontSize=this.sidebarTitleSize+"px",x.style.color="#303030",x.style.textAlign="center",x.style.whiteSpace="nowrap",mxClient.IS_IE&&(x.style.height=this.sidebarTitleSize+12+"px"),x.style.paddingTop="4px",mxUtils$1.write(x,n),e.appendChild(x)}return u};Sidebar.prototype.createItem=function(a,i,t,e,n,s,l){var r=document.createElement("a");r.className="geItem",r.style.overflow="hidden";var o=mxClient.IS_QUIRKS?8+2*this.thumbPadding:2*this.thumbBorder;r.style.width=this.thumbWidth+o+"px",r.style.height=this.thumbHeight+o+"px",r.style.padding=this.thumbPadding+"px",mxClient.IS_IE6&&(r.style.border="none"),mxEvent$1.addListener(r,"click",function(d){mxEvent$1.consume(d)}),this.createThumb(a,this.thumbWidth,this.thumbHeight,r,i,t,e,n,s);var h=new mxRectangle(0,0,n,s);if(a.length>1||a[0].vertex){var u=this.createDragSource(r,this.createDropHandler(a,!0,l,h),this.createDragPreview(n,s),a,h);this.addClickHandler(r,u,a),u.isGuidesEnabled=mxUtils$1.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})}else if(a[0]!=null&&a[0].edge){var u=this.createDragSource(r,this.createDropHandler(a,!1,l,h),this.createDragPreview(n,s),a,h);this.addClickHandler(r,u,a)}return mxClient.IS_IOS||mxEvent$1.addGestureListeners(r,null,mxUtils$1.bind(this,function(d){mxEvent$1.isMouseEvent(d)&&this.showTooltip(r,a,h.width,h.height,i,t)})),r};Sidebar.prototype.updateShapes=function(a,i){var t=this.editorUi.editor.graph,e=t.getCellStyle(a),n=[];t.model.beginUpdate();try{for(var s=t.getModel().getStyle(a),l=["shadow","dashed","dashPattern","fontFamily","fontSize","fontColor","align","startFill","startSize","endFill","endSize","strokeColor","strokeWidth","fillColor","gradientColor","html","part","noEdgeStyle","edgeStyle","elbow","childLayout","recursiveResize","container","collapsible","connectable","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"],r=0;r<i.length;r++){var o=i[r];if(t.getModel().isVertex(o)==t.getModel().isVertex(a)||t.getModel().isEdge(o)==t.getModel().isEdge(a)){var h=t.getCurrentCellStyle(i[r]);if(t.getModel().setStyle(o,s),mxUtils$1.getValue(h,"composite","0")=="1")for(var u=t.model.getChildCount(o),d=u;d>=0;d--)t.model.remove(t.model.getChildAt(o,d));h[mxConstants$1.STYLE_SHAPE]=="umlLifeline"&&e[mxConstants$1.STYLE_SHAPE]!="umlLifeline"&&(t.setCellStyles(mxConstants$1.STYLE_SHAPE,"umlLifeline",[o]),t.setCellStyles("participant",e[mxConstants$1.STYLE_SHAPE],[o]));for(var d=0;d<l.length;d++){var m=h[l[d]];m!=null&&t.setCellStyles(l[d],m,[o])}n.push(o)}}}finally{t.model.endUpdate()}return n};Sidebar.prototype.createDropHandler=function(a,i,t,e){return t=t??!0,mxUtils$1.bind(this,function(n,s,l,r,o,h){for(var u=h?null:mxEvent$1.isTouchEvent(s)||mxEvent$1.isPenEvent(s)?document.elementFromPoint(mxEvent$1.getClientX(s),mxEvent$1.getClientY(s)):mxEvent$1.getSource(s);u!=null&&u!=this.container;)u=u.parentNode;if(u==null&&n.isEnabled()){if(a=n.getImportableCells(a),a.length>0){n.stopEditing();var d=l!=null&&!mxEvent$1.isAltDown(s)?n.isValidDropTarget(l,a,s):!1,m=null;if(l!=null&&!d&&(l=null),!n.isCellLocked(l||n.getDefaultParent())){n.model.beginUpdate();try{if(r=Math.round(r),o=Math.round(o),i&&n.isSplitTarget(l,a,s)){var g=n.view.scale,x=n.view.translate,v=(r+x.x)*g,C=(o+x.y)*g,E=n.cloneCells(a);n.splitEdge(l,E,null,r-e.width/2,o-e.height/2,v,C),m=E}else a.length>0&&(m=n.importCells(a,r,o,l));if(n.layoutManager!=null){var b=n.layoutManager.getLayout(l);if(b!=null)for(var g=n.view.scale,x=n.view.translate,v=(r+x.x)*g,C=(o+x.y)*g,w=0;w<m.length;w++)b.moveCell(m[w],v,C)}t&&(s==null||!mxEvent$1.isShiftDown(s))&&n.fireEvent(new mxEventObject$1("cellsInserted","cells",m))}catch($){this.editorUi.handleError($)}finally{n.model.endUpdate()}m!=null&&m.length>0&&(n.scrollCellToVisible(m[0]),n.setSelectionCells(m)),n.editAfterInsert&&s!=null&&mxEvent$1.isMouseEvent(s)&&m!=null&&m.length==1&&window.setTimeout(function(){n.startEditing(m[0])},0)}}mxEvent$1.consume(s)}})};Sidebar.prototype.createDragPreview=function(a,i){var t=document.createElement("div");return t.style.border=this.dragPreviewBorder,t.style.width=a+"px",t.style.height=i+"px",t};Sidebar.prototype.dropAndConnect=function(a,i,t,e,n){var s=this.getDropAndConnectGeometry(a,i[e],t,i),l=[];if(s!=null){var r=this.editorUi.editor.graph,o=null;r.model.beginUpdate();try{var h=r.getCellGeometry(a),u=r.getCellGeometry(i[e]),d=r.model.getParent(a),m=!0;if(r.layoutManager!=null){var g=r.layoutManager.getLayout(d);g!=null&&g.constructor==mxStackLayout&&(m=!1)}var l=r.model.isEdge(a)?null:r.view.getState(d),x=0,v=0;if(l!=null){var C=l.origin;x=C.x,v=C.y;var E=s.getTerminalPoint(!1);E!=null&&(E.x+=C.x,E.y+=C.y)}var b=!r.isTableRow(a)&&!r.isTableCell(a)&&(r.model.isEdge(a)||h!=null&&!h.relative&&m),w=r.getCellAt((s.x+x+r.view.translate.x)*r.view.scale,(s.y+v+r.view.translate.y)*r.view.scale,null,null,null,function(D,k,Z){return!r.isContainer(D.cell)});if(w!=null&&w!=d){if(l=r.view.getState(w),l!=null){var C=l.origin;d=w,b=!0,r.model.isEdge(a)||(s.x-=C.x-x,s.y-=C.y-v)}}else(!m||r.isTableRow(a)||r.isTableCell(a))&&(s.x+=x,s.y+=v);if(x=u.x,v=u.y,r.model.isEdge(i[e])&&(x=0,v=0),i=r.importCells(i,s.x-(b?x:0),s.y-(b?v:0),b?d:null),l=i,r.model.isEdge(a))r.model.setTerminal(a,i[e],t==mxConstants$1.DIRECTION_NORTH);else if(r.model.isEdge(i[e])){r.model.setTerminal(i[e],a,!0);var $=r.getCellGeometry(i[e]);if($.points=null,$.getTerminalPoint(!1)!=null)$.setTerminalPoint(s.getTerminalPoint(!1),!1);else if(b&&r.model.isVertex(d)){var P=r.view.getState(d),C=P.cell!=r.view.currentRoot?P.origin:new mxPoint(0,0);r.cellsMoved(i,C.x,C.y,null,null,!0)}}else u=r.getCellGeometry(i[e]),x=s.x-Math.round(u.x),v=s.y-Math.round(u.y),s.x=Math.round(u.x),s.y=Math.round(u.y),r.model.setGeometry(i[e],s),r.cellsMoved(i,x,v,null,null,!0),l=i.slice(),o=l.length==1?l[0]:null,i.push(r.insertEdge(null,null,"",a,i[e],r.createCurrentEdgeStyle()));(n==null||!mxEvent$1.isShiftDown(n))&&r.fireEvent(new mxEventObject$1("cellsInserted","cells",i))}catch(M){this.editorUi.handleError(M)}finally{r.model.endUpdate()}r.editAfterInsert&&n!=null&&mxEvent$1.isMouseEvent(n)&&o!=null&&window.setTimeout(function(){r.startEditing(o)},0)}return l};Sidebar.prototype.getDropAndConnectGeometry=function(a,i,t,e){var n=this.editorUi.editor.graph,s=n.view,l=e.length>1,r=n.getCellGeometry(a),o=n.getCellGeometry(i);if(r!=null&&o!=null)if(o=o.clone(),n.model.isEdge(a)){var h=n.view.getState(a),u=h.absolutePoints,d=u[0],m=u[u.length-1];t==mxConstants$1.DIRECTION_NORTH?(o.x=d.x/s.scale-s.translate.x-o.width/2,o.y=d.y/s.scale-s.translate.y-o.height/2):(o.x=m.x/s.scale-s.translate.x-o.width/2,o.y=m.y/s.scale-s.translate.y-o.height/2)}else{if(r.relative){var h=n.view.getState(a);r=r.clone(),r.x=(h.x-s.translate.x)/s.scale,r.y=(h.y-s.translate.y)/s.scale}var g=n.defaultEdgeLength;if(n.model.isEdge(i)&&o.getTerminalPoint(!0)!=null&&o.getTerminalPoint(!1)!=null){var d=o.getTerminalPoint(!0),m=o.getTerminalPoint(!1),x=m.x-d.x,v=m.y-d.y;g=Math.sqrt(x*x+v*v),o.x=r.getCenterX(),o.y=r.getCenterY(),o.width=1,o.height=1,t==mxConstants$1.DIRECTION_NORTH?(o.height=g,o.y=r.y-g,o.setTerminalPoint(new mxPoint(o.x,o.y),!1)):t==mxConstants$1.DIRECTION_EAST?(o.width=g,o.x=r.x+r.width,o.setTerminalPoint(new mxPoint(o.x+o.width,o.y),!1)):t==mxConstants$1.DIRECTION_SOUTH?(o.height=g,o.y=r.y+r.height,o.setTerminalPoint(new mxPoint(o.x,o.y+o.height),!1)):t==mxConstants$1.DIRECTION_WEST&&(o.width=g,o.x=r.x-g,o.setTerminalPoint(new mxPoint(o.x,o.y),!1))}else if(!l&&o.width>45&&o.height>45&&r.width>45&&r.height>45&&(o.width=o.width*(r.height/o.height),o.height=r.height),o.x=r.x+r.width/2-o.width/2,o.y=r.y+r.height/2-o.height/2,t==mxConstants$1.DIRECTION_NORTH?o.y=o.y-r.height/2-o.height/2-g:t==mxConstants$1.DIRECTION_EAST?o.x=o.x+r.width/2+o.width/2+g:t==mxConstants$1.DIRECTION_SOUTH?o.y=o.y+r.height/2+o.height/2+g:t==mxConstants$1.DIRECTION_WEST&&(o.x=o.x-r.width/2-o.width/2-g),n.model.isEdge(i)&&o.getTerminalPoint(!0)!=null&&i.getTerminal(!1)!=null){var C=n.getCellGeometry(i.getTerminal(!1));C!=null&&(t==mxConstants$1.DIRECTION_NORTH?(o.x-=C.getCenterX(),o.y-=C.getCenterY()+C.height/2):t==mxConstants$1.DIRECTION_EAST?(o.x-=C.getCenterX()-C.width/2,o.y-=C.getCenterY()):t==mxConstants$1.DIRECTION_SOUTH?(o.x-=C.getCenterX(),o.y-=C.getCenterY()-C.height/2):t==mxConstants$1.DIRECTION_WEST&&(o.x-=C.getCenterX()+C.width/2,o.y-=C.getCenterY()))}}return o};Sidebar.prototype.isDropStyleEnabled=function(a,i){var t=!0;if(i!=null&&a.length==1){var e=this.graph.getCellStyle(a[i]);e!=null&&(t=mxUtils$1.getValue(e,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(e,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)}return t};Sidebar.prototype.isDropStyleTargetIgnored=function(a){return this.graph.isSwimlane(a.cell)||this.graph.isTableCell(a.cell)||this.graph.isTableRow(a.cell)||this.graph.isTable(a.cell)};Sidebar.prototype.createDragSource=function(a,i,t,e,n){for(var s=this.editorUi,l=s.editor.graph,r=null,o=null,h=this,u=0;u<e.length&&(o==null&&l.model.isVertex(e[u])?o=u:r==null&&l.model.isEdge(e[u])&&l.model.getTerminal(e[u],!0)==null&&(r=u),!(o!=null&&r!=null));u++);var d=this.isDropStyleEnabled(e,o),m=mxUtils$1.makeDraggable(a,l,mxUtils$1.bind(this,function(K,nt,ht,bt,$t){if(this.updateThread!=null&&window.clearTimeout(this.updateThread),e!=null&&E!=null&&X==D){var Dt=K.isCellSelected(E.cell)?K.getSelectionCells():[E.cell],ct=this.updateShapes(K.model.isEdge(E.cell)?e[0]:e[o],Dt);K.setSelectionCells(ct)}else if(e!=null&&X!=null&&v!=null&&X!=D){var Et=K.model.isEdge(v.cell)||r==null?o:r;K.setSelectionCells(this.dropAndConnect(v.cell,e,j,Et,nt))}else i.apply(this,arguments);this.editorUi.hoverIcons!=null&&this.editorUi.hoverIcons.update(K.view.getState(K.getSelectionCell()))}),t,0,0,l.autoscroll,!0,!0);l.addListener(mxEvent$1.ESCAPE,function(K,nt){m.isActive()&&m.reset()});var g=m.mouseDown;m.mouseDown=function(K){!mxEvent$1.isPopupTrigger(K)&&!mxEvent$1.isMultiTouchEvent(K)&&(l.stopEditing(),g.apply(this,arguments))};function x(K,nt){var ht=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"?(ht=document.createElement(mxClient.VML_PREFIX+":image"),ht.setAttribute("src",K.src),ht.style.borderStyle="none"):(ht=document.createElement("div"),ht.style.backgroundImage="url("+K.src+")",ht.style.backgroundPosition="center",ht.style.backgroundRepeat="no-repeat"),ht.style.width=K.width+4+"px",ht.style.height=K.height+4+"px",ht.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(ht=mxUtils$1.createImage(K.src),ht.style.width=K.width+"px",ht.style.height=K.height+"px"),nt!=null&&ht.setAttribute("title",nt),ht.style.position="absolute",ht.style.cursor="crosshair",ht}var v=null,C=null,E=null,b=!1,w=x(this.triangleUp,mxResources$1.get("connect")),$=x(this.triangleRight,mxResources$1.get("connect")),P=x(this.triangleDown,mxResources$1.get("connect")),M=x(this.triangleLeft,mxResources$1.get("connect")),D=x(this.refreshTarget,mxResources$1.get("replace")),k=null,Z=x(this.roundDrop),q=x(this.roundDrop),j=mxConstants$1.DIRECTION_NORTH,X=null;function rt(K,nt,ht,bt){return bt.parentNode!=null&&(mxUtils$1.contains(ht,K,nt)?(mxUtils$1.setOpacity(bt,100),X=bt):mxUtils$1.setOpacity(bt,bt==D?30:20)),ht}var et=m.createPreviewElement;m.createPreviewElement=function(K){var nt=et.apply(this,arguments);return mxClient.IS_SVG&&(nt.style.pointerEvents="none"),this.previewElementWidth=nt.style.width,this.previewElementHeight=nt.style.height,nt};var Y=m.dragEnter;m.dragEnter=function(K,nt){s.hoverIcons!=null&&s.hoverIcons.setDisplay("none"),Y.apply(this,arguments)};var G=m.dragExit;m.dragExit=function(K,nt){s.hoverIcons!=null&&s.hoverIcons.setDisplay(""),G.apply(this,arguments)},m.dragOver=function(K,nt){if(mxDragSource.prototype.dragOver.apply(this,arguments),this.currentGuide!=null&&X!=null&&this.currentGuide.hide(),this.previewElement!=null){var ht=K.view;if(E!=null&&X==D)this.previewElement.style.display=K.model.isEdge(E.cell)?"none":"",this.previewElement.style.left=E.x+"px",this.previewElement.style.top=E.y+"px",this.previewElement.style.width=E.width+"px",this.previewElement.style.height=E.height+"px";else if(v!=null&&X!=null){m.currentHighlight!=null&&m.currentHighlight.state!=null&&m.currentHighlight.hide();var bt=K.model.isEdge(v.cell)||r==null?o:r,$t=h.getDropAndConnectGeometry(v.cell,e[bt],j,e),Dt=K.model.isEdge(v.cell)?null:K.getCellGeometry(v.cell),ct=K.getCellGeometry(e[bt]),Et=K.model.getParent(v.cell),Ht=ht.translate.x*ht.scale,Ot=ht.translate.y*ht.scale;if(Dt!=null&&!Dt.relative&&K.model.isVertex(Et)&&Et!=ht.currentRoot){var Nt=ht.getState(Et);Ht=Nt.x,Ot=Nt.y}var lt=ct.x,yt=ct.y;K.model.isEdge(e[bt])&&(lt=0,yt=0),this.previewElement.style.left=($t.x-lt)*ht.scale+Ht+"px",this.previewElement.style.top=($t.y-yt)*ht.scale+Ot+"px",e.length==1&&(this.previewElement.style.width=$t.width*ht.scale+"px",this.previewElement.style.height=$t.height*ht.scale+"px"),this.previewElement.style.display=""}else m.currentHighlight.state!=null&&K.model.isEdge(m.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-n.width*ht.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-n.height*ht.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display="")}};var J=new Date().getTime(),tt=0,gt=null,dt=this.editorUi.editor.graph.getCellStyle(e[0]);return m.getDropTarget=mxUtils$1.bind(this,function(K,nt,ht,bt){var $t=!mxEvent$1.isAltDown(bt)&&e!=null?K.getCellAt(nt,ht,null,null,null,function(S,A,I){return K.isContainer(S.cell)}):null;if($t!=null&&!this.graph.isCellConnectable($t)&&!this.graph.model.isEdge($t)){var Dt=this.graph.getModel().getParent($t);this.graph.getModel().isVertex(Dt)&&this.graph.isCellConnectable(Dt)&&($t=Dt)}K.isCellLocked($t)&&($t=null);var ct=K.view.getState($t);X=null;var Et=null;if(gt!=ct?(J=new Date().getTime(),tt=0,gt=ct,this.updateThread!=null&&window.clearTimeout(this.updateThread),ct!=null&&(this.updateThread=window.setTimeout(function(){X==null&&(gt=ct,m.getDropTarget(K,nt,ht,bt))},this.dropTargetDelay+10))):tt=new Date().getTime()-J,d&&tt<2500&&ct!=null&&!mxEvent$1.isShiftDown(bt)&&(mxUtils$1.getValue(ct.style,mxConstants$1.STYLE_SHAPE)!=mxUtils$1.getValue(dt,mxConstants$1.STYLE_SHAPE)&&(mxUtils$1.getValue(ct.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(ct.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE||mxUtils$1.getValue(ct.style,mxConstants$1.STYLE_GRADIENTCOLOR,mxConstants$1.NONE)!=mxConstants$1.NONE)||mxUtils$1.getValue(dt,mxConstants$1.STYLE_SHAPE)=="image"||tt>1500||K.model.isEdge(ct.cell))&&tt>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(ct)&&(K.model.isVertex(ct.cell)&&o!=null||K.model.isEdge(ct.cell)&&K.model.isEdge(e[0]))){E=ct;var Ht=K.model.isEdge(ct.cell)?K.view.getPoint(ct):new mxPoint(ct.getCenterX(),ct.getCenterY());Ht=new mxRectangle(Ht.x-this.refreshTarget.width/2,Ht.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),D.style.left=Math.floor(Ht.x)+"px",D.style.top=Math.floor(Ht.y)+"px",k==null&&(K.container.appendChild(D),k=D.parentNode),rt(nt,ht,Ht,D)}else if(E==null||!mxUtils$1.contains(E,nt,ht)||tt>1500&&!mxEvent$1.isShiftDown(bt))E=null,k!=null&&(D.parentNode.removeChild(D),k=null);else if(E!=null&&k!=null){var Ht=K.model.isEdge(E.cell)?K.view.getPoint(E):new mxPoint(E.getCenterX(),E.getCenterY());Ht=new mxRectangle(Ht.x-this.refreshTarget.width/2,Ht.y-this.refreshTarget.height/2,this.refreshTarget.width,this.refreshTarget.height),rt(nt,ht,Ht,D)}if(b&&v!=null&&!mxEvent$1.isAltDown(bt)&&X==null){if(Et=mxRectangle.fromRectangle(v),K.model.isEdge(v.cell)){var Ot=v.absolutePoints;if(Z.parentNode!=null){var Nt=Ot[0];Et.add(rt(nt,ht,new mxRectangle(Nt.x-this.roundDrop.width/2,Nt.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),Z))}if(q.parentNode!=null){var lt=Ot[Ot.length-1];Et.add(rt(nt,ht,new mxRectangle(lt.x-this.roundDrop.width/2,lt.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),q))}}else{var yt=mxRectangle.fromRectangle(v);v.shape!=null&&v.shape.boundingBox!=null&&(yt=mxRectangle.fromRectangle(v.shape.boundingBox)),yt.grow(this.graph.tolerance),yt.grow(HoverIcons.prototype.arrowSpacing);var _t=this.graph.selectionCellsHandler.getHandler(v.cell);_t!=null&&(yt.x-=_t.horizontalOffset/2,yt.y-=_t.verticalOffset/2,yt.width+=_t.horizontalOffset,yt.height+=_t.verticalOffset,_t.rotationShape!=null&&_t.rotationShape.node!=null&&_t.rotationShape.node.style.visibility!="hidden"&&_t.rotationShape.node.style.display!="none"&&_t.rotationShape.boundingBox!=null&&yt.add(_t.rotationShape.boundingBox)),Et.add(rt(nt,ht,new mxRectangle(v.getCenterX()-this.triangleUp.width/2,yt.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),w)),Et.add(rt(nt,ht,new mxRectangle(yt.x+yt.width,v.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),$)),Et.add(rt(nt,ht,new mxRectangle(v.getCenterX()-this.triangleDown.width/2,yt.y+yt.height,this.triangleDown.width,this.triangleDown.height),P)),Et.add(rt(nt,ht,new mxRectangle(yt.x-this.triangleLeft.width,v.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),M))}Et!=null&&Et.grow(10)}j=mxConstants$1.DIRECTION_NORTH,X==$?j=mxConstants$1.DIRECTION_EAST:X==P||X==q?j=mxConstants$1.DIRECTION_SOUTH:X==M&&(j=mxConstants$1.DIRECTION_WEST),E!=null&&X==D&&(ct=E);var Rt=(o==null||K.isCellConnectable(e[o]))&&(K.model.isEdge($t)&&o!=null||K.model.isVertex($t)&&K.isCellConnectable($t));if(v!=null&&tt>=5e3||v!=ct&&(Et==null||!mxUtils$1.contains(Et,nt,ht)||tt>500&&X==null&&Rt))if(b=!1,v=tt<5e3&&tt>this.dropTargetDelay||K.model.isEdge($t)?ct:null,v!=null&&Rt){for(var Yt=[Z,q,w,$,P,M],Zt=0;Zt<Yt.length;Zt++)Yt[Zt].parentNode!=null&&Yt[Zt].parentNode.removeChild(Yt[Zt]);if(K.model.isEdge($t)){var Ot=ct.absolutePoints;if(Ot!=null){var Nt=Ot[0],lt=Ot[Ot.length-1],Qt=K.tolerance;new mxRectangle(nt-Qt,ht-Qt,2*Qt,2*Qt),Z.style.left=Math.floor(Nt.x-this.roundDrop.width/2)+"px",Z.style.top=Math.floor(Nt.y-this.roundDrop.height/2)+"px",q.style.left=Math.floor(lt.x-this.roundDrop.width/2)+"px",q.style.top=Math.floor(lt.y-this.roundDrop.height/2)+"px",K.model.getTerminal($t,!0)==null&&K.container.appendChild(Z),K.model.getTerminal($t,!1)==null&&K.container.appendChild(q)}}else{var yt=mxRectangle.fromRectangle(ct);ct.shape!=null&&ct.shape.boundingBox!=null&&(yt=mxRectangle.fromRectangle(ct.shape.boundingBox)),yt.grow(this.graph.tolerance),yt.grow(HoverIcons.prototype.arrowSpacing);var _t=this.graph.selectionCellsHandler.getHandler(ct.cell);_t!=null&&(yt.x-=_t.horizontalOffset/2,yt.y-=_t.verticalOffset/2,yt.width+=_t.horizontalOffset,yt.height+=_t.verticalOffset,_t.rotationShape!=null&&_t.rotationShape.node!=null&&_t.rotationShape.node.style.visibility!="hidden"&&_t.rotationShape.node.style.display!="none"&&_t.rotationShape.boundingBox!=null&&yt.add(_t.rotationShape.boundingBox)),w.style.left=Math.floor(ct.getCenterX()-this.triangleUp.width/2)+"px",w.style.top=Math.floor(yt.y-this.triangleUp.height)+"px",$.style.left=Math.floor(yt.x+yt.width)+"px",$.style.top=Math.floor(ct.getCenterY()-this.triangleRight.height/2)+"px",P.style.left=w.style.left,P.style.top=Math.floor(yt.y+yt.height)+"px",M.style.left=Math.floor(yt.x-this.triangleLeft.width)+"px",M.style.top=$.style.top,ct.style.portConstraint!="eastwest"&&(K.container.appendChild(w),K.container.appendChild(P)),K.container.appendChild($),K.container.appendChild(M)}ct!=null&&(C=K.selectionCellsHandler.getHandler(ct.cell),C!=null&&C.setHandlesVisible!=null&&C.setHandlesVisible(!1)),b=!0}else for(var Yt=[Z,q,w,$,P,M],Zt=0;Zt<Yt.length;Zt++)Yt[Zt].parentNode!=null&&Yt[Zt].parentNode.removeChild(Yt[Zt]);!b&&C!=null&&C.setHandlesVisible(!0);var Wt=(!mxEvent$1.isAltDown(bt)||mxEvent$1.isShiftDown(bt))&&!(E!=null&&X==D)?mxDragSource.prototype.getDropTarget.apply(this,arguments):null,Bt=K.getModel();if(Wt!=null&&(X!=null||!K.isSplitTarget(Wt,e,bt))){for(;Wt!=null&&!K.isValidDropTarget(Wt,e,bt)&&Bt.isVertex(Bt.getParent(Wt));)Wt=Bt.getParent(Wt);Wt!=null&&(K.view.currentRoot==Wt||!K.isValidRoot(Wt)&&K.getModel().getChildCount(Wt)==0||K.isCellLocked(Wt)||Bt.isEdge(Wt)||!K.isValidDropTarget(Wt,e,bt))&&(Wt=null)}return Wt}),m.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);for(var K=[Z,q,D,w,$,P,M],nt=0;nt<K.length;nt++)K[nt].parentNode!=null&&K[nt].parentNode.removeChild(K[nt]);v!=null&&C!=null&&C.reset(),C=null,v=null,E=null,k=null,X=null},m};Sidebar.prototype.itemClicked=function(a,i,t,e){var n=this.editorUi.editor.graph;if(n.container.focus(),mxEvent$1.isAltDown(t)&&n.getSelectionCount()==1&&n.model.isVertex(n.getSelectionCell())){for(var s=null,l=0;l<a.length&&s==null;l++)n.model.isVertex(a[l])&&(s=l);s!=null&&(n.setSelectionCells(this.dropAndConnect(n.getSelectionCell(),a,mxEvent$1.isMetaDown(t)||mxEvent$1.isControlDown(t)?mxEvent$1.isShiftDown(t)?mxConstants$1.DIRECTION_WEST:mxConstants$1.DIRECTION_NORTH:mxEvent$1.isShiftDown(t)?mxConstants$1.DIRECTION_EAST:mxConstants$1.DIRECTION_SOUTH,s,t)),n.scrollCellToVisible(n.getSelectionCell()))}else if(mxEvent$1.isShiftDown(t)&&!n.isSelectionEmpty())this.updateShapes(a[0],n.getSelectionCells()),n.scrollCellToVisible(n.getSelectionCell());else{var r=mxEvent$1.isAltDown(t)?n.getFreeInsertPoint():n.getCenterInsertPoint(n.getBoundingBoxFromGeometry(a,!0));i.drop(n,t,null,r.x,r.y,!0)}};Sidebar.prototype.addClickHandler=function(a,i,t){var e=this.editorUi.editor.graph,n=i.mouseDown,s=i.mouseMove,l=i.mouseUp,r=e.tolerance,o=null,h=this;i.mouseDown=function(u){n.apply(this,arguments),o=new mxPoint(mxEvent$1.getClientX(u),mxEvent$1.getClientY(u)),this.dragElement!=null&&(this.dragElement.style.display="none",mxUtils$1.setOpacity(a,50))},i.mouseMove=function(u){this.dragElement!=null&&this.dragElement.style.display=="none"&&o!=null&&(Math.abs(o.x-mxEvent$1.getClientX(u))>r||Math.abs(o.y-mxEvent$1.getClientY(u))>r)&&(this.dragElement.style.display="",mxUtils$1.setOpacity(a,100)),s.apply(this,arguments)},i.mouseUp=function(u){try{!mxEvent$1.isPopupTrigger(u)&&this.currentGraph==null&&this.dragElement!=null&&this.dragElement.style.display=="none"&&h.itemClicked(t,i,u,a),l.apply(i,arguments),mxUtils$1.setOpacity(a,100),o=null,h.currentElt=a}catch(d){i.reset(),h.editorUi.handleError(d)}}};Sidebar.prototype.createVertexTemplateEntry=function(a,i,t,e,n,s,l,r){return r=r!=null&&r.length>0?r:n!=null?n.toLowerCase():"",this.addEntry(r,mxUtils$1.bind(this,function(){return this.createVertexTemplate(a,i,t,e,n,s,l)}))};Sidebar.prototype.createVertexTemplate=function(a,i,t,e,n,s,l,r){var o=[new mxCell(e??"",new mxGeometry(0,0,i,t),a)];return o[0].vertex=!0,this.createVertexTemplateFromCells(o,i,t,n,s,l,r)};Sidebar.prototype.createVertexTemplateFromData=function(a,i,t,e,n,s,l){var r=mxUtils$1.parseXml(Graph$1.decompress(a)),o=new mxCodec(r),h=new mxGraphModel;o.decode(r.documentElement,h);var u=this.graph.cloneCells(h.root.getChildAt(0).children);return this.createVertexTemplateFromCells(u,i,t,e,n,s,l)};Sidebar.prototype.createVertexTemplateFromCells=function(a,i,t,e,n,s,l){return this.createItem(a,e,n,s,i,t,l)};Sidebar.prototype.createEdgeTemplateEntry=function(a,i,t,e,n,s,l,r){return l=l!=null&&l.length>0?l:n.toLowerCase(),this.addEntry(l,mxUtils$1.bind(this,function(){return this.createEdgeTemplate(a,i,t,e,n,s,r)}))};Sidebar.prototype.createEdgeTemplate=function(a,i,t,e,n,s,l){var r=new mxCell(e??"",new mxGeometry(0,0,i,t),a);return r.geometry.setTerminalPoint(new mxPoint(0,t),!0),r.geometry.setTerminalPoint(new mxPoint(i,0),!1),r.geometry.relative=!0,r.edge=!0,this.createEdgeTemplateFromCells([r],i,t,n,s,l)};Sidebar.prototype.createEdgeTemplateFromCells=function(a,i,t,e,n,s){return this.createItem(a,e,n,!0,i,t,s)};Sidebar.prototype.addPaletteFunctions=function(a,i,t,e){this.addPalette(a,i,t,mxUtils$1.bind(this,function(n){for(var s=0;s<e.length;s++)n.appendChild(e[s](n))}))};Sidebar.prototype.addPalette=function(a,i,t,e){var n=this.createTitle(i);this.container.appendChild(n);var s=document.createElement("div");s.className="geSidebar",mxClient.IS_POINTER&&(s.style.touchAction="none"),t?(e(s),e=null):s.style.display="none",this.addFoldingHandler(n,s,e);var l=document.createElement("div");return l.appendChild(s),this.container.appendChild(l),a!=null&&(this.palettes[a]=[n,l]),s};Sidebar.prototype.addFoldingHandler=function(a,i,t){var e=!1;(!mxClient.IS_IE||document.documentMode>=8)&&(a.style.backgroundImage=i.style.display=="none"?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),a.style.backgroundRepeat="no-repeat",a.style.backgroundPosition="0% 50%",mxEvent$1.addListener(a,"click",mxUtils$1.bind(this,function(n){if(i.style.display=="none"){if(e)i.style.display="block";else if(e=!0,t!=null){a.style.cursor="wait";var s=a.innerHTML;a.innerHTML=mxResources$1.get("loading")+"...",window.setTimeout(function(){i.style.display="block",a.style.cursor="",a.innerHTML=s;var l=mxClient.NO_FO;mxClient.NO_FO=Editor$1.prototype.originalNoForeignObject,t(i,a),mxClient.NO_FO=l},mxClient.IS_FF?20:0)}else i.style.display="block";a.style.backgroundImage="url('"+this.expandedImage+"')"}else a.style.backgroundImage="url('"+this.collapsedImage+"')",i.style.display="none";mxEvent$1.consume(n)})),mxClient.IS_QUIRKS||mxEvent$1.addListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(n){n.preventDefault()}))};Sidebar.prototype.removePalette=function(a){var i=this.palettes[a];if(i!=null){this.palettes[a]=null;for(var t=0;t<i.length;t++)this.container.removeChild(i[t]);return!0}return!1};Sidebar.prototype.addImagePalette=function(a,i,t,e,n,s,l){for(var r=[],o=0;o<n.length;o++)mxUtils$1.bind(this,function(h,u,d){if(d==null){var m=h.lastIndexOf("/"),g=h.lastIndexOf(".");d=h.substring(m>=0?m+1:0,g>=0?g:h.length).replace(/[-_]/g," ")}r.push(this.createVertexTemplateEntry("image;html=1;image="+t+h+e,this.defaultImageWidth,this.defaultImageHeight,"",u,u!=null,null,this.filterTags(d)))})(n[o],s!=null?s[o]:null,l!=null?l[n[o]]:null);this.addPaletteFunctions(a,i,!1,r)};Sidebar.prototype.getTagsForStencil=function(a,i,t){for(var e=a.split("."),n=1;n<e.length;n++)e[n]=e[n].replace(/_/g," ");return e.push(i.replace(/_/g," ")),t!=null&&e.push(t),e.slice(1,e.length)};Sidebar.prototype.addStencilPalette=function(a,i,t,e,n,s,l,r,o,h){if(l=l??1,this.addStencilsToIndex){var u=[];if(o!=null)for(var d=0;d<o.length;d++)u.push(o[d]);mxStencilRegistry.loadStencilSet(t,mxUtils$1.bind(this,function(m,g,x,v,C){if(n==null||mxUtils$1.indexOf(n,g)<0){var E=this.getTagsForStencil(m,g),b=r!=null?r[g]:null;b!=null&&E.push(b),u.push(this.createVertexTemplateEntry("shape="+m+g.toLowerCase()+e,Math.round(v*l),Math.round(C*l),"",g.replace(/_/g," "),null,null,this.filterTags(E.join(" "))))}}),!0,!0),this.addPaletteFunctions(a,i,!1,u)}else this.addPalette(a,i,!1,mxUtils$1.bind(this,function(m){if(e==null&&(e=""),s!=null&&s.call(this,m),o!=null)for(var g=0;g<o.length;g++)o[g](m);mxStencilRegistry.loadStencilSet(t,mxUtils$1.bind(this,function(x,v,C,E,b){(n==null||mxUtils$1.indexOf(n,v)<0)&&m.appendChild(this.createVertexTemplate("shape="+x+v.toLowerCase()+e,Math.round(E*l),Math.round(b*l),"",v.replace(/_/g," "),!0))}),!0)}))};Sidebar.prototype.destroy=function(){this.graph!=null&&(this.graph.container!=null&&this.graph.container.parentNode!=null&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),this.pointerUpHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),this.pointerDownHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),this.pointerMoveHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),this.pointerOutHandler!=null&&(mxEvent$1.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)};typeof html4<"u"&&(html4.ATTRIBS["a::target"]=0,html4.ATTRIBS["source::src"]=0,html4.ATTRIBS["video::src"]=0);(function(){var a=[["nbsp","160"],["shy","173"]],i=mxUtils$1.parseXml;mxUtils$1.parseXml=function(t){for(var e=0;e<a.length;e++)t=t.replace(new RegExp("&"+a[e][0]+";","g"),"&#"+a[e][1]+";");return i(t)}})();Date.prototype.toISOString||function(){function a(i){var t=String(i);return t.length===1&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();Date.now||(Date.now=function(){return new Date().getTime()});mxConstants$1.POINTS=1;mxConstants$1.MILLIMETERS=2;mxConstants$1.INCHES=3;mxConstants$1.PIXELS_PER_MM=3.937;mxConstants$1.PIXELS_PER_INCH=100;mxConstants$1.SHADOW_OPACITY=.25;mxConstants$1.SHADOWCOLOR="#000000";mxConstants$1.VML_SHADOWCOLOR="#d0d0d0";mxGraph.prototype.pageBreakColor="#c0c0c0";mxGraph.prototype.pageScale=1;(function(){try{if(navigator!=null&&navigator.language!=null){var a=navigator.language.toLowerCase();mxGraph.prototype.pageFormat=a==="en-us"||a==="en-ca"||a==="es-mx"?mxConstants$1.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants$1.PAGE_FORMAT_A4_PORTRAIT}}catch{}})();mxText.prototype.baseSpacingTop=5;mxText.prototype.baseSpacingBottom=1;mxGraphModel.prototype.ignoreRelativeEdgeParent=!1;mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif";mxGraphView.prototype.gridSteps=4;mxGraphView.prototype.minGridSize=4;mxGraphView.prototype.defaultGridColor="#d0d0d0";mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor;mxGraphView.prototype.unit=mxConstants$1.POINTS;mxGraphView.prototype.setUnit=function(a){this.unit!=a&&(this.unit=a,this.fireEvent(new mxEventObject$1("unitChanged","unit",a)))};mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]";mxShape.prototype.getConstraints=function(a,i,t){return null};var Te;let Graph$1=(Te=class extends mxGraph{constructor(t,e,n,s,l,r){super(t,e,n,s);c(this,"touchStyle",mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.urlParams==null||urlParams.touch=="1");c(this,"fileSupport",window.File!=null&&window.FileReader!=null&&window.FileList!=null&&(window.urlParams==null||urlParams.filesupport!="0"));c(this,"translateDiagram",urlParams["translate-diagram"]=="1");c(this,"diagramLanguage",urlParams["diagram-language"]!=null?urlParams["diagram-language"]:mxClient.language);c(this,"minTableColumnWidth",20);c(this,"minTableRowHeight",20);c(this,"foreignObjectWarningText","Viewer does not support full SVG 1.1");c(this,"foreignObjectWarningLink","https://desk.draw.io/support/solutions/articles/16000042487");c(this,"pasteStyles",["rounded","shadow","dashed","dashPattern","fontFamily","fontSource","fontSize","fontColor","fontStyle","align","verticalAlign","strokeColor","strokeWidth","fillColor","gradientColor","swimlaneFillColor","textOpacity","gradientDirection","glass","labelBackgroundColor","labelBorderColor","opacity","spacing","spacingTop","spacingLeft","spacingBottom","spacingRight","endFill","endArrow","endSize","targetPerimeterSpacing","startFill","startArrow","startSize","sourcePerimeterSpacing","arcSize","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle"]);this.themes=l||this.defaultThemes,this.currentEdgeStyle=mxUtils$1.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils$1.clone(this.defaultVertexStyle),this.standalone=r??!1;var o=this.baseUrl,h=o.indexOf("//");if(this.domainUrl="",this.domainPathUrl="",h>0){var u=o.indexOf("/",h+2);u>0&&(this.domainUrl=o.substring(0,u)),u=o.lastIndexOf("/"),u>0&&(this.domainPathUrl=o.substring(0,u+1))}if(this.setup(),this.edgeMode){var d={point:null,event:null,state:null,handle:null,selected:!1};this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(m,g){if(g.getProperty("eventName")=="mouseDown"&&this.isEnabled()){var x=g.getProperty("event"),v=x.getState();if(!mxEvent$1.isAltDown(x.getEvent())&&v!=null){if(this.model.isEdge(v.cell))if(d.point=new mxPoint(x.getGraphX(),x.getGraphY()),d.selected=this.isCellSelected(v.cell),d.state=v,d.event=x,v.text!=null&&v.text.boundingBox!=null&&mxUtils$1.contains(v.text.boundingBox,x.getGraphX(),x.getGraphY()))d.handle=mxEvent$1.LABEL_HANDLE;else{var C=this.selectionCellsHandler.getHandler(v.cell);C!=null&&C.bends!=null&&C.bends.length>0&&(d.handle=C.getHandleForEvent(x))}else if(!this.panningHandler.isActive()&&!mxEvent$1.isControlDown(x.getEvent())){var C=this.selectionCellsHandler.getHandler(v.cell);if(C==null||C.getHandleForEvent(x)==null){var E=new mxRectangle(x.getGraphX()-1,x.getGraphY()-1);if(E.grow(mxEvent$1.isTouchEvent(x.getEvent())?mxShape.prototype.svgStrokeTolerance-1:(mxShape.prototype.svgStrokeTolerance+1)/2),this.isTableCell(v.cell)&&!this.isCellSelected(v.cell)){var b=this.model.getParent(v.cell),w=this.model.getParent(b);if(!this.isCellSelected(w)&&(mxUtils$1.intersects(E,new mxRectangle(v.x,v.y-2,v.width,3))&&this.model.getChildAt(w,0)!=b||mxUtils$1.intersects(E,new mxRectangle(v.x,v.y+v.height-2,v.width,3))||mxUtils$1.intersects(E,new mxRectangle(v.x-2,v.y,2,v.height))&&this.model.getChildAt(b,0)!=v.cell||mxUtils$1.intersects(E,new mxRectangle(v.x+v.width-2,v.y,2,v.height)))){var $=this.selectionCellsHandler.isHandled(w);if(this.selectCellForEvent(w,x.getEvent()),C=this.selectionCellsHandler.getHandler(w),C!=null){var P=C.getHandleForEvent(x);P!=null&&(C.start(x.getGraphX(),x.getGraphY(),P),C.blockDelayedSelection=!$,x.consume())}}}for(var M=v;!x.isConsumed()&&M!=null&&(this.isTableCell(M.cell)||this.isTableRow(M.cell)||this.isTable(M.cell));){if(this.isSwimlane(M.cell)){var D=this.getActualStartSize(M.cell),k=this.view.scale;if(((D.x>0||D.width>0)&&mxUtils$1.intersects(E,new mxRectangle(M.x+(D.x-D.width-1)*k+(D.x==0?M.width:0),M.y,1,M.height))||(D.y>0||D.height>0)&&mxUtils$1.intersects(E,new mxRectangle(M.x,M.y+(D.y-D.height-1)*k+(D.y==0?M.height:0),M.width,1)))&&(this.selectCellForEvent(M.cell,x.getEvent()),C=this.selectionCellsHandler.getHandler(M.cell),C!=null)){var P=mxEvent$1.CUSTOM_HANDLE-C.customHandles.length+1;C.start(x.getGraphX(),x.getGraphY(),P),x.consume()}}M=this.view.getState(this.model.getParent(M.cell))}}}}}})),this.addMouseListener({mouseDown:function(m,g){},mouseMove:mxUtils$1.bind(this,function(m,g){var x=this.selectionCellsHandler.handlers.map;for(var v in x)if(x[v].index!=null)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent$1.isAltDown(g.getEvent())){var C=this.tolerance;if(d.point!=null&&d.state!=null&&d.event!=null){var E=d.state;if(Math.abs(d.point.x-g.getGraphX())>C||Math.abs(d.point.y-g.getGraphY())>C){var b=this.selectionCellsHandler.getHandler(E.cell);if(b==null&&this.model.isEdge(E.cell)&&(b=this.createHandler(E)),b!=null&&b.bends!=null&&b.bends.length>0){var w=b.getHandleForEvent(d.event),$=this.view.getEdgeStyle(E),P=$==mxEdgeStyle.EntityRelation;if(!d.selected&&d.handle==mxEvent$1.LABEL_HANDLE&&(w=d.handle),!P||w==0||w==b.bends.length-1||w==mxEvent$1.LABEL_HANDLE){if(w==mxEvent$1.LABEL_HANDLE||w==0||E.visibleSourceState!=null||w==b.bends.length-1||E.visibleTargetState!=null){if(!P&&w!=mxEvent$1.LABEL_HANDLE){var M=E.absolutePoints;if(M!=null&&($==null&&w==null||$==mxEdgeStyle.OrthConnector)&&(w=d.handle,w==null)){var D=new mxRectangle(d.point.x,d.point.y);if(D.grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils$1.contains(D,M[0].x,M[0].y))w=0;else if(mxUtils$1.contains(D,M[M.length-1].x,M[M.length-1].y))w=b.bends.length-1;else{var k=$!=null&&(M.length==2||M.length==3&&(Math.round(M[0].x-M[1].x)==0&&Math.round(M[1].x-M[2].x)==0||Math.round(M[0].y-M[1].y)==0&&Math.round(M[1].y-M[2].y)==0));k?w=2:(w=mxUtils$1.findNearestSegment(E,d.point.x,d.point.y),$==null?w=mxEvent$1.VIRTUAL_HANDLE-w:w+=1)}}w==null&&(w=mxEvent$1.VIRTUAL_HANDLE)}b.start(g.getGraphX(),g.getGraphX(),w),g.consume(),this.graphHandler.reset()}}else P&&(E.visibleSourceState!=null||E.visibleTargetState!=null)&&(this.graphHandler.reset(),g.consume())}b!=null&&(this.selectionCellsHandler.isHandlerActive(b)?this.isCellSelected(E.cell)||(this.selectionCellsHandler.handlers.put(E.cell,b),this.selectCellForEvent(E.cell,g.getEvent())):this.isCellSelected(E.cell)||b.destroy()),d.selected=!1,d.handle=null,d.state=null,d.event=null,d.point=null}}else{var E=g.getState();if(E!=null){var Z=null;if(this.model.isEdge(E.cell)){var D=new mxRectangle(g.getGraphX(),g.getGraphY());D.grow(mxEdgeHandler.prototype.handleImage.width/2);var M=E.absolutePoints;if(M!=null){if(E.text!=null&&E.text.boundingBox!=null&&mxUtils$1.contains(E.text.boundingBox,g.getGraphX(),g.getGraphY()))Z="move";else if(mxUtils$1.contains(D,M[0].x,M[0].y)||mxUtils$1.contains(D,M[M.length-1].x,M[M.length-1].y))Z="pointer";else if(E.visibleSourceState!=null||E.visibleTargetState!=null){var q=this.view.getEdgeStyle(E);if(Z="crosshair",q!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(E)){var j=mxUtils$1.findNearestSegment(E,g.getGraphX(),g.getGraphY());j<M.length-1&&j>=0&&(Z=Math.round(M[j].x-M[j+1].x)==0?"col-resize":"row-resize")}}}}else if(!mxEvent$1.isControlDown(g.getEvent())){var D=new mxRectangle(g.getGraphX()-1,g.getGraphY()-1);if(D.grow(mxShape.prototype.svgStrokeTolerance/2),this.isTableCell(E.cell)){var X=this.model.getParent(E.cell),rt=this.model.getParent(X);this.isCellSelected(rt)||(mxUtils$1.intersects(D,new mxRectangle(E.x-2,E.y,2,E.height))&&this.model.getChildAt(X,0)!=E.cell||mxUtils$1.intersects(D,new mxRectangle(E.x+E.width-2,E.y,2,E.height))?Z="col-resize":(mxUtils$1.intersects(D,new mxRectangle(E.x,E.y-2,E.width,3))&&this.model.getChildAt(rt,0)!=X||mxUtils$1.intersects(D,new mxRectangle(E.x,E.y+E.height-2,E.width,3)))&&(Z="row-resize"))}for(var et=E;Z==null&&et!=null&&(this.isTableCell(et.cell)||this.isTableRow(et.cell)||this.isTable(et.cell));){if(this.isSwimlane(et.cell)){var Y=this.getActualStartSize(et.cell),G=this.view.scale;(Y.x>0||Y.width>0)&&mxUtils$1.intersects(D,new mxRectangle(et.x+(Y.x-Y.width-1)*G+(Y.x==0?et.width*G:0),et.y,1,et.height))?Z="col-resize":(Y.y>0||Y.height>0)&&mxUtils$1.intersects(D,new mxRectangle(et.x,et.y+(Y.y-Y.height-1)*G+(Y.y==0?et.height:0),et.width,1))&&(Z="row-resize")}et=this.view.getState(this.model.getParent(et.cell))}}Z!=null&&E.setCursor(Z)}}}}),mouseUp:mxUtils$1.bind(this,function(m,g){d.state=null,d.event=null,d.point=null,d.handle=null})})}}static createSvgImage(t,e,n,s,l){var r=unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" '+(s!=null&&l!=null?'viewBox="0 0 '+s+" "+l+'" ':"")+'version="1.1">'+n+"</svg>"));return new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(r):Base64.encode(r,!0)),t,e)}static zapGremlins(t){for(var e=0,n=[],s=0;s<t.length;s++){var l=t.charCodeAt(s);(l>=32||l==9||l==10||l==13)&&l!=65535&&l!=65534||(n.push(t.substring(e,s)),e=s+1)}return e>0&&e<t.length&&n.push(t.substring(e)),n.length==0?t:n.join("")}stringToBytes(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}bytesToString(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")}ase64EncodeUnicode(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode(parseInt(n,16))}))}ase64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}compressNode(t,e){var n=mxUtils$1.getXml(t);return this.compress(e?n:this.zapGremlins(n))}compress(t,e){if(t==null||t.length==0||typeof pako>"u")return t;var n=e?pako.deflate(encodeURIComponent(t),{to:"string"}):pako.deflateRaw(encodeURIComponent(t),{to:"string"});return window.btoa?btoa(n):Base64.encode(n,!0)}static decompress(t,e,n){if(t==null||t.length==0||typeof pako>"u")return t;var s=window.atob?atob(t):Base64.decode(t,!0),l=decodeURIComponent(e?pako.inflate(s,{to:"string"}):pako.inflateRaw(s,{to:"string"}));return n?l:this.zapGremlins(l)}removePasteFormatting(t){for(;t!=null;)t.firstChild!=null&&Te.removePasteFormatting(t.firstChild),t.nodeType==mxConstants$1.NODETYPE_ELEMENT&&t.style!=null&&(t.style.whiteSpace="",t.style.color=="#000000"&&(t.style.color="")),t=t.nextSibling}static sanitizeHtml(t,e){function n(l){return l!=null&&l.toString().toLowerCase().substring(0,11)!=="javascript:"?l:null}function s(l){return l}return html_sanitize(t,n,s)}tripQuotes(t){return t!=null&&(t.charAt(0)=="'"&&(t=t.substring(1)),t.charAt(t.length-1)=="'"&&(t=t.substring(0,t.length-1)),t.charAt(0)=='"'&&(t=t.substring(1)),t.charAt(t.length-1)=='"'&&(t=t.substring(0,t.length-1))),t}static stripQuotes(t){return t!=null&&(t.charAt(0)=="'"&&(t=t.substring(1)),t.charAt(t.length-1)=="'"&&(t=t.substring(0,t.length-1)),t.charAt(0)=='"'&&(t=t.substring(1)),t.charAt(t.length-1)=='"'&&(t=t.substring(0,t.length-1))),t}static isLink(t){return t!=null&&Te.linkPattern.test(t)}setup(){if(this.cellRenderer.getLabelValue=function(w){var $=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return w.view.graph.isHtmlLabel(w.cell)&&(w.style.html!=1?$=mxUtils$1.htmlEntities($,!1):$=w.view.graph.sanitizeHtml($)),$},typeof mxVertexHandler<"u"){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(w,$){return!1},this.alternateEdgeStyle="vertical",this.loadStylesheet();var t=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var w=t.apply(this,arguments);if(this.graph.pageVisible){for(var $=[],P=this.graph.pageFormat,M=this.graph.pageScale,D=P.width*M,k=P.height*M,Z=this.graph.view.translate,q=this.graph.view.scale,j=this.graph.getPageLayout(),X=0;X<j.width;X++)$.push(new mxRectangle(((j.x+X)*D+Z.x)*q,(j.y*k+Z.y)*q,D*q,k*q));for(var rt=1;rt<j.height;rt++)$.push(new mxRectangle((j.x*D+Z.x)*q,((j.y+rt)*k+Z.y)*q,D*q,k*q));w=$.concat(w)}return w},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(w,$){return w.cell==null?"#ffa500":mxConstants$1.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(w){return this.previewColor=this.graph.background=="#000000"?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)};var e=this.graphHandler.getCells;this.graphHandler.getCells=function(w){for(var $=e.apply(this,arguments),P=new mxDictionary,M=[],D=0;D<$.length;D++){var k=this.graph.isTableCell(w)&&this.graph.isTableCell($[D])&&this.graph.isCellSelected($[D])?this.graph.model.getParent($[D]):this.graph.isTableRow(w)&&this.graph.isTableRow($[D])&&this.graph.isCellSelected($[D])?$[D]:this.graph.getCompositeParent($[D]);k!=null&&!P.get(k)&&(P.put(k,!0),M.push(k))}return M};var n=this.graphHandler.start;this.graphHandler.start=function(w,$,P,M){var D=!1;this.graph.isTableCell(w)&&(this.graph.isCellSelected(w)?D=!0:w=this.graph.model.getParent(w)),!D&&(!this.graph.isTableRow(w)||!this.graph.isCellSelected(w))&&(w=this.graph.getCompositeParent(w)),n.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(w,$){return $=this.graph.getCompositeParent($),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var s=new mxRubberband(this);this.getRubberband=function(){return s};var l=new Date().getTime(),r=0,o=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var w=this.currentState;o.apply(this,arguments),w!=this.currentState?(l=new Date().getTime(),r=0):r=new Date().getTime()-l};var h=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(w){return this.currentState!=null&&w.getState()==this.currentState&&r>2e3||(this.currentState==null||mxUtils$1.getValue(this.currentState.style,"outlineConnect","1")!="0")&&h.apply(this,arguments)};var u=this.isToggleEvent;this.isToggleEvent=function(w){return u.apply(this,arguments)||!mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(w)};var d=s.isForceRubberbandEvent;s.isForceRubberbandEvent=function(w){return d.apply(this,arguments)&&!mxEvent$1.isShiftDown(w.getEvent())&&!mxEvent$1.isControlDown(w.getEvent())||mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(w.getEvent())||mxUtils$1.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&w.getState()==null&&mxEvent$1.isTouchEvent(w.getEvent())};var m=null;this.panningHandler.addListener(mxEvent$1.PAN_START,mxUtils$1.bind(this,function(){this.isEnabled()&&(m=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent$1.PAN_END,mxUtils$1.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=m)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(w){return mxEvent$1.isMouseEvent(w.getEvent())};var g=this.click;this.click=function(w){var $=w.state==null&&w.sourceState!=null&&this.isCellLocked(w.sourceState.cell);if((!this.isEnabled()||$)&&!w.isConsumed()){var P=$?w.sourceState.cell:w.getCell();if(P!=null){var M=this.getClickableLinkForCell(P);M!=null&&(this.isCustomLink(M)?this.customLinkClicked(M):this.openLink(M))}this.isEnabled()&&$&&this.clearSelection()}else return g.apply(this,arguments)},this.tooltipHandler.getStateForEvent=function(w){return w.sourceState};var x=this.tooltipHandler.show;this.tooltipHandler.show=function(){if(x.apply(this,arguments),this.div!=null)for(var w=this.div.getElementsByTagName("a"),$=0;$<w.length;$++)w[$].getAttribute("href")!=null&&w[$].getAttribute("target")==null&&w[$].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(w){return w.sourceState},this.getCursorForMouseEvent,this.getCursorForMouseEvent=function(w){var $=w.state==null&&w.sourceState!=null&&this.isCellLocked(w.sourceState.cell);return this.getCursorForCell($?w.sourceState.cell:w.getCell())};var v=this.getCursorForCell;this.getCursorForCell=function(w){if(!this.isEnabled()||this.isCellLocked(w)){var $=this.getClickableLinkForCell(w);if($!=null)return"pointer";if(this.isCellLocked(w))return"default"}return v.apply(this,arguments)},this.selectRegion=function(w,$){var P=this.getCells(w.x,w.y,w.width,w.height,null,null,null,function(M){return mxUtils$1.getValue(M.style,"locked","0")=="1"},!0);return this.selectCellsForEvent(P,$),P};var C=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(w,$,P){return this.graph.isCellSelected(w)?!1:C.apply(this,arguments)},this.isCellLocked=function(w){for(var $=this.view.getState(w);$!=null;){if(mxUtils$1.getValue($.style,"locked","0")=="1")return!0;$=this.view.getState(this.model.getParent($.cell))}return!1};var E=null;this.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(w,$){if($.getProperty("eventName")=="mouseDown"){var P=$.getProperty("event"),M=P.getState();M!=null&&!this.isSelectionEmpty()&&!this.isCellSelected(M.cell)?E=this.getSelectionCells():E=null}})),this.addListener(mxEvent$1.TAP_AND_HOLD,mxUtils$1.bind(this,function(w,$){if(!mxEvent$1.isMultiTouchEvent($)){var P=$.getProperty("event"),M=$.getProperty("cell");if(M==null){var D=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(P),mxEvent$1.getClientY(P));s.start(D.x,D.y)}else E!=null?this.addSelectionCells(E):this.getSelectionCount()>1&&this.isCellSelected(M)&&this.removeSelectionCell(M);E=null,$.consume()}})),this.connectionHandler.selectCells=function(w,$){this.graph.setSelectionCell($||w)},this.connectionHandler.constraintHandler.isStateIgnored=function(w,$){var P=w.view.graph;return $&&(P.isCellSelected(w.cell)||P.isTableRow(w.cell)&&P.selectionCellsHandler.isHandled(P.model.getParent(w.cell)))},this.selectionModel.addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){var w=this.connectionHandler.constraintHandler;w.currentFocus!=null&&w.isStateIgnored(w.currentFocus,!0)&&(w.currentFocus=null,w.constraints=null,w.destroyIcons()),w.destroyFocusHighlight()})),Te.touchStyle&&this.initTouch();var b=this.updateMouseEvent;this.updateMouseEvent=function(w){return w=b.apply(this,arguments),w.state!=null&&this.isCellLocked(w.getCell())&&(w.state=null),w}}this.currentTranslate=new mxPoint(0,0)}},c(Te,"lineJumpsEnabled",!0),c(Te,"defaultJumpSize",6),Te);Graph$1.prototype.minFitScale=null;Graph$1.prototype.maxFitScale=null;Graph$1.prototype.linkPolicy=urlParams.target=="frame"?"blank":urlParams.target||"auto";Graph$1.prototype.linkTarget=urlParams.target=="frame"?"_self":"_blank";Graph$1.prototype.linkRelation="nofollow noopener noreferrer";Graph$1.prototype.defaultScrollbars=!mxClient.IS_IOS;Graph$1.prototype.defaultPageVisible=!0;Graph$1.prototype.lightbox=!1;Graph$1.prototype.defaultPageBackgroundColor="#ffffff";Graph$1.prototype.defaultPageBorderColor="#ffffff";Graph$1.prototype.scrollTileSize=new mxRectangle(0,0,400,400);Graph$1.prototype.transparentBackground=!0;Graph$1.prototype.selectParentAfterDelete=!1;Graph$1.prototype.defaultEdgeLength=80;Graph$1.prototype.edgeMode=!1;Graph$1.prototype.connectionArrowsEnabled=!0;Graph$1.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}]+)%","g");Graph$1.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i");Graph$1.prototype.defaultThemeName="default";Graph$1.prototype.defaultThemes={};Graph$1.prototype.baseUrl=urlParams.base!=null?decodeURIComponent(urlParams.base):(window!=window.top?document.referrer:document.location.toString()).split("#")[0];Graph$1.prototype.editAfterInsert=!1;Graph$1.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"];Graph$1.prototype.standalone=!1;Graph$1.prototype.init=function(a){mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(i,t){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var e=i.view.graph.tolerance,n=!0,s=null,l=mxUtils$1.bind(this,function(h){n=!0,s=new mxPoint(mxEvent$1.getClientX(h),mxEvent$1.getClientY(h))}),r=mxUtils$1.bind(this,function(h){n=n&&s!=null&&Math.abs(s.x-mxEvent$1.getClientX(h))<e&&Math.abs(s.y-mxEvent$1.getClientY(h))<e}),o=mxUtils$1.bind(this,function(h){if(n)for(var u=mxEvent$1.getSource(h);u!=null&&u!=t.node;){if(u.nodeName.toLowerCase()=="a"){i.view.graph.labelLinkClicked(i,u,h);break}u=u.parentNode}});mxEvent$1.addGestureListeners(t.node,l,r,o),mxEvent$1.addListener(t.node,"click",function(h){mxEvent$1.consume(h)})},this.initLayoutManager()};(function(){Graph$1.prototype.useCssTransforms=!1,Graph$1.prototype.currentScale=1,Graph$1.prototype.currentTranslate=new mxPoint(0,0),Graph$1.prototype.getVerticesAndEdges=function(s,l){s=s??!0,l=l??!0;var r=this.model;return r.filterDescendants(function(o){return s&&r.isVertex(o)||l&&r.isEdge(o)},r.getRoot())},Graph$1.prototype.getStartEditingCell=function(s,l){var r=this.getCellStyle(s),o=parseInt(mxUtils$1.getValue(r,mxConstants$1.STYLE_STARTSIZE,0));if(this.isTable(s)&&(!this.isSwimlane(s)||o==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0&&(s=this.model.getChildAt(s,0),r=this.getCellStyle(s),o=parseInt(mxUtils$1.getValue(r,mxConstants$1.STYLE_STARTSIZE,0))),this.isTableRow(s)&&(!this.isSwimlane(s)||o==0)&&this.getLabel(s)==""&&this.model.getChildCount(s)>0)for(var h=0;h<this.model.getChildCount(s);h++){var u=this.model.getChildAt(s,h);if(this.isCellEditable(u)){s=u;break}}return s},Graph$1.prototype.copyStyle=function(s){var l=null;if(s!=null){l=mxUtils$1.clone(this.getCurrentCellStyle(s));for(var r=this.model.getStyle(s),o=r!=null?r.split(";"):[],h=0;h<o.length;h++){var u=o[h],d=u.indexOf("=");if(d>=0){var m=u.substring(0,d),g=u.substring(d+1);l[m]==null&&g==mxConstants$1.NONE&&(l[m]=mxConstants$1.NONE)}}}return l},Graph$1.prototype.pasteStyle=function(s,l,r){r=r??Graph$1.pasteStyles,this.model.beginUpdate();try{for(var o=0;o<l.length;o++)for(var h=this.getCurrentCellStyle(l[o]),u=0;u<r.length;u++){var d=h[r[u]],m=s[r[u]];d!=m&&(d!=null||m!=mxConstants$1.NONE)&&this.setCellStyles(r[u],m,[l[o]])}}finally{this.model.endUpdate()}},Graph$1.prototype.isFastZoomEnabled=function(){return urlParams.zoom!="nocss"&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&this.isCssTransformsSupported()},Graph$1.prototype.isCssTransformsSupported=function(){return this.dialect==mxConstants$1.DIALECT_SVG&&!mxClient.NO_FO&&(!this.lightbox||!mxClient.IS_SF)},Graph$1.prototype.getCellAt=function(s,l,r,o,h,u){return this.useCssTransforms&&(s=s/this.currentScale-this.currentTranslate.x,l=l/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph$1.prototype.getScaledCellAt=function(s,l,r,o,h,u){if(o=o??!0,h=h??!0,r==null&&(r=this.getCurrentRoot(),r==null&&(r=this.getModel().getRoot())),r!=null)for(var d=this.model.getChildCount(r),m=d-1;m>=0;m--){var g=this.model.getChildAt(r,m),x=this.getScaledCellAt(s,l,g,o,h,u);if(x!=null)return x;if(this.isCellVisible(g)&&(h&&this.model.isEdge(g)||o&&this.model.isVertex(g))){var v=this.view.getState(g);if(v!=null&&(u==null||!u(v,s,l))&&this.intersects(v,s,l))return g}}return null},Graph$1.prototype.isRecursiveVertexResize=function(s){return!this.isSwimlane(s.cell)&&this.model.getChildCount(s.cell)>0&&!this.isCellCollapsed(s.cell)&&mxUtils$1.getValue(s.style,"recursiveResize","1")=="1"&&mxUtils$1.getValue(s.style,"childLayout",null)==null},Graph$1.prototype.isPart=function(s){return mxUtils$1.getValue(this.getCurrentCellStyle(s),"part","0")=="1"||this.isTableCell(s)||this.isTableRow(s)},Graph$1.prototype.getCompositeParent=function(s){for(;this.isPart(s);){var l=this.model.getParent(s);if(!this.model.isVertex(l))break;s=l}return s},mxCellHighlight.prototype.getStrokeWidth=function(s){var l=this.strokeWidth;return this.graph.useCssTransforms&&(l/=this.graph.currentScale),l},mxGraphView.prototype.getGraphBounds=function(){var s=this.graphBounds;if(this.graph.useCssTransforms){var l=this.graph.currentTranslate,r=this.graph.currentScale;s=new mxRectangle((s.x+l.x)*r,(s.y+l.y)*r,s.width*r,s.height*r)}return s},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?(this.validate(),this.graph.sizeDidChange()):(this.revalidate(),this.graph.sizeDidChange())};var a=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(s){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),a.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)};var i=mxGraph.prototype.getCellsForGroup;Graph$1.prototype.getCellsForGroup=function(s){s=i.apply(this,arguments);for(var l=[],r=0;r<s.length;r++)!this.isTableRow(s[r])&&!this.isTableCell(s[r])&&l.push(s[r]);return l};var t=mxGraph.prototype.getCellsForUngroup;Graph$1.prototype.getCellsForUngroup=function(s){s=t.apply(this,arguments);for(var l=[],r=0;r<s.length;r++)!this.isTable(s[r])&&!this.isTableRow(s[r])&&!this.isTableCell(s[r])&&l.push(s[r]);return l},Graph$1.prototype.updateCssTransform=function(){var s=this.view.getDrawPane();if(s!=null){var l=s.parentNode;if(!this.useCssTransforms)l.removeAttribute("transformOrigin"),l.removeAttribute("transform");else{var r=l.getAttribute("transform");l.setAttribute("transformOrigin","0 0");var o=Math.round(this.currentScale*100)/100,h=Math.round(this.currentTranslate.x*100)/100,u=Math.round(this.currentTranslate.y*100)/100;if(l.setAttribute("transform","scale("+o+","+o+")translate("+h+","+u+")"),r!=l.getAttribute("transform"))try{if(mxClient.IS_EDGE){var d=l.style.display;l.style.display="none",l.getBBox(),l.style.display=d}}catch{}}}};var e=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var s=this.graph.useCssTransforms,l=this.scale,r=this.translate;s&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),e.apply(this,arguments),s&&(this.scale=l,this.translate=r)};var n=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(s,l,r){var o=this.useCssTransforms,h=this.view.scale,u=this.view.translate;o&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),n.apply(this,arguments),o&&(this.view.scale=h,this.view.translate=u,this.useCssTransforms=!0)}})();Graph$1.prototype.isLightboxView=function(){return this.lightbox};Graph$1.prototype.isViewer=function(){return!1};Graph$1.prototype.labelLinkClicked=function(a,i,t){var e=i.getAttribute("href");if(e!=null&&!this.isCustomLink(e)&&(mxEvent$1.isLeftMouseButton(t)&&!mxEvent$1.isPopupTrigger(t)||mxEvent$1.isTouchEvent(t))){if(!this.isEnabled()||this.isCellLocked(a.cell)){var n=this.isBlankLink(e)?this.linkTarget:"_top";this.openLink(this.getAbsoluteUrl(e),n)}mxEvent$1.consume(t)}};Graph$1.prototype.openLink=function(a,i,t){var e=window;try{if(i=="_self"&&window!=window.top)window.location.href=a;else if(a.substring(0,this.baseUrl.length)==this.baseUrl&&a.charAt(this.baseUrl.length)=="#"&&i=="_top"&&window==window.top){var n=a.split("#")[1];window.location.hash=="#"+n&&(window.location.hash=""),window.location.hash=n}else e=window.open(a,i??"_blank"),e!=null&&!t&&(e.opener=null)}catch{}return e};Graph$1.prototype.getLinkTitle=function(a){return a.substring(a.lastIndexOf("/")+1)};Graph$1.prototype.isCustomLink=function(a){return a.substring(0,5)=="data:"};Graph$1.prototype.customLinkClicked=function(a){return!1};Graph$1.prototype.isExternalProtocol=function(a){return a.substring(0,7)==="mailto:"};Graph$1.prototype.isBlankLink=function(a){return!this.isExternalProtocol(a)&&(this.linkPolicy==="blank"||this.linkPolicy!=="self"&&!this.isRelativeUrl(a)&&a.substring(0,this.domainUrl.length)!==this.domainUrl)};Graph$1.prototype.isRelativeUrl=function(a){return a!=null&&!this.absoluteUrlPattern.test(a)&&a.substring(0,5)!=="data:"&&!this.isExternalProtocol(a)};Graph$1.prototype.getAbsoluteUrl=function(a){return a!=null&&this.isRelativeUrl(a)&&(a.charAt(0)=="#"?a=this.baseUrl+a:a.charAt(0)=="/"?a=this.domainUrl+a:a=this.domainPathUrl+a),a};Graph$1.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(a,i){return this.graph.getCellStyle(a).childLayout!=null},this.layoutManager.getLayout=function(a,i){var t=this.graph.model.getParent(a);if(i!=mxEvent$1.BEGIN_UPDATE||this.hasLayout(t,i)){var e=this.graph.getCellStyle(a);if(e.childLayout=="stackLayout"){var n=new mxStackLayout(this.graph,!0);return n.resizeParentMax=mxUtils$1.getValue(e,"resizeParentMax","1")=="1",n.horizontal=mxUtils$1.getValue(e,"horizontalStack","1")=="1",n.resizeParent=mxUtils$1.getValue(e,"resizeParent","1")=="1",n.resizeLast=mxUtils$1.getValue(e,"resizeLast","0")=="1",n.spacing=e.stackSpacing||n.spacing,n.border=e.stackBorder||n.border,n.marginLeft=e.marginLeft||0,n.marginRight=e.marginRight||0,n.marginTop=e.marginTop||0,n.marginBottom=e.marginBottom||0,n.allowGaps=e.allowGaps||0,n.fill=!0,n.allowGaps&&(n.gridSize=parseFloat(mxUtils$1.getValue(e,"stackUnitSize",20))),n}else if(e.childLayout=="treeLayout"){var s=new mxCompactTreeLayout(this.graph);return s.horizontal=mxUtils$1.getValue(e,"horizontalTree","1")=="1",s.resizeParent=mxUtils$1.getValue(e,"resizeParent","1")=="1",s.groupPadding=mxUtils$1.getValue(e,"parentPadding",20),s.levelDistance=mxUtils$1.getValue(e,"treeLevelDistance",30),s.maintainParentLocation=!0,s.edgeRouting=!1,s.resetEdges=!1,s}else if(e.childLayout=="flowLayout"){var l=new mxHierarchicalLayout(this.graph,mxUtils$1.getValue(e,"flowOrientation",mxConstants$1.DIRECTION_EAST));return l.resizeParent=mxUtils$1.getValue(e,"resizeParent","1")=="1",l.parentBorder=mxUtils$1.getValue(e,"parentPadding",20),l.maintainParentLocation=!0,l.intraCellSpacing=mxUtils$1.getValue(e,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),l.interRankCellSpacing=mxUtils$1.getValue(e,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),l.interHierarchySpacing=mxUtils$1.getValue(e,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),l.parallelEdgeSpacing=mxUtils$1.getValue(e,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),l}else{if(e.childLayout=="circleLayout")return new mxCircleLayout(this.graph);if(e.childLayout=="organicLayout")return new mxFastOrganicLayout(this.graph);if(e.childLayout=="tableLayout")return new TableLayout(this.graph)}}return null}};Graph$1.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize};Graph$1.prototype.getPageLayout=function(){var a=this.getPageSize(),i=this.getGraphBounds();if(i.width==0||i.height==0)return new mxRectangle(0,0,1,1);var t=Math.floor(Math.ceil(i.x/this.view.scale-this.view.translate.x)/a.width),e=Math.floor(Math.ceil(i.y/this.view.scale-this.view.translate.y)/a.height),n=Math.ceil((Math.floor((i.x+i.width)/this.view.scale)-this.view.translate.x)/a.width)-t,s=Math.ceil((Math.floor((i.y+i.height)/this.view.scale)-this.view.translate.y)/a.height)-e;return new mxRectangle(t,e,n,s)};Graph$1.prototype.sanitizeHtml=function(a,i){return Graph$1.sanitizeHtml(a,i)};Graph$1.prototype.updatePlaceholders=function(){this.model;var a=!1;for(var i in this.model.cells){var t=this.model.cells[i];this.isReplacePlaceholders(t)&&(this.view.invalidate(t,!1,!1),a=!0)}a&&this.view.validate()};Graph$1.prototype.isReplacePlaceholders=function(a){return a.value!=null&&typeof a.value=="object"&&a.value.getAttribute("placeholders")=="1"};Graph$1.prototype.isZoomWheelEvent=function(a){return mxEvent$1.isAltDown(a)||mxEvent$1.isMetaDown(a)&&mxClient.IS_MAC||mxEvent$1.isControlDown(a)};Graph$1.prototype.isScrollWheelEvent=function(a){return!this.isZoomWheelEvent(a)};Graph$1.prototype.isTransparentClickEvent=function(a){return mxEvent$1.isAltDown(a)||mxClient.IS_CHROMEOS&&mxEvent$1.isShiftDown(a)};Graph$1.prototype.isIgnoreTerminalEvent=function(a){return mxEvent$1.isShiftDown(a)&&mxEvent$1.isControlDown(a)};Graph$1.prototype.isSplitTarget=function(a,i,t){return!this.model.isEdge(i[0])&&!mxEvent$1.isAltDown(t)&&!mxEvent$1.isShiftDown(t)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)};Graph$1.prototype.getLabel=function(a){var i=mxGraph.prototype.getLabel.apply(this,arguments);return i!=null&&this.isReplacePlaceholders(a)&&a.getAttribute("placeholder")==null&&(i=this.replacePlaceholders(a,i)),i};Graph$1.prototype.isLabelMovable=function(a){var i=this.getCurrentCellStyle(a);return!this.isCellLocked(a)&&(this.model.isEdge(a)&&this.edgeLabelsMovable||this.model.isVertex(a)&&(this.vertexLabelsMovable||mxUtils$1.getValue(i,"labelMovable","0")=="1"))};Graph$1.prototype.setGridSize=function(a){this.gridSize=a,this.fireEvent(new mxEventObject$1("gridSizeChanged"))};Graph$1.prototype.setDefaultParent=function(a){this.defaultParent=a,this.fireEvent(new mxEventObject$1("defaultParentChanged"))};Graph$1.prototype.getClickableLinkForCell=function(a){do{var i=this.getLinkForCell(a);if(i!=null)return i;a=this.model.getParent(a)}while(a!=null);return null};Graph$1.prototype.getGlobalVariable=function(a){var i=null;if(a=="date")i=new Date().toLocaleDateString();else if(a=="time")i=new Date().toLocaleTimeString();else if(a=="timestamp")i=new Date().toLocaleString();else if(a.substring(0,5)=="date{"){var t=a.substring(5,a.length-1);i=this.formatDate(new Date,t)}return i};Graph$1.prototype.formatDate=function(a,i,t){this.dateFormatCache==null&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var e=this.dateFormatCache,n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g,r=function(w,$){for(w=String(w),$=$||2;w.length<$;)w="0"+w;return w};if(arguments.length==1&&Object.prototype.toString.call(a)=="[object String]"&&!/\d/.test(a)&&(i=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");i=String(e.masks[i]||i||e.masks.default),i.slice(0,4)=="UTC:"&&(i=i.slice(4),t=!0);var o=t?"getUTC":"get",h=a[o+"Date"](),u=a[o+"Day"](),d=a[o+"Month"](),m=a[o+"FullYear"](),g=a[o+"Hours"](),x=a[o+"Minutes"](),v=a[o+"Seconds"](),C=a[o+"Milliseconds"](),E=t?0:a.getTimezoneOffset(),b={d:h,dd:r(h),ddd:e.i18n.dayNames[u],dddd:e.i18n.dayNames[u+7],m:d+1,mm:r(d+1),mmm:e.i18n.monthNames[d],mmmm:e.i18n.monthNames[d+12],yy:String(m).slice(2),yyyy:m,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:x,MM:r(x),s:v,ss:r(v),l:r(C,3),L:r(C>99?Math.round(C/10):C),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:t?"UTC":(String(a).match(s)||[""]).pop().replace(l,""),o:(E>0?"-":"+")+r(Math.floor(Math.abs(E)/60)*100+Math.abs(E)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10]};return i.replace(n,function(w){return w in b?b[w]:w.slice(1,w.length-1)})};Graph$1.prototype.createLayersDialog=function(){var a=document.createElement("div");a.style.position="absolute";for(var i=this.getModel(),t=i.getChildCount(i.root),e=0;e<t;e++)mxUtils$1.bind(this,function(n){var s=document.createElement("div");s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.padding="2px",s.style.whiteSpace="nowrap";var l=document.createElement("input");l.style.display="inline-block",l.setAttribute("type","checkbox"),i.isVisible(n)&&(l.setAttribute("checked","checked"),l.defaultChecked=!0),s.appendChild(l);var r=this.convertValueToString(n)||mxResources$1.get("background")||"Background";s.setAttribute("title",r),mxUtils$1.write(s,r),a.appendChild(s),mxEvent$1.addListener(l,"click",function(){l.getAttribute("checked")!=null?l.removeAttribute("checked"):l.setAttribute("checked","checked"),i.setVisible(n,l.checked)})})(i.getChildAt(i.root,e));return a};Graph$1.prototype.replacePlaceholders=function(a,i,t,e){var n=[];if(i!=null){for(var s=0,l=null;l=this.placeholderPattern.exec(i);){var r=l[0];if(r.length>2&&r!="%label%"&&r!="%tooltip%"){var o=null;if(l.index>s&&i.charAt(l.index-1)=="%")o=r.substring(1);else{var h=r.substring(1,r.length-1);if(h=="id")o=a.id;else if(h.indexOf("{")<0)for(var u=a;o==null&&u!=null;)u.value!=null&&typeof u.value=="object"&&(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(o=u.getAttribute(h+"_"+Graph$1.diagramLanguage)),o==null&&(o=u.hasAttribute(h)?u.getAttribute(h)!=null?u.getAttribute(h):"":null)),u=this.model.getParent(u);o==null&&(o=this.getGlobalVariable(h)),o==null&&t!=null&&(o=t[h])}n.push(i.substring(s,l.index)+(o??r)),s=l.index+r.length}}n.push(i.substring(s))}return n.join("")};Graph$1.prototype.restoreSelection=function(a){if(a!=null&&a.length>0){for(var i=[],t=0;t<a.length;t++){var e=this.model.getCell(a[t].id);e!=null&&i.push(e)}this.setSelectionCells(i)}else this.clearSelection()};Graph$1.prototype.selectCellsForConnectVertex=function(a,i,t){a.length==2&&this.model.isVertex(a[1])?(this.setSelectionCell(a[1]),this.scrollCellToVisible(a[1]),t!=null&&(mxEvent$1.isTouchEvent(i)?t.update(t.getState(this.view.getState(a[1]))):t.reset())):this.setSelectionCells(a)};Graph$1.prototype.isCloneConnectSource=function(a){var i=null;return this.layoutManager!=null&&(i=this.layoutManager.getLayout(this.model.getParent(a))),this.isTableRow(a)||this.isTableCell(a)||i!=null&&i.constructor==mxStackLayout};Graph$1.prototype.connectVertex=function(a,i,t,e,n,s,l,r){if(s=s||!1,a.geometry.relative&&this.model.isEdge(a.parent))return[];for(;a.geometry.relative&&this.model.isVertex(a.parent);)a=a.parent;var o=this.isCloneConnectSource(a),h=o?a:this.getCompositeParent(a),u=a.geometry.relative&&a.parent.geometry!=null?new mxPoint(a.parent.geometry.width*a.geometry.x,a.parent.geometry.height*a.geometry.y):new mxPoint(h.geometry.x,h.geometry.y);i==mxConstants$1.DIRECTION_NORTH?(u.x+=h.geometry.width/2,u.y-=t):i==mxConstants$1.DIRECTION_SOUTH?(u.x+=h.geometry.width/2,u.y+=h.geometry.height+t):i==mxConstants$1.DIRECTION_WEST?(u.x-=t,u.y+=h.geometry.height/2):(u.x+=h.geometry.width+t,u.y+=h.geometry.height/2);var d=this.view.getState(this.model.getParent(a)),m=this.view.scale,g=this.view.translate,x=g.x*m,v=g.y*m;d!=null&&this.model.isVertex(d.cell)&&(x=d.x,v=d.y),this.model.isVertex(a.parent)&&a.geometry.relative&&(u.x+=a.parent.geometry.x,u.y+=a.parent.geometry.y);var C=s?null:new mxRectangle(x+u.x*m,v+u.y*m).grow(40),E=C!=null?this.getCells(0,0,0,0,null,null,C):null,b=E!=null&&E.length>0?E.reverse()[0]:null,w=!1;if(b!=null&&this.model.isAncestor(b,a)&&(w=!0,b=null),b==null){var $=this.getSwimlaneAt(x+u.x*m,v+u.y*m);$!=null&&(w=!1,b=$)}for(var $=b;$!=null;){if(this.isCellLocked($)){b=null;break}$=this.model.getParent($)}if(b!=null){var P=this.view.getState(a),M=this.view.getState(b);P!=null&&M!=null&&mxUtils$1.intersects(P,M)&&(b=null)}var D=!mxEvent$1.isShiftDown(e)||mxEvent$1.isControlDown(e)||n;if(D&&(i==mxConstants$1.DIRECTION_NORTH?u.y-=a.geometry.height/2:i==mxConstants$1.DIRECTION_SOUTH?u.y+=a.geometry.height/2:i==mxConstants$1.DIRECTION_WEST?u.x-=a.geometry.width/2:u.x+=a.geometry.width/2),b!=null&&!this.isCellConnectable(b)&&!this.isSwimlane(b)){var k=this.getModel().getParent(b);this.getModel().isVertex(k)&&this.isCellConnectable(k)&&(b=k)}(b==a||this.model.isEdge(b)||!this.isCellConnectable(b)&&!this.isSwimlane(b))&&(b=null);var Z=[],q=b!=null&&this.isSwimlane(b),j=q?null:b,X=mxUtils$1.bind(this,function(rt){if(l==null||rt!=null||b==null&&o){this.model.beginUpdate();try{if(j==null&&D){for(var et=rt??a,Y=this.getCellGeometry(et);Y!=null&&Y.relative;)et=this.getModel().getParent(et),Y=this.getCellGeometry(et);et=o?a:this.getCompositeParent(et),j=rt??this.duplicateCells([et],!1)[0],rt!=null&&this.addCells([j],this.model.getParent(a),null,null,null,!0);var Y=this.getCellGeometry(j);Y!=null&&(Y.x=u.x-Y.width/2,Y.y=u.y-Y.height/2),q?(this.addCells([j],b,null,null,null,!0),b=null):D&&b==null&&!w&&!o&&this.addCells([j],this.getDefaultParent(),null,null,null,!0)}var G=mxEvent$1.isControlDown(e)&&mxEvent$1.isShiftDown(e)&&D||b==null&&o?null:this.insertEdge(this.model.getParent(a),null,"",a,j,this.createCurrentEdgeStyle());if(G!=null&&this.connectionHandler.insertBeforeSource){for(var J=null,tt=a;tt.parent!=null&&tt.geometry!=null&&tt.geometry.relative&&tt.parent!=G.parent;)tt=this.model.getParent(tt);if(tt!=null&&tt.parent!=null&&tt.parent==G.parent){var J=tt.parent.getIndex(tt);this.model.add(tt.parent,G,J)}}if(b==null&&j!=null&&a.parent!=null&&o&&i==mxConstants$1.DIRECTION_WEST){var J=a.parent.getIndex(a);this.model.add(a.parent,j,J)}G!=null&&Z.push(G),b==null&&j!=null&&Z.push(j),j==null&&G!=null&&G.geometry.setTerminalPoint(u,!1),G!=null&&this.fireEvent(new mxEventObject$1("cellsInserted","cells",[G]))}finally{this.model.endUpdate()}}if(r!=null)r(Z);else return Z});if(l!=null&&j==null&&D&&(b!=null||!o))l(x+u.x*m,v+u.y*m,X);else return X(j)};Graph$1.prototype.getIndexableText=function(){var a=document.createElement("div"),i=[],t="";for(var e in this.model.cells){var n=this.model.cells[e];(this.model.isVertex(n)||this.model.isEdge(n))&&(this.isHtmlLabel(n)?(a.innerHTML=this.sanitizeHtml(this.getLabel(n)),t=mxUtils$1.extractTextWithWhitespace([a])):t=this.getLabel(n),t=mxUtils$1.trim(t.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),t.length>0&&i.push(t))}return i.join(" ")};Graph$1.prototype.convertValueToString=function(a){var i=this.model.getValue(a);if(i!=null&&typeof i=="object"){var t=null;if(this.isReplacePlaceholders(a)&&a.getAttribute("placeholder")!=null)for(var e=a.getAttribute("placeholder"),n=a;t==null&&n!=null;)n.value!=null&&typeof n.value=="object"&&(t=n.hasAttribute(e)?n.getAttribute(e)!=null?n.getAttribute(e):"":null),n=this.model.getParent(n);else{var t=null;Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(t=i.getAttribute("label_"+Graph$1.diagramLanguage)),t==null&&(t=i.getAttribute("label")||"")}return t||""}return mxGraph.prototype.convertValueToString.apply(this,arguments)};Graph$1.prototype.getLinksForState=function(a){return a!=null&&a.text!=null&&a.text.node!=null?a.text.node.getElementsByTagName("a"):null};Graph$1.prototype.getLinkForCell=function(a){if(a.value!=null&&typeof a.value=="object"){var i=a.value.getAttribute("link");return i!=null&&i.toLowerCase().substring(0,11)==="javascript:"&&(i=i.substring(11)),i}return null};Graph$1.prototype.getCellStyle=function(a){var i=mxGraph.prototype.getCellStyle.apply(this,arguments);if(a!=null&&this.layoutManager!=null){var t=this.model.getParent(a);if(this.model.isVertex(t)&&this.isCellCollapsed(a)){var e=this.layoutManager.getLayout(t);e!=null&&e.constructor==mxStackLayout&&(i[mxConstants$1.STYLE_HORIZONTAL]=!e.horizontal)}}return i};Graph$1.prototype.updateAlternateBounds=function(a,i,t){if(a!=null&&i!=null&&this.layoutManager!=null&&i.alternateBounds!=null){var e=this.layoutManager.getLayout(this.model.getParent(a));e!=null&&e.constructor==mxStackLayout&&(e.horizontal?i.alternateBounds.height=0:i.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)};Graph$1.prototype.isMoveCellsEvent=function(a,i){return mxEvent$1.isShiftDown(a)||mxUtils$1.getValue(i.style,"moveCells","0")=="1"};Graph$1.prototype.foldCells=function(a,i,t,e,n){if(i=i??!1,t==null&&(t=this.getFoldableCells(this.getSelectionCells(),a)),t!=null){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),this.layoutManager!=null)for(var s=0;s<t.length;s++){var l=this.view.getState(t[s]),r=this.getCellGeometry(t[s]);if(l!=null&&r!=null){var o=Math.round(r.width-l.width/this.view.scale),h=Math.round(r.height-l.height/this.view.scale);if(h!=0||o!=0){var u=this.model.getParent(t[s]),d=this.layoutManager.getLayout(u);d==null?n!=null&&this.isMoveCellsEvent(n,l)&&this.moveSiblings(l,u,o,h):(n==null||!mxEvent$1.isAltDown(n))&&d.constructor==mxStackLayout&&!d.resizeLast&&this.resizeParentStacks(u,d,o,h)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(t)}};Graph$1.prototype.moveSiblings=function(a,i,t,e){this.model.beginUpdate();try{for(var n=this.getCellsBeyond(a.x,a.y,i,!0,!0),s=0;s<n.length;s++)if(n[s]!=a.cell){var l=this.view.getState(n[s]),r=this.getCellGeometry(n[s]);l!=null&&r!=null&&(r=r.clone(),r.translate(Math.round(t*Math.max(0,Math.min(1,(l.x-a.x)/a.width))),Math.round(e*Math.max(0,Math.min(1,(l.y-a.y)/a.height)))),this.model.setGeometry(n[s],r))}}finally{this.model.endUpdate()}};Graph$1.prototype.resizeParentStacks=function(a,i,t,e){if(this.layoutManager!=null&&i!=null&&i.constructor==mxStackLayout&&!i.resizeLast){this.model.beginUpdate();try{for(var n=i.horizontal;a!=null&&i!=null&&i.constructor==mxStackLayout&&i.horizontal==n&&!i.resizeLast;){var s=this.getCellGeometry(a),l=this.view.getState(a);l!=null&&s!=null&&(s=s.clone(),i.horizontal?s.width+=t+Math.min(0,l.width/this.view.scale-s.width):s.height+=e+Math.min(0,l.height/this.view.scale-s.height),this.model.setGeometry(a,s)),a=this.model.getParent(a),i=this.layoutManager.getLayout(a)}}finally{this.model.endUpdate()}}};Graph$1.prototype.isContainer=function(a){var i=this.getCurrentCellStyle(a);return this.isSwimlane(a)?i.container!="0":i.container=="1"};Graph$1.prototype.isCellConnectable=function(a){var i=this.getCurrentCellStyle(a);return i.connectable!=null?i.connectable!="0":mxGraph.prototype.isCellConnectable.apply(this,arguments)};Graph$1.prototype.isLabelMovable=function(a){var i=this.getCurrentCellStyle(a);return i.movableLabel!=null?i.movableLabel!="0":mxGraph.prototype.isLabelMovable.apply(this,arguments)};Graph$1.prototype.selectAll=function(a){a=a||this.getDefaultParent(),this.isCellLocked(a)||mxGraph.prototype.selectAll.apply(this,arguments)};Graph$1.prototype.selectCells=function(a,i,t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectCells.apply(this,arguments)};Graph$1.prototype.getSwimlaneAt=function(a,i,t){var e=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return this.isCellLocked(e)&&(e=null),e};Graph$1.prototype.isCellFoldable=function(a){var i=this.getCurrentCellStyle(a);return this.foldingEnabled&&(i.treeFolding=="1"||!this.isCellLocked(a)&&(this.isContainer(a)&&i.collapsible!="0"||!this.isContainer(a)&&i.collapsible=="1"))};Graph$1.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()};Graph$1.prototype.zoom=function(a,i){a=Math.max(.01,Math.min(this.view.scale*a,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)};Graph$1.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)};Graph$1.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)};Graph$1.prototype.fitWindow=function(a,i){i=i??10;var t=this.container.clientWidth-i,e=this.container.clientHeight-i,n=Math.floor(20*Math.min(t/a.width,e/a.height))/20;if(this.zoomTo(n),mxUtils$1.hasScrollbars(this.container)){var s=this.view.translate;this.container.scrollTop=(a.y+s.y)*n-Math.max((e-a.height*n)/2+i/2,0),this.container.scrollLeft=(a.x+s.x)*n-Math.max((t-a.width*n)/2+i/2,0)}};Graph$1.prototype.getTooltipForCell=function(a){var i="";if(mxUtils$1.isNode(a.value)){var t=null;if(Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&(t=a.value.getAttribute("tooltip_"+Graph$1.diagramLanguage)),t==null&&(t=a.value.getAttribute("tooltip")),t!=null)t!=null&&this.isReplacePlaceholders(a)&&(t=this.replacePlaceholders(a,t)),i=this.sanitizeHtml(t);else{var e=this.builtInProperties,n=a.value.attributes,s=[];this.isEnabled()&&e.push("link");for(var l=0;l<n.length;l++)mxUtils$1.indexOf(e,n[l].nodeName)<0&&n[l].nodeValue.length>0&&s.push({name:n[l].nodeName,value:n[l].nodeValue});s.sort(function(r,o){return r.name<o.name?-1:r.name>o.name?1:0});for(var l=0;l<s.length;l++)(s[l].name!="link"||!this.isCustomLink(s[l].value))&&(i+=(s[l].name!="link"?"<b>"+s[l].name+":</b> ":"")+mxUtils$1.htmlEntities(s[l].value)+`
`);i.length>0&&(i=i.substring(0,i.length-1),mxClient.IS_SVG&&(i='<div style="max-width:360px;">'+i+"</div>"))}}return i};Graph$1.prototype.stringToBytes=function(a){return Graph$1.stringToBytes(a)};Graph$1.prototype.bytesToString=function(a){return Graph$1.bytesToString(a)};Graph$1.prototype.compressNode=function(a){return Graph$1.compressNode(a)};Graph$1.prototype.compress=function(a,i){return Graph$1.compress(a,i)};Graph$1.prototype.decompress=function(a,i){return Graph$1.decompress(a,i)};Graph$1.prototype.zapGremlins=function(a){return Graph$1.zapGremlins(a)};function HoverIcons(a){this.graph=a,this.init()}HoverIcons.prototype.arrowSpacing=2;HoverIcons.prototype.updateDelay=500;HoverIcons.prototype.activationDelay=140;HoverIcons.prototype.currentState=null;HoverIcons.prototype.activeArrow=null;HoverIcons.prototype.inactiveOpacity=15;HoverIcons.prototype.cssCursor="copy";HoverIcons.prototype.checkCollisions=!0;HoverIcons.prototype.arrowFill="#29b6f2";HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph$1.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14);HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph$1.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26);HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph$1.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14);HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph$1.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26);HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph$1.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26);HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38);HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0;HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources$1.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources$1.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources$1.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources$1.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils$1.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils$1.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent$1.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent$1.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent$1.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent$1.UP,this.repaintHandler),this.graph.addListener(mxEvent$1.ROOT,this.repaintHandler),this.graph.addListener(mxEvent$1.ESCAPE,this.resetHandler),mxEvent$1.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){this.mouseDownPoint=null})),mxEvent$1.addListener(this.graph.container,"mouseleave",mxUtils$1.bind(this,function(t){t.relatedTarget!=null&&mxEvent$1.getSource(t)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent$1.START_EDITING,mxUtils$1.bind(this,function(t){this.reset()}));var a=this.graph.click;this.graph.click=mxUtils$1.bind(this,function(t){a.apply(this.graph,arguments),this.currentState!=null&&!this.graph.isCellSelected(this.currentState.cell)&&mxEvent$1.isTouchEvent(t.getEvent())&&!this.graph.model.isVertex(t.getCell())&&this.reset()});var i=!1;this.graph.addMouseListener({mouseDown:mxUtils$1.bind(this,function(t,e){i=!1;var n=e.getEvent();if(this.isResetEvent(n))this.reset();else if(!this.isActive()){var s=this.getState(e.getState());(s!=null||!mxEvent$1.isTouchEvent(n))&&this.update(s)}this.setDisplay("none")}),mouseMove:mxUtils$1.bind(this,function(t,e){var n=e.getEvent();this.isResetEvent(n)?this.reset():!this.graph.isMouseDown&&!mxEvent$1.isTouchEvent(n)&&this.update(this.getState(e.getState()),e.getGraphX(),e.getGraphY()),this.graph.connectionHandler!=null&&this.graph.connectionHandler.shape!=null&&(i=!0)}),mouseUp:mxUtils$1.bind(this,function(t,e){var n=e.getEvent();mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(n),mxEvent$1.getClientY(n)),this.isResetEvent(n)?this.reset():this.isActive()&&!i&&this.mouseDownPoint!=null?this.click(this.currentState,this.getDirection(),e):this.isActive()?this.graph.getSelectionCount()!=1||!this.graph.model.isEdge(this.graph.getSelectionCell())?this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(e.getGraphX(),e.getGraphY())))):this.reset():mxEvent$1.isTouchEvent(n)||this.bbox!=null&&mxUtils$1.contains(this.bbox,e.getGraphX(),e.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent$1.isTouchEvent(n)||this.reset(),i=!1,this.resetActiveArrow()})})};HoverIcons.prototype.isResetEvent=function(a,i){return mxEvent$1.isAltDown(a)||this.activeArrow==null&&mxEvent$1.isShiftDown(a)||mxEvent$1.isPopupTrigger(a)&&!this.graph.isCloneEvent(a)};HoverIcons.prototype.createArrow=function(a,i){var t=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&document.compatMode!="CSS1Compat"?(t=document.createElement(mxClient.VML_PREFIX+":image"),t.setAttribute("src",a.src),t.style.borderStyle="none"):(t=document.createElement("div"),t.style.backgroundImage="url("+a.src+")",t.style.backgroundPosition="center",t.style.backgroundRepeat="no-repeat"),t.style.width=a.width+4+"px",t.style.height=a.height+4+"px",t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(t=mxUtils$1.createImage(a.src),t.style.width=a.width+"px",t.style.height=a.height+"px",t.style.padding=this.tolerance+"px"),i!=null&&t.setAttribute("title",i),t.style.position="absolute",t.style.cursor=this.cssCursor,mxEvent$1.addGestureListeners(t,mxUtils$1.bind(this,function(e){this.currentState!=null&&!this.isResetEvent(e)&&(this.mouseDownPoint=mxUtils$1.convertPoint(this.graph.container,mxEvent$1.getClientX(e),mxEvent$1.getClientY(e)),this.drag(e,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=t,this.setDisplay("none"),mxEvent$1.consume(e))})),mxEvent$1.redirectMouseEvents(t,this.graph,this.currentState),mxEvent$1.addListener(t,"mouseenter",mxUtils$1.bind(this,function(e){mxEvent$1.isMouseEvent(e)&&(this.activeArrow!=null&&this.activeArrow!=t&&mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils$1.setOpacity(t,100),this.activeArrow=t)})),mxEvent$1.addListener(t,"mouseleave",mxUtils$1.bind(this,function(e){this.graph.isMouseDown||this.resetActiveArrow()})),t};HoverIcons.prototype.resetActiveArrow=function(){this.activeArrow!=null&&(mxUtils$1.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)};HoverIcons.prototype.getDirection=function(){var a=mxConstants$1.DIRECTION_EAST;return this.activeArrow==this.arrowUp?a=mxConstants$1.DIRECTION_NORTH:this.activeArrow==this.arrowDown?a=mxConstants$1.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(a=mxConstants$1.DIRECTION_WEST),a};HoverIcons.prototype.visitNodes=function(a){for(var i=0;i<this.elts.length;i++)this.elts[i]!=null&&a(this.elts[i])};HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(a){a.parentNode!=null&&a.parentNode.removeChild(a)})};HoverIcons.prototype.setDisplay=function(a){this.visitNodes(function(i){i.style.display=a})};HoverIcons.prototype.isActive=function(){return this.activeArrow!=null&&this.currentState!=null};HoverIcons.prototype.drag=function(a,i,t){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),this.currentState!=null){this.graph.connectionHandler.start(this.currentState,i,t),this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(a),this.graph.isMouseDown=!0;var e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);e!=null&&e.setHandlesVisible(!1);var n=this.graph.connectionHandler.edgeState;if(a!=null&&mxEvent$1.isShiftDown(a)&&mxEvent$1.isControlDown(a)&&n!=null&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_EDGE,null)==="orthogonalEdgeStyle"){var s=this.getDirection();n.cell.style=mxUtils$1.setStyle(n.cell.style,"sourcePortConstraint",s),n.style.sourcePortConstraint=s}}};HoverIcons.prototype.getStateAt=function(a,i,t){return this.graph.view.getState(this.graph.getCellAt(i,t))};HoverIcons.prototype.click=function(a,i,t){var e=t.getEvent(),n=t.getGraphX(),s=t.getGraphY(),l=this.getStateAt(a,n,s);l!=null&&this.graph.model.isEdge(l.cell)&&!this.graph.isCloneEvent(e)&&(l.getVisibleTerminalState(!0)==a||l.getVisibleTerminalState(!1)==a)?(this.graph.setSelectionCell(l.cell),this.reset()):a!=null&&this.execute(a,i,t),t.consume()};HoverIcons.prototype.execute=function(a,i,t){var e=t.getEvent();this.graph.selectCellsForConnectVertex(this.graph.connectVertex(a.cell,i,this.graph.defaultEdgeLength,e,this.graph.isCloneEvent(e),this.graph.isCloneEvent(e)),e,this)};HoverIcons.prototype.reset=function(a){a=a??!0,a&&this.updateThread!=null&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null};HoverIcons.prototype.repaint=function(){if(this.bbox=null,this.currentState!=null){if(this.currentState=this.getState(this.currentState),this.currentState!=null&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var a=mxRectangle.fromRectangle(this.currentState);this.currentState.shape!=null&&this.currentState.shape.boundingBox!=null&&(a=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),a.grow(this.graph.tolerance),a.grow(this.arrowSpacing);var i=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);this.graph.isTableRow(this.currentState.cell)&&(i=this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)));var t=null;i!=null&&(a.x-=i.horizontalOffset/2,a.y-=i.verticalOffset/2,a.width+=i.horizontalOffset,a.height+=i.verticalOffset,i.rotationShape!=null&&i.rotationShape.node!=null&&i.rotationShape.node.style.visibility!="hidden"&&i.rotationShape.node.style.display!="none"&&i.rotationShape.boundingBox!=null&&(t=i.rotationShape.boundingBox));var e=mxUtils$1.bind(this,function(u,d,m){if(t!=null){var g=new mxRectangle(d,m,u.clientWidth,u.clientHeight);mxUtils$1.intersects(g,t)&&(u==this.arrowUp?m-=g.y+g.height-t.y:u==this.arrowRight?d+=t.x+t.width-g.x:u==this.arrowDown?m+=t.y+t.height-g.y:u==this.arrowLeft&&(d-=g.x+g.width-t.x))}u.style.left=d+"px",u.style.top=m+"px",mxUtils$1.setOpacity(u,this.inactiveOpacity)});if(e(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(a.y-this.triangleUp.height-this.tolerance)),e(this.arrowRight,Math.round(a.x+a.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),e(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(a.y+a.height-this.tolerance)),e(this.arrowLeft,Math.round(a.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions){var n=this.graph.getCellAt(a.x+a.width+this.triangleRight.width/2,this.currentState.getCenterY()),s=this.graph.getCellAt(a.x-this.triangleLeft.width/2,this.currentState.getCenterY()),l=this.graph.getCellAt(this.currentState.getCenterX(),a.y-this.triangleUp.height/2),r=this.graph.getCellAt(this.currentState.getCenterX(),a.y+a.height+this.triangleDown.height/2);n!=null&&n==s&&s==l&&l==r&&(n=null,s=null,l=null,r=null);var o=this.graph.getCellGeometry(this.currentState.cell),h=mxUtils$1.bind(this,function(u,d){var m=this.graph.model.isVertex(u)&&this.graph.getCellGeometry(u);u!=null&&!this.graph.model.isAncestor(u,this.currentState.cell)&&!this.graph.isSwimlane(u)&&(m==null||o==null||m.height<3*o.height&&m.width<3*o.width)?d.style.visibility="hidden":d.style.visibility="visible"});h(n,this.arrowRight),h(s,this.arrowLeft),h(l,this.arrowUp),h(r,this.arrowDown)}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources$1.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources$1.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();this.currentState!=null&&(this.bbox=this.computeBoundingBox(),this.bbox!=null&&this.bbox.grow(10))}};HoverIcons.prototype.computeBoundingBox=function(){var a=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(i){if(i.parentNode!=null){var t=new mxRectangle(i.offsetLeft,i.offsetTop,i.offsetWidth,i.offsetHeight);a==null?a=t:a.add(t)}}),a};HoverIcons.prototype.getState=function(a){if(a!=null){var i=a.cell;if(!this.graph.getModel().contains(i))a=null;else{if(this.graph.getModel().isVertex(i)&&!this.graph.isCellConnectable(i)){var t=this.graph.getModel().getParent(i);this.graph.getModel().isVertex(t)&&this.graph.isCellConnectable(t)&&(i=t)}(this.graph.isCellLocked(i)||this.graph.model.isEdge(i))&&(i=null),a=this.graph.view.getState(i),a!=null&&a.style==null&&(a=null)}}return a};HoverIcons.prototype.update=function(a,i,t){if(!this.graph.connectionArrowsEnabled||a!=null&&mxUtils$1.getValue(a.style,"allowArrows","1")=="0")this.reset();else{a!=null&&a.cell.geometry!=null&&a.cell.geometry.relative&&this.graph.model.isEdge(a.cell.parent)&&(a=null);var e=null;this.prev!=a||this.isActive()?(this.startTime=new Date().getTime(),this.prev=a,e=0,this.updateThread!=null&&window.clearTimeout(this.updateThread),a!=null&&(this.updateThread=window.setTimeout(mxUtils$1.bind(this,function(){!this.isActive()&&!this.graph.isMouseDown&&!this.graph.panningHandler.isActive()&&(this.prev=a,this.update(a,i,t))}),this.updateDelay+10))):this.startTime!=null&&(e=new Date().getTime()-this.startTime),this.setDisplay(""),this.currentState!=null&&this.currentState!=a&&e<this.activationDelay&&this.bbox!=null&&!mxUtils$1.contains(this.bbox,i,t)?this.reset(!1):(this.currentState!=null||e>this.activationDelay)&&this.currentState!=a&&(e>this.updateDelay&&a!=null||this.bbox==null||i==null||t==null||!mxUtils$1.contains(this.bbox,i,t))&&(a!=null&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(a),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=a&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}};HoverIcons.prototype.setCurrentState=function(a){a.style.portConstraint!="eastwest"&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=a};Graph$1.prototype.createParent=function(a,i,t,e,n){a=this.cloneCell(a);for(var s=0;s<t;s++){var l=this.cloneCell(i),r=this.getCellGeometry(l);r!=null&&(r.x+=s*e,r.y+=s*n),a.insert(l)}return a};Graph$1.prototype.createTable=function(a,i,t,e,n,s,l,r,o){return t=t??60,e=e??40,s=s??30,l=l??"shape=table;html=1;whiteSpace=wrap;startSize="+(n!=null?s:"0")+";container=1;collapsible=0;childLayout=tableLayout;",r=r??"shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",o=o??"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;",this.createParent(this.createVertex(null,null,n??"",0,0,i*t,a*e+(n!=null?s:0),l),this.createParent(this.createVertex(null,null,"",0,0,i*t,e,r),this.createVertex(null,null,"",0,0,t,e,o),i,t,0),a,0,e)};Graph$1.prototype.setTableValues=function(a,i,t){for(var e=this.model.getChildCells(a,!0),n=0;n<e.length;n++)if(t!=null&&(e[n].value=t[n]),i!=null)for(var s=this.model.getChildCells(e[n],!0),l=0;l<s.length;l++)i[n][l]!=null&&(s[l].value=i[n][l]);return a};Graph$1.prototype.createCrossFunctionalSwimlane=function(a,i,t,e,n,s,l,r,o){t=t??120,e=e??120,n=n??40;var h="html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;";s=s??"shape=table;childLayout=tableLayout;rowLines=0;columnLines=0;startSize="+n+";"+h,l=l??"swimlane;horizontal=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize="+n+";"+h,r=r??"swimlane;connectable=0;startSize=40;"+h,o=o??"swimlane;connectable=0;startSize=0;"+h;var u=this.createVertex(null,null,"",0,0,i*t,a*e,s),d=mxUtils$1.getValue(this.getCellStyle(u),mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE);u.geometry.width+=d,u.geometry.height+=d;var m=this.createVertex(null,null,"",0,d,i*t+d,e,l);return u.insert(this.createParent(m,this.createVertex(null,null,"",d,0,t,e,r),i,t,0)),a>1?(m.geometry.y=e+d,this.createParent(u,this.createParent(m,this.createVertex(null,null,"",d,0,t,e,o),i,t,0),a-1,0,e)):u};Graph$1.prototype.isTableCell=function(a){return this.model.isVertex(a)&&this.isTableRow(this.model.getParent(a))};Graph$1.prototype.isTableRow=function(a){return this.model.isVertex(a)&&this.isTable(this.model.getParent(a))};Graph$1.prototype.isTable=function(a){var i=this.getCellStyle(a);return i!=null&&i.childLayout=="tableLayout"};Graph$1.prototype.setTableRowHeight=function(a,i,t){t=t??!0;var e=this.getModel();e.beginUpdate();try{var n=this.getCellGeometry(a);if(n!=null){n=n.clone(),n.height+=i,e.setGeometry(a,n);var s=e.getParent(a),l=e.getChildCells(s,!0);if(!t){var r=mxUtils$1.indexOf(l,a);if(r<l.length-1){var o=l[r+1],h=this.getCellGeometry(o);h!=null&&(h=h.clone(),h.y+=i,h.height-=i,e.setGeometry(o,h))}}var u=this.getCellGeometry(s);u!=null&&(t||(t=a==l[l.length-1]),t&&(u=u.clone(),u.height+=i,e.setGeometry(s,u))),this.layoutManager!=null&&this.layoutManager.executeLayout(s,!0)}}finally{e.endUpdate()}};Graph$1.prototype.setTableColumnWidth=function(a,i,t){t=t??!1;var e=this.getModel(),n=e.getParent(a),s=e.getParent(n),l=e.getChildCells(n,!0),r=mxUtils$1.indexOf(l,a),o=r==l.length-1;e.beginUpdate();try{for(var h=e.getChildCells(s,!0),u=0;u<h.length;u++){n=h[u],l=e.getChildCells(n,!0);var d=l[r],m=this.getCellGeometry(d);if(m!=null&&(m=m.clone(),m.width+=i,e.setGeometry(d,m)),r<l.length-1){d=l[r+1];var m=this.getCellGeometry(d);m!=null&&(m=m.clone(),m.x+=i,t||(m.width-=i),e.setGeometry(d,m))}}if(o||t){var g=this.getCellGeometry(s);g!=null&&(g=g.clone(),g.width+=i,e.setGeometry(s,g))}this.layoutManager!=null&&this.layoutManager.executeLayout(s,!0)}finally{e.endUpdate()}};class TableLayout extends mxStackLayout{constructor(i){super(i)}}TableLayout.prototype.isHorizontal=function(){return!1};TableLayout.prototype.isVertexIgnored=function(a){return!this.graph.getModel().isVertex(a)||!this.graph.isCellVisible(a)};TableLayout.prototype.getSize=function(a,i){for(var t=0,e=0;e<a.length;e++)if(!this.isVertexIgnored(a[e])){var n=this.graph.getCellGeometry(a[e]);n!=null&&(t+=i?n.width:n.height)}return t};TableLayout.prototype.getRowLayout=function(a,i){for(var t=this.graph.model.getChildCells(a,!0),e=this.graph.getActualStartSize(a,!0),n=this.getSize(t,!0),s=i-e.x-e.width,l=[],r=e.x,o=0;o<t.length;o++){var h=this.graph.getCellGeometry(t[o]);h!=null&&(r+=h.width*s/n,l.push(Math.round(r)))}return l};TableLayout.prototype.layoutRow=function(a,i,t,e){var n=this.graph.getModel(),s=n.getChildCells(a,!0),l=this.graph.getActualStartSize(a,!0),r=l.x,o=0;i!=null&&(i=i.slice(),i.splice(0,0,l.x));for(var h=0;h<s.length;h++){var u=this.graph.getCellGeometry(s[h]);u!=null&&(u=u.clone(),u.y=l.y,u.height=t-l.y-l.height,i!=null?(u.x=i[h],u.width=i[h+1]-u.x,h==s.length-1&&h<i.length-2&&(u.width=e-u.x-l.x-l.width)):(u.x=r,r+=u.width,h==s.length-1?u.width=e-l.x-l.width-o:o+=u.width),n.setGeometry(s[h],u))}return o};TableLayout.prototype.execute=function(a){if(a!=null){var i=this.graph.getActualStartSize(a,!0),t=this.graph.getCellGeometry(a),e=this.graph.getCellStyle(a),n=mxUtils$1.getValue(e,"resizeLastRow","0")=="1",s=mxUtils$1.getValue(e,"resizeLast","0")=="1",l=mxUtils$1.getValue(e,"fixedRows","0")=="1",r=this.graph.getModel(),o=0;r.beginUpdate();try{var h=t.height-i.y-i.height,u=t.width-i.x-i.width,d=r.getChildCells(a,!0),m=this.getSize(d,!1);if(h>0&&u>0&&d.length>0&&m>0){if(n){var g=this.graph.getCellGeometry(d[d.length-1]);g!=null&&(g=g.clone(),g.height=h-m+g.height,r.setGeometry(d[d.length-1],g))}for(var x=s?null:this.getRowLayout(d[0],u),v=i.y,C=0;C<d.length;C++){var g=this.graph.getCellGeometry(d[C]);g!=null&&(g=g.clone(),g.x=i.x,g.width=u,g.y=Math.round(v),n||l?v+=g.height:v+=g.height/m*h,g.height=Math.round(v)-g.y,r.setGeometry(d[C],g)),o=Math.max(o,this.layoutRow(d[C],x,g.height,u))}l&&h<m&&(t=t.clone(),t.height=v+i.height,r.setGeometry(a,t)),s&&u<o+Graph$1.minTableColumnWidth&&(t=t.clone(),t.width=o+i.width+i.x+Graph$1.minTableColumnWidth,r.setGeometry(a,t))}}finally{r.endUpdate()}}};(function(){var a=mxGraphView.prototype.resetValidationState;mxGraphView.prototype.resetValidationState=function(){a.apply(this,arguments),this.validEdges=[]};var i=mxGraphView.prototype.validateCellState;mxGraphView.prototype.validateCellState=function(o,h){h=h??!0;var u=this.getState(o);return u!=null&&h&&this.graph.model.isEdge(u.cell)&&u.style!=null&&u.style[mxConstants$1.STYLE_CURVED]!=1&&!u.invalid&&this.updateLineJumps(u)&&this.graph.cellRenderer.redraw(u,!1,this.isRendering()),u=i.apply(this,arguments),u!=null&&h&&this.graph.model.isEdge(u.cell)&&u.style!=null&&u.style[mxConstants$1.STYLE_CURVED]!=1&&this.validEdges.push(u),u};var t=mxCellRenderer.prototype.isShapeInvalid;mxCellRenderer.prototype.isShapeInvalid=function(o,h){return t.apply(this,arguments)||o.routedPoints!=null&&h.routedPoints!=null&&!mxUtils$1.equalPoints(h.routedPoints,o.routedPoints)};var e=mxGraphView.prototype.updateCellState;mxGraphView.prototype.updateCellState=function(o){e.apply(this,arguments),this.graph.model.isEdge(o.cell)&&o.style[mxConstants$1.STYLE_CURVED]!=1&&this.updateLineJumps(o)},mxGraphView.prototype.updateLineJumps=function(o){var h=o.absolutePoints;if(Graph$1.lineJumpsEnabled){var u=o.routedPoints!=null,d=null;if(h!=null&&this.validEdges!=null&&mxUtils$1.getValue(o.style,"jumpStyle","none")!=="none"){let et=function(Y,G,J){var tt=new mxPoint(G,J);tt.type=Y,d.push(tt);var gt=o.routedPoints!=null?o.routedPoints[d.length-1]:null;return gt==null||gt.type!=Y||gt.x!=G||gt.y!=J};var rt=et,m=.5*this.scale;u=!1,d=[];for(var g=0;g<h.length-1;g++){for(var x=h[g+1],v=h[g],C=[],E=h[g+2];g<h.length-2&&mxUtils$1.ptSegDistSq(v.x,v.y,E.x,E.y,x.x,x.y)<1*this.scale*this.scale;)x=E,g++,E=h[g+2];u=et(0,v.x,v.y)||u;for(var b=0;b<this.validEdges.length;b++){var w=this.validEdges[b],$=w.absolutePoints;if($!=null&&mxUtils$1.intersects(o,w)&&w.style.noJump!="1")for(var P=0;P<$.length-1;P++){var M=$[P+1],D=$[P];for(E=$[P+2];P<$.length-2&&mxUtils$1.ptSegDistSq(D.x,D.y,E.x,E.y,M.x,M.y)<1*this.scale*this.scale;)M=E,P++,E=$[P+2];var X=mxUtils$1.intersection(v.x,v.y,x.x,x.y,D.x,D.y,M.x,M.y);if(X!=null&&(Math.abs(X.x-v.x)>m||Math.abs(X.y-v.y)>m)&&(Math.abs(X.x-x.x)>m||Math.abs(X.y-x.y)>m)&&(Math.abs(X.x-D.x)>m||Math.abs(X.y-D.y)>m)&&(Math.abs(X.x-M.x)>m||Math.abs(X.y-M.y)>m)){for(var k=X.x-v.x,Z=X.y-v.y,q={distSq:k*k+Z*Z,x:X.x,y:X.y},j=0;j<C.length;j++)if(C[j].distSq>q.distSq){C.splice(j,0,q),q=null;break}q!=null&&(C.length==0||C[C.length-1].x!==q.x||C[C.length-1].y!==q.y)&&C.push(q)}}}for(var P=0;P<C.length;P++)u=et(1,C[P].x,C[P].y)||u}var X=h[h.length-1];u=et(0,X.x,X.y)||u}return o.routedPoints=d,u}else return!1};var n=mxConnector.prototype.paintLine;mxConnector.prototype.paintLine=function(o,h,u){if(this.routedPoints=this.state!=null?this.state.routedPoints:null,this.outline||this.state==null||this.style==null||this.state.routedPoints==null||this.state.routedPoints.length==0)n.apply(this,arguments);else{var d=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,m=(parseInt(mxUtils$1.getValue(this.style,"jumpSize",Graph$1.defaultJumpSize))-2)/2+this.strokewidth,g=mxUtils$1.getValue(this.style,"jumpStyle","none"),x=!0,v=null,C=null,E=[],b=null;o.begin();for(var w=0;w<this.state.routedPoints.length;w++){var $=this.state.routedPoints[w],P=new mxPoint($.x/this.scale,$.y/this.scale);w==0?P=h[0]:w==this.state.routedPoints.length-1&&(P=h[h.length-1]);var M=!1;if(v!=null&&$.type==1){var D=this.state.routedPoints[w+1],k=D.x/this.scale-P.x,Z=D.y/this.scale-P.y,q=k*k+Z*Z;if(b==null&&(b=new mxPoint(P.x-v.x,P.y-v.y),C=Math.sqrt(b.x*b.x+b.y*b.y),C>0?(b.x=b.x*m/C,b.y=b.y*m/C):b=null),q>m*m&&C>0){var k=v.x-P.x,Z=v.y-P.y,q=k*k+Z*Z;if(q>m*m){var j=new mxPoint(P.x-b.x,P.y-b.y),X=new mxPoint(P.x+b.x,P.y+b.y);E.push(j),this.addPoints(o,E,u,d,!1,null,x);var rt=Math.round(b.x)<0||Math.round(b.x)==0&&Math.round(b.y)<=0?1:-1;x=!1,g=="sharp"?(o.lineTo(j.x-b.y*rt,j.y+b.x*rt),o.lineTo(X.x-b.y*rt,X.y+b.x*rt),o.lineTo(X.x,X.y)):g=="arc"?(rt*=1.3,o.curveTo(j.x-b.y*rt,j.y+b.x*rt,X.x-b.y*rt,X.y+b.x*rt,X.x,X.y)):(o.moveTo(X.x,X.y),x=!0),E=[X],M=!0}}}else b=null;M||(E.push(P),v=P)}this.addPoints(o,E,u,d,!1,null,x),o.stroke()}};var s=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(o,h,u,d){if(h!=null&&o!=null&&(h.style.snapToPoint=="1"||o.style.snapToPoint=="1")){h=this.getTerminalPort(o,h,d);var m=this.getNextPoint(o,u,d),g=this.graph.isOrthogonal(o),x=mxUtils$1.toRadians(Number(h.style[mxConstants$1.STYLE_ROTATION]||"0")),v=new mxPoint(h.getCenterX(),h.getCenterY());if(x!=0){var C=Math.cos(-x),E=Math.sin(-x);m=mxUtils$1.getRotatedPoint(m,C,E,v)}var b=parseFloat(o.style[mxConstants$1.STYLE_PERIMETER_SPACING]||0);b+=parseFloat(o.style[d?mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING:mxConstants$1.STYLE_TARGET_PERIMETER_SPACING]||0);var w=this.getPerimeterPoint(h,m,x==0&&g,b);if(x!=0){var C=Math.cos(x),E=Math.sin(x);w=mxUtils$1.getRotatedPoint(w,C,E,v)}o.setAbsoluteTerminalPoint(this.snapToAnchorPoint(o,h,u,d,w),d)}else s.apply(this,arguments)},mxGraphView.prototype.snapToAnchorPoint=function(o,h,u,d,m){if(h!=null&&o!=null){var g=this.graph.getAllConnectionConstraints(h),x=null,v=null;if(g!=null)for(var C=0;C<g.length;C++){var E=this.graph.getConnectionPoint(h,g[C]);if(E!=null){var b=(E.x-m.x)*(E.x-m.x)+(E.y-m.y)*(E.y-m.y);(v==null||b<v)&&(x=E,v=b)}}x!=null&&(m=x)}return m};var l=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(o,h,u){var d=l.apply(this,arguments),m=o.getAttribute("placeholders");return m=="1"&&u.state!=null&&(d=u.state.view.graph.replacePlaceholders(u.state.cell,d)),d};var r=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(o){if(o.style!=null&&typeof pako<"u"){var h=mxUtils$1.getValue(o.style,mxConstants$1.STYLE_SHAPE,null);if(h!=null&&typeof h=="string"&&h.substring(0,8)=="stencil(")try{var u=h.substring(8,h.length-1),d=mxUtils$1.parseXml(Graph$1.decompress(u));return new mxShape(new mxStencil(d.documentElement))}catch(m){window.console!=null&&console.log("Error in shape: "+m)}}return r.apply(this,arguments)}})();mxStencilRegistry.libraries={};mxStencilRegistry.dynamicLoading=!0;mxStencilRegistry.allowEval=!0;mxStencilRegistry.packages=[];mxStencilRegistry.getStencil=function(a){var i=mxStencilRegistry.stencils[a];if(i==null&&mxCellRenderer.defaultShapes[a]==null&&mxStencilRegistry.dynamicLoading){var t=mxStencilRegistry.getBasenameForStencil(a);if(t!=null){var e=mxStencilRegistry.libraries[t];if(e!=null){if(mxStencilRegistry.packages[t]==null){for(var n=0;n<e.length;n++){var s=e[n];if(s.toLowerCase().substring(s.length-4,s.length)==".xml")mxStencilRegistry.loadStencilSet(s,null);else if(s.toLowerCase().substring(s.length-3,s.length)==".js")try{if(mxStencilRegistry.allowEval){var l=mxUtils$1.load(s);l!=null&&l.getStatus()>=200&&l.getStatus()<=299&&eval.call(window,l.getText())}}catch(r){window.console!=null&&console.log("error in getStencil:",s,r)}}mxStencilRegistry.packages[t]=1}}else t=t.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+t+".xml",null);i=mxStencilRegistry.stencils[a]}}return i};mxStencilRegistry.getBasenameForStencil=function(a){var i=null;if(a!=null&&typeof a=="string"){var t=a.split(".");if(t.length>0&&t[0]=="mxgraph"){i=t[1];for(var e=2;e<t.length-1;e++)i+="/"+t[e]}}return i};mxStencilRegistry.loadStencilSet=function(a,i,t,e){t=t??!1;var n=mxStencilRegistry.packages[a];if(t||n==null){var s=!1;if(n==null)try{if(e){mxStencilRegistry.loadStencil(a,mxUtils$1.bind(this,function(l){l!=null&&l.documentElement!=null&&(mxStencilRegistry.packages[a]=l,s=!0,mxStencilRegistry.parseStencilSet(l.documentElement,i,s))}));return}else n=mxStencilRegistry.loadStencil(a),mxStencilRegistry.packages[a]=n,s=!0}catch(l){window.console!=null&&console.log("error in loadStencilSet:",a,l)}n!=null&&n.documentElement!=null&&mxStencilRegistry.parseStencilSet(n.documentElement,i,s)}};mxStencilRegistry.loadStencil=function(a,i){if(i!=null)mxUtils$1.get(a,mxUtils$1.bind(this,function(t){i(t.getStatus()>=200&&t.getStatus()<=299?t.getXml():null)}));else return mxUtils$1.load(a).getXml()};mxStencilRegistry.parseStencilSets=function(a){for(var i=0;i<a.length;i++)mxStencilRegistry.parseStencilSet(mxUtils$1.parseXml(a[i]).documentElement)};mxStencilRegistry.parseStencilSet=function(a,i,t){if(a.nodeName=="stencils")for(var e=a.firstChild;e!=null;)e.nodeName=="shapes"&&mxStencilRegistry.parseStencilSet(e,i,t),e=e.nextSibling;else{t=t??!0;var n=a.firstChild,s="",l=a.getAttribute("name");for(l!=null&&(s=l+".");n!=null;){if(n.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(l=n.getAttribute("name"),l!=null)){s=s.toLowerCase();var r=l.replace(/ /g,"_");if(t&&mxStencilRegistry.addStencil(s+r.toLowerCase(),new mxStencil(n)),i!=null){var o=n.getAttribute("w"),h=n.getAttribute("h");o=o==null?80:parseInt(o,10),h=h==null?80:parseInt(h,10),i(s,r,l,o,h)}}n=n.nextSibling}}};typeof mxVertexHandler<"u"&&function(){mxConstants$1.HANDLE_FILLCOLOR="#29b6f2",mxConstants$1.HANDLE_STROKECOLOR="#0088cf",mxConstants$1.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants$1.OUTLINE_COLOR="#00a8ff",mxConstants$1.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants$1.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants$1.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.EDGE_SELECTION_COLOR="#00a8ff",mxConstants$1.DEFAULT_VALID_COLOR="#00a8ff",mxConstants$1.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants$1.GUIDE_COLOR="#0088cf",mxConstants$1.HIGHLIGHT_OPACITY=30,mxConstants$1.HIGHLIGHT_SIZE=5,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(S){return!mxEvent$1.isAltDown(S)};var a=mxGraphLayout.prototype.isVertexIgnored;mxGraphLayout.prototype.isVertexIgnored=function(S){return a.apply(this,arguments)||this.graph.isTableRow(S)||this.graph.isTableCell(S)};var i=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(S){return this.graph.isCloneEvent(S)||i.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var S=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return S.opacity=mxConstants$1.HIGHLIGHT_OPACITY,S},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(S){var A=this.graph.createCurrentEdgeStyle(),I=this.graph.createEdge(null,null,null,null,null,A),N=new mxCellState(this.graph.view,I,this.graph.getCellStyle(I));for(var _ in this.graph.currentEdgeStyle)N.style[_]=this.graph.currentEdgeStyle[_];return N};var t=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var S=t.apply(this,arguments);return S.isDashed=this.graph.currentEdgeStyle[mxConstants$1.STYLE_DASHED]=="1",S},mxConnectionHandler.prototype.updatePreview=function(S){};var e=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var S=e.apply(this,arguments),A=S.getCell;return S.getCell=mxUtils$1.bind(this,function(I){var N=A.apply(this,arguments);return this.error=null,N}),S},Graph$1.prototype.defaultVertexStyle={},Graph$1.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph$1.prototype.createCurrentEdgeStyle=function(){for(var S="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",A=["shape","curved","rounded","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","comicStyle","jumpStyle","jumpSize"],I=0;I<A.length;I++)this.currentEdgeStyle[A[I]]!=null&&(S+=A[I]+"="+this.currentEdgeStyle[A[I]]+";");return this.currentEdgeStyle.orthogonalLoop!=null?S+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":Graph$1.prototype.defaultEdgeStyle.orthogonalLoop!=null&&(S+="orthogonalLoop="+Graph$1.prototype.defaultEdgeStyle.orthogonalLoop+";"),this.currentEdgeStyle.jettySize!=null?S+="jettySize="+this.currentEdgeStyle.jettySize+";":Graph$1.prototype.defaultEdgeStyle.jettySize!=null&&(S+="jettySize="+Graph$1.prototype.defaultEdgeStyle.jettySize+";"),this.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"&&this.currentEdgeStyle.elbow!=null&&(S+="elbow="+this.currentEdgeStyle.elbow+";"),this.currentEdgeStyle.html!=null?S+="html="+this.currentEdgeStyle.html+";":S+="html=1;",S},Graph$1.prototype.updateCellStyles=function(S,A,I){this.model.beginUpdate();try{for(var N=0;N<I.length;N++)if(this.model.isVertex(I[N])||this.model.isEdge(I[N])){this.setCellStyles(S,null,[I[N]]);var _=this.getCellStyle(I[N]),V=_[S];A!=(V??mxConstants$1.NONE)&&this.setCellStyles(S,A,[I[N]])}}finally{this.model.endUpdate()}},Graph$1.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph$1.prototype.loadStylesheet=function(){var S=this.themes!=null?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils$1.load(STYLE_PATH+"/default.xml").getDocumentElement():null;if(S!=null){var A=new mxCodec(S.ownerDocument);A.decode(S,this.getStylesheet())}},Graph$1.prototype.createCellLookup=function(S,A){A=A??new Object;for(var I=0;I<S.length;I++){var N=S[I];A[mxObjectIdentity.get(N)]=N.getId();for(var _=this.model.getChildCount(N),V=0;V<_;V++)this.createCellLookup([this.model.getChildAt(N,V)],A)}return A},Graph$1.prototype.createCellMapping=function(S,A,I){I=I??new Object;for(var N in S){var _=A[N];I[_]==null&&(I[_]=S[N].getId()||"")}return I},Graph$1.prototype.importGraphModel=function(S,A,I,N){A=A??0,I=I??0;var _=new mxCodec(S.ownerDocument),V=new mxGraphModel;_.decode(S,V);var W=[],ot=new Object,at=new Object,mt=V.getChildren(this.cloneCell(V.root,this.isCloneInvalidEdges(),ot));if(mt!=null){var Lt=this.createCellLookup([V.root]);mt=mt.slice(),this.model.beginUpdate();try{if(mt.length==1&&!this.isCellLocked(this.getDefaultParent())){var Ct=V.getChildren(mt[0]);Ct!=null&&(W=this.moveCells(Ct,A,I,!1,this.getDefaultParent()),at[V.getChildAt(V.root,0).getId()]=this.getDefaultParent().getId())}else for(var Ut=0;Ut<mt.length;Ut++){var Ct=this.model.getChildren(this.moveCells([mt[Ut]],A,I,!1,this.model.getRoot())[0]);Ct!=null&&(W=W.concat(Ct))}if(W!=null&&(this.createCellMapping(ot,Lt,at),this.updateCustomLinks(at,W),N)){this.isGridEnabled()&&(A=this.snap(A),I=this.snap(I));var Mt=this.getBoundingBoxFromGeometry(W,!0);Mt!=null&&this.moveCells(W,A-Mt.x,I-Mt.y)}}finally{this.model.endUpdate()}}return W},Graph$1.prototype.encodeCells=function(S){for(var A=new Object,I=this.cloneCells(S,null,A),N=new mxDictionary,_=0;_<S.length;_++)N.put(S[_],!0);for(var V=new mxCodec,W=new mxGraphModel,ot=W.getChildAt(W.getRoot(),0),_=0;_<I.length;_++){W.add(ot,I[_]);var at=this.view.getState(S[_]);if(at!=null){var mt=this.getCellGeometry(I[_]);mt!=null&&mt.relative&&!this.model.isEdge(S[_])&&N.get(this.model.getParent(S[_]))==null&&(mt.offset=null,mt.relative=!1,mt.x=at.x/at.view.scale-at.view.translate.x,mt.y=at.y/at.view.scale-at.view.translate.y)}}return this.updateCustomLinks(this.createCellMapping(A,this.createCellLookup(S)),I),V.encode(W)},Graph$1.prototype.isSwimlane=function(S,A){if(S!=null&&this.model.getParent(S)!=this.model.getRoot()&&!this.model.isEdge(S)){var I=this.getCurrentCellStyle(S,A)[mxConstants$1.STYLE_SHAPE];return I==mxConstants$1.SHAPE_SWIMLANE||I=="table"}return!1};var n=Graph$1.prototype.isExtendParent;Graph$1.prototype.isExtendParent=function(S){var A=this.model.getParent(S);if(A!=null){var I=this.getCurrentCellStyle(A);if(I.expand!=null)return I.expand!="0"}return n.apply(this,arguments)&&(A==null||!this.isTable(A))};var s=Graph$1.prototype.splitEdge;Graph$1.prototype.splitEdge=function(S,A,I,N,_,V,W,ot){ot==null&&(ot=this.model.getParent(S),(this.isTable(ot)||this.isTableRow(ot))&&(ot=this.getCellAt(V,W,null,!0,!1))),s.apply(this,[S,A,I,N,_,V,W,ot])};var l=Graph$1.prototype.selectCell;Graph$1.prototype.selectCell=function(S,A,I){if(A||I)l.apply(this,arguments);else{var N=this.getSelectionCell(),_=null,V=[],W=mxUtils$1.bind(this,function(ot){if(this.view.getState(ot)!=null&&(this.model.isVertex(ot)||this.model.isEdge(ot))){if(V.push(ot),ot==N)_=V.length-1;else if(S&&N==null&&V.length>0||_!=null&&S&&V.length>_||!S&&_>0)return}for(var at=0;at<this.model.getChildCount(ot);at++)W(this.model.getChildAt(ot,at))});W(this.model.root),V.length>0&&(_!=null?_=mxUtils$1.mod(_+(S?1:-1),V.length):_=0,this.setSelectionCell(V[_]))}};var r=Graph$1.prototype.moveCells;Graph$1.prototype.moveCells=function(S,A,I,N,_,V,W){if(W=W??new Object,this.isTable(_)){for(var ot=[],at=0;at<S.length;at++)this.isTable(S[at])?ot=ot.concat(this.model.getChildCells(S[at],!0).reverse()):ot.push(S[at]);S=ot}this.model.beginUpdate();try{for(var mt=[],at=0;at<S.length;at++)if(_!=null&&this.isTableRow(S[at])){var Lt=this.model.getParent(S[at]),Ct=this.getCellGeometry(S[at]);if(this.isTable(Lt)&&mt.push(Lt),Lt!=null&&Ct!=null&&this.isTable(Lt)&&this.isTable(_)&&(N||Lt!=_)){if(!N){var Ut=this.getCellGeometry(Lt);Ut!=null&&(Ut=Ut.clone(),Ut.height-=Ct.height,this.model.setGeometry(Lt,Ut))}var Ut=this.getCellGeometry(_);Ut!=null&&(Ut=Ut.clone(),Ut.height+=Ct.height,this.model.setGeometry(_,Ut));var Mt=this.model.getChildCells(_,!0);if(Mt.length>0){var Vt=N?this.cloneCell(S[at]):S[at],Kt=this.model.getChildCells(Vt,!0),Jt=this.model.getChildCells(Mt[0],!0),re=Jt.length-Kt.length;if(re>0)for(var jt=0;jt<re;jt++){var ee=this.cloneCell(Kt[Kt.length-1]);ee!=null&&(ee.value="",this.model.add(Vt,ee))}else if(re<0)for(var jt=0;jt>re;jt--)this.model.remove(Kt[Kt.length+jt-1]);Kt=this.model.getChildCells(Vt,!0);for(var jt=0;jt<Jt.length;jt++){var he=this.getCellGeometry(Jt[jt]),ae=this.getCellGeometry(Kt[jt]);he!=null&&ae!=null&&(ae=ae.clone(),ae.width=he.width,this.model.setGeometry(Kt[jt],ae))}}}}for(var Xt=r.apply(this,arguments),at=0;at<mt.length;at++)!N&&this.model.contains(mt[at])&&this.model.getChildCount(mt[at])==0&&this.model.remove(mt[at]);N&&this.updateCustomLinks(this.createCellMapping(W,this.createCellLookup(S)),Xt)}finally{this.model.endUpdate()}return Xt};var o=Graph$1.prototype.removeCells;Graph$1.prototype.removeCells=function(S,A){var I=[];this.model.beginUpdate();try{for(var N=0;N<S.length;N++)if(this.isTableCell(S[N])){var _=this.model.getParent(S[N]),V=this.model.getParent(_);this.model.getChildCount(_)==1&&this.model.getChildCount(V)==1?mxUtils$1.indexOf(S,V)<0&&mxUtils$1.indexOf(I,V)<0&&I.push(V):this.labelChanged(S[N],"")}else{if(this.isTableRow(S[N])){var V=this.model.getParent(S[N]);if(mxUtils$1.indexOf(S,V)<0&&mxUtils$1.indexOf(I,V)<0){for(var W=this.model.getChildCells(V,!0),ot=0,at=0;at<W.length;at++)mxUtils$1.indexOf(S,W[at])>=0&&ot++;ot==W.length&&I.push(V)}}I.push(S[N])}I=o.apply(this,[I,A])}finally{this.model.endUpdate()}return I},Graph$1.prototype.updateCustomLinks=function(S,A){for(var I=0;I<A.length;I++)A[I]!=null&&this.updateCustomLinksForCell(S,A[I])},Graph$1.prototype.updateCustomLinksForCell=function(S,A){},Graph$1.prototype.getAllConnectionConstraints=function(S,A){if(S!=null){var I=mxUtils$1.getValue(S.style,"points",null);if(I!=null){var N=[];try{for(var _=JSON.parse(I),V=0;V<_.length;V++){var W=_[V];N.push(new mxConnectionConstraint(new mxPoint(W[0],W[1]),W.length>2?W[2]!="0":!0,null,W.length>3?W[3]:0,W.length>4?W[4]:0))}}catch{}return N}else if(S.shape!=null&&S.shape.bounds!=null){var ot=S.shape.direction,at=S.shape.bounds,mt=S.shape.scale,Lt=at.width/mt,Ct=at.height/mt;if(ot==mxConstants$1.DIRECTION_NORTH||ot==mxConstants$1.DIRECTION_SOUTH){var W=Lt;Lt=Ct,Ct=W}if(I=S.shape.getConstraints(S.style,Lt,Ct),I!=null)return I;if(S.shape.stencil!=null&&S.shape.stencil.constraints!=null)return S.shape.stencil.constraints;if(S.shape.constraints!=null)return S.shape.constraints}}return null},Graph$1.prototype.flipEdge=function(S){if(S!=null){var A=this.getCurrentCellStyle(S),I=mxUtils$1.getValue(A,mxConstants$1.STYLE_ELBOW,mxConstants$1.ELBOW_HORIZONTAL),N=I==mxConstants$1.ELBOW_HORIZONTAL?mxConstants$1.ELBOW_VERTICAL:mxConstants$1.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants$1.STYLE_ELBOW,N,[S])}},Graph$1.prototype.isValidRoot=function(S){for(var A=this.model.getChildCount(S),I=0,N=0;N<A;N++){var _=this.model.getChildAt(S,N);if(this.model.isVertex(_)){var V=this.getCellGeometry(_);V!=null&&!V.relative&&I++}}return I>0||this.isContainer(S)},Graph$1.prototype.isValidDropTarget=function(S,A,I){for(var N=this.getCurrentCellStyle(S),_=!0,V=!0,W=0;W<A.length&&V;W++)_=_&&this.isTable(A[W]),V=V&&this.isTableRow(A[W]);return(mxUtils$1.getValue(N,"part","0")!="1"||this.isContainer(S))&&mxUtils$1.getValue(N,"dropTarget","1")!="0"&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(S))&&!this.isTableRow(S)&&(!this.isTable(S)||V||_)},Graph$1.prototype.createGroupCell=function(){var S=mxGraph.prototype.createGroupCell.apply(this,arguments);return S.setStyle("group"),S},Graph$1.prototype.isExtendParentsOnAdd=function(S){var A=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(A&&S!=null&&this.layoutManager!=null){var I=this.model.getParent(S);if(I!=null){var N=this.layoutManager.getLayout(I);N!=null&&N.constructor==mxStackLayout&&(A=!1)}}return A},Graph$1.prototype.getPreferredSizeForCell=function(S){var A=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return A!=null&&(A.width+=10,A.height+=4,this.gridEnabled&&(A.width=this.snap(A.width),A.height=this.snap(A.height))),A},Graph$1.prototype.turnShapes=function(S,A){var I=this.getModel(),N=[];I.beginUpdate();try{for(var _=0;_<S.length;_++){var V=S[_];if(I.isEdge(V)){var W=I.getTerminal(V,!0),ot=I.getTerminal(V,!1);I.setTerminal(V,ot,!0),I.setTerminal(V,W,!1);var at=I.getGeometry(V);if(at!=null){at=at.clone(),at.points!=null&&at.points.reverse();var mt=at.getTerminalPoint(!0),Lt=at.getTerminalPoint(!1);at.setTerminalPoint(mt,!1),at.setTerminalPoint(Lt,!0),I.setGeometry(V,at);var Ct=this.view.getState(V),Ut=this.view.getState(W),Mt=this.view.getState(ot);if(Ct!=null){var Vt=Ut!=null?this.getConnectionConstraint(Ct,Ut,!0):null,Kt=Mt!=null?this.getConnectionConstraint(Ct,Mt,!1):null;this.setConnectionConstraint(V,W,!0,Kt),this.setConnectionConstraint(V,ot,!1,Vt)}N.push(V)}}else if(I.isVertex(V)){var at=this.getCellGeometry(V);if(at!=null){if(!this.isTable(V)&&!this.isTableRow(V)&&!this.isTableCell(V)&&!this.isSwimlane(V)){at=at.clone(),at.x+=at.width/2-at.height/2,at.y+=at.height/2-at.width/2;var Jt=at.width;at.width=at.height,at.height=Jt,I.setGeometry(V,at)}var re=this.view.getState(V);if(re!=null){var jt=[mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST,mxConstants$1.DIRECTION_NORTH],ee=mxUtils$1.getValue(re.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST);this.setCellStyles(mxConstants$1.STYLE_DIRECTION,jt[mxUtils$1.mod(mxUtils$1.indexOf(jt,ee)+(A?-1:1),jt.length)],[V])}N.push(V)}}}}finally{I.endUpdate()}return N},Graph$1.prototype.stencilHasPlaceholders=function(S){if(S!=null&&S.fgNode!=null)for(var A=S.fgNode.firstChild;A!=null;){if(A.nodeName=="text"&&A.getAttribute("placeholders")=="1")return!0;A=A.nextSibling}return!1};var h=Graph$1.prototype.processChange;Graph$1.prototype.processChange=function(S){if(S instanceof mxGeometryChange&&(this.isTableCell(S.cell)||this.isTableRow(S.cell))&&(S.previous==null&&S.geometry!=null||S.previous!=null&&!S.previous.equals(S.geometry))){var A=S.cell;this.isTableCell(A)&&(A=this.model.getParent(A)),this.isTableRow(A)&&(A=this.model.getParent(A));var I=this.view.getState(A);I!=null&&I.shape!=null&&(this.view.invalidate(A),I.shape.bounds=null)}h.apply(this,arguments),S instanceof mxValueChange&&S.cell!=null&&S.cell.value!=null&&typeof S.cell.value=="object"&&this.invalidateDescendantsWithPlaceholders(S.cell)},Graph$1.prototype.invalidateDescendantsWithPlaceholders=function(S){var A=this.model.getDescendants(S);if(A.length>0)for(var I=0;I<A.length;I++){var N=this.view.getState(A[I]);N!=null&&N.shape!=null&&N.shape.stencil!=null&&this.stencilHasPlaceholders(N.shape.stencil)?this.removeStateForCell(A[I]):this.isReplacePlaceholders(A[I])&&this.view.invalidate(A[I],!1,!1)}},Graph$1.prototype.replaceElement=function(S,A){for(var I=S.ownerDocument.createElement(A??"span"),N=Array.prototype.slice.call(S.attributes);attr=N.pop();)I.setAttribute(attr.nodeName,attr.nodeValue);I.innerHTML=S.innerHTML,S.parentNode.replaceChild(I,S)},Graph$1.prototype.processElements=function(S,A){if(S!=null)for(var I=S.getElementsByTagName("*"),N=0;N<I.length;N++)A(I[N])},Graph$1.prototype.updateLabelElements=function(S,A,I){S=S??this.getSelectionCells();for(var N=document.createElement("div"),_=0;_<S.length;_++)if(this.isHtmlLabel(S[_])){var V=this.convertValueToString(S[_]);if(V!=null&&V.length>0){N.innerHTML=V;for(var W=N.getElementsByTagName(I??"*"),ot=0;ot<W.length;ot++)A(W[ot]);N.innerHTML!=V&&this.cellLabelChanged(S[_],N.innerHTML)}}},Graph$1.prototype.cellLabelChanged=function(S,A,I){A=Graph$1.zapGremlins(A),this.model.beginUpdate();try{if(S.value!=null&&typeof S.value=="object"){if(this.isReplacePlaceholders(S)&&S.getAttribute("placeholder")!=null)for(var N=S.getAttribute("placeholder"),_=S;_!=null;){if(_==this.model.getRoot()||_.value!=null&&typeof _.value=="object"&&_.hasAttribute(N)){this.setAttributeForCell(_,N,A);break}_=this.model.getParent(_)}var V=S.value.cloneNode(!0);Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&V.hasAttribute("label_"+Graph$1.diagramLanguage)?V.setAttribute("label_"+Graph$1.diagramLanguage,A):V.setAttribute("label",A),A=V}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph$1.prototype.cellsRemoved=function(S){if(S!=null){for(var A=new mxDictionary,I=0;I<S.length;I++)A.put(S[I],!0);for(var N=[],I=0;I<S.length;I++){var _=this.model.getParent(S[I]);_!=null&&!A.get(_)&&(A.put(_,!0),N.push(_))}for(var I=0;I<N.length;I++){var V=this.view.getState(N[I]);if(V!=null&&(this.model.isEdge(V.cell)||this.model.isVertex(V.cell))&&this.isCellDeletable(V.cell)&&this.isTransparentState(V)){for(var W=!0,ot=0;ot<this.model.getChildCount(V.cell)&&W;ot++)A.get(this.model.getChildAt(V.cell,ot))||(W=!1);W&&S.push(V.cell)}}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph$1.prototype.removeCellsAfterUngroup=function(S){for(var A=[],I=0;I<S.length;I++)this.isCellDeletable(S[I])&&this.isTransparentState(this.view.getState(S[I]))&&A.push(S[I]);S=A,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph$1.prototype.setLinkForCell=function(S,A){this.setAttributeForCell(S,"link",A)},Graph$1.prototype.setTooltipForCell=function(S,A){var I="tooltip";Graph$1.translateDiagram&&Graph$1.diagramLanguage!=null&&mxUtils$1.isNode(S.value)&&S.value.hasAttribute("tooltip_"+Graph$1.diagramLanguage)&&(I="tooltip_"+Graph$1.diagramLanguage),this.setAttributeForCell(S,I,A)},Graph$1.prototype.getAttributeForCell=function(S,A,I){var N=S.value!=null&&typeof S.value=="object"?S.value.getAttribute(A):null;return N??I},Graph$1.prototype.setAttributeForCell=function(S,A,I){var N=null;if(S.value!=null&&typeof S.value=="object")N=S.value.cloneNode(!0);else{var _=mxUtils$1.createXmlDocument();N=_.createElement("UserObject"),N.setAttribute("label",S.value||"")}I!=null?N.setAttribute(A,I):N.removeAttribute(A),this.model.setValue(S,N)};var u=Graph$1.prototype.getDropTarget;Graph$1.prototype.getDropTarget=function(S,A,I,N){if(this.getModel(),mxEvent$1.isAltDown(A))return null;for(var _=0;_<S.length;_++)if(this.model.isEdge(this.model.getParent(S[_])))return null;for(var V=u.apply(this,arguments),W=!0,_=0;_<S.length&&W;_++)W=W&&this.isTableRow(S[_]);return W&&(this.isTableCell(V)&&(V=this.model.getParent(V)),this.isTableRow(V)&&(V=this.model.getParent(V)),this.isTable(V)||(V=null)),V},Graph$1.prototype.click=function(S){mxGraph.prototype.click.call(this,S),this.firstClickState=S.getState(),this.firstClickSource=S.getSource()},Graph$1.prototype.dblClick=function(S,A){this.isEnabled()&&(A=this.insertTextForEvent(S,A),mxGraph.prototype.dblClick.call(this,S,A))},Graph$1.prototype.insertTextForEvent=function(S,A){var I=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(S),mxEvent$1.getClientY(S));if(S!=null&&!this.model.isVertex(A)){var N=this.model.isEdge(A)?this.view.getState(A):null,_=mxEvent$1.getSource(S);this.firstClickState==N&&this.firstClickSource==_&&(N==null||N.text==null||N.text.node==null||N.text.boundingBox==null||!mxUtils$1.contains(N.text.boundingBox,I.x,I.y)&&!mxUtils$1.isAncestorNode(N.text.node,mxEvent$1.getSource(S)))&&(N==null&&!this.isCellLocked(this.getDefaultParent())||N!=null&&!this.isCellLocked(N.cell))&&(N!=null||mxClient.IS_VML&&_==this.view.getCanvas()||mxClient.IS_SVG&&_==this.view.getCanvas().ownerSVGElement)&&(N==null&&(N=this.view.getState(this.getCellAt(I.x,I.y))),A=this.addText(I.x,I.y,N))}return A},Graph$1.prototype.getInsertPoint=function(){var S=this.getGridSize(),A=this.container.scrollLeft/this.view.scale-this.view.translate.x,I=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var N=this.getPageLayout(),_=this.getPageSize();A=Math.max(A,N.x*_.width),I=Math.max(I,N.y*_.height)}return new mxPoint(this.snap(A+S),this.snap(I+S))},Graph$1.prototype.getFreeInsertPoint=function(){var S=this.view,A=this.getGraphBounds(),I=this.getInsertPoint(),N=this.snap(Math.round(Math.max(I.x,A.x/S.scale-S.translate.x+(A.width==0?2*this.gridSize:0)))),_=this.snap(Math.round(Math.max(I.y,(A.y+A.height)/S.scale-S.translate.y+2*this.gridSize)));return new mxPoint(N,_)},Graph$1.prototype.getCenterInsertPoint=function(S){return S=S??new mxRectangle,mxUtils$1.hasScrollbars(this.container)?new mxPoint(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-S.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-S.height/2))):new mxPoint(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-S.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-S.height/2)))},Graph$1.prototype.isMouseInsertPoint=function(){return!1},Graph$1.prototype.addText=function(S,A,I){var N=new mxCell;N.value="Text",N.geometry=new mxGeometry(0,0,0,0),N.vertex=!0;var _="html=1;align=center;verticalAlign=middle;resizable=0;points=[];";if(I!=null&&this.model.isEdge(I.cell)){N.style="edgeLabel;"+_,N.geometry.relative=!0,N.connectable=!1;var V=this.view.getRelativePoint(I,S,A);N.geometry.x=Math.round(V.x*1e4)/1e4,N.geometry.y=Math.round(V.y),N.geometry.offset=new mxPoint(0,0),V=this.view.getPoint(I,N.geometry);var W=this.view.scale;N.geometry.offset=new mxPoint(Math.round((S-V.x)/W),Math.round((A-V.y)/W))}else{var ot=this.view.translate;N.style="text;"+_,N.geometry.width=40,N.geometry.height=20,N.geometry.x=Math.round(S/this.view.scale)-ot.x-(I!=null?I.origin.x:0),N.geometry.y=Math.round(A/this.view.scale)-ot.y-(I!=null?I.origin.y:0),N.style+="autosize=1;"}this.getModel().beginUpdate();try{this.addCells([N],I!=null?I.cell:null),this.fireEvent(new mxEventObject$1("textInserted","cells",[N])),this.autoSizeCell(N)}finally{this.getModel().endUpdate()}return N},Graph$1.prototype.addClickHandler=function(S,A,I){var N=mxUtils$1.bind(this,function(){var at=this.container.getElementsByTagName("a");if(at!=null)for(var mt=0;mt<at.length;mt++){var Lt=this.getAbsoluteUrl(at[mt].getAttribute("href"));Lt!=null&&(at[mt].setAttribute("rel",this.linkRelation),at[mt].setAttribute("href",Lt),A!=null&&mxEvent$1.addGestureListeners(at[mt],null,null,A))}});this.model.addListener(mxEvent$1.CHANGE,N),N();var _=this.container.style.cursor,V=this.getTolerance(),W=this,ot={currentState:null,currentLink:null,highlight:S!=null&&S!=""&&S!=mxConstants$1.NONE?new mxCellHighlight(W,S,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(at){var mt=at.sourceState;if(mt==null||W.getLinkForCell(mt.cell)==null){var Lt=W.getCellAt(at.getGraphX(),at.getGraphY(),null,null,null,function(Ct,Ut,Mt){return W.getLinkForCell(Ct.cell)==null});mt=W.view.getState(Lt)}mt!=this.currentState&&(this.currentState!=null&&this.clear(),this.currentState=mt,this.currentState!=null&&this.activate(this.currentState))},mouseDown:function(at,mt){this.startX=mt.getGraphX(),this.startY=mt.getGraphY(),this.scrollLeft=W.container.scrollLeft,this.scrollTop=W.container.scrollTop,this.currentLink==null&&W.container.style.overflow=="auto"&&(W.container.style.cursor="move"),this.updateCurrentState(mt)},mouseMove:function(at,mt){if(W.isMouseDown){if(this.currentLink!=null){var Lt=Math.abs(this.startX-mt.getGraphX()),Ct=Math.abs(this.startY-mt.getGraphY());(Lt>V||Ct>V)&&this.clear()}}else{for(var Ut=mt.getSource();Ut!=null&&Ut.nodeName.toLowerCase()!="a";)Ut=Ut.parentNode;if(Ut!=null)this.clear();else{if(W.tooltipHandler!=null&&this.currentLink!=null&&this.currentState!=null&&W.tooltipHandler.reset(mt,!0,this.currentState),this.currentState!=null&&(mt.getState()==this.currentState||mt.sourceState==null)&&W.intersects(this.currentState,mt.getGraphX(),mt.getGraphY()))return;this.updateCurrentState(mt)}}},mouseUp:function(at,mt){for(var Lt=mt.getSource(),Ct=mt.getEvent(),Ut=Lt;Ut!=null&&Ut.nodeName.toLowerCase()!="a";)Ut=Ut.parentNode;if(Ut==null&&Math.abs(this.scrollLeft-W.container.scrollLeft)<V&&Math.abs(this.scrollTop-W.container.scrollTop)<V&&(mt.sourceState==null||!mt.isSource(mt.sourceState.control))&&((mxEvent$1.isLeftMouseButton(Ct)||mxEvent$1.isMiddleMouseButton(Ct))&&!mxEvent$1.isPopupTrigger(Ct)||mxEvent$1.isTouchEvent(Ct)))if(this.currentLink!=null){var Mt=W.isBlankLink(this.currentLink);if((this.currentLink.substring(0,5)==="data:"||!Mt)&&A!=null&&A(Ct,this.currentLink),!mxEvent$1.isConsumed(Ct)){var Vt=mxEvent$1.isMiddleMouseButton(Ct)?"_blank":Mt?W.linkTarget:"_top";W.openLink(this.currentLink,Vt),mt.consume()}}else I!=null&&!mt.isConsumed()&&Math.abs(this.scrollLeft-W.container.scrollLeft)<V&&Math.abs(this.scrollTop-W.container.scrollTop)<V&&Math.abs(this.startX-mt.getGraphX())<V&&Math.abs(this.startY-mt.getGraphY())<V&&I(mt.getEvent());this.clear()},activate:function(at){this.currentLink=W.getAbsoluteUrl(W.getLinkForCell(at.cell)),this.currentLink!=null&&(W.container.style.cursor="pointer",this.highlight!=null&&this.highlight.highlight(at))},clear:function(){W.container!=null&&(W.container.style.cursor=_),this.currentState=null,this.currentLink=null,this.highlight!=null&&this.highlight.hide(),W.tooltipHandler!=null&&W.tooltipHandler.hide()}};W.click=function(at){},W.addMouseListener(ot),mxEvent$1.addListener(document,"mouseleave",function(at){ot.clear()})},Graph$1.prototype.duplicateCells=function(S,A){S=S??this.getSelectionCells(),A=A??!0;for(var I=0;I<S.length;I++)this.isTableCell(S[I])&&(S[I]=this.model.getParent(S[I]));S=this.model.getTopmostCells(S);var N=this.getModel(),_=this.gridSize,V=[];N.beginUpdate();try{for(var W=this.cloneCells(S,!1,null,!0),I=0;I<S.length;I++){var ot=N.getParent(S[I]),at=this.moveCells([W[I]],_,_,!1)[0];if(V.push(at),A)N.add(ot,W[I]);else{var mt=ot.getIndex(S[I]);N.add(ot,W[I],mt+1)}if(this.isTable(ot)){var Lt=this.getCellGeometry(W[I]),Ct=this.getCellGeometry(ot);Lt!=null&&Ct!=null&&(Ct=Ct.clone(),Ct.height+=Lt.height,N.setGeometry(ot,Ct))}}}finally{N.endUpdate()}return V},Graph$1.prototype.insertImage=function(S,A,I){if(S!=null&&this.cellEditor.textarea!=null){for(var N=this.cellEditor.textarea.getElementsByTagName("img"),_=[],V=0;V<N.length;V++)_.push(N[V]);document.execCommand("insertimage",!1,S);var W=this.cellEditor.textarea.getElementsByTagName("img");if(W.length==_.length+1){for(var V=W.length-1;V>=0;V--)if(V==0||W[V]!=_[V-1]){W[V].setAttribute("width",A),W[V].setAttribute("height",I);break}}}},Graph$1.prototype.insertLink=function(S){if(this.cellEditor.textarea!=null)if(S.length==0)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var A=this.cellEditor.textarea.getElementsByTagName("a"),I=[],N=0;N<A.length;N++)I.push(A[N]);document.execCommand("createlink",!1,mxUtils$1.trim(S));var _=this.cellEditor.textarea.getElementsByTagName("a");if(_.length==I.length+1){for(var N=_.length-1;N>=0;N--)if(_[N]!=I[N-1]){for(var A=_[N].getElementsByTagName("a");A.length>0;){for(var V=A[0].parentNode;A[0].firstChild!=null;)V.insertBefore(A[0].firstChild,A[0]);V.removeChild(A[0])}break}}}else document.execCommand("createlink",!1,mxUtils$1.trim(S))},Graph$1.prototype.isCellResizable=function(S){var A=mxGraph.prototype.isCellResizable.apply(this,arguments),I=this.getCurrentCellStyle(S);return!this.isTableCell(S)&&!this.isTableRow(S)&&(A||mxUtils$1.getValue(I,mxConstants$1.STYLE_RESIZABLE,"1")!="0"&&I[mxConstants$1.STYLE_WHITE_SPACE]=="wrap")},Graph$1.prototype.distributeCells=function(S,A){if(A==null&&(A=this.getSelectionCells()),A!=null&&A.length>1){for(var I=[],N=null,_=null,V=0;V<A.length;V++)if(this.getModel().isVertex(A[V])){var W=this.view.getState(A[V]);if(W!=null){var ot=S?W.getCenterX():W.getCenterY();N=N!=null?Math.max(N,ot):ot,_=_!=null?Math.min(_,ot):ot,I.push(W)}}if(I.length>2){I.sort(function(Vt,Kt){return S?Vt.x-Kt.x:Vt.y-Kt.y});var at=this.view.translate,mt=this.view.scale;_=_/mt-(S?at.x:at.y),N=N/mt-(S?at.x:at.y),this.getModel().beginUpdate();try{for(var Lt=(N-_)/(I.length-1),Ct=_,V=1;V<I.length-1;V++){var Ut=this.view.getState(this.model.getParent(I[V].cell)),Mt=this.getCellGeometry(I[V].cell);Ct+=Lt,Mt!=null&&Ut!=null&&(Mt=Mt.clone(),S?Mt.x=Math.round(Ct-Mt.width/2)-Ut.origin.x:Mt.y=Math.round(Ct-Mt.height/2)-Ut.origin.y,this.getModel().setGeometry(I[V].cell,Mt))}}finally{this.getModel().endUpdate()}}}return A},Graph$1.prototype.isCloneEvent=function(S){return mxClient.IS_MAC&&mxEvent$1.isMetaDown(S)||mxEvent$1.isControlDown(S)},Graph$1.prototype.createSvgImageExport=function(){var S=new mxImageExport;return S.getLinkForCellState=mxUtils$1.bind(this,function(A,I){return this.getLinkForCell(A.cell)}),S},Graph$1.prototype.getSvg=function(S,A,I,N,_,V,W,ot,at,mt){var Lt=this.useCssTransforms;Lt&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{A=A??1,I=I??0,_=_??!0,V=V??!0,W=W??!0;var Ct=V||N?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(Ct==null)throw Error(mxResources$1.get("drawingEmpty"));var Ut=this.view.scale,Mt=mxUtils$1.createXmlDocument(),Vt=Mt.createElementNS!=null?Mt.createElementNS(mxConstants$1.NS_SVG,"svg"):Mt.createElement("svg");S!=null&&(Vt.style!=null?Vt.style.backgroundColor=S:Vt.setAttribute("style","background-color:"+S)),Mt.createElementNS==null?(Vt.setAttribute("xmlns",mxConstants$1.NS_SVG),Vt.setAttribute("xmlns:xlink",mxConstants$1.NS_XLINK)):Vt.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants$1.NS_XLINK);var Kt=A/Ut,Jt=Math.max(1,Math.ceil(Ct.width*Kt)+2*I)+(mt?5:0),re=Math.max(1,Math.ceil(Ct.height*Kt)+2*I)+(mt?5:0);Vt.setAttribute("version","1.1"),Vt.setAttribute("width",Jt+"px"),Vt.setAttribute("height",re+"px"),Vt.setAttribute("viewBox",(_?"-0.5 -0.5":"0 0")+" "+Jt+" "+re),Mt.appendChild(Vt);var jt=Mt.createElementNS!=null?Mt.createElementNS(mxConstants$1.NS_SVG,"g"):Mt.createElement("g");Vt.appendChild(jt);var ee=this.createSvgCanvas(jt);ee.foOffset=_?-.5:0,ee.textOffset=_?-.5:0,ee.imageOffset=_?-.5:0,ee.translate(Math.floor((I/A-Ct.x)/Ut),Math.floor((I/A-Ct.y)/Ut));var he=document.createElement("div"),ae=ee.getAlternateText;ee.getAlternateText=function(Ft,kt,wt,te,se,ie,ue,oe,Se,Le,_e,Ge,ke){if(ie!=null&&this.state.fontSize>0)try{mxUtils$1.isNode(ie)?ie=ie.innerText:(he.innerHTML=ie,ie=mxUtils$1.extractTextWithWhitespace(he.childNodes));for(var Ne=Math.ceil(2*te/this.state.fontSize),be=[],Ae=0,ce=0;(Ne==0||Ae<Ne)&&ce<ie.length;){var xe=ie.charCodeAt(ce);if(xe==10||xe==13){if(Ae>0)break}else be.push(ie.charAt(ce)),xe<255&&Ae++;ce++}return be.length<ie.length&&ie.length-be.length>1&&(ie=mxUtils$1.trim(be.join(""))+"..."),ie}catch{return ae.apply(this,arguments)}else return ae.apply(this,arguments)};var Xt=this.backgroundImage;if(Xt!=null){var ge=Ut/A,Ee=this.view.translate,fe=new mxRectangle(Ee.x*ge,Ee.y*ge,Xt.width*ge,Xt.height*ge);mxUtils$1.intersects(Ct,fe)&&ee.image(Ee.x,Ee.y,Xt.width,Xt.height,Xt.src,!0)}ee.scale(Kt),ee.textEnabled=W,ot=ot??this.createSvgImageExport();var Gt=ot.drawCellState,St=ot.getLinkForCellState;return ot.getLinkForCellState=function(Ft,kt){var wt=St.apply(this,arguments);return wt!=null&&!Ft.view.graph.isCustomLink(wt)?wt:null},ot.drawCellState=function(Ft,kt){for(var wt=Ft.view.graph,te=wt.isCellSelected(Ft.cell),se=wt.model.getParent(Ft.cell);!V&&!te&&se!=null;)te=wt.isCellSelected(se),se=wt.model.getParent(se);(V||te)&&Gt.apply(this,arguments)},ot.drawState(this.getView().getState(this.model.root),ee),this.updateSvgLinks(Vt,at,!0),this.addForeignObjectWarning(ee,Vt),Vt}finally{Lt&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph$1.prototype.addForeignObjectWarning=function(S,A){if(A.getElementsByTagName("foreignObject").length>0){var I=S.createElement("switch"),N=S.createElement("g");N.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var _=S.createElement("a");_.setAttribute("transform","translate(0,-5)"),_.setAttributeNS==null||A.ownerDocument!=document&&document.documentMode==null?(_.setAttribute("xlink:href",Graph$1.foreignObjectWarningLink),_.setAttribute("target","_blank")):(_.setAttributeNS(mxConstants$1.NS_XLINK,"xlink:href",Graph$1.foreignObjectWarningLink),_.setAttributeNS(mxConstants$1.NS_XLINK,"target","_blank"));var V=S.createElement("text");V.setAttribute("text-anchor","middle"),V.setAttribute("font-size","10px"),V.setAttribute("x","50%"),V.setAttribute("y","100%"),mxUtils$1.write(V,Graph$1.foreignObjectWarningText),I.appendChild(N),_.appendChild(V),I.appendChild(_),A.appendChild(I)}},Graph$1.prototype.updateSvgLinks=function(S,A,I){for(var N=S.getElementsByTagName("a"),_=0;_<N.length;_++){var V=N[_].getAttribute("href");V==null&&(V=N[_].getAttribute("xlink:href")),V!=null&&(A!=null&&/^https?:\/\//.test(V)?N[_].setAttribute("target",A):I&&this.isCustomLink(V)&&N[_].setAttribute("href","javascript:void(0);"))}},Graph$1.prototype.createSvgCanvas=function(S){var A=new mxSvgCanvas2D(S);return A.pointerEvents=!0,A},Graph$1.prototype.getSelectedElement=function(){var S=null;if(window.getSelection){var A=window.getSelection();if(A.getRangeAt&&A.rangeCount){var I=A.getRangeAt(0);S=I.commonAncestorContainer}}else document.selection&&(S=document.selection.createRange().parentElement());return S},Graph$1.prototype.getSelectedEditingElement=function(){for(var S=this.getSelectedElement();S!=null&&S.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)S=S.parentNode;return S!=null&&S==this.cellEditor.textarea&&this.cellEditor.textarea.children.length==1&&this.cellEditor.textarea.firstChild.nodeType==mxConstants$1.NODETYPE_ELEMENT&&(S=this.cellEditor.textarea.firstChild),S},Graph$1.prototype.getParentByName=function(S,A,I){for(;S!=null;){if(S.nodeName==A)return S;if(S==I)return null;S=S.parentNode}return S},Graph$1.prototype.getParentByNames=function(S,A,I){for(;S!=null;){if(mxUtils$1.indexOf(A,S.nodeName)>=0)return S;if(S==I)return null;S=S.parentNode}return S},Graph$1.prototype.selectNode=function(S){var A=null;if(window.getSelection){if(A=window.getSelection(),A.getRangeAt&&A.rangeCount){var I=document.createRange();I.selectNode(S),A.removeAllRanges(),A.addRange(I)}}else if((A=document.selection)&&A.type!="Control"){var N=A.createRange();N.collapse(!0);var I=A.createRange();I.setEndPoint("StartToStart",N),I.select()}},Graph$1.prototype.deleteCells=function(S,A){var I=null;if(S!=null&&S.length>0){this.model.beginUpdate();try{for(var N=0;N<S.length;N++){var _=this.model.getParent(S[N]);if(this.isTable(_)){var V=this.getCellGeometry(S[N]),W=this.getCellGeometry(_);V!=null&&W!=null&&(W=W.clone(),W.height-=V.height,this.model.setGeometry(_,W))}}var ot=this.selectParentAfterDelete?this.model.getParents(S):null;this.removeCells(S,A)}finally{this.model.endUpdate()}if(ot!=null){I=[];for(var N=0;N<ot.length;N++)this.model.contains(ot[N])&&(this.model.isVertex(ot[N])||this.model.isEdge(ot[N]))&&I.push(ot[N])}}return I},Graph$1.prototype.insertTableColumn=function(S,A){var I=this.getModel();I.beginUpdate();try{var N=S,_=0;if(this.isTableCell(S)){var V=I.getParent(S);N=I.getParent(V),_=mxUtils$1.indexOf(I.getChildCells(V,!0),S)}else this.isTableRow(S)?N=I.getParent(S):S=I.getChildCells(N,!0)[0],A||(_=I.getChildCells(S,!0).length-1);for(var W=I.getChildCells(N,!0),ot=Graph$1.minTableColumnWidth,at=0;at<W.length;at++){var mt=I.getChildCells(W[at],!0)[_],Lt=I.cloneCell(mt,!1),Ct=this.getCellGeometry(Lt);if(Lt.value=null,Ct!=null){ot=Ct.width;var Ut=this.getCellGeometry(W[at]);Ut!=null&&(Ct.height=Ut.height)}I.add(W[at],Lt,_+(A?0:1))}var Mt=this.getCellGeometry(N);Mt!=null&&(Mt=Mt.clone(),Mt.width+=ot,I.setGeometry(N,Mt))}finally{I.endUpdate()}},Graph$1.prototype.insertTableRow=function(S,A){var I=this.getModel();I.beginUpdate();try{var N=S,_=S;if(this.isTableCell(S))_=I.getParent(S),N=I.getParent(_);else if(this.isTableRow(S))N=I.getParent(S);else{var V=I.getChildCells(N,!0);_=V[A?0:V.length-1]}var W=I.getChildCells(_,!0),ot=N.getIndex(_);_=I.cloneCell(_,!1),_.value=null;var at=this.getCellGeometry(_);if(at!=null){for(var mt=0;mt<W.length;mt++){var S=I.cloneCell(W[mt],!1);_.insert(S),S.value=null;var Lt=this.getCellGeometry(S);Lt!=null&&(Lt.height=at.height)}I.add(N,_,ot+(A?0:1));var Ct=this.getCellGeometry(N);Ct!=null&&(Ct=Ct.clone(),Ct.height+=at.height,I.setGeometry(N,Ct))}}finally{I.endUpdate()}},Graph$1.prototype.deleteTableColumn=function(S){var A=this.getModel();A.beginUpdate();try{var I=S,N=S;this.isTableCell(S)&&(N=A.getParent(S)),this.isTableRow(N)&&(I=A.getParent(N));var _=A.getChildCells(I,!0);if(_.length==0)A.remove(I);else{this.isTableRow(N)||(N=_[0]);var V=A.getChildCells(N,!0);if(V.length<=1)A.remove(I);else{var W=V.length-1;this.isTableCell(S)&&(W=mxUtils$1.indexOf(V,S));for(var ot=0,at=0;at<_.length;at++){var mt=A.getChildCells(_[at],!0)[W];A.remove(mt);var Lt=this.getCellGeometry(mt);Lt!=null&&(ot=Math.max(ot,Lt.width))}var Ct=this.getCellGeometry(I);Ct!=null&&(Ct=Ct.clone(),Ct.width-=ot,A.setGeometry(I,Ct))}}}finally{A.endUpdate()}},Graph$1.prototype.deleteTableRow=function(S){var A=this.getModel();A.beginUpdate();try{var I=S,N=S;this.isTableCell(S)&&(N=A.getParent(S),S=N),this.isTableRow(S)&&(I=A.getParent(N));var _=A.getChildCells(I,!0);if(_.length<=1)A.remove(I);else{this.isTableRow(N)||(N=_[_.length-1]),A.remove(N);var V=0,W=this.getCellGeometry(N);W!=null&&(V=W.height);var ot=this.getCellGeometry(I);ot!=null&&(ot=ot.clone(),ot.height-=V,A.setGeometry(I,ot))}}finally{A.endUpdate()}},Graph$1.prototype.insertRow=function(S,A){for(var I=S.tBodies[0],N=I.rows[0].cells,_=0,V=0;V<N.length;V++){var W=N[V].getAttribute("colspan");_+=W!=null?parseInt(W):1}for(var ot=I.insertRow(A),V=0;V<_;V++)mxUtils$1.br(ot.insertCell(-1));return ot.cells[0]},Graph$1.prototype.deleteRow=function(S,A){S.tBodies[0].deleteRow(A)},Graph$1.prototype.insertColumn=function(S,A){var I=S.tHead;if(I!=null)for(var N=0;N<I.rows.length;N++){var _=document.createElement("th");I.rows[N].appendChild(_),mxUtils$1.br(_)}for(var V=S.tBodies[0],W=0;W<V.rows.length;W++){var ot=V.rows[W].insertCell(A);mxUtils$1.br(ot)}return V.rows[0].cells[A>=0?A:V.rows[0].cells.length-1]},Graph$1.prototype.deleteColumn=function(S,A){if(A>=0)for(var I=S.tBodies[0],N=I.rows,_=0;_<N.length;_++)N[_].cells.length>A&&N[_].deleteCell(A)},Graph$1.prototype.pasteHtmlAtCaret=function(S){var A,I;if(window.getSelection){if(A=window.getSelection(),A.getRangeAt&&A.rangeCount){I=A.getRangeAt(0),I.deleteContents();var N=document.createElement("div");N.innerHTML=S;for(var _=document.createDocumentFragment(),V;V=N.firstChild;)lastNode=_.appendChild(V);I.insertNode(_)}}else(A=document.selection)&&A.type!="Control"&&A.createRange().pasteHTML(S)},Graph$1.prototype.createLinkForHint=function(S,A){S=S??"javascript:void(0);",(A==null||A.length==0)&&(this.isCustomLink(S)?A=this.getLinkTitle(S):A=S);function I(_,V){return _.length>V&&(_=_.substring(0,Math.round(V/2))+"..."+_.substring(_.length-Math.round(V/4))),_}var N=document.createElement("a");return N.setAttribute("rel",this.linkRelation),N.setAttribute("href",this.getAbsoluteUrl(S)),N.setAttribute("title",I(this.isCustomLink(S)?this.getLinkTitle(S):S,80)),this.linkTarget!=null&&N.setAttribute("target",this.linkTarget),mxUtils$1.write(N,I(A,40)),this.isCustomLink(S)&&mxEvent$1.addListener(N,"click",mxUtils$1.bind(this,function(_){this.customLinkClicked(S),mxEvent$1.consume(_)})),N},Graph$1.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return this.graph.connectionHandler.first!=null},this.addListener(mxEvent$1.START_EDITING,function(V,W){this.popupMenuHandler.hideMenu()});var S=this.updateMouseEvent;this.updateMouseEvent=function(V){if(V=S.apply(this,arguments),mxEvent$1.isTouchEvent(V.getEvent())&&V.getState()==null){var W=this.getCellAt(V.graphX,V.graphY);W!=null&&this.isSwimlane(W)&&this.hitsSwimlaneContent(W,V.graphX,V.graphY)?W=null:(V.state=this.view.getState(W),V.state!=null&&V.state.shape!=null&&(this.container.style.cursor=V.state.shape.node.style.cursor))}return V.getState()==null&&this.isEnabled()&&(this.container.style.cursor="default"),V};var A=!1,I=!1,N=!1,_=this.fireMouseEvent;this.fireMouseEvent=function(V,W,ot){V==mxEvent$1.MOUSE_DOWN&&(W=this.updateMouseEvent(W),A=this.isCellSelected(W.getCell()),I=this.isSelectionEmpty(),N=this.popupMenuHandler.isMenuShowing()),_.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils$1.bind(this,function(V,W){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(W.getState()==null||!W.isSource(W.getState().control))&&(this.popupMenuHandler.popupTrigger||!N&&!mxEvent$1.isMouseEvent(W.getEvent())&&(I&&W.getCell()==null&&this.isSelectionEmpty()||A&&this.isCellSelected(W.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var S=this.graph.view.getState(this.editingCell);return S!=null&&S.style.html==1},mxCellEditor.prototype.isTableSelected=function(){return this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)!=null},mxCellEditor.prototype.alignText=function(S,A){var I=A!=null&&mxEvent$1.isShiftDown(A);if(I||window.getSelection!=null&&window.getSelection().containsNode!=null){var N=!0;this.graph.processElements(this.textarea,function(_){I||window.getSelection().containsNode(_,!0)?(_.removeAttribute("align"),_.style.textAlign=null):N=!1}),N&&this.graph.cellEditor.setAlign(S)}document.execCommand("justify"+S.toLowerCase(),!1,null)},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var S=window.getSelection();if(S.getRangeAt&&S.rangeCount){for(var A=[],I=0,N=S.rangeCount;I<N;++I)A.push(S.getRangeAt(I));return A}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(S){try{if(S)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var A=0,I=S.length;A<I;++A)sel.addRange(S[A])}else document.selection&&S.select&&S.select()}catch{}};var d=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(S){S.text!=null&&(S.text.replaceLinefeeds=mxUtils$1.getValue(S.style,"nl2Br","1")!="0"),d.apply(this,arguments)};var m=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(S,A){this.isKeepFocusEvent(S)||!mxEvent$1.isAltDown(S.getEvent())?m.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(S){var A=new mxPolyline([],mxConstants$1.GUIDE_COLOR,mxConstants$1.GUIDE_STROKEWIDTH);return A},mxCellEditor.prototype.escapeCancelsEditing=!1;var g=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(S,A){S=this.graph.getStartEditingCell(S,A),g.apply(this,arguments);var I=this.graph.view.getState(S);I!=null&&I.style.html==1?this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(S);var N=this.graph.getModel().getParent(S),_=this.graph.getCellGeometry(S);this.graph.getModel().isEdge(N)&&_!=null&&_.relative||this.graph.getModel().isEdge(S)?mxClient.IS_QUIRKS?this.textarea.style.border="gray dotted 1px":mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?this.textarea.style.outline="gray dotted 1px":this.textarea.style.outline="":mxClient.IS_QUIRKS&&(this.textarea.style.outline="none",this.textarea.style.border="")};var x=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(S){x.apply(this,arguments);function A(_,V){V.originalNode=_,_=_.firstChild;for(var W=V.firstChild;_!=null&&W!=null;)A(_,W),_=_.nextSibling,W=W.nextSibling;return V}function I(_,V){if(_!=null)if(V.originalNode!=_)N(_);else for(_=_.firstChild,V=V.firstChild;_!=null;){var W=_.nextSibling;V==null?N(_):(I(_,V),V=V.nextSibling),_=W}}function N(_){for(var V=_.firstChild;V!=null;){var W=V.nextSibling;N(V),V=W}(_.nodeType!=1||_.nodeName!=="BR"&&_.firstChild==null)&&(_.nodeType!=3||mxUtils$1.trim(mxUtils$1.getTextContent(_)).length==0)?_.parentNode.removeChild(_):(_.nodeType==3&&mxUtils$1.setTextContent(_,mxUtils$1.getTextContent(_).replace(/\n|\r/g,"")),_.nodeType==1&&(_.removeAttribute("style"),_.removeAttribute("class"),_.removeAttribute("width"),_.removeAttribute("cellpadding"),_.removeAttribute("cellspacing"),_.removeAttribute("border")))}!mxClient.IS_QUIRKS&&document.documentMode!==7&&document.documentMode!==8&&mxEvent$1.addListener(this.textarea,"paste",mxUtils$1.bind(this,function(_){var V=A(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils$1.bind(this,function(){this.textarea!=null&&(this.textarea.innerHTML.indexOf("<o:OfficeDocumentSettings>")>=0||this.textarea.innerHTML.indexOf("<!--[if !mso]>")>=0?I(this.textarea,V):Graph$1.removePasteFormatting(this.textarea))}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var S=this.graph.view.getState(this.editingCell);if(S!=null){var A=S!=null&&mxUtils$1.getValue(S.style,"nl2Br","1")!="0",I=this.saveSelection();if(this.codeViewMode){var N=mxUtils$1.extractTextWithWhitespace(this.textarea.childNodes);N.length>0&&N.charAt(N.length-1)==`
`&&(N=N.substring(0,N.length-1)),N=this.graph.sanitizeHtml(A?N.replace(/\n/g,"<br/>"):N,!0),this.textarea.className="mxCellEditor geContentEditable";var _=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSIZE,mxConstants$1.DEFAULT_FONTSIZE),V=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTFAMILY,mxConstants$1.DEFAULT_FONTFAMILY),W=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_LEFT),ot=(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD,at=(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC,mt=[];(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&mt.push("underline"),(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FONTSTYLE,0)&mxConstants$1.FONT_STRIKETHROUGH)==mxConstants$1.FONT_STRIKETHROUGH&&mt.push("line-through"),this.textarea.style.lineHeight=mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(_)+"px",this.textarea.style.textDecoration=mt.join(" "),this.textarea.style.fontWeight=ot?"bold":"normal",this.textarea.style.fontStyle=at?"italic":"",this.textarea.style.fontFamily=V,this.textarea.style.textAlign=W,this.textarea.style.padding="0px",this.textarea.innerHTML!=N&&(this.textarea.innerHTML=N,this.textarea.innerHTML.length==0&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML="");var N=mxUtils$1.htmlEntities(this.textarea.innerHTML);!mxClient.IS_QUIRKS&&document.documentMode!=8&&(N=mxUtils$1.replaceTrailingNewlines(N,"<div><br></div>")),N=this.graph.sanitizeHtml(A?N.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):N,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var _=mxConstants$1.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants$1.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(_)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants$1.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=N&&(this.textarea.innerHTML=N),this.codeViewMode=!0}this.textarea.focus(),this.switchSelectionState!=null&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=I,this.resize()}};var v=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(S,A){if(this.textarea!=null){var S=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&S!=null){var I=S.view.scale;if(this.bounds=N.mxRectangle.fromRectangle(S),this.bounds.width==0&&this.bounds.height==0){this.bounds.width=160*I,this.bounds.height=60*I;var N=S.text!=null?S.text.margin:null;N==null&&(N=N.mxUtils.getAlignmentAsPoint(N.mxUtils.getValue(S.style,N.mxConstants.STYLE_ALIGN,N.mxConstants.ALIGN_CENTER),N.mxUtils.getValue(S.style,N.mxConstants.STYLE_VERTICAL_ALIGN,N.mxConstants.ALIGN_MIDDLE))),this.bounds.x+=N.x*this.bounds.width,this.bounds.y+=N.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/I)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/I)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/I)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*I),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/I)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*I),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",N.mxClient.IS_VML?this.textarea.style.zoom=I:N.mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+I+","+I+")")}else this.textarea.style.height="",this.textarea.style.overflow="",v.apply(this,arguments)}};var C=mxCellEditor.prototype.getInitialValue;mxCellEditor.prototype.getInitialValue=function(S,A){if(mxUtils$1.getValue(S.style,"html","0")=="0")return C.apply(this,arguments);var I=this.graph.getEditingValue(S.cell,A);return mxUtils$1.getValue(S.style,"nl2Br","1")=="1"&&(I=I.replace(/\n/g,"<br/>")),I=this.graph.sanitizeHtml(I,!0),I};var E=mxCellEditor.prototype.getCurrentValue;mxCellEditor.prototype.getCurrentValue=function(S){if(mxUtils$1.getValue(S.style,"html","0")=="0")return E.apply(this,arguments);var A=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return mxUtils$1.getValue(S.style,"nl2Br","1")=="1"?A=A.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):A=A.replace(/\r\n/g,"").replace(/\n/g,""),A};var b=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(S){this.codeViewMode&&this.toggleViewMode(),b.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch{}};var w=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(S,A){this.graph.getModel().beginUpdate();try{w.apply(this,arguments),A==""&&this.graph.isCellDeletable(S.cell)&&this.graph.model.getChildCount(S.cell)==0&&this.graph.isTransparentState(S)&&this.graph.removeCells([S.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(S){var A=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,null);return(A==null||A==mxConstants$1.NONE)&&S.cell.geometry!=null&&S.cell.geometry.width>0&&(mxUtils$1.getValue(S.style,mxConstants$1.STYLE_ROTATION,0)!=0||mxUtils$1.getValue(S.style,mxConstants$1.STYLE_HORIZONTAL,1)==0)&&(A=mxUtils$1.getValue(S.style,mxConstants$1.STYLE_FILLCOLOR,null)),A==mxConstants$1.NONE&&(A=null),A},mxCellEditor.prototype.getMinimumSize=function(S){var A=this.graph.getView().scale;return new mxRectangle(0,0,S.text==null?30:S.text.size*A+20,30)};var $=mxGraphHandler.prototype.isValidDropTarget;mxGraphHandler.prototype.isValidDropTarget=function(S,A){return $.apply(this,arguments)&&!mxEvent$1.isAltDown(A.getEvent)};function P(){var S=document.createElement("div");return S.className="geHint",S.style.whiteSpace="nowrap",S.style.position="absolute",S}function M(S,A){switch(A){case mxConstants$1.POINTS:return S;case mxConstants$1.MILLIMETERS:return(S/mxConstants$1.PIXELS_PER_MM).toFixed(1);case mxConstants.INCHES:return(S/mxConstants$1.PIXELS_PER_INCH).toFixed(2)}}mxGraphView.prototype.formatUnitText=function(S){return S&&M(S,this.unit)},mxGraphHandler.prototype.updateHint=function(S){if(this.pBounds!=null&&(this.shape!=null||this.livePreviewActive)){this.hint==null&&(this.hint=P(),this.graph.container.appendChild(this.hint));var A=this.graph.view.translate,I=this.graph.view.scale,N=this.roundLength((this.bounds.x+this.currentDx)/I-A.x),_=this.roundLength((this.bounds.y+this.currentDy)/I-A.y),V=this.graph.view.unit;this.hint.innerHTML=M(N,V)+", "+M(_,V),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor$1.hintOffset+"px"}},mxGraphHandler.prototype.removeHint=function(){this.hint!=null&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)};var D=mxStackLayout.prototype.resizeCell;mxStackLayout.prototype.resizeCell=function(S,A){D.apply(this,arguments);var I=this.graph.getCellStyle(S);if(I.childLayout==null){var N=this.graph.model.getParent(S),_=N!=null?this.graph.getCellGeometry(N):null;if(_!=null&&(I=this.graph.getCellStyle(N),I.childLayout=="stackLayout")){var V=parseFloat(mxUtils$1.getValue(I,"stackBorder",mxStackLayout.prototype.border)),W=mxUtils$1.getValue(I,"horizontalStack","1")=="1",ot=this.graph.getActualStartSize(N);_=_.clone(),W?_.height=A.height+ot.y+ot.height+2*V:_.width=A.width+ot.x+ot.width+2*V,this.graph.model.setGeometry(N,_)}}};var k=mxSelectionCellsHandler.prototype.getHandledSelectionCells;mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){var S=k.apply(this,arguments),A=new mxDictionary,I=this.graph.model,N=[];function _(ot){A.get(ot)||(A.put(ot,!0),N.push(ot))}for(var V=0;V<S.length;V++){var W=S[V];this.graph.isTableCell(W)?_(I.getParent(I.getParent(W))):this.graph.isTableRow(W)&&_(I.getParent(W)),_(W)}return N};var Z=mxVertexHandler.prototype.createParentHighlightShape;mxVertexHandler.prototype.createParentHighlightShape=function(S){var A=Z.apply(this,arguments);return A.stroke="#C0C0C0",A.strokewidth=1,A};var q=mxEdgeHandler.prototype.createParentHighlightShape;mxEdgeHandler.prototype.createParentHighlightShape=function(S){var A=q.apply(this,arguments);return A.stroke="#C0C0C0",A.strokewidth=1,A},mxVertexHandler.prototype.rotationHandleVSpacing=-12,mxVertexHandler.prototype.getRotationHandlePosition=function(){var S=this.getHandlePadding();return new mxPoint(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+S.x/2,this.bounds.y+this.rotationHandleVSpacing-S.y/2)},mxVertexHandler.prototype.isRecursiveResize=function(S,A){return this.graph.isRecursiveVertexResize(S)&&!mxEvent$1.isControlDown(A.getEvent())},mxVertexHandler.prototype.isCenteredEvent=function(S,A){return!(!this.graph.isSwimlane(S.cell)&&this.graph.model.getChildCount(S.cell)>0&&!this.graph.isCellCollapsed(S.cell)&&mxUtils$1.getValue(S.style,"recursiveResize","1")=="1"&&mxUtils$1.getValue(S.style,"childLayout",null)==null)&&mxEvent$1.isControlDown(A.getEvent())||mxEvent$1.isMetaDown(A.getEvent())};var j=mxVertexHandler.prototype.isRotationHandleVisible;mxVertexHandler.prototype.isRotationHandleVisible=function(){return j.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds};var X=mxVertexHandler.prototype.isParentHighlightVisible;mxVertexHandler.prototype.isParentHighlightVisible=function(){return X.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)};var rt=mxVertexHandler.prototype.isCustomHandleVisible;mxVertexHandler.prototype.isCustomHandleVisible=function(S){return S.tableHandle||rt.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler.prototype.getSelectionBorderInset=function(){var S=0;return this.graph.isTableRow(this.state.cell)?S=1:this.graph.isTableCell(this.state.cell)&&(S=2),S};var et=mxVertexHandler.prototype.getSelectionBorderBounds;mxVertexHandler.prototype.getSelectionBorderBounds=function(){return et.apply(this,arguments).grow(-this.getSelectionBorderInset())};var Y=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var S=Y.apply(this,arguments);if(this.graph.isTable(this.state.cell)){var A=this.graph,I=A.model,N=this.state,_=this.selectionBorder,V=this;S==null&&(S=[]);var W=A.view.getCellStates(I.getChildCells(this.state.cell,!0));if(W.length>0){for(var ot=A.view.getCellStates(I.getChildCells(W[0].cell,!0)),at=0;at<ot.length;at++)mxUtils$1.bind(this,function(mt){var Lt=ot[mt],Ct=mt<ot.length-1?ot[mt+1]:null,Ut=new mxLine(new mxRectangle,mxConstants$1.NONE,1,!0);Ut.isDashed=_.isDashed,Ut.svgStrokeTolerance++;var Mt=new mxHandle(Lt,"col-resize",null,Ut);Mt.tableHandle=!0;var Vt=0;Mt.shape.node.parentNode.insertBefore(Mt.shape.node,Mt.shape.node.parentNode.firstChild),Mt.redraw=function(){if(this.shape!=null&&this.state.shape!=null){var Jt=A.getActualStartSize(N.cell);this.shape.stroke=Vt==0?mxConstants$1.NONE:_.stroke,this.shape.bounds.x=this.state.x+this.state.width+Vt*this.graph.view.scale,this.shape.bounds.width=1,this.shape.bounds.y=N.y+(mt==ot.length-1?0:Jt.y*this.graph.view.scale),this.shape.bounds.height=N.height-(mt==ot.length-1?0:(Jt.height+Jt.y)*this.graph.view.scale),this.shape.redraw()}};var Kt=!1;Mt.setPosition=function(Jt,re,jt){Vt=Math.max(Graph$1.minTableColumnWidth-Jt.width,re.x-Jt.x-Jt.width),Kt=mxEvent$1.isShiftDown(jt.getEvent()),Ct!=null&&!Kt&&(Vt=Math.min((Ct.x+Ct.width-Lt.x-Lt.width)/A.view.scale-Graph$1.minTableColumnWidth,Vt))},Mt.execute=function(Jt){if(Vt!=0)A.setTableColumnWidth(this.state.cell,Vt,Kt);else if(!V.blockDelayedSelection){var re=A.getCellAt(Jt.getGraphX(),Jt.getGraphY())||N.cell;A.graphHandler.selectCellForEvent(re,Jt)}Vt=0},Mt.reset=function(){Vt=0},S.push(Mt)})(at);for(var at=0;at<W.length;at++)mxUtils$1.bind(this,function(Lt){var Ct=W[Lt],Ut=new mxLine(new mxRectangle,mxConstants$1.NONE,1);Ut.isDashed=_.isDashed,Ut.svgStrokeTolerance++;var Mt=new mxHandle(Ct,"row-resize",null,Ut);Mt.tableHandle=!0;var Vt=0;Mt.shape.node.parentNode.insertBefore(Mt.shape.node,Mt.shape.node.parentNode.firstChild),Mt.redraw=function(){this.shape!=null&&this.state.shape!=null&&(this.shape.stroke=Vt==0?mxConstants$1.NONE:_.stroke,this.shape.bounds.x=this.state.x,this.shape.bounds.width=this.state.width,this.shape.bounds.y=this.state.y+this.state.height+Vt*this.graph.view.scale,this.shape.bounds.height=1,this.shape.redraw())},Mt.setPosition=function(Kt,Jt,re){Vt=Math.max(Graph$1.minTableRowHeight-Kt.height,Jt.y-Kt.y-Kt.height)},Mt.execute=function(Kt){if(Vt!=0)A.setTableRowHeight(this.state.cell,Vt,!mxEvent$1.isShiftDown(Kt.getEvent()));else if(!V.blockDelayedSelection){var Jt=A.getCellAt(Kt.getGraphX(),Kt.getGraphY())||N.cell;A.graphHandler.selectCellForEvent(Jt,Kt)}Vt=0},Mt.reset=function(){Vt=0},S.push(Mt)})(at)}}return S!=null?S.reverse():null};var G=mxVertexHandler.prototype.setHandlesVisible;mxVertexHandler.prototype.setHandlesVisible=function(S){if(G.apply(this,arguments),this.moveHandles!=null)for(var A=0;A<this.moveHandles.length;A++)this.moveHandles[A].style.visibility=S?"":"hidden";if(this.cornerHandles!=null)for(var A=0;A<this.cornerHandles.length;A++)this.cornerHandles[A].node.style.visibility=S?"":"hidden"},mxVertexHandler.prototype.refreshMoveHandles=function(){var S=this.graph,A=S.model;if(this.moveHandles!=null){for(var I=0;I<this.moveHandles.length;I++)this.moveHandles[I].parentNode.removeChild(this.moveHandles[I]);this.moveHandles=null}this.moveHandles=[];for(var I=0;I<A.getChildCount(this.state.cell);I++)mxUtils$1.bind(this,function(_){if(_!=null&&A.isVertex(_.cell)){var V=mxUtils$1.createImage(Editor$1.rowMoveImage);V.style.position="absolute",V.style.cursor="pointer",V.style.width="7px",V.style.height="4px",V.style.padding="4px 2px 4px 2px",V.rowState=_,mxEvent$1.addGestureListeners(V,mxUtils$1.bind(this,function(W){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),(this.graph.isToggleEvent(W)||!this.graph.isCellSelected(_.cell))&&this.graph.selectCellForEvent(_.cell,W),mxEvent$1.isPopupTrigger(W)||(this.graph.graphHandler.start(this.state.cell,mxEvent$1.getClientX(W),mxEvent$1.getClientY(W),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent$1.isMouseEvent(W),this.graph.isMouseDown=!0),mxEvent$1.consume(W)}),null,mxUtils$1.bind(this,function(W){mxEvent$1.isPopupTrigger(W)&&(this.graph.popupMenuHandler.popup(mxEvent$1.getClientX(W),mxEvent$1.getClientY(W),_.cell,W),mxEvent$1.consume(W))})),this.moveHandles.push(V),this.graph.container.appendChild(V)}})(this.graph.view.getState(A.getChildAt(this.state.cell,I)))},mxVertexHandler.prototype.refresh=function(){if(this.customHandles!=null){for(var S=0;S<this.customHandles.length;S++)this.customHandles[S].destroy();this.customHandles=this.createCustomHandles()}this.graph.isTable(this.state.cell)&&this.refreshMoveHandles()};var J=mxVertexHandler.prototype.getHandlePadding;mxVertexHandler.prototype.getHandlePadding=function(){var S=new mxPoint(0,0),A=this.tolerance,I=this.state.style.shape;mxCellRenderer.defaultShapes[I]==null&&mxStencilRegistry.getStencil(I)==null&&(I=mxConstants$1.SHAPE_RECTANGLE);var N=this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell;if(!N&&this.customHandles!=null){for(var _=0;_<this.customHandles.length;_++)if(this.customHandles[_].shape!=null&&this.customHandles[_].shape.bounds!=null){var V=this.customHandles[_].shape.bounds,W=V.getCenterX(),ot=V.getCenterY();if(Math.abs(this.state.x-W)<V.width/2||Math.abs(this.state.y-ot)<V.height/2||Math.abs(this.state.x+this.state.width-W)<V.width/2||Math.abs(this.state.y+this.state.height-ot)<V.height/2){N=!0;break}}}return N&&this.sizers!=null&&this.sizers.length>0&&this.sizers[0]!=null?(A/=2,this.graph.isTable(this.state.cell)&&(A+=7),S.x=this.sizers[0].bounds.width+A,S.y=this.sizers[0].bounds.height+A):S=J.apply(this,arguments),S},mxVertexHandler.prototype.updateHint=function(S){if(this.index!=mxEvent$1.LABEL_HANDLE){if(this.hint==null&&(this.hint=P(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent$1.ROTATION_HANDLE)this.hint.innerHTML=this.currentAlpha+"&deg;";else{var A=this.state.view.scale,I=this.state.view.unit;this.hint.innerHTML=M(this.roundLength(this.bounds.width/A),I)+" x "+M(this.roundLength(this.bounds.height/A),I)}var N=this.currentAlpha!=null?this.currentAlpha:this.state.style[mxConstants$1.STYLE_ROTATION]||"0",_=mxUtils$1.getBoundingBox(this.bounds,N);_==null&&(_=this.bounds),this.hint.style.left=_.x+Math.round((_.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=_.y+_.height+Editor$1.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")}},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.display="")};var tt=mxEdgeHandler.prototype.mouseMove;mxEdgeHandler.prototype.mouseMove=function(S,A){tt.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display!="none"&&this.graph.graphHandler!=null&&this.graph.graphHandler.first!=null&&(this.linkHint.style.display="none")};var gt=mxEdgeHandler.prototype.mouseUp;if(mxEdgeHandler.prototype.mouseUp=function(S,A){gt.apply(this,arguments),this.linkHint!=null&&this.linkHint.style.display=="none"&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(S,A){this.hint==null&&(this.hint=P(),this.state.view.graph.container.appendChild(this.hint));var I=this.graph.view.translate,N=this.graph.view.scale,_=this.roundLength(A.x/N-I.x),V=this.roundLength(A.y/N-I.y),W=this.graph.view.unit;if(this.hint.innerHTML=M(_,W)+", "+M(V,W),this.hint.style.visibility="visible",this.isSource||this.isTarget)if(this.constraintHandler.currentConstraint!=null&&this.constraintHandler.currentFocus!=null){var ot=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(ot.x*100)+"%, "+Math.round(ot.y*100)+"%]"}else this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(S.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(S.getGraphY(),A.y)+Editor$1.hintOffset+"px",this.linkHint!=null&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/>'):new mxImage(IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.secondaryHandle=mxClient.IS_SVG?Graph$1.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'):new mxImage(IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.fixedHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><path d="m 7 7 L 11 11 M 7 11 L 11 7" stroke="#fff"/>'):new mxImage(IMAGE_PATH+"/handle-fixed.png",17,17),HoverIcons.prototype.terminalHandle=mxClient.IS_SVG?Graph$1.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><circle cx="9" cy="9" r="2" stroke="#fff" fill="transparent"/>'):new mxImage(IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.rotationHandle=mxClient.IS_SVG?Graph$1.createSvgImage(16,16,'<path stroke="'+HoverIcons.prototype.arrowFill+'" fill="'+HoverIcons.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24):new mxImage(IMAGE_PATH+"/handle-rotate.png",16,16),mxClient.IS_SVG&&(mxConstraintHandler.prototype.pointImage=Graph$1.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>')),mxVertexHandler.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop,mxClient.IS_SVG||(new Image().src=HoverIcons.prototype.mainHandle.src,new Image().src=HoverIcons.prototype.fixedHandle.src,new Image().src=HoverIcons.prototype.terminalHandle.src,new Image().src=HoverIcons.prototype.secondaryHandle.src,new Image().src=HoverIcons.prototype.rotationHandle.src,new Image().src=HoverIcons.prototype.triangleUp.src,new Image().src=HoverIcons.prototype.triangleRight.src,new Image().src=HoverIcons.prototype.triangleDown.src,new Image().src=HoverIcons.prototype.triangleLeft.src,new Image().src=HoverIcons.prototype.refreshTarget.src,new Image().src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(S){return!mxEvent$1.isShiftDown(S.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(S){return!mxEvent$1.isShiftDown(S.getEvent())},Graph$1.touchStyle){(mxClient.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph$1.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(S){return mxEvent$1.isMouseEvent(S.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(S){var A=S.getEvent();return S.getState()==null&&!mxEvent$1.isMouseEvent(A)||mxEvent$1.isPopupTrigger(A)&&(S.getState()==null||mxEvent$1.isControlDown(A)||mxEvent$1.isShiftDown(A))};var dt=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(S,A){dt.apply(this,arguments),mxEvent$1.isTouchEvent(A.getEvent())&&this.graph.isCellSelected(A.getCell())&&this.graph.getSelectionCount()>1&&(this.delayedSelection=!1)}}else mxPanningHandler.prototype.isPanningTrigger=function(S){var A=S.getEvent();return mxEvent$1.isLeftMouseButton(A)&&(this.useLeftButtonForPanning&&S.getState()==null||mxEvent$1.isControlDown(A)&&!mxEvent$1.isShiftDown(A))||this.usePopupTrigger&&mxEvent$1.isPopupTrigger(A)};mxRubberband.prototype.isSpaceEvent=function(S){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent$1.isControlDown(S.getEvent())&&mxEvent$1.isShiftDown(S.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(S,A){if(this.cancelled)this.cancelled=!1,A.consume();else{var I=this.div!=null&&this.div.style.display!="none",N=null,_=null,V=null,W=null;if(this.first!=null&&this.currentX!=null&&this.currentY!=null&&(N=this.first.x,_=this.first.y,V=(this.currentX-N)/this.graph.view.scale,W=(this.currentY-_)/this.graph.view.scale,mxEvent$1.isAltDown(A.getEvent())||(V=this.graph.snap(V),W=this.graph.snap(W),this.graph.isGridEnabled()||(Math.abs(V)<this.graph.tolerance&&(V=0),Math.abs(W)<this.graph.tolerance&&(W=0)))),this.reset(),I){if(mxEvent$1.isAltDown(A.getEvent())&&this.graph.isToggleEvent(A.getEvent())){var ot=new mxRectangle(this.x,this.y,this.width,this.height),at=this.graph.getCells(ot.x,ot.y,ot.width,ot.height);this.graph.removeSelectionCells(at)}else if(this.isSpaceEvent(A)){this.graph.model.beginUpdate();try{for(var at=this.graph.getCellsBeyond(N,_,this.graph.getDefaultParent(),!0,!0),mt=0;mt<at.length;mt++)if(this.graph.isCellMovable(at[mt])){var Lt=this.graph.view.getState(at[mt]),Ct=this.graph.getCellGeometry(at[mt]);Lt!=null&&Ct!=null&&(Ct=Ct.clone(),Ct.translate(V,W),this.graph.model.setGeometry(at[mt],Ct))}}finally{this.graph.model.endUpdate()}}else{var ot=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(ot,A.getEvent())}A.consume()}}},mxRubberband.prototype.mouseMove=function(S,A){if(!A.isConsumed()&&this.first!=null){var I=mxUtils$1.getScrollOrigin(this.graph.container),N=mxUtils$1.getOffset(this.graph.container);I.x-=N.x,I.y-=N.y;var _=A.getX()+I.x,V=A.getY()+I.y,W=this.first.x-_,ot=this.first.y-V,at=this.graph.tolerance;if(this.div!=null||Math.abs(W)>at||Math.abs(ot)>at){if(this.div==null&&(this.div=this.createShape()),mxUtils$1.clearSelection(),this.update(_,V),this.isSpaceEvent(A)){var mt=this.x+this.width,Lt=this.y+this.height,Ct=this.graph.view.scale;mxEvent$1.isAltDown(A.getEvent())||(this.width=this.graph.snap(this.width/Ct)*Ct,this.height=this.graph.snap(this.height/Ct)*Ct,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=mt-this.width),this.y<this.first.y&&(this.y=Lt-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",this.secondDiv==null&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"}else this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null);A.consume()}}};var K=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){this.secondDiv!=null&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),K.apply(this,arguments)};var nt=new Date().getTime(),ht=0,bt=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(S,A,I,N){bt.apply(this,arguments),I!=this.currentTerminalState?(nt=new Date().getTime(),ht=0):ht=new Date().getTime()-nt,this.currentTerminalState=I};var $t=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(S){return this.currentTerminalState!=null&&S.getState()==this.currentTerminalState&&ht>2e3||(this.currentTerminalState==null||mxUtils$1.getValue(this.currentTerminalState.style,"outlineConnect","1")!="0")&&$t.apply(this,arguments)},mxEdgeHandler.prototype.createHandleShape=function(S,A){var I=S!=null&&S==0,N=this.state.getVisibleTerminalState(I),_=S!=null&&(S==0||S>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler$1&&S==2)?this.graph.getConnectionConstraint(this.state,N,I):null,V=_!=null?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(I),_):null,W=V!=null?this.fixedHandleImage:_!=null&&N!=null?this.terminalHandleImage:this.handleImage;if(W!=null){var ot=new mxImageShape(new mxRectangle(0,0,W.width,W.height),W.src);return ot.preserveImageAspect=!1,ot}else{var at=mxConstants$1.HANDLE_SIZE;return this.preferHtml&&(at-=1),new mxRectangleShape(new mxRectangle(0,0,at,at),mxConstants$1.HANDLE_FILLCOLOR,mxConstants$1.HANDLE_STROKECOLOR)}};var Dt=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(S,A,I){return this.handleImage=A==mxEvent$1.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:A==mxEvent$1.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,Dt.apply(this,arguments)};var ct=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(S){if(S!=null&&S.length==1){var A=this.graph.getModel(),I=A.getParent(S[0]),N=this.graph.getCellGeometry(S[0]);if(A.isEdge(I)&&N!=null&&N.relative){var _=this.graph.view.getState(S[0]);if(_!=null&&_.width<2&&_.height<2&&_.text!=null&&_.text.boundingBox!=null)return mxRectangle.fromRectangle(_.text.boundingBox)}}return ct.apply(this,arguments)};var Et=mxGraphHandler.prototype.getGuideStates;mxGraphHandler.prototype.getGuideStates=function(){for(var S=Et.apply(this,arguments),A=[],I=0;I<S.length;I++)mxUtils$1.getValue(S[I].style,"part","0")!="1"&&A.push(S[I]);return A};var Ht=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(S){var A=this.graph.getModel(),I=A.getParent(S.cell),N=this.graph.getCellGeometry(S.cell);if(A.isEdge(I)&&N!=null&&N.relative&&S.width<2&&S.height<2&&S.text!=null&&S.text.boundingBox!=null){var _=S.text.unrotatedBoundingBox||S.text.boundingBox;return new mxRectangle(Math.round(_.x),Math.round(_.y),Math.round(_.width),Math.round(_.height))}else return Ht.apply(this,arguments)};var Ot=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(S,A){var I=this.graph.getModel(),N=I.getParent(this.state.cell),_=this.graph.getCellGeometry(this.state.cell),V=this.getHandleForEvent(A);(V==mxEvent$1.ROTATION_HANDLE||!I.isEdge(N)||_==null||!_.relative||this.state==null||this.state.width>=2||this.state.height>=2)&&Ot.apply(this,arguments)},mxVertexHandler.prototype.rotateClick=function(){var S=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.NONE),A=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_FILLCOLOR,mxConstants$1.NONE);if(this.state.view.graph.model.isVertex(this.state.cell)&&S==mxConstants$1.NONE&&A==mxConstants$1.NONE){var I=mxUtils$1.mod(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_ROTATION,0)+90,360);this.state.view.graph.setCellStyles(mxConstants$1.STYLE_ROTATION,I,[this.state.cell])}else this.state.view.graph.turnShapes([this.state.cell])};var Nt=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(S,A){Nt.apply(this,arguments),this.graph.graphHandler.first!=null&&(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display="none"),this.linkHint!=null&&this.linkHint.style.display!="none"&&(this.linkHint.style.display="none"))};var lt=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(S,A){lt.apply(this,arguments),this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display=this.graph.getSelectionCount()==1?"":"none"),this.linkHint!=null&&this.linkHint.style.display=="none"&&(this.linkHint.style.display=""),this.blockDelayedSelection=null};var yt=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){yt.apply(this,arguments);var S=!1;if(this.rotationShape!=null&&this.rotationShape.node.setAttribute("title",mxResources$1.get("rotateTooltip")),this.graph.isTable(this.state.cell))this.refreshMoveHandles();else if(this.graph.getSelectionCount()==1&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var A=0;A<4;A++){var I=new mxRectangleShape(new mxRectangle(0,0,6,6),"#ffffff",mxConstants$1.HANDLE_STROKECOLOR);I.dialect=this.graph.dialect!=mxConstants$1.DIALECT_SVG?mxConstants$1.DIALECT_VML:mxConstants$1.DIALECT_SVG,I.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(I)}}var N=mxUtils$1.bind(this,function(){this.specialHandle!=null&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.changeHandler=mxUtils$1.bind(this,function(W,ot){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),N()}),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.editingHandler=mxUtils$1.bind(this,function(W,ot){this.redrawHandles()}),this.graph.addListener(mxEvent$1.EDITING_STOPPED,this.editingHandler);var _=this.graph.getLinkForCell(this.state.cell),V=this.graph.getLinksForState(this.state);this.updateLinkHint(_,V),(_!=null||V!=null&&V.length>0)&&(S=!0),S&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(S,A){try{if(S==null&&(A==null||A.length==0)||this.graph.getSelectionCount()>1)this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(S!=null||A!=null&&A.length>0){if(this.linkHint==null&&(this.linkHint=P(),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint)),this.linkHint.innerHTML="",S!=null&&(this.linkHint.appendChild(this.graph.createLinkForHint(S)),this.graph.isEnabled()&&typeof this.graph.editLink=="function")){var I=document.createElement("img");I.setAttribute("src",Editor$1.editImage),I.setAttribute("title",mxResources$1.get("editLink")),I.setAttribute("width","11"),I.setAttribute("height","11"),I.style.marginLeft="10px",I.style.marginBottom="-1px",I.style.cursor="pointer",this.linkHint.appendChild(I),mxEvent$1.addListener(I,"click",mxUtils$1.bind(this,function(W){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent$1.consume(W)}));var N=document.createElement("img");N.setAttribute("src",Dialog.prototype.clearImage),N.setAttribute("title",mxResources$1.get("removeIt",[mxResources$1.get("link")])),N.setAttribute("width","13"),N.setAttribute("height","10"),N.style.marginLeft="4px",N.style.marginBottom="-1px",N.style.cursor="pointer",this.linkHint.appendChild(N),mxEvent$1.addListener(N,"click",mxUtils$1.bind(this,function(W){this.graph.setLinkForCell(this.state.cell,null),mxEvent$1.consume(W)}))}if(A!=null)for(var _=0;_<A.length;_++){var V=document.createElement("div");V.style.marginTop=S!=null||_>0?"6px":"0px",V.appendChild(this.graph.createLinkForHint(A[_].getAttribute("href"),mxUtils$1.getTextContent(A[_]))),this.linkHint.appendChild(V)}}}catch{}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var _t=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){_t.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils$1.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var S=mxUtils$1.bind(this,function(){this.linkHint!=null&&(this.linkHint.style.display=this.graph.getSelectionCount()==1?"":"none"),this.labelShape!=null&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.changeHandler=mxUtils$1.bind(this,function(N,_){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),S(),this.redrawHandles()}),this.graph.getSelectionModel().addListener(mxEvent$1.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent$1.CHANGE,this.changeHandler);var A=this.graph.getLinkForCell(this.state.cell),I=this.graph.getLinksForState(this.state);(A!=null||I!=null&&I.length>0)&&(this.updateLinkHint(A,I),this.redrawHandles())};var Rt=new mxConnectionHandler(this,arguments);Rt.isEnabled=mxUtils$1.bind(this,function(){return this.graph.connectionHandler.isEnabled()});var Yt=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){if(this.moveHandles!=null)for(var S=0;S<this.moveHandles.length;S++)this.moveHandles[S].style.left=this.moveHandles[S].rowState.x+this.moveHandles[S].rowState.width-5+"px",this.moveHandles[S].style.top=this.moveHandles[S].rowState.y+this.moveHandles[S].rowState.height/2-6+"px";if(this.cornerHandles!=null){var A=this.getSelectionBorderInset(),I=this.cornerHandles,N=I[0].bounds.width/2,_=I[0].bounds.height/2;I[0].bounds.x=this.state.x-N+A,I[0].bounds.y=this.state.y-_+A,I[0].redraw(),I[1].bounds.x=I[0].bounds.x+this.state.width-2*A,I[1].bounds.y=I[0].bounds.y,I[1].redraw(),I[2].bounds.x=I[0].bounds.x,I[2].bounds.y=this.state.y+this.state.height-2*A,I[2].redraw(),I[3].bounds.x=I[1].bounds.x,I[3].bounds.y=I[2].bounds.y,I[3].redraw();for(var S=0;S<this.cornerHandles.length;S++)this.cornerHandles[S].node.style.display=this.graph.getSelectionCount()==1?"":"none"}if(this.rotationShape!=null&&this.rotationShape.node!=null&&(this.rotationShape.node.style.display=this.moveHandles==null&&this.graph.getSelectionCount()==1&&(this.index==null||this.index==mxEvent$1.ROTATION_HANDLE)?"":"none"),Yt.apply(this),this.state!=null&&this.linkHint!=null){var V=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),W=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),ot=mxUtils$1.getBoundingBox(W,this.state.style[mxConstants$1.STYLE_ROTATION]||"0",V),at=ot!=null?mxUtils$1.getBoundingBox(this.state,this.state.style[mxConstants$1.STYLE_ROTATION]||"0"):this.state,mt=this.state.text!=null?this.state.text.boundingBox:null;ot==null&&(ot=this.state);var Lt=ot.y+ot.height;mt!=null&&(Lt=Math.max(Lt,mt.y+mt.height)),this.linkHint.style.left=Math.max(0,Math.round(at.x+(at.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(Lt+this.verticalOffset/2+Editor$1.hintOffset)+"px"}};var Zt=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){if(Zt.apply(this,arguments),this.moveHandles!=null){for(var S=0;S<this.moveHandles.length;S++)this.moveHandles[S]!=null&&this.moveHandles[S].parentNode!=null&&this.moveHandles[S].parentNode.removeChild(this.moveHandles[S]);this.moveHandles=null}if(this.cornerHandles!=null){for(var S=0;S<this.cornerHandles.length;S++)this.cornerHandles[S]!=null&&this.cornerHandles[S].node!=null&&this.cornerHandles[S].node.parentNode!=null&&this.cornerHandles[S].node.parentNode.removeChild(this.cornerHandles[S].node);this.cornerHandles=null}this.linkHint!=null&&(this.linkHint.parentNode!=null&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.editingHandler!=null&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var Qt=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(this.marker!=null&&(Qt.apply(this),this.state!=null&&this.linkHint!=null)){var S=this.state;this.state.text!=null&&this.state.text.bounds!=null&&(S=new mxRectangle(S.x,S.y,S.width,S.height),S.add(this.state.text.bounds)),this.linkHint.style.left=Math.max(0,Math.round(S.x+(S.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(S.y+S.height+Editor$1.hintOffset)+"px"}};var Wt=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){Wt.apply(this,arguments),this.linkHint!=null&&(this.linkHint.style.visibility="")};var Bt=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){Bt.apply(this,arguments),this.linkHint!=null&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),this.changeHandler!=null&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}();let Editor$1=class Ve extends mxEventSource{constructor(i,t,e,n,s){super(),this.chromeless=i??this.chromeless,this.initStencilRegistry(),this.graph=n||this.createGraph(t,e),this.editable=s??!i,this.undoManager=this.createUndoManager(),this.status="",this.pageCounter=0,this.graph.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()}getOrCreateFilename(){return this.filename||mxResources$1.get("drawing",[Ve.pageCounter])+".xml"}getFilename(){return this.filename}setStatus(i){this.status=i,this.fireEvent(new mxEventObject$1("statusChanged"))}getStatus(){return this.status}graphChangeListener(i,t){var e=t!=null?t.getProperty("edit"):null;(e==null||!e.ignoreEdit)&&this.setModified(!0)}};(function(){try{for(var a=window;a.opener!=null&&typeof a.opener.Editor<"u"&&!isNaN(a.opener.Editor.pageCounter)&&a.opener!=a;)a=a.opener;a!=null&&(a.Editor.pageCounter++,Editor$1.pageCounter=a.Editor.pageCounter)}catch{}})();Editor$1.prototype.useLocalStorage=typeof Storage<"u"&&mxClient.IS_IOS;Editor$1.prototype.seleceImage=IMAGE_PATH+"/select.png";Editor$1.prototype.panImage=IMAGE_PATH+"/pan.png";Editor$1.prototype.moveImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=":IMAGE_PATH+"/move.png";Editor$1.prototype.rowMoveImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAEBAMAAACw6DhOAAAAGFBMVEUzMzP///9tbW1QUFCKiopBQUF8fHxfX1/IXlmXAAAAFElEQVQImWNgNVdzYBAUFBRggLMAEzYBy29kEPgAAAAASUVORK5CYII=":IMAGE_PATH+"/thumb_horz.png";Editor$1.prototype.helpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png";Editor$1.prototype.checkmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif";Editor$1.prototypemaximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC";Editor$1.prototype.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC";Editor$1.prototype.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=";Editor$1.prototype.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC";Editor$1.prototype.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=";Editor$1.prototype.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC";Editor$1.prototype.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==";Editor$1.prototype.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif";Editor$1.prototype.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC";Editor$1.prototype.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=";Editor$1.prototype.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==";Editor$1.prototype.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC";Editor$1.prototype.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==";Editor$1.prototype.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC";Editor$1.prototype.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=";Editor$1.prototype.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC";Editor$1.prototype.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==";Editor$1.prototype.refreshLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMABfyE2QKU+dfNyyDyoVYKwnTv7N+6rntsYlFNQjEqEw316uSzf2c1JB3GvqebiVw6GAjQB4DQr10AAAE7SURBVDjLvZLXcoMwEABPIgRCx3TT3A3udqL//7UgAdGRcR4yk8k+idsdmgS/QyWEqD/axS2JDV33zlnzLHIzQ2MDq9OeJ3m8l76KKENYlxrmM/b65Ys1+8YxnTEZFIEY0vVhszFWfUGZDJpQTDznTgAe5k4XhQxILB7ruzBQn+kkyDXuHfRtjoYDEvH7J9Lz98dBZXXL94X0Ofco2PFlChKbjVzEdakoSlKjoNoqPYkJ/wUZAYwc+PpLj1Ei7+jdoBWlwQZoJv2H1w3CWgRvo7dd9DP5btgwCWz0M02+oVoxCcIWeY9PNmR6B++m9prMxYEISpCBYBlfy9bc745is7UUULAem1Ww7FfalsiA2uaJsgmWP3pQI9q9/yMLkaaHAp2fxhHff/cNq7dBdHXhGW7l+Mo2zU0Cf8knJ2xA0oJ8enwAAAAASUVORK5CYII=";Editor$1.prototype.backLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD////////////////+/v7////////////////////////////////////////////+/v7///////////////////////////////////////////////////////////////////////////////8vKLfTAAAAJXRSTlMACh7h9gby3NLIwzwZ55uVJgH57b+8tbCljYV1RRMQ46FrTzQw+vtxOQAAAJ5JREFUOMuF00cWgzAQA1DRDQFCbwFSdf8rZpdVrNH2z3tuMv7mldZQ2WN2yi8x+TT8JvyTkqvwpiKvwsOIrA1fWr+XGTklfj8dOQR+D3KyUF6QufBkJN0hfCazEv6sZBRCJDUcPasGKpu1RLtYE8lkHAPBQLoTsK/SfAyRw5FjAuhCzC2MSj0gJ+66lHatgXdKboD9tfREB5m9/+3iC9jHDYvsGNcUAAAAAElFTkSuQmCC";Editor$1.prototype.fullscreenLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAllBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AJcWoAAAAMXRSTlMA+wIFxPWPCIb446tnUxmsoIykgxTe29jQnpKBe2MNsZhVTR/KyLuWbFhEPjUq7L9z+bQj+gAAAWxJREFUOMttk4l2gkAMRTODCO4FtQgIbnWpS9v8/881iZFh8R51NO8GJ+gAjMN8zuTRFSw04cIOHQcqFHH6oaQFGxf0jeBjEgB8Y52TpW9Ag4zB5QICWOtHrgwGuFZBcw+gPP0MFS7+iiD5inOmDIQS9sZgTwUzwEzyxhxHVEEU7NdDUXsqUPtqjIgR2IZSCT4upzSeIeOdcMHnfDsx3giPoezfU6MrQGB5//SckLEG2xYscK4GfnUFqaix39zrwooaOD/cXoYuvHKQIc7pzd3HVPusp6t2FAW/RmjMonbl8vwHDeZo/GkleJC7e+p5XA/rAq1X/V10wKag04rBpa2/d0LL4OYYceOEtsG5jyMntI1wS+N1BGcQBl/CoLoPOl9ABrW/BP53e1bwSJHHlkIVchJwmHwyyfJ4kIvEnKtwkxNSEct83KSChT7WiWgDZ3ccZ0BM4tloJow2YUAtifNT3njnyD+y/pMsnP4DN3Y4yl1Gyk0AAAAASUVORK5CYII=";Editor$1.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dots",dispName:"Dots"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}];Editor$1.themes=null;Editor$1.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl";Editor$1.hintOffset=20;Editor$1.popupsAllowed=!0;Editor$1.prototype.originalNoForeignObject=mxClient.NO_FO;Editor$1.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif";Editor$1.prototype.extendCanvas=!0;Editor$1.prototype.chromeless=!1;Editor$1.prototype.cancelFirst=!0;Editor$1.prototype.enabled=!0;Editor$1.prototype.filename=null;Editor$1.prototype.modified=!1;Editor$1.prototype.autosave=!0;Editor$1.prototype.initialTopSpacing=0;Editor$1.prototype.appName=document.title;Editor$1.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/";Editor$1.prototype.defaultGraphOverflow="hidden";Editor$1.prototype.init=function(){};Editor$1.prototype.isChromelessView=function(){return this.chromeless};Editor$1.prototype.setAutosave=function(a){this.autosave=a,this.fireEvent(new mxEventObject$1("autosaveChanged"))};Editor$1.prototype.getEditBlankUrl=function(a){return this.editBlankUrl+a};Editor$1.prototype.editAsNew=function(a,i){var t=i!=null?"?title="+encodeURIComponent(i):"";if(urlParams.ui!=null&&(t+=(t.length>0?"&":"?")+"ui="+urlParams.ui),typeof window.postMessage<"u"&&(document.documentMode==null||document.documentMode>=10)){var e=null,n=mxUtils$1.bind(this,function(s){s.data=="ready"&&s.source==e&&(mxEvent$1.removeListener(window,"message",n),e.postMessage(a,"*"))});mxEvent$1.addListener(window,"message",n),e=this.graph.openLink(this.getEditBlankUrl(t+(t.length>0?"&":"?")+"client=1"),null,!0)}else this.graph.openLink(this.getEditBlankUrl(t)+"#R"+encodeURIComponent(a))};Editor$1.prototype.createGraph=function(a,i){var t=new Graph$1(null,i,null,null,a);return t.transparentBackground=!1,this.chromeless||(t.isBlankLink=function(e){return!this.isExternalProtocol(e)}),t};Editor$1.prototype.resetGraph=function(){this.graph.gridEnabled=!this.isChromelessView()||urlParams.grid=="1",this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)};Editor$1.prototype.readGraphState=function(a){this.graph.gridEnabled=a.getAttribute("grid")!="0"&&(!this.isChromelessView()||urlParams.grid=="1"),this.graph.gridSize=parseFloat(a.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled=a.getAttribute("guides")!="0",this.graph.setTooltips(a.getAttribute("tooltips")!="0"),this.graph.setConnectable(a.getAttribute("connect")!="0"),this.graph.connectionArrowsEnabled=a.getAttribute("arrows")!="0",this.graph.foldingEnabled=a.getAttribute("fold")!="0",this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled=urlParams.nav=="1",this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var i=parseFloat(a.getAttribute("pageScale"));if(!isNaN(i)&&i>0?this.graph.pageScale=i:this.graph.pageScale=mxGraph.prototype.pageScale,!this.graph.isLightboxView()&&!this.graph.isViewer()){var t=a.getAttribute("page");t!=null?this.graph.pageVisible=t!="0":this.graph.pageVisible=this.graph.defaultPageVisible}else this.graph.pageVisible=!1;this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var e=parseFloat(a.getAttribute("pageWidth")),n=parseFloat(a.getAttribute("pageHeight"));!isNaN(e)&&!isNaN(n)&&(this.graph.pageFormat=new mxRectangle(0,0,e,n));var s=a.getAttribute("background");s!=null&&s.length>0?this.graph.background=s:this.graph.background=null};Editor$1.prototype.setGraphXml=function(a){if(console.log("Editor.prototype.setGraphXml"),a!=null){var i=new mxCodec(a.ownerDocument);if(console.log("dec"),console.log(i),a.nodeName=="mxGraphModel"){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(a),this.updateGraphComponents(),i.decode(a,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject$1("resetGraphView"))}else if(a.nodeName=="root"){this.resetGraph();var t=i.document.createElement("mxGraphModel");t.appendChild(a),i.decode(t,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject$1("resetGraphView"))}else throw{message:mxResources$1.get("cannotOpenFile"),node:a,toString:function(){return this.message}}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject$1("resetGraphView"))};Editor$1.prototype.getGraphXml=function(a){a=a??!0;var i=null;if(a){var t=new mxCodec(mxUtils$1.createXmlDocument());i=t.encode(this.graph.getModel())}else i=this.graph.encodeCells(mxUtils$1.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())));return(this.graph.view.translate.x!=0||this.graph.view.translate.y!=0)&&(i.setAttribute("dx",Math.round(this.graph.view.translate.x*100)/100),i.setAttribute("dy",Math.round(this.graph.view.translate.y*100)/100)),i.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),i.setAttribute("gridSize",this.graph.gridSize),i.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),i.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),i.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),i.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),i.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),i.setAttribute("page",this.graph.pageVisible?"1":"0"),i.setAttribute("pageScale",this.graph.pageScale),i.setAttribute("pageWidth",this.graph.pageFormat.width),i.setAttribute("pageHeight",this.graph.pageFormat.height),this.graph.background!=null&&i.setAttribute("background",this.graph.background),i};Editor$1.prototype.updateGraphComponents=function(){var a=this.graph;a.container!=null&&(a.view.validateBackground(),a.container.style.overflow=a.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject$1("updateGraphComponents")))};Editor$1.prototype.setModified=function(a){this.modified=a};Editor$1.prototype.setFilename=function(a){this.filename=a};Editor$1.prototype.createUndoManager=function(){var a=this.graph,i=new mxUndoManager;this.undoListener=function(n,s){i.undoableEditHappened(s.getProperty("edit"))};var t=mxUtils$1.bind(this,function(n,s){this.undoListener.apply(this,arguments)});a.getModel().addListener(mxEvent$1.UNDO,t),a.getView().addListener(mxEvent$1.UNDO,t);var e=function(n,s){var l=a.getSelectionCellsForChanges(s.getProperty("edit").changes,function(h){return!(h instanceof mxChildChange)});if(l.length>0){a.getModel();for(var r=[],o=0;o<l.length;o++)a.view.getState(l[o])!=null&&r.push(l[o]);a.setSelectionCells(r)}};return i.addListener(mxEvent$1.UNDO,e),i.addListener(mxEvent$1.REDO,e),i};Editor$1.prototype.initStencilRegistry=function(){};Editor$1.prototype.destroy=function(){this.graph!=null&&(this.graph.destroy(),this.graph=null)};function OpenFile$1(a){this.producer=null,this.consumer=null,this.done=a,this.args=null}OpenFile$1.prototype.setConsumer=function(a){this.consumer=a,this.execute()};OpenFile$1.prototype.setData=function(){this.args=arguments,this.execute()};OpenFile$1.prototype.error=function(a){this.cancel(!0),mxUtils$1.alert(a)};OpenFile$1.prototype.execute=function(){this.consumer!=null&&this.args!=null&&(this.cancel(!1),this.consumer.apply(this,this.args))};OpenFile$1.prototype.cancel=function(a){this.done!=null&&this.done(a??!0)};function Dialog$1(a,i,t,e,n,s,l,r,o,h,u){var d=0;mxClient.IS_VML&&(document.documentMode==null||document.documentMode<8)&&(d=80),t+=d,e+=d;var m=t,g=e,x=mxUtils$1.getDocumentSize();window.innerHeight!=null&&(x.height=window.innerHeight);var v=x.height,C=Math.max(1,Math.round((x.width-t-64)/2)),E=Math.max(1,Math.round((v-e-a.footerHeight)/3));mxClient.IS_QUIRKS||(i.style.maxHeight="100%"),t=document.body!=null?Math.min(t,document.body.scrollWidth-64):t,e=Math.min(e,v-64),a.dialogs.length>0&&(this.zIndex+=a.dialogs.length*2),this.bg==null&&(this.bg=a.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog$1.backdropColor,this.bg.style.height=v+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils$1.setOpacity(this.bg,this.bgOpacity),mxClient.IS_QUIRKS&&new mxDivResizer(this.bg));var b=mxUtils$1.getDocumentScrollOrigin(document);this.bg.style.left=b.x+"px",this.bg.style.top=b.y+"px",C+=b.x,E+=b.y,n&&document.body.appendChild(this.bg);var w=a.createDiv(o?"geTransDialog":"geDialog"),$=this.getPosition(C,E,t,e);if(C=$.x,E=$.y,w.style.width=t+"px",w.style.height=e+"px",w.style.left=C+"px",w.style.top=E+"px",w.style.zIndex=this.zIndex,w.appendChild(i),document.body.appendChild(w),!r&&i.clientHeight>w.clientHeight-64&&(i.style.overflowY="auto"),s){var P=document.createElement("img");if(P.setAttribute("src",Dialog$1.prototype.closeImage),P.setAttribute("title",mxResources$1.get("close")),P.className="geDialogClose",P.style.top=E+14+"px",P.style.left=C+t+38-d+"px",P.style.zIndex=this.zIndex,mxEvent$1.addListener(P,"click",mxUtils$1.bind(this,function(){a.hideDialog(!0)})),document.body.appendChild(P),this.dialogImg=P,!u){var M=!1;mxEvent$1.addGestureListeners(this.bg,mxUtils$1.bind(this,function(D){M=!0}),null,mxUtils$1.bind(this,function(D){M&&(a.hideDialog(!0),M=!1)}))}}this.resizeListener=mxUtils$1.bind(this,function(){if(h!=null){var D=h();D!=null&&(m=t=D.w,g=e=D.h)}var k=mxUtils$1.getDocumentSize();v=k.height,this.bg.style.height=v+"px",C=Math.max(1,Math.round((k.width-t-64)/2)),E=Math.max(1,Math.round((v-e-a.footerHeight)/3)),t=document.body!=null?Math.min(m,document.body.scrollWidth-64):m,e=Math.min(g,v-64);var Z=this.getPosition(C,E,t,e);C=Z.x,E=Z.y,w.style.left=C+"px",w.style.top=E+"px",w.style.width=t+"px",w.style.height=e+"px",!r&&i.clientHeight>w.clientHeight-64&&(i.style.overflowY="auto"),this.dialogImg!=null&&(this.dialogImg.style.top=E+14+"px",this.dialogImg.style.left=C+t+38-d+"px")}),mxEvent$1.addListener(window,"resize",this.resizeListener),this.onDialogClose=l,this.container=w,a.editor.fireEvent(new mxEventObject$1("showDialog"))}Dialog$1.backdropColor="white";Dialog$1.prototype.zIndex=mxPopupMenu.prototype.zIndex-1;Dialog$1.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png";Dialog$1.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png";Dialog$1.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif";Dialog$1.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png";Dialog$1.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png";Dialog$1.prototype.bgOpacity=80;Dialog$1.prototype.getPosition=function(a,i){return new mxPoint(a,i)};Dialog$1.prototype.close=function(a,i){if(this.onDialogClose!=null){if(this.onDialogClose(a,i)==!1)return!1;this.onDialogClose=null}this.dialogImg!=null&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),this.bg!=null&&this.bg.parentNode!=null&&this.bg.parentNode.removeChild(this.bg),mxEvent$1.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};function ErrorDialog(a,i,t,e,n,s,l,r,o,h,u){o=o??!0;var d=document.createElement("div");if(d.style.textAlign="center",i!=null){var m=document.createElement("div");m.style.padding="0px",m.style.margin="0px",m.style.fontSize="18px",m.style.paddingBottom="16px",m.style.marginBottom="10px",m.style.borderBottom="1px solid #c0c0c0",m.style.color="gray",m.style.whiteSpace="nowrap",m.style.textOverflow="ellipsis",m.style.overflow="hidden",mxUtils$1.write(m,i),m.setAttribute("title",i),d.appendChild(m)}var g=document.createElement("div");g.style.lineHeight="1.2em",g.style.padding="6px",g.innerHTML=t,d.appendChild(g);var x=document.createElement("div");if(x.style.marginTop="12px",x.style.textAlign="center",s!=null){var v=mxUtils$1.button(mxResources$1.get("tryAgain"),function(){a.hideDialog(),s()});v.className="geBtn",x.appendChild(v),x.style.textAlign="center"}if(h!=null){var C=mxUtils$1.button(h,function(){u!=null&&u()});C.className="geBtn",x.appendChild(C)}var E=mxUtils$1.button(e,function(){o&&a.hideDialog(),n!=null&&n()});if(E.className="geBtn",x.appendChild(E),l!=null){var b=mxUtils$1.button(l,function(){o&&a.hideDialog(),r!=null&&r()});b.className="geBtn gePrimaryBtn",x.appendChild(b)}this.init=function(){E.focus()},d.appendChild(x),this.container=d}function PageSetupDialog$1(a){var i=a.editor.graph,t,e,n=document.createElement("table");n.style.width="100%",n.style.height="100%";var s=document.createElement("tbody");t=document.createElement("tr"),e=document.createElement("td"),e.style.verticalAlign="top",e.style.fontSize="10pt",mxUtils$1.write(e,mxResources$1.get("paperSize")+":"),t.appendChild(e),e=document.createElement("td"),e.style.verticalAlign="top",e.style.fontSize="10pt";var l=PageSetupDialog$1.addPageFormatPanel(e,"pagesetupdialog",i.pageFormat);t.appendChild(e),s.appendChild(t),t=document.createElement("tr"),e=document.createElement("td"),mxUtils$1.write(e,mxResources$1.get("background")+":"),t.appendChild(e),e=document.createElement("td"),e.style.whiteSpace="nowrap";var r=document.createElement("input");r.setAttribute("type","text");var o=document.createElement("button");o.style.width="18px",o.style.height="18px",o.style.marginRight="20px",o.style.backgroundPosition="center center",o.style.backgroundRepeat="no-repeat";var h=i.background;function u(){h==null||h==mxConstants$1.NONE?(o.style.backgroundColor="",o.style.backgroundImage="url('"+Dialog$1.prototype.noColorImage+"')"):(o.style.backgroundColor=h,o.style.backgroundImage="")}u(),mxEvent$1.addListener(o,"click",function(E){a.pickColor(h||"none",function(b){h=b,u()}),mxEvent$1.consume(E)}),e.appendChild(o),mxUtils$1.write(e,mxResources$1.get("gridSize")+":");var d=document.createElement("input");d.setAttribute("type","number"),d.setAttribute("min","0"),d.style.width="40px",d.style.marginLeft="6px",d.value=i.getGridSize(),e.appendChild(d),mxEvent$1.addListener(d,"change",function(){var E=parseInt(d.value);d.value=Math.max(1,isNaN(E)?i.getGridSize():E)}),t.appendChild(e),s.appendChild(t),t=document.createElement("tr"),e=document.createElement("td"),mxUtils$1.write(e,mxResources$1.get("image")+":"),t.appendChild(e),e=document.createElement("td");var m=document.createElement("a");m.style.textDecoration="underline",m.style.cursor="pointer",m.style.color="#a0a0a0";var g=i.backgroundImage;function x(){g==null?(m.removeAttribute("title"),m.style.fontSize="",m.innerHTML=mxUtils$1.htmlEntities(mxResources$1.get("change"))+"..."):(m.setAttribute("title",g.src),m.style.fontSize="11px",m.innerHTML=mxUtils$1.htmlEntities(g.src.substring(0,42))+"...")}mxEvent$1.addListener(m,"click",function(E){a.showBackgroundImageDialog(function(b,w){w||(g=b,x())},g),mxEvent$1.consume(E)}),x(),e.appendChild(m),t.appendChild(e),s.appendChild(t),t=document.createElement("tr"),e=document.createElement("td"),e.colSpan=2,e.style.paddingTop="16px",e.setAttribute("align","right");var v=mxUtils$1.button(mxResources$1.get("cancel"),function(){a.hideDialog()});v.className="geBtn",a.editor.cancelFirst&&e.appendChild(v);var C=mxUtils$1.button(mxResources$1.get("apply"),function(){a.hideDialog();var E=parseInt(d.value);!isNaN(E)&&i.gridSize!==E&&i.setGridSize(E);var b=new ChangePageSetup(a,h,g,l.get());b.ignoreColor=i.background==h;var w=i.backgroundImage!=null?i.backgroundImage.src:null,$=g!=null?g.src:null;b.ignoreImage=w===$,(i.pageFormat.width!=b.previousFormat.width||i.pageFormat.height!=b.previousFormat.height||!b.ignoreColor||!b.ignoreImage)&&i.model.execute(b)});C.className="geBtn gePrimaryBtn",e.appendChild(C),a.editor.cancelFirst||e.appendChild(v),t.appendChild(e),s.appendChild(t),n.appendChild(s),this.container=n}PageSetupDialog$1.addPageFormatPanel=function(a,i,t,e){var n="format-"+i,s=document.createElement("input");s.setAttribute("name",n),s.setAttribute("type","radio"),s.setAttribute("value","portrait");var l=document.createElement("input");l.setAttribute("name",n),l.setAttribute("type","radio"),l.setAttribute("value","landscape");var r=document.createElement("select");r.style.marginBottom="8px",r.style.width="202px";var o=document.createElement("div");o.style.marginLeft="4px",o.style.width="210px",o.style.height="24px",s.style.marginRight="6px",o.appendChild(s);var h=document.createElement("span");h.style.maxWidth="100px",mxUtils$1.write(h,mxResources$1.get("portrait")),o.appendChild(h),l.style.marginLeft="10px",l.style.marginRight="6px",o.appendChild(l);var u=document.createElement("span");u.style.width="100px",mxUtils$1.write(u,mxResources$1.get("landscape")),o.appendChild(u);var d=document.createElement("div");d.style.marginLeft="4px",d.style.width="210px",d.style.height="24px";var m=document.createElement("input");m.setAttribute("size","7"),m.style.textAlign="right",d.appendChild(m),mxUtils$1.write(d," in x ");var g=document.createElement("input");g.setAttribute("size","7"),g.style.textAlign="right",d.appendChild(g),mxUtils$1.write(d," in"),o.style.display="none",d.style.display="none";for(var x=new Object,v=PageSetupDialog$1.getFormats(),C=0;C<v.length;C++){var E=v[C];x[E.key]=E;var b=document.createElement("option");b.setAttribute("value",E.key),mxUtils$1.write(b,E.title),r.appendChild(b)}var w=!1;function $(D,k,Z){if(Z||m!=document.activeElement&&g!=document.activeElement){for(var q=!1,j=0;j<v.length;j++){var X=v[j];w?X.key=="custom"&&(r.value=X.key,w=!1):X.format!=null&&(X.key=="a4"?t.width==826?(t=mxRectangle.fromRectangle(t),t.width=827):t.height==826&&(t=mxRectangle.fromRectangle(t),t.height=827):X.key=="a5"&&(t.width==584?(t=mxRectangle.fromRectangle(t),t.width=583):t.height==584&&(t=mxRectangle.fromRectangle(t),t.height=583)),t.width==X.format.width&&t.height==X.format.height?(r.value=X.key,s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0,l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1,q=!0):t.width==X.format.height&&t.height==X.format.width&&(r.value=X.key,s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1,l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0,q=!0))}q?(o.style.display="",d.style.display="none"):(m.value=t.width/100,g.value=t.height/100,s.setAttribute("checked","checked"),r.value="custom",o.style.display="none",d.style.display="")}}$(),a.appendChild(r),mxUtils$1.br(a),a.appendChild(o),a.appendChild(d);var P=t,M=function(D,k){var Z=x[r.value];Z.format!=null?(m.value=Z.format.width/100,g.value=Z.format.height/100,d.style.display="none",o.style.display=""):(o.style.display="none",d.style.display="");var q=parseFloat(m.value);(isNaN(q)||q<=0)&&(m.value=t.width/100);var j=parseFloat(g.value);(isNaN(j)||j<=0)&&(g.value=t.height/100);var X=new mxRectangle(0,0,Math.floor(parseFloat(m.value)*100),Math.floor(parseFloat(g.value)*100));r.value!="custom"&&l.checked&&(X=new mxRectangle(0,0,X.height,X.width)),(!k||!w)&&(X.width!=P.width||X.height!=P.height)&&(P=X,e!=null&&e(P))};return mxEvent$1.addListener(h,"click",function(D){s.checked=!0,M(),mxEvent$1.consume(D)}),mxEvent$1.addListener(u,"click",function(D){l.checked=!0,M(),mxEvent$1.consume(D)}),mxEvent$1.addListener(m,"blur",M),mxEvent$1.addListener(m,"click",M),mxEvent$1.addListener(g,"blur",M),mxEvent$1.addListener(g,"click",M),mxEvent$1.addListener(l,"change",M),mxEvent$1.addListener(s,"change",M),mxEvent$1.addListener(r,"change",function(D){w=r.value=="custom",M(D,!0)}),M(),{set:function(D){t=D,$(null,null,!0)},get:function(){return P},widthInput:m,heightInput:g}};PageSetupDialog$1.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants$1.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants$1.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources$1.get("custom"),format:null}]};function FilenameDialog$1(a,i,t,e,n,s,l,r,o,h,u,d){o=o??!0;var m,g,x=document.createElement("table"),v=document.createElement("tbody");x.style.marginTop="8px",m=document.createElement("tr"),g=document.createElement("td"),g.style.whiteSpace="nowrap",g.style.fontSize="10pt",g.style.width=u?"80px":"120px",mxUtils$1.write(g,(n||mxResources$1.get("filename"))+":"),m.appendChild(g);var C=document.createElement("input");C.setAttribute("value",i||""),C.style.marginLeft="4px",C.style.width=d!=null?d+"px":"180px";var E=mxUtils$1.button(t,function(){(s==null||s(C.value))&&(o&&a.hideDialog(),e(C.value))});if(E.className="geBtn gePrimaryBtn",this.init=function(){if(!(n==null&&l!=null)&&(C.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?C.select():document.execCommand("selectAll",!1,null),Graph$1.fileSupport)){var P=x.parentNode;if(P!=null){a.editor.graph;var M=null;mxEvent$1.addListener(P,"dragleave",function(D){M!=null&&(M.style.backgroundColor="",M=null),D.stopPropagation(),D.preventDefault()}),mxEvent$1.addListener(P,"dragover",mxUtils$1.bind(this,function(D){M==null&&(!mxClient.IS_IE||document.documentMode>10)&&(M=C,M.style.backgroundColor="#ebf2f9"),D.stopPropagation(),D.preventDefault()})),mxEvent$1.addListener(P,"drop",mxUtils$1.bind(this,function(D){M!=null&&(M.style.backgroundColor="",M=null),mxUtils$1.indexOf(D.dataTransfer.types,"text/uri-list")>=0&&(C.value=decodeURIComponent(D.dataTransfer.getData("text/uri-list")),E.click()),D.stopPropagation(),D.preventDefault()}))}}},g=document.createElement("td"),g.style.whiteSpace="nowrap",g.appendChild(C),m.appendChild(g),(n!=null||l==null)&&(v.appendChild(m),u!=null)){if(a.editor.diagramFileTypes!=null){var b=FilenameDialog$1.createFileTypes(a,C,a.editor.diagramFileTypes);b.style.marginLeft="6px",b.style.width="74px",g.appendChild(b),C.style.width=d!=null?d-40+"px":"140px"}g.appendChild(FilenameDialog$1.createTypeHint(a,C,u))}l!=null&&(m=document.createElement("tr"),g=document.createElement("td"),g.colSpan=2,g.appendChild(l),m.appendChild(g),v.appendChild(m)),m=document.createElement("tr"),g=document.createElement("td"),g.colSpan=2,g.style.paddingTop="20px",g.style.whiteSpace="nowrap",g.setAttribute("align","right");var w=mxUtils$1.button(mxResources$1.get("cancel"),function(){a.hideDialog(),h!=null&&h()});if(w.className="geBtn",a.editor.cancelFirst&&g.appendChild(w),r!=null){var $=mxUtils$1.button(mxResources$1.get("help"),function(){a.editor.graph.openLink(r)});$.className="geBtn",g.appendChild($)}mxEvent$1.addListener(C,"keypress",function(P){P.keyCode==13&&E.click()}),g.appendChild(E),a.editor.cancelFirst||g.appendChild(w),m.appendChild(g),v.appendChild(m),x.appendChild(v),this.container=x}FilenameDialog$1.filenameHelpLink=null;FilenameDialog$1.createTypeHint=function(a,i,t){var e=document.createElement("img");e.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils$1.setOpacity(e,70);var n=function(){e.setAttribute("src",Editor$1.helpImage),e.setAttribute("title",mxResources$1.get("help"));for(var s=0;s<t.length;s++)if(t[s].ext.length>0&&i.value.toLowerCase().substring(i.value.length-t[s].ext.length-1)=="."+t[s].ext){e.setAttribute("src",mxClient.imageBasePath+"/warning.png"),e.setAttribute("title",mxResources$1.get(t[s].title));break}};return mxEvent$1.addListener(i,"keyup",n),mxEvent$1.addListener(i,"change",n),mxEvent$1.addListener(e,"click",function(s){var l=e.getAttribute("title");e.getAttribute("src")==Editor$1.helpImage?a.editor.graph.openLink(FilenameDialog$1.filenameHelpLink):l!=""&&a.showError(null,l,mxResources$1.get("help"),function(){a.editor.graph.openLink(FilenameDialog$1.filenameHelpLink)},null,mxResources$1.get("ok"),null,null,null,340,90),mxEvent$1.consume(s)}),n(),e};FilenameDialog$1.createFileTypes=function(a,i,t){for(var e=document.createElement("select"),n=0;n<t.length;n++){var s=document.createElement("option");s.setAttribute("value",n),mxUtils$1.write(s,mxResources$1.get(t[n].description)+" (."+t[n].extension+")"),e.appendChild(s)}mxEvent$1.addListener(e,"change",function(r){var o=t[e.value].extension,h=i.value.lastIndexOf(".");if(h>0){var o=t[e.value].extension;i.value=i.value.substring(0,h+1)+o}else i.value=i.value+"."+o;if("createEvent"in document){var u=document.createEvent("HTMLEvents");u.initEvent("change",!1,!0),i.dispatchEvent(u)}else i.fireEvent("onchange")});var l=function(r){var o=i.value.lastIndexOf("."),h=0;if(o>0){for(var u=i.value.toLowerCase().substring(o+1),d=0;d<t.length;d++)if(u==t[d].extension){h=d;break}}e.value=h};return mxEvent$1.addListener(i,"change",l),mxEvent$1.addListener(i,"keyup",l),l(),e};(function(){mxGraphView.prototype.validateBackgroundPage=function(){var l=this.graph;if(l.container!=null&&!l.transparentBackground){if(l.pageVisible){var r=this.getBackgroundPageBounds();if(this.backgroundPageShape==null){for(var o=l.container.firstChild;o!=null&&o.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)o=o.nextSibling;o!=null&&(this.backgroundPageShape=this.createBackgroundPageShape(r),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!mxClient.IS_QUIRKS,this.backgroundPageShape.dialect=mxConstants$1.DIALECT_STRICTHTML,this.backgroundPageShape.init(l.container),o.style.position="absolute",l.container.insertBefore(this.backgroundPageShape.node,o),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent$1.addListener(this.backgroundPageShape.node,"dblclick",mxUtils$1.bind(this,function(h){l.dblClick(h)})),mxEvent$1.addGestureListeners(this.backgroundPageShape.node,mxUtils$1.bind(this,function(h){l.fireMouseEvent(mxEvent$1.MOUSE_DOWN,new mxMouseEvent(h))}),mxUtils$1.bind(this,function(h){l.tooltipHandler!=null&&l.tooltipHandler.isHideOnHover()&&l.tooltipHandler.hide(),l.isMouseDown&&!mxEvent$1.isConsumed(h)&&l.fireMouseEvent(mxEvent$1.MOUSE_MOVE,new mxMouseEvent(h))}),mxUtils$1.bind(this,function(h){l.fireMouseEvent(mxEvent$1.MOUSE_UP,new mxMouseEvent(h))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=r,this.backgroundPageShape.redraw()}else this.backgroundPageShape!=null&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var l=this.graph,r=l.background==null||l.background==mxConstants$1.NONE?l.defaultPageBackgroundColor:l.background,o=r!=null&&this.gridColor!=r.toLowerCase()?this.gridColor:"#ffffff",h="none",u="";if(l.isGridEnabled()){var d=10;mxClient.IS_SVG?(h=unescape(encodeURIComponent(this.createSvgGrid(o))),h=window.btoa?btoa(h):Base64.encode(h,!0),h="url(data:image/svg+xml;base64,"+h+")",d=l.gridSize*this.scale*this.gridSteps):h="url("+this.gridImage+")";var m=0,g=0;if(l.view.backgroundPageShape!=null){var x=this.getBackgroundPageBounds();m=1+x.x,g=1+x.y}u=-Math.round(d-mxUtils$1.mod(this.translate.x*this.scale-m,d))+"px "+-Math.round(d-mxUtils$1.mod(this.translate.y*this.scale-g,d))+"px"}var v=l.view.canvas;v.ownerSVGElement!=null&&(v=v.ownerSVGElement),l.view.backgroundPageShape!=null?(l.view.backgroundPageShape.node.style.backgroundPosition=u,l.view.backgroundPageShape.node.style.backgroundImage=h,l.view.backgroundPageShape.node.style.backgroundColor=r,l.container.className="geDiagramContainer geDiagramBackdrop",v.style.backgroundImage="none",v.style.backgroundColor=""):(l.container.className="geDiagramContainer",v.style.backgroundPosition=u,v.style.backgroundColor=r,v.style.backgroundImage=h)},mxGraphView.prototype.createSvgGrid=function(l){for(var r=this.graph.gridSize*this.scale;r<this.minGridSize;)r*=2;for(var o=this.gridSteps*r,h=[],u=1;u<this.gridSteps;u++){var d=u*r;h.push("M 0 "+d+" L "+o+" "+d+" M "+d+" 0 L "+d+" "+o)}var m=o,g='<svg width="'+m+'" height="'+m+'" xmlns="'+mxConstants$1.NS_SVG+'"><defs><pattern id="grid" width="'+o+'" height="'+o+'" patternUnits="userSpaceOnUse"><path d="'+h.join(" ")+'" fill="none" stroke="'+l+'" opacity="0.2" stroke-width="1"/><path d="M '+o+" 0 L 0 0 0 "+o+'" fill="none" stroke="'+l+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>';return g};var a=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(l,r){if(a.apply(this,arguments),this.shiftPreview1!=null){var o=this.view.canvas;o.ownerSVGElement!=null&&(o=o.ownerSVGElement);var h=this.gridSize*this.view.scale*this.view.gridSteps,u=-Math.round(h-mxUtils$1.mod(this.view.translate.x*this.view.scale+l,h))+"px "+-Math.round(h-mxUtils$1.mod(this.view.translate.y*this.view.scale+r,h))+"px";o.style.backgroundPosition=u}},mxGraph.prototype.updatePageBreaks=function(l,r,o){var h=this.view.scale,u=this.view.translate,d=this.pageFormat,m=h*this.pageScale,g=this.view.getBackgroundPageBounds();r=g.width,o=g.height;var x=new mxRectangle(h*u.x,h*u.y,d.width*m,d.height*m);l=l&&Math.min(x.width,x.height)>this.minPageBreakDist;var v=l?Math.ceil(o/x.height)-1:0,C=l?Math.ceil(r/x.width)-1:0,E=g.x+r,b=g.y+o;this.horizontalPageBreaks==null&&v>0&&(this.horizontalPageBreaks=[]),this.verticalPageBreaks==null&&C>0&&(this.verticalPageBreaks=[]);var w=mxUtils$1.bind(this,function($){if($!=null){for(var P=$==this.horizontalPageBreaks?v:C,M=0;M<=P;M++){var D=$==this.horizontalPageBreaks?[new mxPoint(Math.round(g.x),Math.round(g.y+(M+1)*x.height)),new mxPoint(Math.round(E),Math.round(g.y+(M+1)*x.height))]:[new mxPoint(Math.round(g.x+(M+1)*x.width),Math.round(g.y)),new mxPoint(Math.round(g.x+(M+1)*x.width),Math.round(b))];if($[M]!=null)$[M].points=D,$[M].redraw();else{var k=new mxPolyline(D,this.pageBreakColor);k.dialect=this.dialect,k.isDashed=this.pageBreakDashed,k.pointerEvents=!1,k.init(this.view.backgroundPane),k.redraw(),$[M]=k}}for(var M=P;M<$.length;M++)$[M].destroy();$.splice(P,$.length-P)}});w(this.horizontalPageBreaks),w(this.verticalPageBreaks)};var i=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(l,r,o){for(var h=0;h<r.length;h++){if(this.graph.isTableCell(r[h])||this.graph.isTableRow(r[h]))return!1;if(this.graph.getModel().isVertex(r[h])){var u=this.graph.getCellGeometry(r[h]);if(u!=null&&u.relative)return!1}}return i.apply(this,arguments)};var t=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var l=t.apply(this,arguments);return l.intersects=mxUtils$1.bind(this,function(r,o){return this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(l,arguments)}),l},mxGraphView.prototype.createBackgroundPageShape=function(l){return new mxRectangleShape(l,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var l=this.getGraphBounds(),r=l.width>0?l.x/this.scale-this.translate.x:0,o=l.height>0?l.y/this.scale-this.translate.y:0,h=l.width/this.scale,u=l.height/this.scale,d=this.graph.pageFormat,m=this.graph.pageScale,g=d.width*m,x=d.height*m,v=Math.floor(Math.min(0,r)/g),C=Math.floor(Math.min(0,o)/x),E=Math.ceil(Math.max(1,r+h)/g),b=Math.ceil(Math.max(1,o+u)/x),w=E-v,$=b-C,P=new mxRectangle(this.scale*(this.translate.x+v*g),this.scale*(this.translate.y+C*x),this.scale*w*g,this.scale*$*x);return P};var e=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(l,r){e.apply(this,arguments),this.dialect!=mxConstants$1.DIALECT_SVG&&this.view.backgroundPageShape!=null&&(!this.useScrollbarsForPanning||!mxUtils$1.hasScrollbars(this.container))&&(this.view.backgroundPageShape.node.style.marginLeft=l+"px",this.view.backgroundPageShape.node.style.marginTop=r+"px")};var n=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(l,r,o,h,u,d){var m=n.apply(this,arguments);return d!=null&&!d&&mxEvent$1.addListener(m,"mousedown",function(g){mxEvent$1.consume(g)}),m};var s=mxGraphHandler.prototype.isPropagateSelectionCell;mxGraphHandler.prototype.isPropagateSelectionCell=function(l,r,o){var h=!1,u=this.graph.model.getParent(l);if(r){var d=this.graph.model.isEdge(l)?null:this.graph.getCellGeometry(l);h=!this.graph.model.isEdge(u)&&!this.graph.isSiblingSelected(l)&&(d!=null&&d.relative||!this.graph.isContainer(u)||this.graph.isPart(l))}else if(h=s.apply(this,arguments),this.graph.isTableCell(l)||this.graph.isTableRow(l)){var m=u;this.graph.isTable(m)||(m=this.graph.model.getParent(m)),h=!this.graph.selectionCellsHandler.isHandled(m)||this.graph.isCellSelected(m)&&this.graph.isToggleEvent(o.getEvent())||this.graph.isCellSelected(l)&&!this.graph.isToggleEvent(o.getEvent())||this.graph.isTableCell(l)&&this.graph.isCellSelected(u)}return h},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(l){for(var r=l.getCell(),o=this.graph.getModel(),h=o.getParent(r),u=this.graph.view.getState(h),d=this.graph.isCellSelected(r);u!=null&&(o.isVertex(h)||o.isEdge(h));){var m=this.graph.isCellSelected(h);d=d||m,(m||!d&&(this.graph.isTableCell(r)||this.graph.isTableRow(r)))&&(r=h),h=o.getParent(h)}return r}})();function Format(a,i){this.editorUi=a,this.container=i}Format.prototype.labelIndex=0;Format.prototype.diagramIndex=0;Format.prototype.currentIndex=0;Format.prototype.showCloseButton=!0;Format.prototype.inactiveTabBackgroundColor="#f1f3f4";Format.prototype.roundableShapes=["label","rectangle","internalStorage","corner","parallelogram","swimlane","triangle","trapezoid","ext","step","tee","process","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","card","curlyBracket","singleArrow","callout","doubleArrow","flexArrow","umlLifeline"];Format.prototype.init=function(){var a=this.editorUi,i=a.editor,t=i.graph;this.update=mxUtils$1.bind(this,function(e,n){this.clearSelectionState(),this.refresh()}),t.getSelectionModel().addListener(mxEvent$1.CHANGE,this.update),t.addListener(mxEvent$1.EDITING_STARTED,this.update),t.addListener(mxEvent$1.EDITING_STOPPED,this.update),t.getModel().addListener(mxEvent$1.CHANGE,this.update),t.addListener(mxEvent$1.ROOT,mxUtils$1.bind(this,function(){this.refresh()})),a.addListener("styleChanged",mxUtils$1.bind(this,function(e,n){this.refresh()})),i.addListener("autosaveChanged",mxUtils$1.bind(this,function(){this.refresh()})),this.refresh()};Format.prototype.clearSelectionState=function(){this.selectionState=null};Format.prototype.getSelectionState=function(){return this.selectionState==null&&(this.selectionState=this.createSelectionState()),this.selectionState};Format.prototype.createSelectionState=function(){for(var a=this.editorUi.editor.graph.getSelectionCells(),i=this.initSelectionState(),t=0;t<a.length;t++)this.updateSelectionStateForCell(i,a[t],a);return i};Format.prototype.initSelectionState=function(){return{vertices:[],edges:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,rounded:!0,autoSize:!1,image:!0,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0}};Format.prototype.updateSelectionStateForCell=function(a,i,t){var e=this.editorUi.editor.graph;if(e.getModel().isVertex(i)){a.resizable=a.resizable&&e.isCellResizable(i),a.rotatable=a.rotatable&&e.isCellRotatable(i),a.movable=a.movable&&e.isCellMovable(i)&&!e.isTableRow(i)&&!e.isTableCell(i),a.table=a.table||e.isTable(i),a.cell=a.cell||e.isTableCell(i),a.row=a.row||e.isTableRow(i),a.vertices.push(i);var n=e.getCellGeometry(i);if(n!=null&&(n.width>0?a.width==null?a.width=n.width:a.width!=n.width&&(a.width=""):a.containsLabel=!0,n.height>0?a.height==null?a.height=n.height:a.height!=n.height&&(a.height=""):a.containsLabel=!0,!n.relative||n.offset!=null)){var s=n.relative?n.offset.x:n.x,l=n.relative?n.offset.y:n.y;a.x==null?a.x=s:a.x!=s&&(a.x=""),a.y==null?a.y=l:a.y!=l&&(a.y="")}}else e.getModel().isEdge(i)&&(a.edges.push(i),a.resizable=!1,a.rotatable=!1,a.movable=!1);var r=e.view.getState(i);if(r!=null){a.autoSize=a.autoSize||this.isAutoSizeState(r),a.glass=a.glass&&this.isGlassState(r),a.rounded=a.rounded&&this.isRoundedState(r),a.lineJumps=a.lineJumps&&this.isLineJumpState(r),a.image=a.image&&this.isImageState(r),a.shadow=a.shadow&&this.isShadowState(r),a.fill=a.fill&&this.isFillState(r),a.stroke=a.stroke&&this.isStrokeState(r);var o=mxUtils$1.getValue(r.style,mxConstants$1.STYLE_SHAPE,null);a.containsImage=a.containsImage||o=="image";for(var h in r.style){var u=r.style[h];u!=null&&(a.style[h]==null?a.style[h]=u:a.style[h]!=u&&(a.style[h]=""))}}};Format.prototype.isFillState=function(a){return!this.isSpecialColor(a.style[mxConstants$1.STYLE_FILLCOLOR])&&(a.view.graph.model.isVertex(a.cell)||mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null)=="arrow"||mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null)=="filledEdge"||mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null)=="flexArrow")};Format.prototype.isStrokeState=function(a){return!this.isSpecialColor(a.style[mxConstants$1.STYLE_STROKECOLOR])};Format.prototype.isSpecialColor=function(a){return mxUtils$1.indexOf([mxConstants$1.STYLE_STROKECOLOR,mxConstants$1.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],a)>=0};Format.prototype.isGlassState=function(a){var i=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null);return i=="label"||i=="rectangle"||i=="internalStorage"||i=="ext"||i=="umlLifeline"||i=="swimlane"||i=="process"};Format.prototype.isRoundedState=function(a){return a.shape!=null?a.shape.isRoundable():mxUtils$1.indexOf(this.roundableShapes,mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null))>=0};Format.prototype.isLineJumpState=function(a){var i=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null),t=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_CURVED,!1);return!t&&(i=="connector"||i=="filledEdge")};Format.prototype.isAutoSizeState=function(a){return mxUtils$1.getValue(a.style,mxConstants$1.STYLE_AUTOSIZE,null)=="1"};Format.prototype.isImageState=function(a){var i=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null);return i=="label"||i=="image"};Format.prototype.isShadowState=function(a){var i=mxUtils$1.getValue(a.style,mxConstants$1.STYLE_SHAPE,null);return i!="image"};Format.prototype.clear=function(){if(this.container.innerHTML="",this.panels!=null)for(var a=0;a<this.panels.length;a++)this.panels[a].destroy();this.panels=[]};Format.prototype.refresh=function(){if(this.container.style.width!="0px"){this.clear();var a=this.editorUi,i=a.editor.graph,t=document.createElement("div");t.style.whiteSpace="nowrap",t.style.color="rgb(112, 112, 112)",t.style.textAlign="left",t.style.cursor="default";var e=document.createElement("div");e.className="geFormatSection",e.style.textAlign="center",e.style.fontWeight="bold",e.style.paddingTop="8px",e.style.fontSize="13px",e.style.borderWidth="0px 0px 1px 1px",e.style.borderStyle="solid",e.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",e.style.height=mxClient.IS_QUIRKS?"34px":"25px",e.style.overflow="hidden",e.style.width="100%",this.container.appendChild(t),mxEvent$1.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(C){C.preventDefault()}));var n=this.getSelectionState().containsLabel,s=null,l=null,r=mxUtils$1.bind(this,function(C,E,b){var w=mxUtils$1.bind(this,function($){s!=C&&(n?this.labelIndex=b:i.isSelectionEmpty()?this.diagramIndex=b:this.currentIndex=b,s!=null&&(s.style.backgroundColor=this.inactiveTabBackgroundColor,s.style.borderBottomWidth="1px"),s=C,s.style.backgroundColor="",s.style.borderBottomWidth="0px",l!=E&&(l!=null&&(l.style.display="none"),l=E,l.style.display=""))});mxEvent$1.addListener(C,"click",w),mxEvent$1.addListener(C,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function($){$.preventDefault()})),b==(n?this.labelIndex:i.isSelectionEmpty()?this.diagramIndex:this.currentIndex)&&w()}),o=0;if(i.isSelectionEmpty()){mxUtils$1.write(e,mxResources$1.get("diagram")),e.style.borderLeftWidth="0px",t.appendChild(e);var h=t.cloneNode(!1);if(this.panels.push(new DiagramFormatPanel(this,a,h)),this.container.appendChild(h),Editor$1.styles!=null){h.style.display="none",e.style.width=this.showCloseButton?"106px":"50%",e.style.cursor="pointer",e.style.backgroundColor=this.inactiveTabBackgroundColor;var u=e.cloneNode(!1);u.style.borderLeftWidth="1px",u.style.borderRightWidth="1px",u.style.backgroundColor=this.inactiveTabBackgroundColor,r(e,h,o++);var d=t.cloneNode(!1);d.style.display="none",mxUtils$1.write(u,mxResources$1.get("style")),t.appendChild(u),this.panels.push(new DiagramStylePanel(this,a,d)),this.container.appendChild(d),r(u,d,o++)}if(this.showCloseButton){var u=e.cloneNode(!1);u.style.borderLeftWidth="1px",u.style.borderRightWidth="1px",u.style.borderBottomWidth="1px",u.style.backgroundColor=this.inactiveTabBackgroundColor,u.style.position="absolute",u.style.right="0px",u.style.top="0px",u.style.width="25px";var m=document.createElement("img");m.setAttribute("border","0"),m.setAttribute("src",Dialog$1.prototype.closeImage),m.setAttribute("title",mxResources$1.get("hide")),m.style.position="absolute",m.style.display="block",m.style.right="0px",m.style.top="8px",m.style.cursor="pointer",m.style.marginTop="1px",m.style.marginRight="6px",m.style.border="1px solid transparent",m.style.padding="1px",m.style.opacity=.5,u.appendChild(m),mxEvent$1.addListener(m,"click",function(){a.actions.get("formatPanel").funct()}),t.appendChild(u)}}else if(i.isEditing())mxUtils$1.write(e,mxResources$1.get("text")),t.appendChild(e),this.panels.push(new TextFormatPanel(this,a,t));else{e.style.backgroundColor=this.inactiveTabBackgroundColor,e.style.borderLeftWidth="1px",e.style.cursor="pointer",e.style.width=n?"50%":"33.3%";var u=e.cloneNode(!1),g=u.cloneNode(!1);if(u.style.backgroundColor=this.inactiveTabBackgroundColor,g.style.backgroundColor=this.inactiveTabBackgroundColor,n)u.style.borderLeftWidth="0px";else{e.style.borderLeftWidth="0px",mxUtils$1.write(e,mxResources$1.get("style")),t.appendChild(e);var d=t.cloneNode(!1);d.style.display="none",this.panels.push(new StyleFormatPanel$1(this,a,d)),this.container.appendChild(d),r(e,d,o++)}mxUtils$1.write(u,mxResources$1.get("text")),t.appendChild(u);var x=t.cloneNode(!1);x.style.display="none",this.panels.push(new TextFormatPanel(this,a,x)),this.container.appendChild(x),mxUtils$1.write(g,mxResources$1.get("arrange")),t.appendChild(g);var v=t.cloneNode(!1);v.style.display="none",this.panels.push(new ArrangePanel(this,a,v)),this.container.appendChild(v),r(u,x,o++),r(g,v,o++)}}};class BaseFormatPanel{constructor(i,t,e){this.format=i,this.editorUi=t,this.container=e,this.listeners=[]}}BaseFormatPanel.prototype.buttonBackgroundColor="white";BaseFormatPanel.prototype.getSelectionState=function(){for(var a=this.editorUi.editor.graph,i=a.getSelectionCells(),t=null,e=0;e<i.length;e++){var n=a.view.getState(i[e]);if(n!=null){var s=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SHAPE,null);if(s!=null){if(t==null)t=s;else if(t!=s)return null}}}return t};BaseFormatPanel.prototype.installInputHandler=function(a,i,t,e,n,s,l,r){s=s??"",r=r??!1;var o=this.editorUi,h=o.editor.graph;e=e??1,n=n??999;var u=null,d=!1,m=mxUtils$1.bind(this,function(g){var x=r?parseFloat(a.value):parseInt(a.value);if(!isNaN(x)&&i==mxConstants$1.STYLE_ROTATION&&(x=mxUtils$1.mod(Math.round(x*100),36e3)/100),x=Math.min(n,Math.max(e,isNaN(x)?t:x)),h.cellEditor.isContentEditing()&&l)d||(d=!0,u!=null&&(h.cellEditor.restoreSelection(u),u=null),l(x),a.value=x+s,d=!1);else if(x!=mxUtils$1.getValue(this.format.getSelectionState().style,i,t)){h.isEditing()&&h.stopEditing(!0),h.getModel().beginUpdate();try{var v=h.getSelectionCells();h.setCellStyles(i,x,v),i==mxConstants$1.STYLE_FONTSIZE&&h.updateLabelElements(h.getSelectionCells(),function(E){E.style.fontSize=x+"px",E.removeAttribute("size")});for(var C=0;C<v.length;C++)h.model.getChildCount(v[C])==0&&h.autoSizeCell(v[C],!1);o.fireEvent(new mxEventObject$1("styleChanged","keys",[i],"values",[x],"cells",v))}finally{h.getModel().endUpdate()}}a.value=x+s,mxEvent$1.consume(g)});return l&&h.cellEditor.isContentEditing()&&(mxEvent$1.addListener(a,"mousedown",function(){document.activeElement==h.cellEditor.textarea&&(u=h.cellEditor.saveSelection())}),mxEvent$1.addListener(a,"touchstart",function(){document.activeElement==h.cellEditor.textarea&&(u=h.cellEditor.saveSelection())})),mxEvent$1.addListener(a,"change",m),mxEvent$1.addListener(a,"blur",m),m};BaseFormatPanel.prototype.createPanel=function(){var a=document.createElement("div");return a.className="geFormatSection",a.style.padding="12px 0px 12px 18px",a};BaseFormatPanel.prototype.createTitle=function(a){var i=document.createElement("div");return i.style.padding="0px 0px 6px 0px",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.width="200px",i.style.fontWeight="bold",mxUtils$1.write(i,a),i};BaseFormatPanel.prototype.createStepper=function(a,i,t,e,n,s,l){t=t??1,e=e??8,mxClient.IS_QUIRKS?e=e-2:(mxClient.IS_MT||document.documentMode>=8)&&(e=e+1);var r=document.createElement("div");mxUtils$1.setPrefixedStyle(r.style,"borderRadius","3px"),r.style.border="1px solid rgb(192, 192, 192)",r.style.position="absolute";var o=document.createElement("div");o.style.borderBottom="1px solid rgb(192, 192, 192)",o.style.position="relative",o.style.height=e+"px",o.style.width="10px",o.className="geBtnUp",r.appendChild(o);var h=o.cloneNode(!1);if(h.style.border="none",h.style.height=e+"px",h.className="geBtnDown",r.appendChild(h),mxEvent$1.addListener(h,"click",function(d){a.value==""&&(a.value=s||"2");var m=l?parseFloat(a.value):parseInt(a.value);isNaN(m)||(a.value=m-t,i!=null&&i(d)),mxEvent$1.consume(d)}),mxEvent$1.addListener(o,"click",function(d){a.value==""&&(a.value=s||"0");var m=l?parseFloat(a.value):parseInt(a.value);isNaN(m)||(a.value=m+t,i!=null&&i(d)),mxEvent$1.consume(d)}),n){var u=null;mxEvent$1.addGestureListeners(r,function(d){(mxClient.IS_QUIRKS||document.documentMode==8)&&(u=document.selection.createRange()),mxEvent$1.consume(d)},null,function(d){if(u!=null){try{u.select()}catch{}u=null,mxEvent$1.consume(d)}})}return r};BaseFormatPanel.prototype.createOption=function(a,i,t,e,n){var s=document.createElement("div");s.style.padding="6px 0px 1px 0px",s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.width="200px",s.style.height=mxClient.IS_QUIRKS?"27px":"18px";var l=document.createElement("input");l.setAttribute("type","checkbox"),l.style.margin="0px 6px 0px 0px",s.appendChild(l);var r=document.createElement("span");mxUtils$1.write(r,a),s.appendChild(r);var o=!1,h=i(),u=function(d){o||(o=!0,d?(l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0):(l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1),h!=d&&(h=d,i()!=h&&t(h)),o=!1)};return mxEvent$1.addListener(s,"click",function(d){if(l.getAttribute("disabled")!="disabled"){var m=mxEvent$1.getSource(d);(m==s||m==r)&&(l.checked=!l.checked),u(l.checked)}}),u(h),e!=null&&(e.install(u),this.listeners.push(e)),n!=null&&n(s),s};BaseFormatPanel.prototype.createCellOption=function(a,i,t,e,n,s,l,r){e=e!=null?e=="null"?null:e:"1",n=n!=null?n=="null"?null:n:"0";var o=this.editorUi,h=o.editor,u=h.graph;return this.createOption(a,function(){var d=u.view.getState(u.getSelectionCell());return d!=null?mxUtils$1.getValue(d.style,i,t)!=n:null},function(d){if(r&&u.stopEditing(),l!=null)l.funct();else{u.getModel().beginUpdate();try{var m=d?e:n;u.setCellStyles(i,m,u.getSelectionCells()),s!=null&&s(u.getSelectionCells(),m),o.fireEvent(new mxEventObject$1("styleChanged","keys",[i],"values",[m],"cells",u.getSelectionCells()))}finally{u.getModel().endUpdate()}}},{install:function(d){this.listener=function(){var m=u.view.getState(u.getSelectionCell());m!=null&&d(mxUtils$1.getValue(m.style,i,t)!=n)},u.getModel().addListener(mxEvent$1.CHANGE,this.listener)},destroy:function(){u.getModel().removeListener(this.listener)}})};BaseFormatPanel.prototype.createColorOption=function(a,i,t,e,n,s,l){var r=document.createElement("div");r.style.padding="6px 0px 1px 0px",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.width="200px",r.style.height=mxClient.IS_QUIRKS?"27px":"18px";var o=document.createElement("input");o.setAttribute("type","checkbox"),o.style.margin="0px 6px 0px 0px",l||r.appendChild(o);var h=document.createElement("span");mxUtils$1.write(h,a),r.appendChild(h);var u=i(),d=!1,m=null,g=function(x,v,C){d||(d=!0,x=/(^#?[a-zA-Z0-9]*$)/.test(x)?x:e,m.innerHTML='<div style="width:'+(mxClient.IS_QUIRKS?"30":"36")+"px;height:12px;margin:3px;border:1px solid black;background-color:"+mxUtils$1.htmlEntities(x!=null&&x!=mxConstants$1.NONE?x:e)+';"></div>',(mxClient.IS_QUIRKS||document.documentMode==8)&&(m.firstChild.style.margin="0px"),x!=null&&x!=mxConstants$1.NONE?(o.setAttribute("checked","checked"),o.defaultChecked=!0,o.checked=!0):(o.removeAttribute("checked"),o.defaultChecked=!1,o.checked=!1),m.style.display=o.checked||l?"":"none",s!=null&&s(x),v||(u=x,(C||l||i()!=u)&&t(u)),d=!1)};return m=mxUtils$1.button("",mxUtils$1.bind(this,function(x){this.editorUi.pickColor(u,function(v){g(v,null,!0)}),mxEvent$1.consume(x)})),m.style.position="absolute",m.style.marginTop="-4px",m.style.right=mxClient.IS_QUIRKS?"0px":"20px",m.style.height="22px",m.className="geColorBtn",m.style.display=o.checked||l?"":"none",r.appendChild(m),mxEvent$1.addListener(r,"click",function(x){var v=mxEvent$1.getSource(x);(v==o||v.nodeName!="INPUT")&&(v!=o&&(o.checked=!o.checked),!o.checked&&u!=null&&u!=mxConstants$1.NONE&&e!=mxConstants$1.NONE&&(e=u),g(o.checked?e:mxConstants$1.NONE))}),g(u,!0),n!=null&&(n.install(g),this.listeners.push(n)),r};BaseFormatPanel.prototype.createCellColorOption=function(a,i,t,e,n){var s=this.editorUi,l=s.editor,r=l.graph;return this.createColorOption(a,function(){var o=r.view.getState(r.getSelectionCell());return o!=null?mxUtils$1.getValue(o.style,i,null):null},function(o){r.getModel().beginUpdate();try{r.setCellStyles(i,o,r.getSelectionCells()),n!=null&&n(o),s.fireEvent(new mxEventObject$1("styleChanged","keys",[i],"values",[o],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}},t||mxConstants$1.NONE,{install:function(o){this.listener=function(){var h=r.view.getState(r.getSelectionCell());h!=null&&o(mxUtils$1.getValue(h.style,i,null))},r.getModel().addListener(mxEvent$1.CHANGE,this.listener)},destroy:function(){r.getModel().removeListener(this.listener)}},e)};BaseFormatPanel.prototype.addArrow=function(a,i){i=i??10;var t=document.createElement("div");t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",t.style.padding="6px",t.style.paddingRight="4px";var e=10-i;e==2?t.style.paddingTop="6px":e>0?t.style.paddingTop=6-e+"px":t.style.marginTop="-2px",t.style.height=i+"px",t.style.borderLeft="1px solid #a0a0a0",t.innerHTML='<img border="0" src="'+(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUeNpidHB2ZyAGsACxDRBPIKCuA6TwCBB/h2rABu4A8SYmKCcXiP/iUFgAxL9gCi8A8SwsirZCMQMTkmANEH9E4v+CmsaArvAdyNFI/FlQ92EoBIE+qCRIUz168DBgsU4OqhinQpgHMABAgAEALY4XLIsJ20oAAAAASUVORK5CYII=":IMAGE_PATH+"/dropdown.png")+'" style="margin-bottom:4px;">',mxUtils$1.setOpacity(t,70);var n=a.getElementsByTagName("div")[0];return n!=null&&(n.style.paddingRight="6px",n.style.marginLeft="4px",n.style.marginTop="-1px",n.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",mxUtils$1.setOpacity(n,60)),mxUtils$1.setOpacity(a,100),a.style.border="1px solid #a0a0a0",a.style.backgroundColor=this.buttonBackgroundColor,a.style.backgroundImage="none",a.style.width="auto",a.className+=" geColorBtn",mxUtils$1.setPrefixedStyle(a.style,"borderRadius","3px"),a.appendChild(t),n};BaseFormatPanel.prototype.addUnitInput=function(a,i,t,e,n,s,l,r,o){l=l??0;var h=document.createElement("input");h.style.position="absolute",h.style.textAlign="right",h.style.marginTop="-2px",h.style.right=t+12+"px",h.style.width=e+"px",a.appendChild(h);var u=this.createStepper(h,n,s,null,r,null,o);return u.style.marginTop=l-2+"px",u.style.right=t+"px",a.appendChild(u),h};BaseFormatPanel.prototype.createRelativeOption=function(a,i,t,e,n){t=t??44;var s=this.editorUi.editor.graph,l=this.createPanel();l.style.paddingTop="10px",l.style.paddingBottom="10px",mxUtils$1.write(l,a),l.style.fontWeight="bold";var r=mxUtils$1.bind(this,function(u){if(e!=null)e(o);else{var d=parseInt(o.value);d=Math.min(100,Math.max(0,isNaN(d)?100:d));var m=s.view.getState(s.getSelectionCell());m!=null&&d!=mxUtils$1.getValue(m.style,i,100)&&(d==100&&(d=null),s.setCellStyles(i,d,s.getSelectionCells()),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[i],"values",[d],"cells",s.getSelectionCells()))),o.value=(d??"100")+" %"}mxEvent$1.consume(u)}),o=this.addUnitInput(l,"%",20,t,r,10,-15,e!=null);if(i!=null){var h=mxUtils$1.bind(this,function(u,d,m){if(m||o!=document.activeElement){var g=this.format.getSelectionState(),x=parseInt(mxUtils$1.getValue(g.style,i,100));o.value=isNaN(x)?"":x+" %"}});mxEvent$1.addListener(o,"keydown",function(u){u.keyCode==13?(s.container.focus(),mxEvent$1.consume(u)):u.keyCode==27&&(h(null,null,!0),s.container.focus(),mxEvent$1.consume(u))}),s.getModel().addListener(mxEvent$1.CHANGE,h),this.listeners.push({destroy:function(){s.getModel().removeListener(h)}}),h()}return mxEvent$1.addListener(o,"blur",r),mxEvent$1.addListener(o,"change",r),n!=null&&n(o),l};BaseFormatPanel.prototype.addLabel=function(a,i,t,e){e=e??61;var n=document.createElement("div");mxUtils$1.write(n,i),n.style.position="absolute",n.style.right=t+"px",n.style.width=e+"px",n.style.marginTop="6px",n.style.textAlign="center",a.appendChild(n)};BaseFormatPanel.prototype.addKeyHandler=function(a,i){mxEvent$1.addListener(a,"keydown",mxUtils$1.bind(this,function(t){t.keyCode==13?(this.editorUi.editor.graph.container.focus(),mxEvent$1.consume(t)):t.keyCode==27&&(i!=null&&i(null,null,!0),this.editorUi.editor.graph.container.focus(),mxEvent$1.consume(t))}))};BaseFormatPanel.prototype.styleButtons=function(a){for(var i=0;i<a.length;i++)mxUtils$1.setPrefixedStyle(a[i].style,"borderRadius","3px"),mxUtils$1.setOpacity(a[i],100),a[i].style.border="1px solid #a0a0a0",a[i].style.padding="4px",a[i].style.paddingTop="3px",a[i].style.paddingRight="1px",a[i].style.margin="1px",a[i].style.width="24px",a[i].style.height="20px",a[i].className+=" geColorBtn"};BaseFormatPanel.prototype.destroy=function(){if(this.listeners!=null){for(var a=0;a<this.listeners.length;a++)this.listeners[a].destroy();this.listeners=null}};class ArrangePanel extends BaseFormatPanel{constructor(i,t,e){super(i,t,e),this.init()}}ArrangePanel.prototype.init=function(){var a=this.editorUi.editor.graph,i=this.format.getSelectionState();if(this.container.appendChild(this.addLayerOps(this.createPanel())),this.addGeometry(this.container),this.addEdgeGeometry(this.container),(!i.containsLabel||i.edges.length==0)&&this.container.appendChild(this.addAngle(this.createPanel())),!i.containsLabel&&i.edges.length==0&&i.style.shape!="rectangle"&&i.style.shape!="label"&&this.container.appendChild(this.addFlip(this.createPanel())),i.vertices.length>1&&(this.container.appendChild(this.addAlign(this.createPanel())),this.container.appendChild(this.addDistribute(this.createPanel()))),(a.isTable(i.vertices[0])||a.isTableRow(i.vertices[0])||a.isTableCell(i.vertices[0]))&&this.container.appendChild(this.addTable(this.createPanel())),this.container.appendChild(this.addGroupOps(this.createPanel())),i.containsLabel){var t=document.createElement("div");t.style.width="100%",t.style.marginTop="0px",t.style.fontWeight="bold",t.style.padding="10px 0 0 18px",mxUtils$1.write(t,mxResources$1.get("style")),this.container.appendChild(t),new StyleFormatPanel$1(this.format,this.editorUi,this.container)}};ArrangePanel.prototype.addTable=function(a){var i=this.editorUi,t=i.editor,e=t.graph,n=this.format.getSelectionState();a.style.paddingTop="6px",a.style.paddingBottom="10px";var s=document.createElement("div");s.style.marginTop="2px",s.style.marginBottom="8px",s.style.fontWeight="bold",mxUtils$1.write(s,mxResources$1.get("table")),a.appendChild(s);var l=document.createElement("div");l.style.position="relative",l.style.paddingLeft="0px",l.style.borderWidth="0px",l.className="geToolbarContainer";var r=[i.toolbar.addButton("geSprite-insertcolumnbefore",mxResources$1.get("insertColumnBefore"),mxUtils$1.bind(this,function(){try{e.insertTableColumn(n.vertices[0],!0)}catch(o){i.handleError(o)}}),l),i.toolbar.addButton("geSprite-insertcolumnafter",mxResources$1.get("insertColumnAfter"),mxUtils$1.bind(this,function(){try{e.insertTableColumn(n.vertices[0],!1)}catch(o){i.handleError(o)}}),l),i.toolbar.addButton("geSprite-deletecolumn",mxResources$1.get("deleteColumn"),mxUtils$1.bind(this,function(){try{e.deleteTableColumn(n.vertices[0])}catch(o){i.handleError(o)}}),l),i.toolbar.addButton("geSprite-insertrowbefore",mxResources$1.get("insertRowBefore"),mxUtils$1.bind(this,function(){try{e.insertTableRow(n.vertices[0],!0)}catch(o){i.handleError(o)}}),l),i.toolbar.addButton("geSprite-insertrowafter",mxResources$1.get("insertRowAfter"),mxUtils$1.bind(this,function(){try{e.insertTableRow(n.vertices[0],!1)}catch(o){i.handleError(o)}}),l),i.toolbar.addButton("geSprite-deleterow",mxResources$1.get("deleteRow"),mxUtils$1.bind(this,function(){try{e.deleteTableRow(n.vertices[0])}catch(o){i.handleError(o)}}),l)];return this.styleButtons(r),a.appendChild(l),r[2].style.marginRight="9px",a};ArrangePanel.prototype.addLayerOps=function(a){var i=this.editorUi,t=mxUtils$1.button(mxResources$1.get("toFront"),function(e){i.actions.get("toFront").funct()});t.setAttribute("title",mxResources$1.get("toFront")+" ("+this.editorUi.actions.get("toFront").shortcut+")"),t.style.width="100px",t.style.marginRight="2px",a.appendChild(t);var t=mxUtils$1.button(mxResources$1.get("toBack"),function(e){i.actions.get("toBack").funct()});return t.setAttribute("title",mxResources$1.get("toBack")+" ("+this.editorUi.actions.get("toBack").shortcut+")"),t.style.width="100px",a.appendChild(t),a};ArrangePanel.prototype.addGroupOps=function(a){var i=this.editorUi,t=i.editor.graph,e=t.getSelectionCell(),n=this.format.getSelectionState(),s=0,l=null;if(a.style.paddingTop="8px",a.style.paddingBottom="6px",t.getSelectionCount()>1?(l=mxUtils$1.button(mxResources$1.get("group"),function(o){i.actions.get("group").funct()}),l.setAttribute("title",mxResources$1.get("group")+" ("+this.editorUi.actions.get("group").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",a.appendChild(l),s++):t.getSelectionCount()==1&&!t.getModel().isEdge(e)&&!t.isSwimlane(e)&&!t.isTable(e)&&!n.row&&!n.cell&&t.getModel().getChildCount(e)>0&&(l=mxUtils$1.button(mxResources$1.get("ungroup"),function(o){i.actions.get("ungroup").funct()}),l.setAttribute("title",mxResources$1.get("ungroup")+" ("+this.editorUi.actions.get("ungroup").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",a.appendChild(l),s++),n.vertices.length>0){s>0&&(mxUtils$1.br(a),s=0);var l=mxUtils$1.button(mxResources$1.get("copySize"),function(h){i.actions.get("copySize").funct()});if(l.setAttribute("title",mxResources$1.get("copySize")+" ("+this.editorUi.actions.get("copySize").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",a.appendChild(l),s++,i.copiedSize!=null){var r=mxUtils$1.button(mxResources$1.get("pasteSize"),function(h){i.actions.get("pasteSize").funct()});r.setAttribute("title",mxResources$1.get("pasteSize")+" ("+this.editorUi.actions.get("pasteSize").shortcut+")"),a.appendChild(r),s++,l.style.width="100px",l.style.marginBottom="2px",r.style.width="100px",r.style.marginBottom="2px"}}return t.getSelectionCount()==1&&t.getModel().isVertex(e)&&!n.row&&!n.cell&&t.getModel().isVertex(t.getModel().getParent(e))?(s>0&&mxUtils$1.br(a),l=mxUtils$1.button(mxResources$1.get("removeFromGroup"),function(o){i.actions.get("removeFromGroup").funct()}),l.setAttribute("title",mxResources$1.get("removeFromGroup")),l.style.width="202px",l.style.marginBottom="2px",a.appendChild(l),s++):t.getSelectionCount()>0&&(s>0&&mxUtils$1.br(a),l=mxUtils$1.button(mxResources$1.get("clearWaypoints"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("clearWaypoints").funct()})),l.setAttribute("title",mxResources$1.get("clearWaypoints")+" ("+this.editorUi.actions.get("clearWaypoints").shortcut+")"),l.style.width="202px",l.style.marginBottom="2px",a.appendChild(l),s++),t.getSelectionCount()==1&&(s>0&&mxUtils$1.br(a),l=mxUtils$1.button(mxResources$1.get("editData"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("editData").funct()})),l.setAttribute("title",mxResources$1.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),l.style.width="100px",l.style.marginBottom="2px",a.appendChild(l),s++,l=mxUtils$1.button(mxResources$1.get("editLink"),mxUtils$1.bind(this,function(o){this.editorUi.actions.get("editLink").funct()})),l.setAttribute("title",mxResources$1.get("editLink")),l.style.width="100px",l.style.marginLeft="2px",l.style.marginBottom="2px",a.appendChild(l),s++),s==0&&(a.style.display="none"),a};ArrangePanel.prototype.addAlign=function(a){var i=this.editorUi.editor.graph;a.style.paddingTop="6px",a.style.paddingBottom="12px",a.appendChild(this.createTitle(mxResources$1.get("align")));var t=document.createElement("div");t.style.position="relative",t.style.paddingLeft="0px",t.style.borderWidth="0px",t.className="geToolbarContainer",mxClient.IS_QUIRKS&&(a.style.height="60px");var e=this.editorUi.toolbar.addButton("geSprite-alignleft",mxResources$1.get("left"),function(){i.alignCells(mxConstants$1.ALIGN_LEFT)},t),n=this.editorUi.toolbar.addButton("geSprite-aligncenter",mxResources$1.get("center"),function(){i.alignCells(mxConstants$1.ALIGN_CENTER)},t),s=this.editorUi.toolbar.addButton("geSprite-alignright",mxResources$1.get("right"),function(){i.alignCells(mxConstants$1.ALIGN_RIGHT)},t),l=this.editorUi.toolbar.addButton("geSprite-aligntop",mxResources$1.get("top"),function(){i.alignCells(mxConstants$1.ALIGN_TOP)},t),r=this.editorUi.toolbar.addButton("geSprite-alignmiddle",mxResources$1.get("middle"),function(){i.alignCells(mxConstants$1.ALIGN_MIDDLE)},t),o=this.editorUi.toolbar.addButton("geSprite-alignbottom",mxResources$1.get("bottom"),function(){i.alignCells(mxConstants$1.ALIGN_BOTTOM)},t);return this.styleButtons([e,n,s,l,r,o]),s.style.marginRight="6px",a.appendChild(t),a};ArrangePanel.prototype.addFlip=function(a){var i=this.editorUi,t=i.editor,e=t.graph;a.style.paddingTop="6px",a.style.paddingBottom="10px";var n=document.createElement("div");n.style.marginTop="2px",n.style.marginBottom="8px",n.style.fontWeight="bold",mxUtils$1.write(n,mxResources$1.get("flip")),a.appendChild(n);var s=mxUtils$1.button(mxResources$1.get("horizontal"),function(l){e.toggleCellStyles(mxConstants$1.STYLE_FLIPH,!1)});s.setAttribute("title",mxResources$1.get("horizontal")),s.style.width="100px",s.style.marginRight="2px",a.appendChild(s);var s=mxUtils$1.button(mxResources$1.get("vertical"),function(l){e.toggleCellStyles(mxConstants$1.STYLE_FLIPV,!1)});return s.setAttribute("title",mxResources$1.get("vertical")),s.style.width="100px",a.appendChild(s),a};ArrangePanel.prototype.addDistribute=function(a){var i=this.editorUi,t=i.editor,e=t.graph;a.style.paddingTop="6px",a.style.paddingBottom="12px",a.appendChild(this.createTitle(mxResources$1.get("distribute")));var n=mxUtils$1.button(mxResources$1.get("horizontal"),function(s){e.distributeCells(!0)});n.setAttribute("title",mxResources$1.get("horizontal")),n.style.width="100px",n.style.marginRight="2px",a.appendChild(n);var n=mxUtils$1.button(mxResources$1.get("vertical"),function(s){e.distributeCells(!1)});return n.setAttribute("title",mxResources$1.get("vertical")),n.style.width="100px",a.appendChild(n),a};ArrangePanel.prototype.addAngle=function(a){var i=this.editorUi,t=i.editor,e=t.graph,n=this.format.getSelectionState();a.style.paddingBottom="8px";var s=document.createElement("div");s.style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold";var l=null,r=null,o=null;if(n.rotatable&&!n.table&&!n.row&&!n.cell?(mxUtils$1.write(s,mxResources$1.get("angle")),a.appendChild(s),l=this.addUnitInput(a,"°",20,44,function(){r.apply(this,arguments)}),mxUtils$1.br(a),a.style.paddingTop="10px"):a.style.paddingTop="8px",!n.containsLabel){var h=mxResources$1.get("reverse");n.vertices.length>0&&n.edges.length>0?h=mxResources$1.get("turn")+" / "+h:n.vertices.length>0&&(h=mxResources$1.get("turn")),o=mxUtils$1.button(h,function(d){i.actions.get("turn").funct(d)}),o.setAttribute("title",h+" ("+this.editorUi.actions.get("turn").shortcut+")"),o.style.width="202px",a.appendChild(o),l!=null&&(o.style.marginTop="8px")}if(l!=null){var u=mxUtils$1.bind(this,function(d,m,g){if(g||document.activeElement!=l){n=this.format.getSelectionState();var x=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ROTATION,0));l.value=isNaN(x)?"":x+"°"}});r=this.installInputHandler(l,mxConstants$1.STYLE_ROTATION,0,0,360,"°",null,!0),this.addKeyHandler(l,u),e.getModel().addListener(mxEvent$1.CHANGE,u),this.listeners.push({destroy:function(){e.getModel().removeListener(u)}}),u()}return a};BaseFormatPanel.prototype.getUnit=function(){var a=this.editorUi.editor.graph.view.unit;switch(a){case mxConstants$1.POINTS:return"pt";case mxConstants$1.INCHES:return'"';case mxConstants$1.MILLIMETERS:return"mm"}};BaseFormatPanel.prototype.inUnit=function(a){return this.editorUi.editor.graph.view.formatUnitText(a)};BaseFormatPanel.prototype.fromUnit=function(a){var i=this.editorUi.editor.graph.view.unit;switch(i){case mxConstants$1.POINTS:return a;case mxConstants$1.INCHES:return a*mxConstants$1.PIXELS_PER_INCH;case mxConstants$1.MILLIMETERS:return a*mxConstants$1.PIXELS_PER_MM}};BaseFormatPanel.prototype.isFloatUnit=function(){return this.editorUi.editor.graph.view.unit!=mxConstants$1.POINTS};BaseFormatPanel.prototype.getUnitStep=function(){var a=this.editorUi.editor.graph.view.unit;switch(a){case mxConstants$1.POINTS:return 1;case mxConstants$1.INCHES:return .1;case mxConstants$1.MILLIMETERS:return .5}};ArrangePanel.prototype.addGeometry=function(a){var i=this,t=this.editorUi,e=t.editor.graph,n=this.format.getSelectionState(),s=this.createPanel();s.style.paddingBottom="8px";var E=document.createElement("div");E.style.position="absolute",E.style.width="50px",E.style.marginTop="0px",E.style.fontWeight="bold",mxUtils$1.write(E,mxResources$1.get("size")),s.appendChild(E);var l,r,o,h,u=this.addUnitInput(s,this.getUnit(),84,44,function(){l.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),d=this.addUnitInput(s,this.getUnit(),20,44,function(){r.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),m=document.createElement("div");m.className="geSprite geSprite-fit",m.setAttribute("title",mxResources$1.get("autosize")+" ("+this.editorUi.actions.get("autosize").shortcut+")"),m.style.position="relative",m.style.cursor="pointer",m.style.marginTop="-3px",m.style.border="0px",m.style.left="42px",mxUtils$1.setOpacity(m,50),mxEvent$1.addListener(m,"mouseenter",function(){mxUtils$1.setOpacity(m,100)}),mxEvent$1.addListener(m,"mouseleave",function(){mxUtils$1.setOpacity(m,50)}),mxEvent$1.addListener(m,"click",function(){t.actions.get("autosize").funct()}),s.appendChild(m),n.row?(u.style.visibility="hidden",u.nextSibling.style.visibility="hidden"):this.addLabel(s,mxResources$1.get("width"),84),this.addLabel(s,mxResources$1.get("height"),20),mxUtils$1.br(s);var g=document.createElement("div");g.style.paddingTop="8px",g.style.paddingRight="20px",g.style.whiteSpace="nowrap",g.style.textAlign="right";var x=this.createCellOption(mxResources$1.get("constrainProportions"),mxConstants$1.STYLE_ASPECT,null,"fixed","null");x.style.width="100%",g.appendChild(x),!n.cell&&!n.row?s.appendChild(g):m.style.visibility="hidden";var v=x.getElementsByTagName("input")[0];this.addKeyHandler(u,$),this.addKeyHandler(d,$),l=this.addGeometryHandler(u,function(P,M,D){if(e.isTableCell(D))return e.setTableColumnWidth(D,M-P.width,!0),!0;if(P.width>0){var M=Math.max(1,i.fromUnit(M));v.checked&&(P.height=Math.round(P.height*M*100/P.width)/100),P.width=M}}),r=this.addGeometryHandler(d,function(P,M,D){if(e.isTableCell(D)&&(D=e.model.getParent(D)),e.isTableRow(D))return e.setTableRowHeight(D,M-P.height),!0;if(P.height>0){var M=Math.max(1,i.fromUnit(M));v.checked&&(P.width=Math.round(P.width*M*100/P.height)/100),P.height=M}}),(n.resizable||n.row||n.cell)&&a.appendChild(s);var C=this.createPanel();C.style.paddingBottom="30px";var E=document.createElement("div");E.style.position="absolute",E.style.width="70px",E.style.marginTop="0px",E.style.fontWeight="bold",mxUtils$1.write(E,mxResources$1.get("position")),C.appendChild(E);var b=this.addUnitInput(C,this.getUnit(),84,44,function(){o.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),w=this.addUnitInput(C,this.getUnit(),20,44,function(){h.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit());mxUtils$1.br(C),this.addLabel(C,mxResources$1.get("left"),84),this.addLabel(C,mxResources$1.get("top"),20);var $=mxUtils$1.bind(this,function(P,M,D){n=this.format.getSelectionState(),!n.containsLabel&&n.vertices.length==e.getSelectionCount()&&n.width!=null&&n.height!=null?(s.style.display="",(D||document.activeElement!=u)&&(u.value=this.inUnit(n.width)+(n.width==""?"":" "+this.getUnit())),(D||document.activeElement!=d)&&(d.value=this.inUnit(n.height)+(n.height==""?"":" "+this.getUnit()))):s.style.display="none",n.vertices.length==e.getSelectionCount()&&n.x!=null&&n.y!=null?(C.style.display="",(D||document.activeElement!=b)&&(b.value=this.inUnit(n.x)+(n.x==""?"":" "+this.getUnit())),(D||document.activeElement!=w)&&(w.value=this.inUnit(n.y)+(n.y==""?"":" "+this.getUnit()))):C.style.display="none"});this.addKeyHandler(b,$),this.addKeyHandler(w,$),e.getModel().addListener(mxEvent$1.CHANGE,$),this.listeners.push({destroy:function(){e.getModel().removeListener($)}}),$(),o=this.addGeometryHandler(b,function(P,M){M=i.fromUnit(M),P.relative?P.offset.x=M:P.x=M}),h=this.addGeometryHandler(w,function(P,M){M=i.fromUnit(M),P.relative?P.offset.y=M:P.y=M}),n.movable&&a.appendChild(C)};ArrangePanel.prototype.addGeometryHandler=function(a,i){var t=this.editorUi,e=t.editor.graph,n=null,s=this;function l(r){if(a.value!=""){var o=parseFloat(a.value);if(isNaN(o))a.value=n+" "+s.getUnit();else if(o!=n){e.getModel().beginUpdate();try{for(var h=e.getSelectionCells(),u=0;u<h.length;u++)if(e.getModel().isVertex(h[u])){var d=e.getCellGeometry(h[u]);if(d!=null&&(d=d.clone(),!i(d,o,h[u]))){var m=e.view.getState(h[u]);m!=null&&e.isRecursiveVertexResize(m)&&e.resizeChildCells(h[u],d),e.getModel().setGeometry(h[u],d),e.constrainChildCells(h[u])}}}finally{e.getModel().endUpdate()}n=o,a.value=o+" "+s.getUnit()}}mxEvent$1.consume(r)}return mxEvent$1.addListener(a,"blur",l),mxEvent$1.addListener(a,"change",l),mxEvent$1.addListener(a,"focus",function(){n=a.value}),l};ArrangePanel.prototype.addEdgeGeometryHandler=function(a,i){var t=this.editorUi,e=t.editor.graph,n=null;function s(l){if(a.value!=""){var r=parseFloat(a.value);if(isNaN(r))a.value=n+" pt";else if(r!=n){e.getModel().beginUpdate();try{for(var o=e.getSelectionCells(),h=0;h<o.length;h++)if(e.getModel().isEdge(o[h])){var u=e.getCellGeometry(o[h]);u!=null&&(u=u.clone(),i(u,r),e.getModel().setGeometry(o[h],u))}}finally{e.getModel().endUpdate()}n=r,a.value=r+" pt"}}mxEvent$1.consume(l)}return mxEvent$1.addListener(a,"blur",s),mxEvent$1.addListener(a,"change",s),mxEvent$1.addListener(a,"focus",function(){n=a.value}),s};ArrangePanel.prototype.addEdgeGeometry=function(a){var i=this.editorUi,t=i.editor.graph,e=this.format.getSelectionState(),n=this.createPanel(),v=document.createElement("div");v.style.position="absolute",v.style.width="70px",v.style.marginTop="0px",v.style.fontWeight="bold",mxUtils$1.write(v,mxResources$1.get("width")),n.appendChild(v);var u,s,l,r,o,h=this.addUnitInput(n,"pt",20,44,function(){u.apply(this,arguments)});mxUtils$1.br(n),this.addKeyHandler(h,b);function u(w){var $=parseInt(h.value);$=Math.min(999,Math.max(1,isNaN($)?1:$)),$!=mxUtils$1.getValue(e.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth)&&(t.setCellStyles("width",$,t.getSelectionCells()),i.fireEvent(new mxEventObject$1("styleChanged","keys",["width"],"values",[$],"cells",t.getSelectionCells()))),h.value=$+" pt",mxEvent$1.consume(w)}mxEvent$1.addListener(h,"blur",u),mxEvent$1.addListener(h,"change",u),a.appendChild(n);var d=this.createPanel();d.style.paddingBottom="30px";var v=document.createElement("div");v.style.position="absolute",v.style.width="70px",v.style.marginTop="0px",v.style.fontWeight="bold",mxUtils$1.write(v,"Start"),d.appendChild(v);var m=this.addUnitInput(d,"pt",84,44,function(){r.apply(this,arguments)}),g=this.addUnitInput(d,"pt",20,44,function(){o.apply(this,arguments)});mxUtils$1.br(d),this.addLabel(d,mxResources$1.get("left"),84),this.addLabel(d,mxResources$1.get("top"),20),a.appendChild(d),this.addKeyHandler(m,b),this.addKeyHandler(g,b);var x=this.createPanel();x.style.paddingBottom="30px";var v=document.createElement("div");v.style.position="absolute",v.style.width="70px",v.style.marginTop="0px",v.style.fontWeight="bold",mxUtils$1.write(v,"End"),x.appendChild(v);var C=this.addUnitInput(x,"pt",84,44,function(){s.apply(this,arguments)}),E=this.addUnitInput(x,"pt",20,44,function(){l.apply(this,arguments)});mxUtils$1.br(x),this.addLabel(x,mxResources$1.get("left"),84),this.addLabel(x,mxResources$1.get("top"),20),a.appendChild(x),this.addKeyHandler(C,b),this.addKeyHandler(E,b);var b=mxUtils$1.bind(this,function(w,$,P){e=this.format.getSelectionState();var M=t.getSelectionCell();if(e.style.shape=="link"||e.style.shape=="flexArrow"){if(n.style.display="",P||document.activeElement!=h){var D=mxUtils$1.getValue(e.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth);h.value=D+" pt"}}else n.style.display="none";if(t.getSelectionCount()==1&&t.model.isEdge(M)){var k=t.model.getGeometry(M);k.sourcePoint!=null&&t.model.getTerminal(M,!0)==null?(m.value=k.sourcePoint.x,g.value=k.sourcePoint.y):d.style.display="none",k.targetPoint!=null&&t.model.getTerminal(M,!1)==null?(C.value=k.targetPoint.x,E.value=k.targetPoint.y):x.style.display="none"}else d.style.display="none",x.style.display="none"});r=this.addEdgeGeometryHandler(m,function(w,$){w.sourcePoint.x=$}),o=this.addEdgeGeometryHandler(g,function(w,$){w.sourcePoint.y=$}),s=this.addEdgeGeometryHandler(C,function(w,$){w.targetPoint.x=$}),l=this.addEdgeGeometryHandler(E,function(w,$){w.targetPoint.y=$}),t.getModel().addListener(mxEvent$1.CHANGE,b),this.listeners.push({destroy:function(){t.getModel().removeListener(b)}}),b()};class TextFormatPanel extends BaseFormatPanel{constructor(i,t,e){super(i,t,e),this.init()}}TextFormatPanel.prototype.init=function(){this.container.style.borderBottom="none",this.addFont(this.container)};TextFormatPanel.prototype.addFont=function(a){var i=this.editorUi,t=i.editor,e=t.graph,n=this.format.getSelectionState(),s=this.createTitle(mxResources$1.get("font"));s.style.paddingLeft="18px",s.style.paddingTop="10px",s.style.paddingBottom="6px",a.appendChild(s);var l=this.createPanel();if(l.style.paddingTop="2px",l.style.paddingBottom="2px",l.style.position="relative",l.style.marginLeft="-2px",l.style.borderWidth="0px",l.className="geToolbarContainer",mxClient.IS_QUIRKS&&(l.style.display="block"),e.cellEditor.isContentEditing()){var r=l.cloneNode(),o=this.editorUi.toolbar.addMenu(mxResources$1.get("style"),mxResources$1.get("style"),!0,"formatBlock",r,null,!0);o.style.color="rgb(112, 112, 112)",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.margin="0px",this.addArrow(o),o.style.width="192px",o.style.height="15px";var Nt=o.getElementsByTagName("div")[0];Nt.style.cssFloat="right",a.appendChild(r)}a.appendChild(l);var h=this.createPanel();h.style.marginTop="8px",h.style.borderTop="1px solid #c0c0c0",h.style.paddingTop="6px",h.style.paddingBottom="6px";var u=this.editorUi.toolbar.addMenu("Helvetica",mxResources$1.get("fontFamily"),!0,"fontFamily",l,null,!0);u.style.color="rgb(112, 112, 112)",u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.margin="0px",this.addArrow(u),u.style.width="192px",u.style.height="15px";var d=l.cloneNode(!1);d.style.marginLeft="-3px";var m=this.editorUi.toolbar.addItems(["bold","italic","underline"],d,!0);m[0].setAttribute("title",mxResources$1.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),m[1].setAttribute("title",mxResources$1.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),m[2].setAttribute("title",mxResources$1.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var g=this.editorUi.toolbar.addItems(["vertical"],d,!0)[0];mxClient.IS_QUIRKS&&mxUtils$1.br(a),a.appendChild(d),this.styleButtons(m),this.styleButtons([g]);var x=l.cloneNode(!1);x.style.marginLeft="-3px",x.style.paddingBottom="0px";var v=function(Gt){return function(){return Gt()}},C=this.editorUi.toolbar.addButton("geSprite-left",mxResources$1.get("left"),e.cellEditor.isContentEditing()?function(Gt){e.cellEditor.alignText(mxConstants$1.ALIGN_LEFT,Gt)}:v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_LEFT])),x),E=this.editorUi.toolbar.addButton("geSprite-center",mxResources$1.get("center"),e.cellEditor.isContentEditing()?function(Gt){e.cellEditor.alignText(mxConstants$1.ALIGN_CENTER,Gt)}:v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_CENTER])),x),b=this.editorUi.toolbar.addButton("geSprite-right",mxResources$1.get("right"),e.cellEditor.isContentEditing()?function(Gt){e.cellEditor.alignText(mxConstants$1.ALIGN_RIGHT,Gt)}:v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_ALIGN],[mxConstants$1.ALIGN_RIGHT])),x);if(this.styleButtons([C,E,b]),e.cellEditor.isContentEditing()){var w=this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources$1.get("strikethrough"),function(){document.execCommand("strikeThrough",!1,null)},d);this.styleButtons([w]),w.firstChild.style.background="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMwMTAxMDEiIGQ9Ik03LjI0IDguNzVjLS4yNi0uNDgtLjM5LTEuMDMtLjM5LTEuNjcgMC0uNjEuMTMtMS4xNi40LTEuNjcuMjYtLjUuNjMtLjkzIDEuMTEtMS4yOS40OC0uMzUgMS4wNS0uNjMgMS43LS44My42Ni0uMTkgMS4zOS0uMjkgMi4xOC0uMjkuODEgMCAxLjU0LjExIDIuMjEuMzQuNjYuMjIgMS4yMy41NCAxLjY5Ljk0LjQ3LjQuODMuODggMS4wOCAxLjQzLjI1LjU1LjM4IDEuMTUuMzggMS44MWgtMy4wMWMwLS4zMS0uMDUtLjU5LS4xNS0uODUtLjA5LS4yNy0uMjQtLjQ5LS40NC0uNjgtLjItLjE5LS40NS0uMzMtLjc1LS40NC0uMy0uMS0uNjYtLjE2LTEuMDYtLjE2LS4zOSAwLS43NC4wNC0xLjAzLjEzLS4yOS4wOS0uNTMuMjEtLjcyLjM2LS4xOS4xNi0uMzQuMzQtLjQ0LjU1LS4xLjIxLS4xNS40My0uMTUuNjYgMCAuNDguMjUuODguNzQgMS4yMS4zOC4yNS43Ny40OCAxLjQxLjdINy4zOWMtLjA1LS4wOC0uMTEtLjE3LS4xNS0uMjV6TTIxIDEydi0ySDN2Mmg5LjYyYy4xOC4wNy40LjE0LjU1LjIuMzcuMTcuNjYuMzQuODcuNTEuMjEuMTcuMzUuMzYuNDMuNTcuMDcuMi4xMS40My4xMS42OSAwIC4yMy0uMDUuNDUtLjE0LjY2LS4wOS4yLS4yMy4zOC0uNDIuNTMtLjE5LjE1LS40Mi4yNi0uNzEuMzUtLjI5LjA4LS42My4xMy0xLjAxLjEzLS40MyAwLS44My0uMDQtMS4xOC0uMTNzLS42Ni0uMjMtLjkxLS40MmMtLjI1LS4xOS0uNDUtLjQ0LS41OS0uNzUtLjE0LS4zMS0uMjUtLjc2LS4yNS0xLjIxSDYuNGMwIC41NS4wOCAxLjEzLjI0IDEuNTguMTYuNDUuMzcuODUuNjUgMS4yMS4yOC4zNS42LjY2Ljk4LjkyLjM3LjI2Ljc4LjQ4IDEuMjIuNjUuNDQuMTcuOS4zIDEuMzguMzkuNDguMDguOTYuMTMgMS40NC4xMy44IDAgMS41My0uMDkgMi4xOC0uMjhzMS4yMS0uNDUgMS42Ny0uNzljLjQ2LS4zNC44Mi0uNzcgMS4wNy0xLjI3cy4zOC0xLjA3LjM4LTEuNzFjMC0uNi0uMS0xLjE0LS4zMS0xLjYxLS4wNS0uMTEtLjExLS4yMy0uMTctLjMzSDIxeiIvPjwvc3ZnPg==)",w.firstChild.style.backgroundPosition="2px 2px",w.firstChild.style.backgroundSize="18px 18px",this.styleButtons([w])}var $=this.editorUi.toolbar.addButton("geSprite-top",mxResources$1.get("top"),v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_TOP])),x),P=this.editorUi.toolbar.addButton("geSprite-middle",mxResources$1.get("middle"),v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_MIDDLE])),x),M=this.editorUi.toolbar.addButton("geSprite-bottom",mxResources$1.get("bottom"),v(this.editorUi.menus.createStyleChangeFunction([mxConstants$1.STYLE_VERTICAL_ALIGN],[mxConstants$1.ALIGN_BOTTOM])),x);this.styleButtons([$,P,M]),mxClient.IS_QUIRKS&&mxUtils$1.br(a),a.appendChild(x);var D,k,Z,q,j,X,rt;if(e.cellEditor.isContentEditing()){$.style.display="none",P.style.display="none",M.style.display="none",g.style.display="none",Z=this.editorUi.toolbar.addButton("geSprite-justifyfull",mxResources$1.get("block"),function(){Z.style.opacity==1&&document.execCommand("justifyfull",!1,null)},x),Z.style.marginRight="9px",Z.style.opacity=1,this.styleButtons([Z,D=this.editorUi.toolbar.addButton("geSprite-subscript",mxResources$1.get("subscript")+" ("+Editor$1.ctrlKey+"+,)",function(){document.execCommand("subscript",!1,null)},x),k=this.editorUi.toolbar.addButton("geSprite-superscript",mxResources$1.get("superscript")+" ("+Editor$1.ctrlKey+"+.)",function(){document.execCommand("superscript",!1,null)},x)]),D.style.marginLeft="9px";var et=x.cloneNode(!1);et.style.paddingTop="4px";var Y=[this.editorUi.toolbar.addButton("geSprite-orderedlist",mxResources$1.get("numberedList"),function(){document.execCommand("insertorderedlist",!1,null)},et),this.editorUi.toolbar.addButton("geSprite-unorderedlist",mxResources$1.get("bulletedList"),function(){document.execCommand("insertunorderedlist",!1,null)},et),this.editorUi.toolbar.addButton("geSprite-outdent",mxResources$1.get("decreaseIndent"),function(){document.execCommand("outdent",!1,null)},et),this.editorUi.toolbar.addButton("geSprite-indent",mxResources$1.get("increaseIndent"),function(){document.execCommand("indent",!1,null)},et),this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources$1.get("removeFormat"),function(){document.execCommand("removeformat",!1,null)},et),this.editorUi.toolbar.addButton("geSprite-code",mxResources$1.get("html"),function(){e.cellEditor.toggleViewMode()},et)];this.styleButtons(Y),Y[Y.length-2].style.marginLeft="9px",mxClient.IS_QUIRKS&&(mxUtils$1.br(a),et.style.height="40"),a.appendChild(et)}else m[2].style.marginRight="9px",b.style.marginRight="9px";var G=l.cloneNode(!1);G.style.marginLeft="0px",G.style.paddingTop="8px",G.style.paddingBottom="4px",G.style.fontWeight="normal",mxUtils$1.write(G,mxResources$1.get("position"));var J=document.createElement("select");J.style.position="absolute",J.style.right="20px",J.style.width="97px",J.style.marginTop="-2px";for(var tt=["topLeft","top","topRight","left","center","right","bottomLeft","bottom","bottomRight"],gt={topLeft:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_BOTTOM],top:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_BOTTOM],topRight:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_TOP,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_BOTTOM],left:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_MIDDLE],center:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_MIDDLE],right:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_MIDDLE,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_MIDDLE],bottomLeft:[mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_TOP],bottom:[mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_CENTER,mxConstants$1.ALIGN_TOP],bottomRight:[mxConstants$1.ALIGN_RIGHT,mxConstants$1.ALIGN_BOTTOM,mxConstants$1.ALIGN_LEFT,mxConstants$1.ALIGN_TOP]},dt=0;dt<tt.length;dt++){var K=document.createElement("option");K.setAttribute("value",tt[dt]),mxUtils$1.write(K,mxResources$1.get(tt[dt])),J.appendChild(K)}G.appendChild(J);var nt=l.cloneNode(!1);nt.style.marginLeft="0px",nt.style.paddingTop="4px",nt.style.paddingBottom="4px",nt.style.fontWeight="normal",mxUtils$1.write(nt,mxResources$1.get("writingDirection"));var ht=document.createElement("select");ht.style.position="absolute",ht.style.right="20px",ht.style.width="97px",ht.style.marginTop="-2px";for(var bt=["automatic","leftToRight","rightToLeft"],$t={automatic:null,leftToRight:mxConstants$1.TEXT_DIRECTION_LTR,rightToLeft:mxConstants$1.TEXT_DIRECTION_RTL},dt=0;dt<bt.length;dt++){var Dt=document.createElement("option");Dt.setAttribute("value",bt[dt]),mxUtils$1.write(Dt,mxResources$1.get(bt[dt])),ht.appendChild(Dt)}nt.appendChild(ht),e.isEditing()||(a.appendChild(G),mxEvent$1.addListener(J,"change",function(Gt){e.getModel().beginUpdate();try{var St=gt[J.value];St!=null&&(e.setCellStyles(mxConstants$1.STYLE_LABEL_POSITION,St[0],e.getSelectionCells()),e.setCellStyles(mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,St[1],e.getSelectionCells()),e.setCellStyles(mxConstants$1.STYLE_ALIGN,St[2],e.getSelectionCells()),e.setCellStyles(mxConstants$1.STYLE_VERTICAL_ALIGN,St[3],e.getSelectionCells()))}finally{e.getModel().endUpdate()}mxEvent$1.consume(Gt)}),a.appendChild(nt),mxEvent$1.addListener(ht,"change",function(Gt){e.setCellStyles(mxConstants$1.STYLE_TEXT_DIRECTION,$t[ht.value],e.getSelectionCells()),mxEvent$1.consume(Gt)}));var ct=document.createElement("input");ct.style.textAlign="right",ct.style.marginTop="4px",mxClient.IS_QUIRKS||(ct.style.position="absolute",ct.style.right="32px"),ct.style.width="40px",ct.style.height=mxClient.IS_QUIRKS?"21px":"17px",d.appendChild(ct);var Et=null,Ht=this.installInputHandler(ct,mxConstants$1.STYLE_FONTSIZE,12,1,999," pt",function(Gt){if(window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11){let ue=function(oe,Se){if(e.cellEditor.textarea!=null&&oe!=e.cellEditor.textarea&&e.cellEditor.textarea.contains(oe)&&St.containsNode(oe,!0))if(oe.nodeName=="FONT")oe.removeAttribute("size"),oe.style.fontSize=Gt+"px";else{var Le=mxUtils$1.getCurrentStyle(oe);Le.fontSize!=Gt+"px"&&(mxUtils$1.getCurrentStyle(oe.parentNode).fontSize!=Gt+"px"?oe.style.fontSize=Gt+"px":oe.style.fontSize="")}};var se=ue,St=window.getSelection(),Ft=St.rangeCount>0?St.getRangeAt(0).commonAncestorContainer:e.cellEditor.textarea;if((Ft==e.cellEditor.textarea||Ft.nodeType!=mxConstants$1.NODETYPE_ELEMENT)&&document.execCommand("fontSize",!1,"1"),Ft!=e.cellEditor.textarea&&(Ft=Ft.parentNode),Ft!=null&&Ft.nodeType==mxConstants$1.NODETYPE_ELEMENT){var kt=Ft.getElementsByTagName("*");ue(Ft);for(var wt=0;wt<kt.length;wt++)ue(kt[wt])}ct.value=Gt+" pt"}else if(window.getSelection||document.selection){let ue=function(oe,Se){for(;Se!=null;){if(Se===oe)return!0;Se=Se.parentNode}return!1};var ie=ue,te=null;if(document.selection)te=document.selection.createRange().parentElement();else{var St=window.getSelection();St.rangeCount>0&&(te=St.getRangeAt(0).commonAncestorContainer)}if(te!=null&&ue(e.cellEditor.textarea,te)){Et=Gt,document.execCommand("fontSize",!1,"4");for(var kt=e.cellEditor.textarea.getElementsByTagName("font"),wt=0;wt<kt.length;wt++)if(kt[wt].getAttribute("size")=="4"){kt[wt].removeAttribute("size"),kt[wt].style.fontSize=Et+"px",window.setTimeout(function(){ct.value=Et+" pt",Et=null},0);break}}}},!0),Ot=this.createStepper(ct,Ht,1,10,!0,12);Ot.style.display=ct.style.display,Ot.style.marginTop="4px",mxClient.IS_QUIRKS||(Ot.style.right="20px"),d.appendChild(Ot);var Nt=u.getElementsByTagName("div")[0];Nt.style.cssFloat="right";var lt=null,yt="#ffffff",_t=null,Rt="#000000",Yt=e.cellEditor.isContentEditing()?this.createColorOption(mxResources$1.get("backgroundColor"),function(){return yt},function(Gt){document.execCommand("backcolor",!1,Gt!=mxConstants$1.NONE?Gt:"transparent")},"#ffffff",{install:function(Gt){lt=Gt},destroy:function(){lt=null}},null,!0):this.createCellColorOption(mxResources$1.get("backgroundColor"),mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,"#ffffff",null,function(Gt){e.updateLabelElements(e.getSelectionCells(),function(St){St.style.backgroundColor=null})});Yt.style.fontWeight="bold";var Zt=this.createCellColorOption(mxResources$1.get("borderColor"),mxConstants$1.STYLE_LABEL_BORDERCOLOR,"#000000");Zt.style.fontWeight="bold";var Qt=n.vertices.length>=1?e.stylesheet.getDefaultVertexStyle():e.stylesheet.getDefaultEdgeStyle(),Wt=e.cellEditor.isContentEditing()?this.createColorOption(mxResources$1.get("fontColor"),function(){return Rt},function(Gt){if(mxClient.IS_FF){for(var St=e.cellEditor.textarea.getElementsByTagName("font"),Ft=[],kt=0;kt<St.length;kt++)Ft.push({node:St[kt],color:St[kt].getAttribute("color")});document.execCommand("forecolor",!1,Gt!=mxConstants$1.NONE?Gt:"transparent");for(var wt=e.cellEditor.textarea.getElementsByTagName("font"),kt=0;kt<wt.length;kt++)if(kt>=Ft.length||wt[kt]!=Ft[kt].node||wt[kt]==Ft[kt].node&&wt[kt].getAttribute("color")!=Ft[kt].color){var te=wt[kt].firstChild;if(te!=null&&te.nodeName=="A"&&te.nextSibling==null&&te.firstChild!=null){var se=wt[kt].parentNode;se.insertBefore(te,wt[kt]);for(var St=te.firstChild;St!=null;){var ie=St.nextSibling;wt[kt].appendChild(St),St=ie}te.appendChild(wt[kt])}break}}else document.execCommand("forecolor",!1,Gt!=mxConstants$1.NONE?Gt:"transparent")},Qt[mxConstants$1.STYLE_FONTCOLOR]!=null?Qt[mxConstants$1.STYLE_FONTCOLOR]:"#000000",{install:function(Gt){_t=Gt},destroy:function(){_t=null}},null,!0):this.createCellColorOption(mxResources$1.get("fontColor"),mxConstants$1.STYLE_FONTCOLOR,Qt[mxConstants$1.STYLE_FONTCOLOR]!=null?Qt[mxConstants$1.STYLE_FONTCOLOR]:"#000000",function(Gt){Gt==mxConstants$1.NONE?Yt.style.display="none":Yt.style.display="",Zt.style.display=Yt.style.display},function(Gt){Gt==mxConstants$1.NONE?e.setCellStyles(mxConstants$1.STYLE_NOLABEL,"1",e.getSelectionCells()):e.setCellStyles(mxConstants$1.STYLE_NOLABEL,null,e.getSelectionCells()),e.updateCellStyles(mxConstants$1.STYLE_FONTCOLOR,Gt,e.getSelectionCells()),e.updateLabelElements(e.getSelectionCells(),function(St){St.removeAttribute("color"),St.style.color=null})});Wt.style.fontWeight="bold",h.appendChild(Wt),h.appendChild(Yt),e.cellEditor.isContentEditing()||h.appendChild(Zt),a.appendChild(h);var Bt=this.createPanel();Bt.style.paddingTop="2px",Bt.style.paddingBottom="4px";var S=this.createCellOption(mxResources$1.get("wordWrap"),mxConstants$1.STYLE_WHITE_SPACE,null,"wrap","null",null,null,!0);S.style.fontWeight="bold",!n.containsLabel&&!n.autoSize&&n.edges.length==0&&Bt.appendChild(S);var A=this.createCellOption(mxResources$1.get("formattedText"),"html","0",null,null,null,i.actions.get("formattedText"));A.style.fontWeight="bold",Bt.appendChild(A);var I=this.createPanel();I.style.paddingTop="10px",I.style.paddingBottom="28px",I.style.fontWeight="normal";var N=document.createElement("div");N.style.position="absolute",N.style.width="70px",N.style.marginTop="0px",N.style.fontWeight="bold",mxUtils$1.write(N,mxResources$1.get("spacing")),I.appendChild(N);var _,V,W,ot,at,mt=this.addUnitInput(I,"pt",91,44,function(){_.apply(this,arguments)}),Lt=this.addUnitInput(I,"pt",20,44,function(){V.apply(this,arguments)});mxUtils$1.br(I),this.addLabel(I,mxResources$1.get("top"),91),this.addLabel(I,mxResources$1.get("global"),20),mxUtils$1.br(I),mxUtils$1.br(I);var Ct=this.addUnitInput(I,"pt",162,44,function(){W.apply(this,arguments)}),Ut=this.addUnitInput(I,"pt",91,44,function(){ot.apply(this,arguments)}),Mt=this.addUnitInput(I,"pt",20,44,function(){at.apply(this,arguments)});if(mxUtils$1.br(I),this.addLabel(I,mxResources$1.get("left"),162),this.addLabel(I,mxResources$1.get("bottom"),91),this.addLabel(I,mxResources$1.get("right"),20),!e.cellEditor.isContentEditing())a.appendChild(Bt),a.appendChild(this.createRelativeOption(mxResources$1.get("opacity"),mxConstants$1.STYLE_TEXT_OPACITY)),a.appendChild(I);else{var Vt=null,Kt=null;a.appendChild(this.createRelativeOption(mxResources$1.get("lineheight"),null,null,function(St){var Ft=St.value==""?120:parseInt(St.value);Ft=Math.max(0,isNaN(Ft)?120:Ft),Vt!=null&&(e.cellEditor.restoreSelection(Vt),Vt=null);for(var kt=e.getSelectedElement(),wt=kt;wt!=null&&wt.nodeType!=mxConstants$1.NODETYPE_ELEMENT;)wt=wt.parentNode;wt!=null&&wt==e.cellEditor.textarea&&e.cellEditor.textarea.firstChild!=null&&(e.cellEditor.textarea.firstChild.nodeName!="P"&&(e.cellEditor.textarea.innerHTML="<p>"+e.cellEditor.textarea.innerHTML+"</p>"),wt=e.cellEditor.textarea.firstChild),wt!=null&&e.cellEditor.textarea!=null&&wt!=e.cellEditor.textarea&&e.cellEditor.textarea.contains(wt)&&(wt.style.lineHeight=Ft+"%"),St.value=Ft+" %"},function(St){Kt=St,mxEvent$1.addListener(St,"mousedown",function(){document.activeElement==e.cellEditor.textarea&&(Vt=e.cellEditor.saveSelection())}),mxEvent$1.addListener(St,"touchstart",function(){document.activeElement==e.cellEditor.textarea&&(Vt=e.cellEditor.saveSelection())}),St.value="120 %"}));var Jt=l.cloneNode(!1);Jt.style.paddingLeft="0px";var re=this.editorUi.toolbar.addItems(["link","image"],Jt,!0),Y=[this.editorUi.toolbar.addButton("geSprite-horizontalrule",mxResources$1.get("insertHorizontalRule"),function(){document.execCommand("inserthorizontalrule",!1)},Jt),this.editorUi.toolbar.addMenuFunctionInContainer(Jt,"geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(St){this.editorUi.menus.addInsertTableItem(St)}))];this.styleButtons(re),this.styleButtons(Y);var jt=this.createPanel();jt.style.paddingTop="10px",jt.style.paddingBottom="10px",jt.appendChild(this.createTitle(mxResources$1.get("insert"))),jt.appendChild(Jt),a.appendChild(jt),mxClient.IS_QUIRKS&&(jt.style.height="70");var ee=l.cloneNode(!1);ee.style.paddingLeft="0px";var Y=[this.editorUi.toolbar.addButton("geSprite-insertcolumnbefore",mxResources$1.get("insertColumnBefore"),mxUtils$1.bind(this,function(){try{j!=null&&e.insertColumn(j,X!=null?X.cellIndex:0)}catch(St){this.editorUi.handleError(St)}}),ee),this.editorUi.toolbar.addButton("geSprite-insertcolumnafter",mxResources$1.get("insertColumnAfter"),mxUtils$1.bind(this,function(){try{j!=null&&e.insertColumn(j,X!=null?X.cellIndex+1:-1)}catch(St){this.editorUi.handleError(St)}}),ee),this.editorUi.toolbar.addButton("geSprite-deletecolumn",mxResources$1.get("deleteColumn"),mxUtils$1.bind(this,function(){try{j!=null&&X!=null&&e.deleteColumn(j,X.cellIndex)}catch(St){this.editorUi.handleError(St)}}),ee),this.editorUi.toolbar.addButton("geSprite-insertrowbefore",mxResources$1.get("insertRowBefore"),mxUtils$1.bind(this,function(){try{j!=null&&rt!=null&&e.insertRow(j,rt.sectionRowIndex)}catch(St){this.editorUi.handleError(St)}}),ee),this.editorUi.toolbar.addButton("geSprite-insertrowafter",mxResources$1.get("insertRowAfter"),mxUtils$1.bind(this,function(){try{j!=null&&rt!=null&&e.insertRow(j,rt.sectionRowIndex+1)}catch(St){this.editorUi.handleError(St)}}),ee),this.editorUi.toolbar.addButton("geSprite-deleterow",mxResources$1.get("deleteRow"),mxUtils$1.bind(this,function(){try{j!=null&&rt!=null&&e.deleteRow(j,rt.sectionRowIndex)}catch(St){this.editorUi.handleError(St)}}),ee)];this.styleButtons(Y),Y[2].style.marginRight="9px";var he=this.createPanel();he.style.paddingTop="10px",he.style.paddingBottom="10px",he.appendChild(this.createTitle(mxResources$1.get("table"))),he.appendChild(ee),mxClient.IS_QUIRKS&&(mxUtils$1.br(a),he.style.height="70");var ae=l.cloneNode(!1);ae.style.paddingLeft="0px";var Y=[this.editorUi.toolbar.addButton("geSprite-strokecolor",mxResources$1.get("borderColor"),mxUtils$1.bind(this,function(St){if(j!=null){var Ft=j.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(kt,wt,te,se){return"#"+("0"+Number(wt).toString(16)).substr(-2)+("0"+Number(te).toString(16)).substr(-2)+("0"+Number(se).toString(16)).substr(-2)});this.editorUi.pickColor(Ft,function(kt){var wt=X!=null&&(St==null||!mxEvent$1.isShiftDown(St))?X:j;e.processElements(wt,function(te){te.style.border=null}),kt==null||kt==mxConstants$1.NONE?(wt.removeAttribute("border"),wt.style.border="",wt.style.borderCollapse=""):(wt.setAttribute("border","1"),wt.style.border="1px solid "+kt,wt.style.borderCollapse="collapse")})}}),ae),this.editorUi.toolbar.addButton("geSprite-fillcolor",mxResources$1.get("backgroundColor"),mxUtils$1.bind(this,function(St){if(j!=null){var Ft=j.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(kt,wt,te,se){return"#"+("0"+Number(wt).toString(16)).substr(-2)+("0"+Number(te).toString(16)).substr(-2)+("0"+Number(se).toString(16)).substr(-2)});this.editorUi.pickColor(Ft,function(kt){var wt=X!=null&&(St==null||!mxEvent$1.isShiftDown(St))?X:j;e.processElements(wt,function(te){te.style.backgroundColor=null}),kt==null||kt==mxConstants$1.NONE?wt.style.backgroundColor="":wt.style.backgroundColor=kt})}}),ae),this.editorUi.toolbar.addButton("geSprite-fit",mxResources$1.get("spacing"),function(){if(j!=null){var St=j.getAttribute("cellPadding")||0,Ft=new FilenameDialog(i,St,mxResources$1.get("apply"),mxUtils$1.bind(this,function(kt){kt!=null&&kt.length>0?j.setAttribute("cellPadding",kt):j.removeAttribute("cellPadding")}),mxResources$1.get("spacing"));i.showDialog(Ft.container,300,80,!0,!0),Ft.init()}},ae),this.editorUi.toolbar.addButton("geSprite-left",mxResources$1.get("left"),function(){j!=null&&j.setAttribute("align","left")},ae),this.editorUi.toolbar.addButton("geSprite-center",mxResources$1.get("center"),function(){j!=null&&j.setAttribute("align","center")},ae),this.editorUi.toolbar.addButton("geSprite-right",mxResources$1.get("right"),function(){j!=null&&j.setAttribute("align","right")},ae)];this.styleButtons(Y),Y[2].style.marginRight="9px",mxClient.IS_QUIRKS&&(mxUtils$1.br(he),mxUtils$1.br(he)),he.appendChild(ae),a.appendChild(he),q=he}function Xt(Gt,St){mxClient.IS_IE&&(mxClient.IS_QUIRKS||document.documentMode<10)?Gt.style.filter=St?"progid:DXImageTransform.Microsoft.Gradient(StartColorStr='#c5ecff', EndColorStr='#87d4fb', GradientType=0)":"":Gt.style.backgroundImage=St?"linear-gradient(#c5ecff 0px,#87d4fb 100%)":""}var ge=mxUtils$1.bind(this,function(Gt,St,Ft){n=this.format.getSelectionState();var kt=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTSTYLE,0);if(Xt(m[0],(kt&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD),Xt(m[1],(kt&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC),Xt(m[2],(kt&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE),u.firstChild.nodeValue=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTFAMILY,12),Xt(g,mxUtils$1.getValue(n.style,mxConstants$1.STYLE_HORIZONTAL,"1")=="0"),Ft||document.activeElement!=ct){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_FONTSIZE,12));ct.value=isNaN(wt)?"":wt+" pt"}var te=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER);Xt(C,te==mxConstants$1.ALIGN_LEFT),Xt(E,te==mxConstants$1.ALIGN_CENTER),Xt(b,te==mxConstants$1.ALIGN_RIGHT);var se=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_VERTICAL_ALIGN,mxConstants$1.ALIGN_MIDDLE);Xt($,se==mxConstants$1.ALIGN_TOP),Xt(P,se==mxConstants$1.ALIGN_MIDDLE),Xt(M,se==mxConstants$1.ALIGN_BOTTOM);var ie=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_LABEL_POSITION,mxConstants$1.ALIGN_CENTER),ue=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_VERTICAL_LABEL_POSITION,mxConstants$1.ALIGN_MIDDLE);ie==mxConstants$1.ALIGN_LEFT&&ue==mxConstants$1.ALIGN_TOP?J.value="topLeft":ie==mxConstants$1.ALIGN_CENTER&&ue==mxConstants$1.ALIGN_TOP?J.value="top":ie==mxConstants$1.ALIGN_RIGHT&&ue==mxConstants$1.ALIGN_TOP?J.value="topRight":ie==mxConstants$1.ALIGN_LEFT&&ue==mxConstants$1.ALIGN_BOTTOM?J.value="bottomLeft":ie==mxConstants$1.ALIGN_CENTER&&ue==mxConstants$1.ALIGN_BOTTOM?J.value="bottom":ie==mxConstants$1.ALIGN_RIGHT&&ue==mxConstants$1.ALIGN_BOTTOM?J.value="bottomRight":ie==mxConstants$1.ALIGN_LEFT?J.value="left":ie==mxConstants$1.ALIGN_RIGHT?J.value="right":J.value="center";var oe=mxUtils$1.getValue(n.style,mxConstants$1.STYLE_TEXT_DIRECTION,mxConstants$1.DEFAULT_TEXT_DIRECTION);if(oe==mxConstants$1.TEXT_DIRECTION_RTL?ht.value="rightToLeft":oe==mxConstants$1.TEXT_DIRECTION_LTR?ht.value="leftToRight":oe==mxConstants$1.TEXT_DIRECTION_AUTO&&(ht.value="automatic"),Ft||document.activeElement!=Lt){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING,2));Lt.value=isNaN(wt)?"":wt+" pt"}if(Ft||document.activeElement!=mt){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_TOP,0));mt.value=isNaN(wt)?"":wt+" pt"}if(Ft||document.activeElement!=Mt){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_RIGHT,0));Mt.value=isNaN(wt)?"":wt+" pt"}if(Ft||document.activeElement!=Ut){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_BOTTOM,0));Ut.value=isNaN(wt)?"":wt+" pt"}if(Ft||document.activeElement!=Ct){var wt=parseFloat(mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SPACING_LEFT,0));Ct.value=isNaN(wt)?"":wt+" pt"}});if(V=this.installInputHandler(Lt,mxConstants$1.STYLE_SPACING,2,-999,999," pt"),_=this.installInputHandler(mt,mxConstants$1.STYLE_SPACING_TOP,0,-999,999," pt"),at=this.installInputHandler(Mt,mxConstants$1.STYLE_SPACING_RIGHT,0,-999,999," pt"),ot=this.installInputHandler(Ut,mxConstants$1.STYLE_SPACING_BOTTOM,0,-999,999," pt"),W=this.installInputHandler(Ct,mxConstants$1.STYLE_SPACING_LEFT,0,-999,999," pt"),this.addKeyHandler(ct,ge),this.addKeyHandler(Lt,ge),this.addKeyHandler(mt,ge),this.addKeyHandler(Mt,ge),this.addKeyHandler(Ut,ge),this.addKeyHandler(Ct,ge),e.getModel().addListener(mxEvent$1.CHANGE,ge),this.listeners.push({destroy:function(){e.getModel().removeListener(ge)}}),ge(),e.cellEditor.isContentEditing()){var Ee=!1,fe=function(){Ee||(Ee=!0,window.setTimeout(function(){var Gt=e.getSelectedEditingElement();if(Gt!=null){let be=function(f,R,U){if(U.style!=null&&R!=null){var y=R.lineHeight;return U.style.lineHeight!=null&&U.style.lineHeight.substring(U.style.lineHeight.length-1)=="%"?parseInt(U.style.lineHeight)/100:y.substring(y.length-2)=="px"?parseFloat(y)/f:parseInt(y)}else return""},Ae=function(f){var R=f!=null?f.fontSize:null;return R!=null&&R.substring(R.length-2)=="px"?parseFloat(R):mxConstants$1.DEFAULT_FONTSIZE},ce=function(f){if(e.getParentByName(Gt,f,e.cellEditor.textarea)!=null)return!0;for(var R=Gt;R!=null&&R.childNodes.length==1;)if(R=R.childNodes[0],R.nodeName==f)return!0;return!1},xe=function(f,R){if(f!=null&&R!=null){if(f==R)return!0;if(f.length>R.length+1)return f.substring(f.length-R.length-1,f.length)=="-"+R}return!1};var _e=be,Ge=Ae,ke=ce,Ne=xe,St=mxUtils$1.getCurrentStyle(Gt),Ft=Ae(St),kt=be(Ft,St,Gt),wt=Gt.getElementsByTagName("*");if(wt.length>0&&window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11){for(var te=window.getSelection(),se=0;se<wt.length;se++)if(te.containsNode(wt[se],!0)){var ie=mxUtils$1.getCurrentStyle(wt[se]);Ft=Math.max(Ae(ie),Ft);var ue=be(Ft,ie,wt[se]);(ue!=kt||isNaN(ue))&&(kt="")}}if(St!=null){if(Xt(m[0],St.fontWeight=="bold"||St.fontWeight>400||ce("B")||ce("STRONG")),Xt(m[1],St.fontStyle=="italic"||ce("I")||ce("EM")),Xt(m[2],ce("U")),Xt(k,ce("SUP")),Xt(D,ce("SUB")),e.cellEditor.isTableSelected())Xt(Z,xe(St.textAlign,"justify")),Xt(C,xe(St.textAlign,"left")),Xt(E,xe(St.textAlign,"center")),Xt(b,xe(St.textAlign,"right"));else{var oe=e.cellEditor.align||mxUtils$1.getValue(n.style,mxConstants$1.STYLE_ALIGN,mxConstants$1.ALIGN_CENTER);xe(St.textAlign,"justify")?(Xt(Z,xe(St.textAlign,"justify")),Xt(C,!1),Xt(E,!1),Xt(b,!1)):(Xt(Z,!1),Xt(C,oe==mxConstants$1.ALIGN_LEFT),Xt(E,oe==mxConstants$1.ALIGN_CENTER),Xt(b,oe==mxConstants$1.ALIGN_RIGHT))}if(j=e.getParentByName(Gt,"TABLE",e.cellEditor.textarea),rt=j==null?null:e.getParentByName(Gt,"TR",j),X=j==null?null:e.getParentByNames(Gt,["TD","TH"],j),q.style.display=j!=null?"":"none",document.activeElement!=ct){Gt.nodeName=="FONT"&&Gt.getAttribute("size")=="4"&&Et!=null?(Gt.removeAttribute("size"),Gt.style.fontSize=Et+" pt",Et=null):ct.value=isNaN(Ft)?"":Ft+" pt";var ue=parseFloat(kt);isNaN(ue)?Kt.value="100 %":Kt.value=Math.round(ue*100)+" %"}var Se=St.color.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(f,R,U,y){return"#"+("0"+Number(R).toString(16)).substr(-2)+("0"+Number(U).toString(16)).substr(-2)+("0"+Number(y).toString(16)).substr(-2)}),Le=St.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(f,R,U,y){return"#"+("0"+Number(R).toString(16)).substr(-2)+("0"+Number(U).toString(16)).substr(-2)+("0"+Number(y).toString(16)).substr(-2)});_t!=null&&(Se.charAt(0)=="#"?Rt=Se:Rt="#000000",_t(Rt,!0)),lt!=null&&(Le.charAt(0)=="#"?yt=Le:yt=null,lt(yt,!0)),u.firstChild!=null&&(u.firstChild.nodeValue=Graph$1.stripQuotes(St.fontFamily))}}Ee=!1},0))};(mxClient.IS_FF||mxClient.IS_EDGE||mxClient.IS_IE||mxClient.IS_IE11)&&mxEvent$1.addListener(e.cellEditor.textarea,"DOMSubtreeModified",fe),mxEvent$1.addListener(e.cellEditor.textarea,"input",fe),mxEvent$1.addListener(e.cellEditor.textarea,"touchend",fe),mxEvent$1.addListener(e.cellEditor.textarea,"mouseup",fe),mxEvent$1.addListener(e.cellEditor.textarea,"keyup",fe),this.listeners.push({destroy:function(){}}),fe()}return a};let StyleFormatPanel$1=class extends BaseFormatPanel{constructor(i,t,e){super(i,t,e),this.init()}};StyleFormatPanel$1.prototype.defaultStrokeColor="black";StyleFormatPanel$1.prototype.init=function(){var a=this.editorUi,i=a.editor;i.graph;var t=this.format.getSelectionState();if(!t.containsLabel){t.containsImage&&t.vertices.length==1&&t.style.shape=="image"&&t.style.image!=null&&t.style.image.substring(0,19)=="data:image/svg+xml;"&&this.container.appendChild(this.addSvgStyles(this.createPanel())),(!t.containsImage||t.style.shape=="image")&&this.container.appendChild(this.addFill(this.createPanel())),this.container.appendChild(this.addStroke(this.createPanel())),this.container.appendChild(this.addLineJumps(this.createPanel()));var e=this.createRelativeOption(mxResources$1.get("opacity"),mxConstants$1.STYLE_OPACITY,41);e.style.paddingTop="8px",e.style.paddingBottom="8px",this.container.appendChild(e),this.container.appendChild(this.addEffects(this.createPanel()))}var n=this.addEditOps(this.createPanel());n.firstChild!=null&&mxUtils$1.br(n),this.container.appendChild(this.addStyleOps(n))};StyleFormatPanel$1.prototype.getCssRules=function(a){var i=document.implementation.createHTMLDocument(""),t=document.createElement("style");return mxUtils$1.setTextContent(t,a),i.body.appendChild(t),t.sheet.cssRules};StyleFormatPanel$1.prototype.addSvgStyles=function(a){var i=this.editorUi;i.editor.graph;var t=this.format.getSelectionState();a.style.paddingTop="6px",a.style.paddingBottom="6px",a.style.fontWeight="bold",a.style.display="none";try{var e=t.style.editableCssRules;if(e!=null){var n=new RegExp(e),s=t.style.image.substring(t.style.image.indexOf(",")+1),l=window.atob?atob(s):Base64.decode(s,!0),r=mxUtils$1.parseXml(l);if(r!=null)for(var o=r.getElementsByTagName("style"),h=0;h<o.length;h++)for(var u=this.getCssRules(mxUtils$1.getTextContent(o[h])),d=0;d<u.length;d++)this.addSvgRule(a,u[d],r,o[h],u,d,n)}}catch{}return a};StyleFormatPanel$1.prototype.addSvgRule=function(a,i,t,e,n,s,l){var r=this.editorUi,o=r.editor.graph;if(l.test(i.selectorText)){let d=function(m){return m=m.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),m&&m.length===4?"#"+("0"+parseInt(m[1],10).toString(16)).slice(-2)+("0"+parseInt(m[2],10).toString(16)).slice(-2)+("0"+parseInt(m[3],10).toString(16)).slice(-2):""};var u=d,h=mxUtils$1.bind(this,function(m,g,x){var v=mxUtils$1.trim(m.style[g]);if(v!=""&&v.substring(0,4)!="url("){var C=this.createColorOption(x+" "+m.selectorText,function(){return d(v)},function(E){n[s].style[g]=E;for(var b="",w=0;w<n.length;w++)b+=n[w].cssText+" ";e.textContent=b;var $=mxUtils$1.getXml(t.documentElement);o.setCellStyles(mxConstants$1.STYLE_IMAGE,"data:image/svg+xml,"+(window.btoa?btoa($):Base64.encode($,!0)),o.getSelectionCells())},"#ffffff",{install:function(E){},destroy:function(){}});a.appendChild(C),a.style.display=""}});h(i,"fill",mxResources$1.get("fill")),h(i,"stroke",mxResources$1.get("line")),h(i,"stop-color",mxResources$1.get("gradient"))}};StyleFormatPanel$1.prototype.addEditOps=function(a){var i=this.format.getSelectionState(),t=null;if(this.editorUi.editor.graph.getSelectionCount()==1&&(t=mxUtils$1.button(mxResources$1.get("editStyle"),mxUtils$1.bind(this,function(n){this.editorUi.actions.get("editStyle").funct()})),t.setAttribute("title",mxResources$1.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),t.style.width="202px",t.style.marginBottom="2px",a.appendChild(t)),i.image){var e=mxUtils$1.button(mxResources$1.get("editImage"),mxUtils$1.bind(this,function(n){this.editorUi.actions.get("image").funct()}));e.setAttribute("title",mxResources$1.get("editImage")),e.style.marginBottom="2px",t==null?e.style.width="202px":(t.style.width="100px",e.style.width="100px",e.style.marginLeft="2px"),a.appendChild(e)}return a};StyleFormatPanel$1.prototype.addFill=function(a){var i=this.editorUi,t=i.editor.graph,e=this.format.getSelectionState();a.style.paddingTop="6px",a.style.paddingBottom="6px";var n=document.createElement("select");n.style.position="absolute",n.style.marginTop="-2px",n.style.right=mxClient.IS_QUIRKS?"52px":"72px",n.style.width="70px";var s=n.cloneNode(!1);mxEvent$1.addListener(n,"click",function(b){mxEvent$1.consume(b)}),mxEvent$1.addListener(s,"click",function(b){mxEvent$1.consume(b)});var h=e.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),l=this.createCellColorOption(mxResources$1.get("gradient"),mxConstants$1.STYLE_GRADIENTCOLOR,h[mxConstants$1.STYLE_GRADIENTCOLOR]!=null?h[mxConstants$1.STYLE_GRADIENTCOLOR]:"#ffffff",function(b){b==null||b==mxConstants$1.NONE?n.style.display="none":n.style.display=""},function(b){t.updateCellStyles(mxConstants$1.STYLE_GRADIENTCOLOR,b,t.getSelectionCells())}),r=e.style.shape=="image"?mxConstants$1.STYLE_IMAGE_BACKGROUND:mxConstants$1.STYLE_FILLCOLOR,o=e.style.shape=="image"?mxResources$1.get("background"):mxResources$1.get("fill"),h=e.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),u=this.createCellColorOption(o,r,h[r]!=null?h[r]:"#ffffff",null,mxUtils$1.bind(this,function(b){t.updateCellStyles(r,b,t.getSelectionCells())}));u.style.fontWeight="bold";var d=mxUtils$1.getValue(e.style,r,null);l.style.display=d!=null&&d!=mxConstants$1.NONE&&e.fill&&e.style.shape!="image"?"":"none";for(var m=[mxConstants$1.DIRECTION_NORTH,mxConstants$1.DIRECTION_EAST,mxConstants$1.DIRECTION_SOUTH,mxConstants$1.DIRECTION_WEST],g=0;g<m.length;g++){var x=document.createElement("option");x.setAttribute("value",m[g]),mxUtils$1.write(x,mxResources$1.get(m[g])),n.appendChild(x)}l.appendChild(n);for(var g=0;g<Editor$1.roughFillStyles.length;g++){var v=document.createElement("option");v.setAttribute("value",Editor$1.roughFillStyles[g].val),mxUtils$1.write(v,Editor$1.roughFillStyles[g].dispName),s.appendChild(v)}u.appendChild(s);var C=mxUtils$1.bind(this,function(){e=this.format.getSelectionState();var b=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_GRADIENT_DIRECTION,mxConstants$1.DIRECTION_SOUTH),w=mxUtils$1.getValue(e.style,"fillStyle","auto");b==""&&(b=mxConstants$1.DIRECTION_SOUTH),n.value=b,s.value=w,a.style.display=e.fill?"":"none";var $=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_FILLCOLOR,null);!e.fill||e.containsImage||$==null||$==mxConstants$1.NONE||e.style.shape=="filledEdge"?(s.style.display="none",l.style.display="none"):(s.style.display=e.style.sketch=="1"?"":"none",l.style.display=e.style.sketch!="1"||w=="solid"||w=="auto"?"":"none")});t.getModel().addListener(mxEvent$1.CHANGE,C),this.listeners.push({destroy:function(){t.getModel().removeListener(C)}}),C(),mxEvent$1.addListener(n,"change",function(b){t.setCellStyles(mxConstants$1.STYLE_GRADIENT_DIRECTION,n.value,t.getSelectionCells()),mxEvent$1.consume(b)}),mxEvent$1.addListener(s,"change",function(b){t.setCellStyles("fillStyle",s.value,t.getSelectionCells()),mxEvent$1.consume(b)}),a.appendChild(u),a.appendChild(l);for(var E=this.getCustomColors(),g=0;g<E.length;g++)a.appendChild(this.createCellColorOption(E[g].title,E[g].key,E[g].defaultValue));return a};StyleFormatPanel$1.prototype.getCustomColors=function(){var a=this.format.getSelectionState(),i=[];return(a.style.shape=="swimlane"||a.style.shape=="table")&&i.push({title:mxResources$1.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),i};StyleFormatPanel$1.prototype.addStroke=function(a){var i=this.editorUi,t=i.editor.graph,e=this.format.getSelectionState();a.style.paddingTop="4px",a.style.paddingBottom="4px",a.style.whiteSpace="normal";var n=document.createElement("div");n.style.fontWeight="bold",e.stroke||(n.style.display="none");var s=document.createElement("select");s.style.position="absolute",s.style.marginTop="-2px",s.style.right="72px",s.style.width="80px";for(var l=["sharp","rounded","curved"],r=0;r<l.length;r++){var o=document.createElement("option");o.setAttribute("value",l[r]),mxUtils$1.write(o,mxResources$1.get(l[r])),s.appendChild(o)}mxEvent$1.addListener(s,"change",function(lt){t.getModel().beginUpdate();try{var yt=[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],_t=["0",null];s.value=="rounded"?_t=["1",null]:s.value=="curved"&&(_t=[null,"1"]);for(var Rt=0;Rt<yt.length;Rt++)t.setCellStyles(yt[Rt],_t[Rt],t.getSelectionCells());i.fireEvent(new mxEventObject$1("styleChanged","keys",yt,"values",_t,"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}mxEvent$1.consume(lt)}),mxEvent$1.addListener(s,"click",function(lt){mxEvent$1.consume(lt)});var h=e.style.shape=="image"?mxConstants$1.STYLE_IMAGE_BORDER:mxConstants$1.STYLE_STROKECOLOR,u=e.style.shape=="image"?mxResources$1.get("border"):mxResources$1.get("line"),d=e.vertices.length>=1?t.stylesheet.getDefaultVertexStyle():t.stylesheet.getDefaultEdgeStyle(),m=this.createCellColorOption(u,h,d[h]!=null?d[h]:"#000000",null,mxUtils$1.bind(this,function(lt){t.updateCellStyles(h,lt,t.getSelectionCells())}));m.appendChild(s),n.appendChild(m);var g=n.cloneNode(!1);g.style.fontWeight="normal",g.style.whiteSpace="nowrap",g.style.position="relative",g.style.paddingLeft="16px",g.style.marginBottom="2px",g.style.marginTop="2px",g.className="geToolbarContainer";var x=mxUtils$1.bind(this,function(lt,yt,_t,Rt,Yt){var Zt=this.editorUi.menus.styleChange(lt,"",Rt,Yt,"geIcon",null),Qt=document.createElement("div");return Qt.style.width=yt+"px",Qt.style.height="1px",Qt.style.borderBottom="1px "+_t+" "+this.defaultStrokeColor,Qt.style.paddingTop="6px",Zt.firstChild.firstChild.style.padding="0px 4px 0px 4px",Zt.firstChild.firstChild.style.width=yt+"px",Zt.firstChild.firstChild.appendChild(Qt),Zt}),v=this.editorUi.toolbar.addMenuFunctionInContainer(g,"geSprite-orthogonal",mxResources$1.get("pattern"),!1,mxUtils$1.bind(this,function(lt){x(lt,75,"solid",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources$1.get("solid")),x(lt,75,"dashed",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources$1.get("dashed")),x(lt,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources$1.get("dotted")+" (1)"),x(lt,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources$1.get("dotted")+" (2)"),x(lt,75,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources$1.get("dotted")+" (3)")})),C=g.cloneNode(!1),E=this.editorUi.toolbar.addMenuFunctionInContainer(C,"geSprite-connection",mxResources$1.get("connection"),!1,mxUtils$1.bind(this,function(lt){this.editorUi.menus.styleChange(lt,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources$1.get("line")),this.editorUi.menus.styleChange(lt,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources$1.get("link")),this.editorUi.menus.styleChange(lt,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources$1.get("arrow")),this.editorUi.menus.styleChange(lt,"",[mxConstants$1.STYLE_SHAPE,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources$1.get("simpleArrow"))})),b=this.editorUi.toolbar.addMenuFunctionInContainer(C,"geSprite-orthogonal",mxResources$1.get("pattern"),!1,mxUtils$1.bind(this,function(lt){x(lt,33,"solid",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources$1.get("solid")),x(lt,33,"dashed",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources$1.get("dashed")),x(lt,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources$1.get("dotted")+" (1)"),x(lt,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources$1.get("dotted")+" (2)"),x(lt,33,"dotted",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources$1.get("dotted")+" (3)")})),w=g.cloneNode(!1),$=document.createElement("input");$.style.textAlign="right",$.style.marginTop="2px",$.style.width="41px",$.setAttribute("title",mxResources$1.get("linewidth")),g.appendChild($);var P=$.cloneNode(!0);C.appendChild(P);function M(lt){var yt=parseInt($.value);yt=Math.min(999,Math.max(1,isNaN(yt)?1:yt)),yt!=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STROKEWIDTH,1)&&(t.setCellStyles(mxConstants$1.STYLE_STROKEWIDTH,yt,t.getSelectionCells()),i.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_STROKEWIDTH],"values",[yt],"cells",t.getSelectionCells()))),$.value=yt+" pt",mxEvent$1.consume(lt)}function D(lt){var yt=parseInt(P.value);yt=Math.min(999,Math.max(1,isNaN(yt)?1:yt)),yt!=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STROKEWIDTH,1)&&(t.setCellStyles(mxConstants$1.STYLE_STROKEWIDTH,yt,t.getSelectionCells()),i.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_STROKEWIDTH],"values",[yt],"cells",t.getSelectionCells()))),P.value=yt+" pt",mxEvent$1.consume(lt)}var k=this.createStepper($,M,1,9);k.style.display=$.style.display,k.style.marginTop="2px",g.appendChild(k);var Z=this.createStepper(P,D,1,9);Z.style.display=P.style.display,Z.style.marginTop="2px",C.appendChild(Z),mxClient.IS_QUIRKS?($.style.height="17px",P.style.height="17px"):($.style.position="absolute",$.style.height="15px",$.style.left="141px",k.style.left="190px",P.style.position="absolute",P.style.left="141px",P.style.height="15px",Z.style.left="190px"),mxEvent$1.addListener($,"blur",M),mxEvent$1.addListener($,"change",M),mxEvent$1.addListener(P,"blur",D),mxEvent$1.addListener(P,"change",D),mxClient.IS_QUIRKS&&(mxUtils$1.br(w),mxUtils$1.br(w));var q=this.editorUi.toolbar.addMenuFunctionInContainer(w,"geSprite-orthogonal",mxResources$1.get("waypoints"),!1,mxUtils$1.bind(this,function(lt){e.style.shape!="arrow"&&(this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources$1.get("straight")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources$1.get("orthogonal")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),e.style.shape=="connector"&&this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources$1.get("curved")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources$1.get("entityRelation")))})),j=this.editorUi.toolbar.addMenuFunctionInContainer(w,"geSprite-startclassic",mxResources$1.get("linestart"),!1,mxUtils$1.bind(this,function(lt){if(e.style.shape=="connector"||e.style.shape=="flexArrow"||e.style.shape=="filledEdge"){var yt=this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.NONE,0],"geIcon",null,!1);yt.setAttribute("title",mxResources$1.get("none")),yt.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils$1.htmlEntities(mxResources$1.get("none"))+"</font>",e.style.shape=="connector"||e.style.shape=="filledEdge"?(this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC,1],"geIcon geSprite geSprite-startclassic",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-startclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OPEN,0],"geIcon geSprite geSprite-startopen",null,!1).setAttribute("title",mxResources$1.get("openArrow")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-startopenthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["openAsync",0],"geIcon geSprite geSprite-startopenasync",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK,1],"geIcon geSprite geSprite-startblock",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-startblockthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["async",1],"geIcon geSprite geSprite-startasync",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OVAL,1],"geIcon geSprite geSprite-startoval",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND,1],"geIcon geSprite geSprite-startdiamond",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-startthindiamond",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC,0],"geIcon geSprite geSprite-startclassictrans",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-startclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK,0],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-startblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["async",0],"geIcon geSprite geSprite-startasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_OVAL,0],"geIcon geSprite geSprite-startovaltrans",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND,0],"geIcon geSprite geSprite-startdiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],[mxConstants$1.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-startthindiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["box",0],"geIcon geSprite geSvgSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["dash",0],"geIcon geSprite geSprite-startdash",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["cross",0],"geIcon geSprite geSprite-startcross",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["circlePlus",0],"geIcon geSprite geSprite-startcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["circle",1],"geIcon geSprite geSprite-startcircle",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERone",0],"geIcon geSprite geSprite-starterone",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERmandOne",0],"geIcon geSprite geSprite-starteronetoone",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERmany",0],"geIcon geSprite geSprite-startermany",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERoneToMany",0],"geIcon geSprite geSprite-starteronetomany",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-starteroneopt",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW,"startFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-startermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_STARTARROW],[mxConstants$1.ARROW_BLOCK],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources$1.get("block"))}})),X=this.editorUi.toolbar.addMenuFunctionInContainer(w,"geSprite-endclassic",mxResources$1.get("lineend"),!1,mxUtils$1.bind(this,function(lt){if(e.style.shape=="connector"||e.style.shape=="flexArrow"||e.style.shape=="filledEdge"){var yt=this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.NONE,0],"geIcon",null,!1);yt.setAttribute("title",mxResources$1.get("none")),yt.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils$1.htmlEntities(mxResources$1.get("none"))+"</font>",e.style.shape=="connector"||e.style.shape=="filledEdge"?(this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC,1],"geIcon geSprite geSprite-endclassic",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-endclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OPEN,0],"geIcon geSprite geSprite-endopen",null,!1).setAttribute("title",mxResources$1.get("openArrow")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-endopenthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["openAsync",0],"geIcon geSprite geSprite-endopenasync",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK,1],"geIcon geSprite geSprite-endblock",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-endblockthin",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["async",1],"geIcon geSprite geSprite-endasync",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OVAL,1],"geIcon geSprite geSprite-endoval",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND,1],"geIcon geSprite geSprite-enddiamond",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-endthindiamond",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC,0],"geIcon geSprite geSprite-endclassictrans",null,!1).setAttribute("title",mxResources$1.get("classic")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-endclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK,0],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources$1.get("block")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-endblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["async",0],"geIcon geSprite geSprite-endasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_OVAL,0],"geIcon geSprite geSprite-endovaltrans",null,!1).setAttribute("title",mxResources$1.get("oval")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND,0],"geIcon geSprite geSprite-enddiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamond")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],[mxConstants$1.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-endthindiamondtrans",null,!1).setAttribute("title",mxResources$1.get("diamondThin")),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["box",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["dash",0],"geIcon geSprite geSprite-enddash",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["cross",0],"geIcon geSprite geSprite-endcross",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["circlePlus",0],"geIcon geSprite geSprite-endcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["circle",1],"geIcon geSprite geSprite-endcircle",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERone",0],"geIcon geSprite geSprite-enderone",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERmandOne",0],"geIcon geSprite geSprite-enderonetoone",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERmany",0],"geIcon geSprite geSprite-endermany",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERoneToMany",0],"geIcon geSprite geSprite-enderonetomany",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-enderoneopt",null,!1),this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW,"endFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-endermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(lt,"",[mxConstants$1.STYLE_ENDARROW],[mxConstants$1.ARROW_BLOCK],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources$1.get("block"))}}));this.addArrow(E,8),this.addArrow(q),this.addArrow(j),this.addArrow(X);var rt=this.addArrow(v,9);rt.className="geIcon",rt.style.width="auto";var et=this.addArrow(b,9);et.className="geIcon",et.style.width="22px";var Y=document.createElement("div");Y.style.width="85px",Y.style.height="1px",Y.style.borderBottom="1px solid "+this.defaultStrokeColor,Y.style.marginBottom="9px",rt.appendChild(Y);var G=document.createElement("div");G.style.width="23px",G.style.height="1px",G.style.borderBottom="1px solid "+this.defaultStrokeColor,G.style.marginBottom="9px",et.appendChild(G),v.style.height="15px",b.style.height="15px",E.style.height="15px",q.style.height="17px",j.style.marginLeft="3px",j.style.height="17px",X.style.marginLeft="3px",X.style.height="17px",a.appendChild(n),a.appendChild(C),a.appendChild(g);var J=g.cloneNode(!1);J.style.paddingBottom="6px",J.style.paddingTop="4px",J.style.fontWeight="normal";var Et=document.createElement("div");Et.style.position="absolute",Et.style.marginLeft="3px",Et.style.marginBottom="12px",Et.style.marginTop="2px",Et.style.fontWeight="normal",Et.style.width="76px",mxUtils$1.write(Et,mxResources$1.get("lineend")),J.appendChild(Et);var tt,gt,dt=this.addUnitInput(J,"pt",74,33,function(){tt.apply(this,arguments)}),K=this.addUnitInput(J,"pt",20,33,function(){gt.apply(this,arguments)});mxUtils$1.br(J);var nt=document.createElement("div");nt.style.height="8px",J.appendChild(nt),Et=Et.cloneNode(!1),mxUtils$1.write(Et,mxResources$1.get("linestart")),J.appendChild(Et);var ht,bt,$t=this.addUnitInput(J,"pt",74,33,function(){ht.apply(this,arguments)}),Dt=this.addUnitInput(J,"pt",20,33,function(){bt.apply(this,arguments)});mxUtils$1.br(J),this.addLabel(J,mxResources$1.get("spacing"),74,50),this.addLabel(J,mxResources$1.get("size"),20,50),mxUtils$1.br(J);var ct=n.cloneNode(!1);ct.style.fontWeight="normal",ct.style.position="relative",ct.style.paddingLeft="16px",ct.style.marginBottom="2px",ct.style.marginTop="6px",ct.style.borderWidth="0px",ct.style.paddingBottom="18px";var Et=document.createElement("div");Et.style.position="absolute",Et.style.marginLeft="3px",Et.style.marginBottom="12px",Et.style.marginTop="1px",Et.style.fontWeight="normal",Et.style.width="120px",mxUtils$1.write(Et,mxResources$1.get("perimeter")),ct.appendChild(Et);var Ht,Ot=this.addUnitInput(ct,"pt",20,41,function(){Ht.apply(this,arguments)});e.edges.length==t.getSelectionCount()?(a.appendChild(w),mxClient.IS_QUIRKS&&(mxUtils$1.br(a),mxUtils$1.br(a)),a.appendChild(J)):e.vertices.length==t.getSelectionCount()&&(mxClient.IS_QUIRKS&&mxUtils$1.br(a),a.appendChild(ct));var Nt=mxUtils$1.bind(this,function(lt,yt,_t){if(e=this.format.getSelectionState(),mxUtils$1.getValue(e.style,h,null),_t||document.activeElement!=$){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STROKEWIDTH,1));$.value=isNaN(Rt)?"":Rt+" pt"}if(_t||document.activeElement!=P){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STROKEWIDTH,1));P.value=isNaN(Rt)?"":Rt+" pt"}s.style.visibility=e.style.shape=="connector"||e.style.shape=="filledEdge"?"":"hidden",mxUtils$1.getValue(e.style,mxConstants$1.STYLE_CURVED,null)=="1"?s.value="curved":mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ROUNDED,null)=="1"&&(s.value="rounded"),mxUtils$1.getValue(e.style,mxConstants$1.STYLE_DASHED,null)=="1"?mxUtils$1.getValue(e.style,mxConstants$1.STYLE_DASH_PATTERN,null)==null?Y.style.borderBottom="1px dashed "+this.defaultStrokeColor:Y.style.borderBottom="1px dotted "+this.defaultStrokeColor:Y.style.borderBottom="1px solid "+this.defaultStrokeColor,G.style.borderBottom=Y.style.borderBottom;var Yt=q.getElementsByTagName("div")[0];if(Yt!=null){var Zt=mxUtils$1.getValue(e.style,mxConstants$1.STYLE_EDGE,null);mxUtils$1.getValue(e.style,mxConstants$1.STYLE_NOEDGESTYLE,null)=="1"&&(Zt=null),Zt=="orthogonalEdgeStyle"&&mxUtils$1.getValue(e.style,mxConstants$1.STYLE_CURVED,null)=="1"?Yt.className="geSprite geSprite-curved":Zt=="straight"||Zt=="none"||Zt==null?Yt.className="geSprite geSprite-straight":Zt=="entityRelationEdgeStyle"?Yt.className="geSprite geSprite-entity":Zt=="elbowEdgeStyle"?Yt.className="geSprite "+(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ELBOW,null)=="vertical"?"geSprite-verticalelbow":"geSprite-horizontalelbow"):Zt=="isometricEdgeStyle"?Yt.className="geSprite "+(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ELBOW,null)=="vertical"?"geSprite-verticalisometric":"geSprite-horizontalisometric"):Yt.className="geSprite geSprite-orthogonal"}var Qt=E.getElementsByTagName("div")[0];Qt!=null&&(e.style.shape=="link"?Qt.className="geSprite geSprite-linkedge":e.style.shape=="flexArrow"?Qt.className="geSprite geSprite-arrow":e.style.shape=="arrow"?Qt.className="geSprite geSprite-simplearrow":Qt.className="geSprite geSprite-connection"),e.edges.length==t.getSelectionCount()?(C.style.display="",g.style.display="none"):(C.style.display="none",g.style.display="");function Wt(A,I,N,_,V){var W=_.getElementsByTagName("div")[0];return W!=null&&(W.className=i.getCssClassForMarker(V,e.style.shape,I,N),W.className=="geSprite geSprite-noarrow"&&(W.innerHTML=mxUtils$1.htmlEntities(mxResources$1.get("none")),W.style.backgroundImage="none",W.style.verticalAlign="top",W.style.marginTop="5px",W.style.fontSize="10px",W.style.filter="none",W.style.color=A.defaultStrokeColor,W.nextSibling.style.marginTop="0px")),W}var Bt=Wt(this,mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STARTARROW,null),mxUtils$1.getValue(e.style,"startFill","1"),j,"start"),S=Wt(this,mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ENDARROW,null),mxUtils$1.getValue(e.style,"endFill","1"),X,"end");if(Bt!=null&&S!=null&&(e.style.shape=="arrow"?(Bt.className="geSprite geSprite-noarrow",S.className="geSprite geSprite-endblocktrans"):e.style.shape=="link"&&(Bt.className="geSprite geSprite-noarrow",S.className="geSprite geSprite-noarrow")),mxUtils$1.setOpacity(q,e.style.shape=="arrow"?30:100),e.style.shape!="connector"&&e.style.shape!="flexArrow"&&e.style.shape!="filledEdge"?(mxUtils$1.setOpacity(j,30),mxUtils$1.setOpacity(X,30)):(mxUtils$1.setOpacity(j,100),mxUtils$1.setOpacity(X,100)),_t||document.activeElement!=Dt){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE));Dt.value=isNaN(Rt)?"":Rt+" pt"}if(_t||document.activeElement!=$t){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING,0));$t.value=isNaN(Rt)?"":Rt+" pt"}if(_t||document.activeElement!=K){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE));K.value=isNaN(Rt)?"":Rt+" pt"}if(_t||document.activeElement!=$t){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_TARGET_PERIMETER_SPACING,0));dt.value=isNaN(Rt)?"":Rt+" pt"}if(_t||document.activeElement!=Ot){var Rt=parseInt(mxUtils$1.getValue(e.style,mxConstants$1.STYLE_PERIMETER_SPACING,0));Ot.value=isNaN(Rt)?"":Rt+" pt"}});return bt=this.installInputHandler(Dt,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_MARKERSIZE,0,999," pt"),ht=this.installInputHandler($t,mxConstants$1.STYLE_SOURCE_PERIMETER_SPACING,0,-999,999," pt"),gt=this.installInputHandler(K,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.DEFAULT_MARKERSIZE,0,999," pt"),tt=this.installInputHandler(dt,mxConstants$1.STYLE_TARGET_PERIMETER_SPACING,0,-999,999," pt"),Ht=this.installInputHandler(Ot,mxConstants$1.STYLE_PERIMETER_SPACING,0,0,999," pt"),this.addKeyHandler($,Nt),this.addKeyHandler(Dt,Nt),this.addKeyHandler($t,Nt),this.addKeyHandler(K,Nt),this.addKeyHandler(dt,Nt),this.addKeyHandler(Ot,Nt),t.getModel().addListener(mxEvent$1.CHANGE,Nt),this.listeners.push({destroy:function(){t.getModel().removeListener(Nt)}}),Nt(),a};StyleFormatPanel$1.prototype.addLineJumps=function(a){var i=this.format.getSelectionState();if(Graph$1.lineJumpsEnabled&&i.edges.length>0&&i.vertices.length==0&&i.lineJumps){a.style.padding="8px 0px 24px 18px";var t=this.editorUi,e=t.editor,n=e.graph,s=document.createElement("div");s.style.position="absolute",s.style.fontWeight="bold",s.style.width="80px",mxUtils$1.write(s,mxResources$1.get("lineJumps")),a.appendChild(s);var l=document.createElement("select");l.style.position="absolute",l.style.marginTop="-2px",l.style.right="76px",l.style.width="62px";for(var r=["none","arc","gap","sharp"],o=0;o<r.length;o++){var h=document.createElement("option");h.setAttribute("value",r[o]),mxUtils$1.write(h,mxResources$1.get(r[o])),l.appendChild(h)}mxEvent$1.addListener(l,"change",function(g){n.getModel().beginUpdate();try{n.setCellStyles("jumpStyle",l.value,n.getSelectionCells()),t.fireEvent(new mxEventObject$1("styleChanged","keys",["jumpStyle"],"values",[l.value],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}mxEvent$1.consume(g)}),mxEvent$1.addListener(l,"click",function(g){mxEvent$1.consume(g)}),a.appendChild(l);var u,d=this.addUnitInput(a,"pt",22,33,function(){u.apply(this,arguments)});u=this.installInputHandler(d,"jumpSize",Graph$1.defaultJumpSize,0,999," pt");var m=mxUtils$1.bind(this,function(g,x,v){if(i=this.format.getSelectionState(),l.value=mxUtils$1.getValue(i.style,"jumpStyle","none"),v||document.activeElement!=d){var C=parseInt(mxUtils$1.getValue(i.style,"jumpSize",Graph$1.defaultJumpSize));d.value=isNaN(C)?"":C+" pt"}});this.addKeyHandler(d,m),n.getModel().addListener(mxEvent$1.CHANGE,m),this.listeners.push({destroy:function(){n.getModel().removeListener(m)}}),m()}else a.style.display="none";return a};StyleFormatPanel$1.prototype.addEffects=function(a){var i=this.editorUi,t=i.editor,e=t.graph,n=this.format.getSelectionState();a.style.paddingTop="0px",a.style.paddingBottom="2px";var s=document.createElement("table");mxClient.IS_QUIRKS&&(s.style.fontSize="1em"),s.style.width="100%",s.style.fontWeight="bold",s.style.paddingRight="20px";var l=document.createElement("tbody"),r=document.createElement("tr");r.style.padding="0px";var o=document.createElement("td");o.style.padding="0px",o.style.width="50%",o.setAttribute("valign","top");var h=o.cloneNode(!0);h.style.paddingLeft="8px",r.appendChild(o),r.appendChild(h),l.appendChild(r),s.appendChild(l),a.appendChild(s);var u=o,d=mxUtils$1.bind(this,function(g,x,v){var C=this.createCellOption(g,x,v);C.style.width="100%",u.appendChild(C),u=u==o?h:o}),m=mxUtils$1.bind(this,function(g,x,v){n=this.format.getSelectionState(),o.innerHTML="",h.innerHTML="",u=o,n.rounded&&d(mxResources$1.get("rounded"),mxConstants$1.STYLE_ROUNDED,0),n.style.shape=="swimlane"&&d(mxResources$1.get("divider"),"swimlaneLine",1),n.containsImage||d(mxResources$1.get("shadow"),mxConstants$1.STYLE_SHADOW,0),n.glass&&d(mxResources$1.get("glass"),mxConstants$1.STYLE_GLASS,0),d(mxResources$1.get("sketch"),"sketch",0)});return e.getModel().addListener(mxEvent$1.CHANGE,m),this.listeners.push({destroy:function(){e.getModel().removeListener(m)}}),m(),a};StyleFormatPanel$1.prototype.addStyleOps=function(a){a.style.paddingTop="10px",a.style.paddingBottom="10px";var i=mxUtils$1.button(mxResources$1.get("setAsDefaultStyle"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("setAsDefaultStyle").funct()}));return i.setAttribute("title",mxResources$1.get("setAsDefaultStyle")+" ("+this.editorUi.actions.get("setAsDefaultStyle").shortcut+")"),i.style.width="202px",a.appendChild(i),a};class DiagramStylePanel extends BaseFormatPanel{constructor(i,t,e){super(i,t,e),this.init()}}DiagramStylePanel.prototype.init=function(){var a=this.editorUi,i=a.editor;i.graph,this.container.appendChild(this.addView(this.createPanel()))};DiagramStylePanel.prototype.addView=function(a){var i=this.editorUi,t=i.editor,e=t.graph,n=e.getModel();a.style.whiteSpace="normal";var s=e.currentVertexStyle.sketch=="1"&&e.currentEdgeStyle.sketch=="1",l=e.currentVertexStyle.rounded=="1",r=e.currentEdgeStyle.curved=="1",o=document.createElement("div");o.style.paddingBottom="12px",o.style.marginRight="16px",a.style.paddingTop="8px";var h=document.createElement("table");mxClient.IS_QUIRKS&&(h.style.fontSize="1em"),h.style.width="100%",h.style.fontWeight="bold";var u=document.createElement("tbody"),d=document.createElement("tr");d.style.padding="0px";var m=document.createElement("td");m.style.padding="0px",m.style.width="50%",m.setAttribute("valign","middle");var g=m.cloneNode(!0);g.style.paddingLeft="8px",d.appendChild(m),d.appendChild(g),u.appendChild(d),h.appendChild(u),m.appendChild(this.createOption(mxResources$1.get("sketch"),function(){return s},function(Y){s=Y,Y?(e.currentEdgeStyle.sketch="1",e.currentVertexStyle.sketch="1"):(delete e.currentEdgeStyle.sketch,delete e.currentVertexStyle.sketch),e.updateCellStyles("sketch",Y?"1":null,e.getVerticesAndEdges())},null,function(Y){Y.style.width="auto"})),g.appendChild(this.createOption(mxResources$1.get("rounded"),function(){return l},function(Y){l=Y,Y?e.currentVertexStyle.rounded="1":delete e.currentVertexStyle.rounded,e.updateCellStyles("rounded",Y?"1":null,e.getVerticesAndEdges(!0,!0))},null,function(Y){Y.style.width="auto"})),m=m.cloneNode(!1),g=g.cloneNode(!1),d=d.cloneNode(!1),d.appendChild(m),d.appendChild(g),u.appendChild(d),m.appendChild(this.createOption(mxResources$1.get("curved"),function(){return r},function(Y){r=Y,Y?e.currentEdgeStyle.curved="1":delete e.currentEdgeStyle.curved,e.updateCellStyles("curved",Y?"1":null,e.getVerticesAndEdges(!1,!0))},null,function(Y){Y.style.width="auto"})),o.appendChild(h),a.appendChild(o);var x=["fillColor","strokeColor","fontColor","gradientColor"],v=mxUtils$1.bind(this,function(Y,G){var J=e.getVerticesAndEdges();n.beginUpdate();try{for(var tt=0;tt<J.length;tt++){var gt=e.getCellStyle(J[tt]);gt.labelBackgroundColor!=null&&e.updateCellStyles("labelBackgroundColor",G!=null?G.background:null,[J[tt]]);for(var dt=n.isEdge(J[tt]),K=n.getStyle(J[tt]),nt=dt?e.currentEdgeStyle:e.currentVertexStyle,ht=0;ht<Y.length;ht++)(gt[Y[ht]]!=null&&gt[Y[ht]]!=mxConstants$1.NONE||Y[ht]!=mxConstants$1.STYLE_FILLCOLOR&&Y[ht]!=mxConstants$1.STYLE_STROKECOLOR)&&(K=mxUtils$1.setStyle(K,Y[ht],nt[Y[ht]]));n.setStyle(J[tt],K)}}finally{n.endUpdate()}}),C=mxUtils$1.bind(this,function(Y,G,J){if(Y!=null)for(var tt=0;tt<G.length;tt++)(Y[G[tt]]!=null&&Y[G[tt]]!=mxConstants$1.NONE||G[tt]!=mxConstants$1.STYLE_FILLCOLOR&&G[tt]!=mxConstants$1.STYLE_STROKECOLOR)&&(Y[G[tt]]=J[G[tt]])}),E=mxUtils$1.bind(this,function(Y,G,J,tt,gt){if(Y!=null){if(J!=null&&G.labelBackgroundColor!=null){var dt=tt!=null?tt.background:null;gt=gt??e,dt==null&&(dt=gt.background),dt==null&&(dt=gt.defaultPageBackgroundColor),G.labelBackgroundColor=dt}for(var K in Y)(J==null||G[K]!=null&&G[K]!=mxConstants$1.NONE||K!=mxConstants$1.STYLE_FILLCOLOR&&K!=mxConstants$1.STYLE_STROKECOLOR)&&(G[K]=Y[K])}}),b=mxUtils$1.button(mxResources$1.get("reset"),mxUtils$1.bind(this,function(Y){var G=e.getVerticesAndEdges(!0,!0);if(G.length>0){n.beginUpdate();try{e.updateCellStyles("sketch",null,G),e.updateCellStyles("rounded",null,G),e.updateCellStyles("curved",null,e.getVerticesAndEdges(!1,!0))}finally{n.endUpdate()}}e.defaultVertexStyle=mxUtils$1.clone(i.initialDefaultVertexStyle),e.defaultEdgeStyle=mxUtils$1.clone(i.initialDefaultEdgeStyle),i.clearDefaultStyle()}));b.setAttribute("title",mxResources$1.get("reset")),b.style.textOverflow="ellipsis",b.style.maxWidth="90px",g.appendChild(b);var w=mxUtils$1.bind(this,function(Y,G,J,tt,gt){var dt=document.createElement("div");dt.style.cssText="position:absolute;display:inline-block;width:100%;height:100%;overflow:hidden;pointer-events:none;",gt.appendChild(dt);var K=new Graph$1(dt,null,null,e.getStylesheet());K.resetViewOnRootChange=!1,K.foldingEnabled=!1,K.gridEnabled=!1,K.autoScroll=!1,K.setTooltips(!1),K.setConnectable(!1),K.setPanning(!1),K.setEnabled(!1),K.getCellStyle=function(bt){var $t=mxUtils$1.clone(Graph$1.prototype.getCellStyle.apply(this,arguments)),Dt=e.stylesheet.getDefaultVertexStyle(),ct=G;return n.isEdge(bt)&&(Dt=e.stylesheet.getDefaultEdgeStyle(),ct=J),C($t,x,Dt),E(Y,$t,bt,tt,K),E(ct,$t,bt,tt,K),$t},K.model.beginUpdate();try{var nt=K.insertVertex(K.getDefaultParent(),null,"Shape",14,8,70,40,"strokeWidth=2;"),ht=K.insertEdge(K.getDefaultParent(),null,"Connector",nt,nt,"edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;endSize=5;strokeWidth=2;");ht.geometry.points=[new mxPoint(32,70)],ht.geometry.offset=new mxPoint(0,8)}finally{K.model.endUpdate()}}),$=document.createElement("div");$.style.position="relative",a.appendChild($),this.format.cachedStyleEntries==null&&(this.format.cachedStyleEntries=[]);var P=mxUtils$1.bind(this,function(Y,G,J,tt,gt){var dt=this.format.cachedStyleEntries[gt];dt==null&&(dt=document.createElement("div"),dt.style.cssText="display:inline-block;position:relative;width:96px;height:90px;cursor:pointer;border:1px solid gray;margin:2px;overflow:hidden;",tt!=null&&tt.background!=null&&(dt.style.backgroundColor=tt.background),w(Y,G,J,tt,dt),mxEvent$1.addGestureListeners(dt,mxUtils$1.bind(this,function(K){dt.style.opacity=.5}),null,mxUtils$1.bind(this,function(K){dt.style.opacity=1,e.defaultVertexStyle=mxUtils$1.clone(i.initialDefaultVertexStyle),e.defaultEdgeStyle=mxUtils$1.clone(i.initialDefaultEdgeStyle),E(Y,e.defaultVertexStyle),E(Y,e.defaultEdgeStyle),E(G,e.defaultVertexStyle),E(J,e.defaultEdgeStyle),i.clearDefaultStyle(),s?(e.currentEdgeStyle.sketch="1",e.currentVertexStyle.sketch="1"):(e.currentEdgeStyle.sketch="0",e.currentVertexStyle.sketch="0"),l?(e.currentVertexStyle.rounded="1",e.currentEdgeStyle.rounded="1"):(e.currentVertexStyle.rounded="0",e.currentEdgeStyle.rounded="1"),r?e.currentEdgeStyle.curved="1":e.currentEdgeStyle.curved="0",n.beginUpdate();try{v(x,tt);var nt=new ChangePageSetup$1(i,tt!=null?tt.background:null);nt.ignoreImage=!0,n.execute(nt),n.execute(new ChangeGridColor(i,tt!=null&&tt.gridColor!=null?tt.gridColor:e.view.defaultGridColor))}finally{n.endUpdate()}})),mxEvent$1.addListener(dt,"mouseenter",mxUtils$1.bind(this,function(K){var nt=e.getCellStyle,ht=e.background,bt=e.view.gridColor;e.background=tt!=null?tt.background:null,e.view.gridColor=tt!=null&&tt.gridColor!=null?tt.gridColor:e.view.defaultGridColor,e.getCellStyle=function($t){var Dt=mxUtils$1.clone(nt.apply(this,arguments)),ct=e.stylesheet.getDefaultVertexStyle(),Et=G;return n.isEdge($t)&&(ct=e.stylesheet.getDefaultEdgeStyle(),Et=J),C(Dt,x,ct),E(Y,Dt,$t,tt),E(Et,Dt,$t,tt),Dt},e.refresh(),e.getCellStyle=nt,e.background=ht,e.view.gridColor=bt})),mxEvent$1.addListener(dt,"mouseleave",mxUtils$1.bind(this,function(K){e.refresh()})),this.format.cachedStyleEntries[gt]=dt),$.appendChild(dt)}),M=10,D=Math.ceil(Editor$1.styles.length/M);this.format.currentStylePage=this.format.currentStylePage!=null?this.format.currentStylePage:0;var k=[],Z=mxUtils$1.bind(this,function(){k.length>0&&(k[this.format.currentStylePage].style.background="#84d7ff");for(var Y=this.format.currentStylePage*M;Y<Math.min((this.format.currentStylePage+1)*M,Editor$1.styles.length);Y++){var G=Editor$1.styles[Y];P(G.commonStyle,G.vertexStyle,G.edgeStyle,G.graph,Y)}}),q=mxUtils$1.bind(this,function(Y){Y>=0&&Y<D&&(k[this.format.currentStylePage].style.background="transparent",$.innerHTML="",this.format.currentStylePage=Y,Z())});if(D>1){var j=document.createElement("div");j.style.whiteSpace="nowrap",j.style.position="relative",j.style.textAlign="center",j.style.paddingTop="4px",j.style.width="210px",a.style.paddingBottom="8px";for(var X=0;X<D;X++){var rt=document.createElement("div");rt.style.display="inline-block",rt.style.width="6px",rt.style.height="6px",rt.style.marginLeft="4px",rt.style.marginRight="3px",rt.style.borderRadius="3px",rt.style.cursor="pointer",rt.style.background="transparent",rt.style.border="1px solid #b5b6b7",mxUtils$1.bind(this,function(Y,G){mxEvent$1.addListener(rt,"click",mxUtils$1.bind(this,function(){q(Y)}))})(X,rt),j.appendChild(rt),k.push(rt)}if(a.appendChild(j),Z(),D<15){let J=function(tt){mxEvent$1.addListener(tt,"mouseenter",function(){tt.style.opacity="1"}),mxEvent$1.addListener(tt,"mouseleave",function(){tt.style.opacity="0.5"})};var et=J,m=document.createElement("div");m.style.cssText="position:absolute;left:0px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);",mxEvent$1.addListener(m,"click",mxUtils$1.bind(this,function(){q(mxUtils$1.mod(this.format.currentStylePage-1,D))}));var g=document.createElement("div");g.style.cssText="position:absolute;right:2px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);",j.appendChild(m),j.appendChild(g),mxEvent$1.addListener(g,"click",mxUtils$1.bind(this,function(){q(mxUtils$1.mod(this.format.currentStylePage+1,D))})),J(m),J(g)}}else Z();return a};class DiagramFormatPanel extends BaseFormatPanel{constructor(i,t,e){super(i,t,e),this.init()}}DiagramFormatPanel.showPageView=!0;DiagramFormatPanel.prototype.showBackgroundImageOption=!0;DiagramFormatPanel.prototype.init=function(){var a=this.editorUi,i=a.editor,t=i.graph;this.container.appendChild(this.addView(this.createPanel())),t.isEnabled()&&(this.container.appendChild(this.addOptions(this.createPanel())),this.container.appendChild(this.addPaperSize(this.createPanel())),this.container.appendChild(this.addStyleOps(this.createPanel())))};DiagramFormatPanel.prototype.addView=function(a){var i=this.editorUi,t=i.editor,e=t.graph;if(a.appendChild(this.createTitle(mxResources$1.get("view"))),this.addGridOption(a),DiagramFormatPanel.showPageView&&a.appendChild(this.createOption(mxResources$1.get("pageView"),function(){return e.pageVisible},function(l){i.actions.get("pageView").funct()},{install:function(l){this.listener=function(){l(e.pageVisible)},i.addListener("pageViewChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})),e.isEnabled()){var n=this.createColorOption(mxResources$1.get("background"),function(){return e.background},function(l){var r=new ChangePageSetup$1(i,l);r.ignoreImage=!0,e.model.execute(r)},"#ffffff",{install:function(l){this.listener=function(){l(e.background)},i.addListener("backgroundColorChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}});if(this.showBackgroundImageOption){var s=mxUtils$1.button(mxResources$1.get("image"),function(l){i.showBackgroundImageDialog(null,i.editor.graph.backgroundImage),mxEvent$1.consume(l)});s.style.position="absolute",s.className="geColorBtn",s.style.marginTop="-4px",s.style.paddingBottom=document.documentMode==11||mxClient.IS_MT?"0px":"2px",s.style.height="22px",s.style.right=mxClient.IS_QUIRKS?"52px":"72px",s.style.width="56px",n.appendChild(s)}a.appendChild(n)}return a};DiagramFormatPanel.prototype.addOptions=function(a){var i=this.editorUi,t=i.editor,e=t.graph;return a.appendChild(this.createTitle(mxResources$1.get("options"))),e.isEnabled()&&(a.appendChild(this.createOption(mxResources$1.get("connectionArrows"),function(){return e.connectionArrowsEnabled},function(n){i.actions.get("connectionArrows").funct()},{install:function(n){this.listener=function(){n(e.connectionArrowsEnabled)},i.addListener("connectionArrowsChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})),a.appendChild(this.createOption(mxResources$1.get("connectionPoints"),function(){return e.connectionHandler.isEnabled()},function(n){i.actions.get("connectionPoints").funct()},{install:function(n){this.listener=function(){n(e.connectionHandler.isEnabled())},i.addListener("connectionPointsChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})),a.appendChild(this.createOption(mxResources$1.get("guides"),function(){return e.graphHandler.guidesEnabled},function(n){i.actions.get("guides").funct()},{install:function(n){this.listener=function(){n(e.graphHandler.guidesEnabled)},i.addListener("guidesEnabledChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}}))),a};DiagramFormatPanel.prototype.addGridOption=function(a){var i=this,t=this.editorUi,e=t.editor.graph,n=document.createElement("input");n.style.position="absolute",n.style.textAlign="right",n.style.width="38px",n.value=this.inUnit(e.getGridSize())+" "+this.getUnit();var s=this.createStepper(n,l,this.getUnitStep(),null,null,null,this.isFloatUnit());n.style.display=e.isGridEnabled()?"":"none",s.style.display=n.style.display,mxEvent$1.addListener(n,"keydown",function(h){h.keyCode==13?(e.container.focus(),mxEvent$1.consume(h)):h.keyCode==27&&(n.value=e.getGridSize(),e.container.focus(),mxEvent$1.consume(h))});function l(h){var u=i.isFloatUnit()?parseFloat(n.value):parseInt(n.value);u=i.fromUnit(Math.max(i.inUnit(1),isNaN(u)?i.inUnit(10):u)),u!=e.getGridSize()&&e.setGridSize(u),n.value=i.inUnit(u)+" "+i.getUnit(),mxEvent$1.consume(h)}mxEvent$1.addListener(n,"blur",l),mxEvent$1.addListener(n,"change",l);var r=function(h,u){n.value=i.inUnit(e.getGridSize())+" "+i.getUnit(),i.format.refresh()};if(e.view.addListener("unitChanged",r),this.listeners.push({destroy:function(){e.view.removeListener(r)}}),mxClient.IS_SVG){n.style.marginTop="-2px",n.style.right="84px",s.style.marginTop="-16px",s.style.right="72px";var o=this.createColorOption(mxResources$1.get("grid"),function(){var h=e.view.gridColor;return e.isGridEnabled()?h:null},function(h){var u=e.isGridEnabled();h==mxConstants$1.NONE?e.setGridEnabled(!1):(e.setGridEnabled(!0),t.setGridColor(h)),n.style.display=e.isGridEnabled()?"":"none",s.style.display=n.style.display,u!=e.isGridEnabled()&&t.fireEvent(new mxEventObject$1("gridEnabledChanged"))},"#e0e0e0",{install:function(h){this.listener=function(){h(e.isGridEnabled()?e.view.gridColor:null)},t.addListener("gridColorChanged",this.listener),t.addListener("gridEnabledChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}});o.appendChild(n),o.appendChild(s),a.appendChild(o)}else n.style.marginTop="2px",n.style.right="32px",s.style.marginTop="2px",s.style.right="20px",a.appendChild(n),a.appendChild(s),a.appendChild(this.createOption(mxResources$1.get("grid"),function(){return e.isGridEnabled()},function(h){e.setGridEnabled(h),e.isGridEnabled()&&(e.view.gridColor="#e0e0e0"),t.fireEvent(new mxEventObject$1("gridEnabledChanged"))},{install:function(h){this.listener=function(){n.style.display=e.isGridEnabled()?"":"none",s.style.display=n.style.display,h(e.isGridEnabled())},t.addListener("gridEnabledChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}}))};DiagramFormatPanel.prototype.addDocumentProperties=function(a){var i=this.editorUi,t=i.editor;return t.graph,a.appendChild(this.createTitle(mxResources$1.get("options"))),a};DiagramFormatPanel.prototype.addPaperSize=function(a){var i=this.editorUi,t=i.editor,e=t.graph;a.appendChild(this.createTitle(mxResources$1.get("paperSize")));var n=PageSetupDialog$1.addPageFormatPanel(a,"formatpanel",e.pageFormat,function(l){if(e.pageFormat==null||e.pageFormat.width!=l.width||e.pageFormat.height!=l.height){var r=new ChangePageSetup$1(i,null,null,l);r.ignoreColor=!0,r.ignoreImage=!0,e.model.execute(r)}});this.addKeyHandler(n.widthInput,function(){n.set(e.pageFormat)}),this.addKeyHandler(n.heightInput,function(){n.set(e.pageFormat)});var s=function(){n.set(e.pageFormat)};return i.addListener("pageFormatChanged",s),this.listeners.push({destroy:function(){i.removeListener(s)}}),e.getModel().addListener(mxEvent$1.CHANGE,s),this.listeners.push({destroy:function(){e.getModel().removeListener(s)}}),a};DiagramFormatPanel.prototype.addStyleOps=function(a){var i=mxUtils$1.button(mxResources$1.get("editData"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("editData").funct()}));return i.setAttribute("title",mxResources$1.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),i.style.width="202px",i.style.marginBottom="2px",a.appendChild(i),mxUtils$1.br(a),i=mxUtils$1.button(mxResources$1.get("clearDefaultStyle"),mxUtils$1.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()})),i.setAttribute("title",mxResources$1.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),i.style.width="202px",a.appendChild(i),a};DiagramFormatPanel.prototype.destroy=function(){BaseFormatPanel.prototype.destroy.apply(this,arguments),this.gridEnabledListener&&(this.editorUi.removeListener(this.gridEnabledListener),this.gridEnabledListener=null)};class Default{constructor(){}}Default.prototype.defaultFont="Helvetica";Default.prototype.defaultFontSize="12";Default.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"];Default.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"];class Toolbar{constructor(i,t){this.compactUi=!0,this.editorUi=i,this.container=t,this.staticElements=[],this.init(),this.gestureHandler=mxUtils$1.bind(this,function(e){this.editorUi.currentMenu!=null&&mxEvent$1.getSource(e)!=this.editorUi.currentMenu.div&&this.hideMenu()}),mxEvent$1.addGestureListeners(document,this.gestureHandler)}}Toolbar.prototype.dropdownImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAHt7e////yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCREM1NkJFMjE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCREM1NkJFMzE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQzOUMzMjZCMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQzOUMzMjZDMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/dropdown.gif";Toolbar.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:'+(Toolbar.compactUi?6:8)+'px;" src="'+Toolbar.prototype.dropdownImage+'" valign="middle"/>';Toolbar.prototype.selectedBackground="#d0d0d0";Toolbar.prototype.unselectedBackground="none";Toolbar.prototype.staticElements=null;Toolbar.prototype.init=function(){var a=screen.width;if(a-=screen.height>740?56:0,a>=700){var i=this.addMenu("",mxResources$1.get("view")+" ("+mxResources$1.get("panTooltip")+")",!0,"viewPanels",null,!0);this.addDropDownArrow(i,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()}var t=this.addMenu("",mxResources$1.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0);if(t.showDisabled=!0,t.style.whiteSpace="nowrap",t.style.position="relative",t.style.overflow="hidden",Toolbar.compactUi?t.style.width=mxClient.IS_QUIRKS?"58px":"50px":t.style.width=mxClient.IS_QUIRKS?"62px":"36px",a>=420){this.addSeparator();var e=this.addItems(["zoomIn","zoomOut"]);e[0].setAttribute("title",mxResources$1.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),e[1].setAttribute("title",mxResources$1.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")}this.updateZoom=mxUtils$1.bind(this,function(){t.innerHTML=Math.round(this.editorUi.editor.graph.view.scale*100)+"%"+this.dropdownImageHtml,Toolbar.compactUi&&(t.getElementsByTagName("img")[0].style.right="1px",t.getElementsByTagName("img")[0].style.top="5px")}),this.editorUi.editor.graph.view.addListener(mxEvent$1.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom);var e=this.addItems(["-","undo","redo"]);e[1].setAttribute("title",mxResources$1.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),e[2].setAttribute("title",mxResources$1.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")");var n=this.addItems(["-","select","pan"]);if(n[1].setAttribute("title",mxResources$1.get("select")+" ("+this.editorUi.actions.get("select").shortcut+")"),n[2].setAttribute("title",mxResources$1.get("pan")+" ("+this.editorUi.actions.get("select").shortcut+")"),a>=320){var e=this.addItems(["-","delete"]);e[1].setAttribute("title",mxResources$1.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")")}a>=550&&this.addItems(["-","toFront","toBack"]),a>=740&&(this.addItems(["-","fillColor"]),a>=780&&(this.addItems(["strokeColor"]),a>=820&&this.addItems(["shadow"]))),a>=400&&(this.addSeparator(),a>=440&&(this.edgeShapeMenu=this.addMenuFunction("",mxResources$1.get("connection"),!1,mxUtils$1.bind(this,function(l){this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources$1.get("line")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources$1.get("link")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources$1.get("arrow")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources$1.get("simpleArrow"))})),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",mxResources$1.get("waypoints"),!1,mxUtils$1.bind(this,function(l){this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources$1.get("straight")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources$1.get("orthogonal")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources$1.get("simple")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_ELBOW,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources$1.get("isometric")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources$1.get("curved")),this.editorUi.menus.edgeStyleChange(l,"",[mxConstants$1.STYLE_EDGE,mxConstants$1.STYLE_CURVED,mxConstants$1.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources$1.get("entityRelation"))})),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addSeparator();var s=this.addMenu("",mxResources$1.get("insert")+" ("+mxResources$1.get("doubleClickTooltip")+")",!0,"insert",null,!0);this.addDropDownArrow(s,"geSprite-plus",38,48,-4,-3,36,-8),this.addTableDropDown()};Toolbar.prototype.addTableDropDown=function(){this.addSeparator();var a=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(t){var e=this.editorUi.editor.graph,n=e.getSelectionCell();if(!e.isTableCell(n)&&!e.isTableRow(n)&&!e.isTable(n))this.editorUi.menus.addInsertTableCellItem(t);else{var s=t.addItem("",null,mxUtils$1.bind(this,function(){try{e.insertTableColumn(n,!0)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertcolumnbefore");s.setAttribute("title",mxResources$1.get("insertColumnBefore")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{e.insertTableColumn(n,!1)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertcolumnafter"),s.setAttribute("title",mxResources$1.get("insertColumnAfter")),s=t.addItem("Delete column",null,mxUtils$1.bind(this,function(){if(n!=null)try{e.deleteTableColumn(n)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-deletecolumn"),s.setAttribute("title",mxResources$1.get("deleteColumn")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{e.insertTableRow(n,!0)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertrowbefore"),s.setAttribute("title",mxResources$1.get("insertRowBefore")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{e.insertTableRow(n,!1)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-insertrowafter"),s.setAttribute("title",mxResources$1.get("insertRowAfter")),s=t.addItem("",null,mxUtils$1.bind(this,function(){try{e.deleteTableRow(n)}catch(l){this.editorUi.handleError(l)}}),null,"geIcon geSprite geSprite-deleterow"),s.setAttribute("title",mxResources$1.get("deleteRow"))}}));a.style.position="relative",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,a.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(a.getElementsByTagName("img")[0].style.left="22px",a.getElementsByTagName("img")[0].style.top="5px");var i=this.editorUi.menus.get("insert");return i!=null&&typeof a.setEnabled=="function"&&i.addListener("stateChanged",function(){a.setEnabled(i.enabled)}),a};Toolbar.prototype.addDropDownArrow=function(a,i,t,e,n,s,l,r){l=l??32,n=Toolbar.compactUi?n:r,a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.position="relative",a.innerHTML='<div class="geSprite '+i+'" style="margin-left:'+n+"px;margin-top:"+s+'px;"></div>'+this.dropdownImageHtml,a.style.width=mxClient.IS_QUIRKS?e+"px":e-l+"px",mxClient.IS_QUIRKS&&(a.style.height=Toolbar.compactUi?"24px":"26px"),Toolbar.compactUi&&(a.getElementsByTagName("img")[0].style.left="24px",a.getElementsByTagName("img")[0].style.top="5px",a.style.width=mxClient.IS_QUIRKS?t+"px":t-10+"px")};Toolbar.prototype.setFontName=function(a){this.fontMenu!=null&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+mxUtils$1.htmlEntities(a)+"</div>"+this.dropdownImageHtml)};Toolbar.prototype.setFontSize=function(a){this.sizeMenu!=null&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+mxUtils$1.htmlEntities(a)+"</div>"+this.dropdownImageHtml)};Toolbar.prototype.createTextToolbar=function(){var a=this.editorUi.editor.graph,i=this.addMenu("",mxResources$1.get("style"),!0,"formatBlock");i.style.position="relative",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.innerHTML=mxResources$1.get("style")+this.dropdownImageHtml,Toolbar.compactUi&&(i.style.paddingRight="18px",i.getElementsByTagName("img")[0].style.right="1px",i.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",mxResources$1.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width=mxClient.IS_QUIRKS?"80px":"60px",this.setFontName(Default.prototype.defaultFont),Toolbar.compactUi&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(Default.prototype.defaultFontSize,mxResources$1.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width=mxClient.IS_QUIRKS?"44px":"24px",this.setFontSize(Default.prototype.defaultFontSize),Toolbar.compactUi&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px");var t=this.addItems(["-","undo","redo","-","bold","italic","underline"]);t[1].setAttribute("title",mxResources$1.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),t[2].setAttribute("title",mxResources$1.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),t[4].setAttribute("title",mxResources$1.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),t[5].setAttribute("title",mxResources$1.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),t[6].setAttribute("title",mxResources$1.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var e=this.addMenuFunction("",mxResources$1.get("align"),!1,mxUtils$1.bind(this,function(r){l=r.addItem("",null,mxUtils$1.bind(this,function(o){a.cellEditor.alignText(mxConstants$1.ALIGN_LEFT,o)}),null,"geIcon geSprite geSprite-left"),l.setAttribute("title",mxResources$1.get("left")),l=r.addItem("",null,mxUtils$1.bind(this,function(o){a.cellEditor.alignText(mxConstants$1.ALIGN_CENTER,o)}),null,"geIcon geSprite geSprite-center"),l.setAttribute("title",mxResources$1.get("center")),l=r.addItem("",null,mxUtils$1.bind(this,function(o){a.cellEditor.alignText(mxConstants$1.ALIGN_RIGHT,o)}),null,"geIcon geSprite geSprite-right"),l.setAttribute("title",mxResources$1.get("right")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("justifyfull",!1,null)}),null,"geIcon geSprite geSprite-justifyfull"),l.setAttribute("title",mxResources$1.get("justifyfull")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("insertorderedlist",!1,null)}),null,"geIcon geSprite geSprite-orderedlist"),l.setAttribute("title",mxResources$1.get("numberedList")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("insertunorderedlist",!1,null)}),null,"geIcon geSprite geSprite-unorderedlist"),l.setAttribute("title",mxResources$1.get("bulletedList")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("outdent",!1,null)}),null,"geIcon geSprite geSprite-outdent"),l.setAttribute("title",mxResources$1.get("decreaseIndent")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("indent",!1,null)}),null,"geIcon geSprite geSprite-indent"),l.setAttribute("title",mxResources$1.get("increaseIndent"))}));e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px");var n=this.addMenuFunction("",mxResources$1.get("format"),!1,mxUtils$1.bind(this,function(r){l=r.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript"),l.setAttribute("title",mxResources$1.get("subscript")+" ("+Editor.ctrlKey+"+,)"),l=r.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript"),l.setAttribute("title",mxResources$1.get("superscript")+" ("+Editor.ctrlKey+"+.)"),l=r.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor"),l.setAttribute("title",mxResources$1.get("fontColor")),l=r.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground"),l.setAttribute("title",mxResources$1.get("backgroundColor")),l=r.addItem("",null,mxUtils$1.bind(this,function(){document.execCommand("removeformat",!1,null)}),null,"geIcon geSprite geSprite-removeformat"),l.setAttribute("title",mxResources$1.get("removeFormat"))}));n.style.position="relative",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,n.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(n.getElementsByTagName("img")[0].style.left="22px",n.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",mxResources$1.get("html"),function(){a.cellEditor.toggleViewMode(),a.cellEditor.textarea.innerHTML.length>0&&(a.cellEditor.textarea.innerHTML!="&nbsp;"||!a.cellEditor.clearOnChange)&&window.setTimeout(function(){document.execCommand("selectAll",!1,null)})}),this.addSeparator();var s=this.addMenuFunction("",mxResources$1.get("insert"),!0,mxUtils$1.bind(this,function(r){r.addItem(mxResources$1.get("insertLink"),null,mxUtils$1.bind(this,function(){this.editorUi.actions.get("link").funct()})),r.addItem(mxResources$1.get("insertImage"),null,mxUtils$1.bind(this,function(){this.editorUi.actions.get("image").funct()})),r.addItem(mxResources$1.get("insertHorizontalRule"),null,mxUtils$1.bind(this,function(){document.execCommand("inserthorizontalrule",!1,null)}))}));s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.position="relative",s.innerHTML='<div class="geSprite geSprite-plus" style="margin-left:-4px;margin-top:-3px;"></div>'+this.dropdownImageHtml,s.style.width=mxClient.IS_QUIRKS?"36px":"16px",Toolbar.compactUi&&(s.getElementsByTagName("img")[0].style.left="24px",s.getElementsByTagName("img")[0].style.top="5px",s.style.width=mxClient.IS_QUIRKS?"50px":"30px"),this.addSeparator();var l=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources$1.get("table"),!1,mxUtils$1.bind(this,function(r){var o=a.getSelectedElement(),h=a.getParentByNames(o,["TD","TH"],a.cellEditor.text2),u=a.getParentByName(o,"TR",a.cellEditor.text2);if(u==null)this.editorUi.menus.addInsertTableItem(r);else{var d=a.getParentByName(u,"TABLE",a.cellEditor.text2);o=r.addItem("",null,mxUtils$1.bind(this,function(){try{a.selectNode(a.insertColumn(d,h!=null?h.cellIndex:0))}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-insertcolumnbefore"),o.setAttribute("title",mxResources$1.get("insertColumnBefore")),o=r.addItem("",null,mxUtils$1.bind(this,function(){try{a.selectNode(a.insertColumn(d,h!=null?h.cellIndex+1:-1))}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-insertcolumnafter"),o.setAttribute("title",mxResources$1.get("insertColumnAfter")),o=r.addItem("Delete column",null,mxUtils$1.bind(this,function(){if(h!=null)try{a.deleteColumn(d,h.cellIndex)}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-deletecolumn"),o.setAttribute("title",mxResources$1.get("deleteColumn")),o=r.addItem("",null,mxUtils$1.bind(this,function(){try{a.selectNode(a.insertRow(d,u.sectionRowIndex))}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-insertrowbefore"),o.setAttribute("title",mxResources$1.get("insertRowBefore")),o=r.addItem("",null,mxUtils$1.bind(this,function(){try{a.selectNode(a.insertRow(d,u.sectionRowIndex+1))}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-insertrowafter"),o.setAttribute("title",mxResources$1.get("insertRowAfter")),o=r.addItem("",null,mxUtils$1.bind(this,function(){try{a.deleteRow(d,u.sectionRowIndex)}catch(m){this.editorUi.handleError(m)}}),null,"geIcon geSprite geSprite-deleterow"),o.setAttribute("title",mxResources$1.get("deleteRow")),o=r.addItem("",null,mxUtils$1.bind(this,function(){var m=d.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(g,x,v,C){return"#"+("0"+Number(x).toString(16)).substr(-2)+("0"+Number(v).toString(16)).substr(-2)+("0"+Number(C).toString(16)).substr(-2)});this.editorUi.pickColor(m,function(g){g==null||g==mxConstants$1.NONE?(d.removeAttribute("border"),d.style.border="",d.style.borderCollapse=""):(d.setAttribute("border","1"),d.style.border="1px solid "+g,d.style.borderCollapse="collapse")})}),null,"geIcon geSprite geSprite-strokecolor"),o.setAttribute("title",mxResources$1.get("borderColor")),o=r.addItem("",null,mxUtils$1.bind(this,function(){var m=d.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(g,x,v,C){return"#"+("0"+Number(x).toString(16)).substr(-2)+("0"+Number(v).toString(16)).substr(-2)+("0"+Number(C).toString(16)).substr(-2)});this.editorUi.pickColor(m,function(g){g==null||g==mxConstants$1.NONE?d.style.backgroundColor="":d.style.backgroundColor=g})}),null,"geIcon geSprite geSprite-fillcolor"),o.setAttribute("title",mxResources$1.get("backgroundColor")),o=r.addItem("",null,mxUtils$1.bind(this,function(){var m=d.getAttribute("cellPadding")||0,g=new FilenameDialog(this.editorUi,m,mxResources$1.get("apply"),mxUtils$1.bind(this,function(x){x!=null&&x.length>0?d.setAttribute("cellPadding",x):d.removeAttribute("cellPadding")}),mxResources$1.get("spacing"));this.editorUi.showDialog(g.container,300,80,!0,!0),g.init()}),null,"geIcon geSprite geSprite-fit"),o.setAttribute("title",mxResources$1.get("spacing")),o=r.addItem("",null,mxUtils$1.bind(this,function(){d.setAttribute("align","left")}),null,"geIcon geSprite geSprite-left"),o.setAttribute("title",mxResources$1.get("left")),o=r.addItem("",null,mxUtils$1.bind(this,function(){d.setAttribute("align","center")}),null,"geIcon geSprite geSprite-center"),o.setAttribute("title",mxResources$1.get("center")),o=r.addItem("",null,mxUtils$1.bind(this,function(){d.setAttribute("align","right")}),null,"geIcon geSprite geSprite-right"),o.setAttribute("title",mxResources$1.get("right"))}}));l.style.position="relative",l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,l.style.width=mxClient.IS_QUIRKS?"50px":"30px",Toolbar.compactUi&&(l.getElementsByTagName("img")[0].style.left="22px",l.getElementsByTagName("img")[0].style.top="5px")};Toolbar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()};Toolbar.prototype.addMenu=function(a,i,t,e,n,s,l){var r=this.editorUi.menus.get(e),o=this.addMenuFunction(a,i,t,function(){r.funct.apply(r,arguments)},n,s);return!l&&typeof o.setEnabled=="function"&&r.addListener("stateChanged",function(){o.setEnabled(r.enabled)}),o};Toolbar.prototype.addMenuFunction=function(a,i,t,e,n,s){return this.addMenuFunctionInContainer(n??this.container,a,i,t,e,s)};Toolbar.prototype.addMenuFunctionInContainer=function(a,i,t,e,n,s){var l=e?this.createLabel(i):this.createButton(i);return this.initElement(l,t),this.addMenuHandler(l,e,n,s),a.appendChild(l),l};Toolbar.prototype.addSeparator=function(a){a=a??this.container;var i=document.createElement("div");return i.className="geSeparator",a.appendChild(i),i};Toolbar.prototype.addItems=function(a,i,t){for(var e=[],n=0;n<a.length;n++){var s=a[n];s=="-"?e.push(this.addSeparator(i)):e.push(this.addItem("geSprite-"+s.toLowerCase(),s,i,t))}return e};Toolbar.prototype.addItem=function(a,i,t,e){var n=this.editorUi.actions.get(i),s=null;if(n!=null){var l=n.label;n.shortcut!=null&&(l+=" ("+n.shortcut+")"),s=this.addButton(a,l,n.funct,t),!e&&typeof s.setEnabled=="function"&&(s.setEnabled(n.enabled),n.addListener("stateChanged",function(){s.setEnabled(n.enabled)}))}return s};Toolbar.prototype.addButton=function(a,i,t,e){var n=this.createButton(a);return e=e??this.container,this.initElement(n,i),this.addClickHandler(n,t),e.appendChild(n),n};Toolbar.prototype.initElement=function(a,i){i!=null&&a.setAttribute("title",i),this.addEnabledState(a)};Toolbar.prototype.addEnabledState=function(a){var i=a.className;a.setEnabled=function(t){a.enabled=t,t?a.className=i:a.className=i+" mxDisabled"},a.setEnabled(!0)};Toolbar.prototype.addClickHandler=function(a,i){i!=null&&(mxEvent$1.addListener(a,"click",function(t){a.enabled&&i(t),mxEvent$1.consume(t)}),mxEvent$1.addListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(t){t.preventDefault()})))};Toolbar.prototype.createButton=function(a){var i=document.createElement("a");i.className="geButton";var t=document.createElement("div");return a!=null&&(t.className="geSprite "+a),i.appendChild(t),i};Toolbar.prototype.createLabel=function(a,i){var t=document.createElement("a");return t.className="geLabel",mxUtils$1.write(t,a),t};Toolbar.prototype.addMenuHandler=function(a,i,t,e){if(t!=null){var n=this.editorUi.editor.graph,s=null,l=!0;mxEvent$1.addListener(a,"click",mxUtils$1.bind(this,function(r){if(l&&(a.enabled==null||a.enabled)){n.popupMenuHandler.hideMenu(),s=new mxPopupMenu(t),s.div.className+=" geToolbarMenu",s.showDisabled=e,s.labels=i,s.autoExpand=!0;var o=mxUtils$1.getOffset(a);s.popup(o.x,o.y+a.offsetHeight,null,r),this.editorUi.setCurrentMenu(s,a),!i&&s.div.scrollHeight>s.div.clientHeight&&(s.div.style.width="40px"),s.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(s,arguments),this.editorUi.resetCurrentMenu(),s.destroy()}),s.addListener(mxEvent$1.EVENT_HIDE,mxUtils$1.bind(this,function(){this.currentElt=null}))}l=!0,mxEvent$1.consume(r)})),mxEvent$1.addListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(r){l=this.currentElt!=a,r.preventDefault()}))}};Toolbar.prototype.destroy=function(){this.gestureHandler!=null&&(mxEvent$1.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)};class EditorUi extends mxEventSource{constructor(i,t,e){super(),this.destroyFunctions=[],this.editor=i||new Editor$1,window.parent.Editor=this.editor,window.parent.mxResources=mxResources$1,window.parent.Graph=this.editor.graph,this.container=t||document.body;var n=this.editor.graph;if(n.lightbox=e,this.initialDefaultVertexStyle=mxUtils$1.clone(n.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils$1.clone(n.defaultEdgeStyle),n.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":new Image().src=mxPopupMenu.prototype.submenuImage,!mxClient.IS_SVG&&mxConnectionHandler.prototype.connectImage!=null&&(new Image().src=mxConnectionHandler.prototype.connectImage.src),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,n.isEnabled=function(){return!1},n.panningHandler.isForcePanningEvent=function(G){return!mxEvent$1.isPopupTrigger(G.getEvent())}),this.actions=new Actions(this),this.menus=this.createMenus(),!n.standalone){this.createDivs(),this.createUi(),this.refresh();var s=mxUtils$1.bind(this,function(G){return G==null&&(G=window.event),n.isEditing()||G!=null&&this.isSelectionAllowed(G)});if(this.container==document.body&&(this.menubarContainer.onselectstart=s,this.menubarContainer.onmousedown=s,this.toolbarContainer.onselectstart=s,this.toolbarContainer.onmousedown=s,this.diagramContainer.onselectstart=s,this.diagramContainer.onmousedown=s,this.sidebarContainer.onselectstart=s,this.sidebarContainer.onmousedown=s,this.formatContainer.onselectstart=s,this.formatContainer.onmousedown=s,this.footerContainer.onselectstart=s,this.footerContainer.onmousedown=s,this.tabContainer!=null&&(this.tabContainer.onselectstart=s)),!this.editor.chromeless||this.editor.editable){var l=function(G){if(G!=null){var J=mxEvent$1.getSource(G);if(J.nodeName=="A")for(;J!=null;){if(J.className=="geHint")return!0;J=J.parentNode}}return s(G)};mxClient.IS_IE&&(typeof document.documentMode>"u"||document.documentMode<9)?mxEvent$1.addListener(this.diagramContainer,"contextmenu",l):this.diagramContainer.oncontextmenu=l}else n.panningHandler.usePopupTrigger=!1;if(n.init(this.diagramContainer),mxClient.IS_SVG&&n.view.getDrawPane()!=null){var r=n.view.getDrawPane().ownerSVGElement;r!=null&&(r.style.position="absolute")}if(this.hoverIcons=this.createHoverIcons(),n.graphHandler!=null){var o=n.graphHandler.start;n.graphHandler.start=function(){w.hoverIcons!=null&&w.hoverIcons.reset(),o.apply(this,arguments)}}mxEvent$1.addListener(this.diagramContainer,"mousemove",mxUtils$1.bind(this,function(G){var J=mxUtils$1.getOffset(this.diagramContainer);mxEvent$1.getClientX(G)-J.x-this.diagramContainer.clientWidth>0||mxEvent$1.getClientY(G)-J.y-this.diagramContainer.clientHeight>0?this.diagramContainer.setAttribute("title",mxResources$1.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var h=!1,u=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(G,J){return h||u.apply(this,arguments)},this.keydownHandler=mxUtils$1.bind(this,function(G){G.which==32&&!n.isEditing()?(h=!0,this.hoverIcons.reset(),n.container.style.cursor="move",!n.isEditing()&&mxEvent$1.getSource(G)==n.container&&mxEvent$1.consume(G)):!mxEvent$1.isConsumed(G)&&G.keyCode==27&&this.hideDialog(null,!0)}),mxEvent$1.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils$1.bind(this,function(G){n.container.style.cursor="",h=!1}),mxEvent$1.addListener(document,"keyup",this.keyupHandler);var d=n.panningHandler.isForcePanningEvent;n.panningHandler.isForcePanningEvent=function(G){return d.apply(this,arguments)||h||mxEvent$1.isMouseEvent(G.getEvent())&&(this.usePopupTrigger||!mxEvent$1.isPopupTrigger(G.getEvent()))&&(!mxEvent$1.isControlDown(G.getEvent())&&mxEvent$1.isRightMouseButton(G.getEvent())||mxEvent$1.isMiddleMouseButton(G.getEvent()))};var m=n.cellEditor.isStopEditingEvent;n.cellEditor.isStopEditingEvent=function(G){return m.apply(this,arguments)||G.keyCode==13&&(!mxClient.IS_SF&&mxEvent$1.isControlDown(G)||mxClient.IS_MAC&&mxEvent$1.isMetaDown(G)||mxClient.IS_SF&&mxEvent$1.isShiftDown(G))};var g=n.isZoomWheelEvent;n.isZoomWheelEvent=function(){return h||g.apply(this,arguments)};var x=!1,v=null,C=null,E=null,b=mxUtils$1.bind(this,function(){if(this.toolbar!=null&&x!=n.cellEditor.isContentEditing()){for(var G=this.toolbar.container.firstChild,J=[];G!=null;){var tt=G.nextSibling;mxUtils$1.indexOf(this.toolbar.staticElements,G)<0&&(G.parentNode.removeChild(G),J.push(G)),G=tt}var gt=this.toolbar.fontMenu,dt=this.toolbar.sizeMenu;if(E==null)this.toolbar.createTextToolbar();else{for(var K=0;K<E.length;K++)this.toolbar.container.appendChild(E[K]);this.toolbar.fontMenu=v,this.toolbar.sizeMenu=C}x=n.cellEditor.isContentEditing(),v=gt,C=dt,E=J}}),w=this,$=n.cellEditor.startEditing;n.cellEditor.startEditing=function(){if($.apply(this,arguments),b(),n.cellEditor.isContentEditing()){var G=!1,J=function(){G||(G=!0,window.setTimeout(function(){var tt=n.getSelectedEditingElement();if(tt!=null){var gt=mxUtils$1.getCurrentStyle(tt);gt!=null&&w.toolbar!=null&&(w.toolbar.setFontName(Graph$1.stripQuotes(gt.fontFamily)),w.toolbar.setFontSize(parseInt(gt.fontSize)))}G=!1},0))};mxEvent$1.addListener(n.cellEditor.textarea,"input",J),mxEvent$1.addListener(n.cellEditor.textarea,"touchend",J),mxEvent$1.addListener(n.cellEditor.textarea,"mouseup",J),mxEvent$1.addListener(n.cellEditor.textarea,"keyup",J),J()}};var P=n.cellEditor.stopEditing;if(n.cellEditor.stopEditing=function(G,J){try{P.apply(this,arguments),b()}catch(tt){w.handleError(tt)}},n.container.setAttribute("tabindex","0"),n.container.style.cursor="default",window.self===window.top&&n.container.parentNode!=null)try{n.container.focus()}catch{}var M=n.fireMouseEvent;n.fireMouseEvent=function(G,J,tt){G==mxEvent$1.MOUSE_DOWN&&this.container.focus(),M.apply(this,arguments)},n.popupMenuHandler.autoExpand=!0,this.menus!=null&&(n.popupMenuHandler.factoryMethod=mxUtils$1.bind(this,function(G,J,tt){this.menus.createPopupMenu(G,J,tt)})),mxEvent$1.addGestureListeners(document,mxUtils$1.bind(this,function(G){n.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(i),this.getKeyHandler=function(){return keyHandler};var D=["rounded","shadow","glass","dashed","dashPattern","labelBackgroundColor","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"],k=["shape","edgeStyle","curved","rounded","elbow","jumpStyle","jumpSize","comic","sketch","fillWeight","hachureGap","hachureAngle","jiggle","disableMultiStroke","disableMultiStrokeFill","fillStyle","curveFitting","simplification","sketchStyle"];this.setDefaultStyle=function(G){try{var J=n.view.getState(G);if(J!=null){var tt=G.clone();tt.style="";var gt=n.getCellStyle(tt),dt=[],K=[];for(var nt in J.style)gt[nt]!=J.style[nt]&&(dt.push(J.style[nt]),K.push(nt));for(var ht=n.getModel().getStyle(J.cell),bt=ht!=null?ht.split(";"):[],$t=0;$t<bt.length;$t++){var Dt=bt[$t],ct=Dt.indexOf("=");if(ct>=0){var nt=Dt.substring(0,ct),Et=Dt.substring(ct+1);gt[nt]!=null&&Et=="none"&&(dt.push(Et),K.push(nt))}}n.getModel().isEdge(J.cell)?n.currentEdgeStyle={}:n.currentVertexStyle={},this.fireEvent(new mxEventObject$1("styleChanged","keys",K,"values",dt,"cells",[J.cell]))}}catch(Ht){this.handleError(Ht)}},this.clearDefaultStyle=function(){n.currentEdgeStyle=mxUtils$1.clone(n.defaultEdgeStyle),n.currentVertexStyle=mxUtils$1.clone(n.defaultVertexStyle),this.fireEvent(new mxEventObject$1("styleChanged","keys",[],"values",[],"cells",[]))};for(var Z=["fontFamily","fontSource","fontSize","fontColor"],q=["edgeStyle","startArrow","startFill","startSize","endArrow","endFill","endSize"],j=[["startArrow","startFill","startSize","sourcePerimeterSpacing","endArrow","endFill","endSize","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],Z,["opacity"],["align"],["html"]],X=0;X<j.length;X++)for(var rt=0;rt<j[X].length;rt++)D.push(j[X][rt]);for(var X=0;X<k.length;X++)mxUtils$1.indexOf(D,k[X])<0&&D.push(k[X]);var et=function(G,J,tt){tt=tt??n.getModel(),tt.beginUpdate();try{for(var gt=0;gt<G.length;gt++){var dt=G[gt],K;if(J)K=["fontSize","fontFamily","fontColor"];else{var nt=tt.getStyle(dt),ht=nt!=null?nt.split(";"):[];K=D.slice();for(var bt=0;bt<ht.length;bt++){var $t=ht[bt],Dt=$t.indexOf("=");if(Dt>=0){var ct=$t.substring(0,Dt),Et=mxUtils$1.indexOf(K,ct);Et>=0&&K.splice(Et,1);for(var Ht=0;Ht<j.length;Ht++){var Ot=j[Ht];if(mxUtils$1.indexOf(Ot,ct)>=0)for(var Nt=0;Nt<Ot.length;Nt++){var lt=mxUtils$1.indexOf(K,Ot[Nt]);lt>=0&&K.splice(lt,1)}}}}}for(var yt=tt.isEdge(dt),_t=yt?n.currentEdgeStyle:n.currentVertexStyle,Rt=tt.getStyle(dt),bt=0;bt<K.length;bt++){var ct=K[bt],Yt=_t[ct];Yt!=null&&(ct!="shape"||yt)&&(!yt||mxUtils$1.indexOf(k,ct)<0)&&(Rt=mxUtils$1.setStyle(Rt,ct,Yt))}tt.setStyle(dt,Rt)}}finally{tt.endUpdate()}};if(n.addListener("cellsInserted",function(G,J){et(J.getProperty("cells"))}),n.addListener("textInserted",function(G,J){et(J.getProperty("cells"),!0)}),this.insertHandler=et,n.connectionHandler.addListener(mxEvent$1.CONNECT,function(G,J){var tt=[J.getProperty("cell")];J.getProperty("terminalInserted")&&tt.push(J.getProperty("terminal")),et(tt)}),this.addListener("styleChanged",mxUtils$1.bind(this,function(G,J){var tt=J.getProperty("cells"),gt=!1,dt=!1;if(tt.length>0)for(var K=0;K<tt.length&&(gt=n.getModel().isVertex(tt[K])||gt,dt=n.getModel().isEdge(tt[K])||dt,!(dt&&gt));K++);else gt=!0,dt=!0;for(var nt=J.getProperty("keys"),ht=J.getProperty("values"),K=0;K<nt.length;K++){var bt=mxUtils$1.indexOf(Z,nt[K])>=0;(nt[K]!="strokeColor"||ht[K]!=null&&ht[K]!="none")&&(mxUtils$1.indexOf(k,nt[K])>=0?dt||mxUtils$1.indexOf(q,nt[K])>=0?ht[K]==null?delete n.currentEdgeStyle[nt[K]]:n.currentEdgeStyle[nt[K]]=ht[K]:gt&&mxUtils$1.indexOf(D,nt[K])>=0&&(ht[K]==null?delete n.currentVertexStyle[nt[K]]:n.currentVertexStyle[nt[K]]=ht[K]):mxUtils$1.indexOf(D,nt[K])>=0&&((gt||bt)&&(ht[K]==null?delete n.currentVertexStyle[nt[K]]:n.currentVertexStyle[nt[K]]=ht[K]),(dt||bt||mxUtils$1.indexOf(q,nt[K])>=0)&&(ht[K]==null?delete n.currentEdgeStyle[nt[K]]:n.currentEdgeStyle[nt[K]]=ht[K])))}if(this.toolbar!=null){if(this.toolbar.setFontName(n.currentVertexStyle.fontFamily),this.toolbar.setFontSize(n.currentVertexStyle.fontSize),this.toolbar.edgeStyleMenu!=null){var $t=this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0];n.currentEdgeStyle.edgeStyle=="orthogonalEdgeStyle"&&n.currentEdgeStyle.curved=="1"?$t.className="geSprite geSprite-curved":n.currentEdgeStyle.edgeStyle=="straight"||n.currentEdgeStyle.edgeStyle=="none"||n.currentEdgeStyle.edgeStyle==null?$t.className="geSprite geSprite-straight":n.currentEdgeStyle.edgeStyle=="entityRelationEdgeStyle"?$t.className="geSprite geSprite-entity":n.currentEdgeStyle.edgeStyle=="elbowEdgeStyle"?$t.className="geSprite geSprite-"+(n.currentEdgeStyle.elbow=="vertical"?"verticalelbow":"horizontalelbow"):n.currentEdgeStyle.edgeStyle=="isometricEdgeStyle"?$t.className="geSprite geSprite-"+(n.currentEdgeStyle.elbow=="vertical"?"verticalisometric":"horizontalisometric"):$t.className="geSprite geSprite-orthogonal"}if(this.toolbar.edgeShapeMenu!=null){var Dt=this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0];n.currentEdgeStyle.shape=="link"?Dt.className="geSprite geSprite-linkedge":n.currentEdgeStyle.shape=="flexArrow"?Dt.className="geSprite geSprite-arrow":n.currentEdgeStyle.shape=="arrow"?Dt.className="geSprite geSprite-simplearrow":Dt.className="geSprite geSprite-connection"}if(this.toolbar.lineStartMenu!=null){var ct=this.toolbar.lineStartMenu.getElementsByTagName("div")[0];ct.className=this.getCssClassForMarker("start",n.currentEdgeStyle.shape,n.currentEdgeStyle[mxConstants$1.STYLE_STARTARROW],mxUtils$1.getValue(n.currentEdgeStyle,"startFill","1"))}if(this.toolbar.lineEndMenu!=null){var Et=this.toolbar.lineEndMenu.getElementsByTagName("div")[0];Et.className=this.getCssClassForMarker("end",n.currentEdgeStyle.shape,n.currentEdgeStyle[mxConstants$1.STYLE_ENDARROW],mxUtils$1.getValue(n.currentEdgeStyle,"endFill","1"))}}})),this.toolbar!=null){var Y=mxUtils$1.bind(this,function(){var G=n.currentVertexStyle.fontFamily||"Helvetica",J=String(n.currentVertexStyle.fontSize||"12"),tt=n.getView().getState(n.getSelectionCell());tt!=null&&(G=tt.style[mxConstants$1.STYLE_FONTFAMILY]||G,J=tt.style[mxConstants$1.STYLE_FONTSIZE]||J,G.length>10&&(G=G.substring(0,8)+"...")),this.toolbar.setFontName(G),this.toolbar.setFontSize(J)});n.getSelectionModel().addListener(mxEvent$1.CHANGE,Y),n.getModel().addListener(mxEvent$1.CHANGE,Y)}n.addListener(mxEvent$1.CELLS_ADDED,function(G,J){var tt=J.getProperty("cells"),gt=J.getProperty("parent");n.getModel().isLayer(gt)&&!n.isCellVisible(gt)&&tt!=null&&tt.length>0&&n.getModel().setVisible(gt,!0)}),this.gestureHandler=mxUtils$1.bind(this,function(G){this.currentMenu!=null&&mxEvent$1.getSource(G)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent$1.addGestureListeners(document,this.gestureHandler),this.resizeHandler=mxUtils$1.bind(this,function(){window.setTimeout(mxUtils$1.bind(this,function(){this.editor.graph!=null&&this.refresh()}),0)}),mxEvent$1.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils$1.bind(this,function(){this.refresh()}),mxEvent$1.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=mxUtils$1.bind(this,function(){window.scrollTo(0,0)}),mxEvent$1.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils$1.bind(this,function(){n.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils$1.bind(this,function(){n.view.validateBackground()})),n.addListener("gridSizeChanged",mxUtils$1.bind(this,function(){n.isGridEnabled()&&n.view.validateBackground()})),this.editor.resetGraph()}this.init(),n.standalone||this.open()}}EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8;EditorUi.prototype.menubarHeight=30;EditorUi.prototype.formatEnabled=!0;EditorUi.prototype.formatWidth=240;EditorUi.prototype.toolbarHeight=38;EditorUi.prototype.footerHeight=28;EditorUi.prototype.sidebarFooterHeight=34;EditorUi.prototype.hsplitPosition=screen.width<=640?118:urlParams["sidebar-entries"]!="large"?212:240;EditorUi.prototype.allowAnimation=!0;EditorUi.prototype.lightboxMaxFitScale=2;EditorUi.prototype.lightboxVerticalDivider=4;EditorUi.prototype.hsplitClickEnabled=!1;EditorUi.prototype.init=function(){var a=this.editor.graph;if(!a.standalone){urlParams["shape-picker"]!="0"&&this.installShapePicker(),mxEvent$1.addListener(a.container,"scroll",mxUtils$1.bind(this,function(){a.tooltipHandler.hide(),a.connectionHandler!=null&&a.connectionHandler.constraintHandler!=null&&a.connectionHandler.constraintHandler.reset()})),a.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){a.tooltipHandler.hide();var e=a.getRubberband();e!=null&&e.cancel()})),mxEvent$1.addListener(a.container,"keydown",mxUtils$1.bind(this,function(e){this.onKeyDown(e)})),mxEvent$1.addListener(a.container,"keypress",mxUtils$1.bind(this,function(e){this.onKeyPress(e)})),this.addUndoListener(),this.addBeforeUnloadListener(),a.getSelectionModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()})),a.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){this.updateActionStates()}));var i=a.setDefaultParent,t=this;this.editor.graph.setDefaultParent=function(){i.apply(this,arguments),t.updateActionStates()},a.editLink=t.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),this.format!=null&&this.format.init()}};EditorUi.prototype.installShapePicker=function(){var a=this.editor.graph,i=this;a.addListener(mxEvent$1.FIRE_MOUSE_EVENT,mxUtils$1.bind(this,function(l,r){r.getProperty("eventName")=="mouseDown"&&i.hideShapePicker()})),a.addListener(mxEvent$1.ESCAPE,mxUtils$1.bind(this,function(){i.hideShapePicker(!0)})),a.getSelectionModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){i.hideShapePicker(!0)})),a.getModel().addListener(mxEvent$1.CHANGE,mxUtils$1.bind(this,function(){i.hideShapePicker(!0)}));var t=a.popupMenuHandler.isMenuShowing;a.popupMenuHandler.isMenuShowing=function(){return t.apply(this,arguments)||i.shapePicker!=null};var e=a.dblClick;if(a.dblClick=function(l,r){if(this.isEnabled())if(r==null&&i.sidebar!=null&&!mxEvent$1.isShiftDown(l)){mxEvent$1.consume(l);var o=mxUtils$1.convertPoint(this.container,mxEvent$1.getClientX(l),mxEvent$1.getClientY(l));window.setTimeout(mxUtils$1.bind(this,function(){i.showShapePicker(o.x,o.y)}),30)}else e.apply(this,arguments)},this.hoverIcons!=null){var n=this.hoverIcons.drag;this.hoverIcons.drag=function(){i.hideShapePicker(),n.apply(this,arguments)};var s=this.hoverIcons.execute;this.hoverIcons.execute=function(l,r,o){var h=o.getEvent();!this.graph.isCloneEvent(h)&&!mxEvent$1.isShiftDown(h)?this.graph.connectVertex(l.cell,r,this.graph.defaultEdgeLength,h,null,null,mxUtils$1.bind(this,function(u,d,m){var g=a.getCompositeParent(l.cell),x=a.getCellGeometry(g);for(o.consume();g!=null&&a.model.isVertex(g)&&x!=null&&x.relative;)cell=g,g=a.model.getParent(cell),x=a.getCellGeometry(g);window.setTimeout(mxUtils$1.bind(this,function(){i.showShapePicker(o.getGraphX(),o.getGraphY(),g,mxUtils$1.bind(this,function(v){m(v)}),r)}),30)}),mxUtils$1.bind(this,function(u){this.graph.selectCellsForConnectVertex(u,h,this)})):s.apply(this,arguments)}}};EditorUi.prototype.showShapePicker=function(a,i,t,e,n){var s=this.getCellsForShapePicker(t);if(s!=null&&s.length>0){var l=this,r=this.editor.graph,o=document.createElement("div"),h=r.view.getState(t),u=t!=null&&(h==null||!r.isTransparentState(h))?r.copyStyle(t):null;o.className="geToolbarContainer geSidebarContainer geSidebar",o.style.cssText="position:absolute;left:"+a+"px;top:"+i+"px;width:140px;border-radius:10px;padding:4px;text-align:center;box-shadow:0px 0px 3px 1px #d1d1d1;padding: 6px 0 8px 0;",mxUtils$1.setPrefixedStyle(o.style,"transform","translate(-22px,-22px)"),r.background!=null&&r.background!=mxConstants$1.NONE&&(o.style.backgroundColor=r.background),r.container.appendChild(o);for(var d=mxUtils$1.bind(this,function(g){var x=document.createElement("a");x.className="geItem",x.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:3px 0 0 3px;",o.appendChild(x),u!=null?this.sidebar.graph.pasteStyle(u,[g]):l.insertHandler([g],g.value!="",this.sidebar.graph.model),this.sidebar.createThumb([g],25,25,x,null,!0,!1,g.geometry.width,g.geometry.height),mxEvent$1.addListener(x,"click",function(){var v=r.cloneCell(g);if(e!=null)e(v);else{v.geometry.x=r.snap(Math.round(a/r.view.scale)-r.view.translate.x-g.geometry.width/2),v.geometry.y=r.snap(Math.round(i/r.view.scale)-r.view.translate.y-g.geometry.height/2),r.model.beginUpdate();try{r.addCell(v)}finally{r.model.endUpdate()}r.setSelectionCell(v),r.scrollCellToVisible(v),r.startEditingAtCell(v),l.hoverIcons!=null&&l.hoverIcons.update(r.view.getState(v))}l.hideShapePicker()})}),m=0;m<s.length;m++)d(s[m]);l.hoverIcons!=null&&l.hoverIcons.reset(),r.popupMenuHandler.hideMenu(),r.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=e,this.shapePicker=o}};EditorUi.prototype.getCellsForShapePicker=function(a){var i=mxUtils$1.bind(this,function(t,e,n,s){return this.editor.graph.createVertex(null,null,s||"",0,0,e||120,n||60,t,!1)});return[a!=null?this.editor.graph.cloneCell(a):i("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;",40,20,"Text"),i("whiteSpace=wrap;html=1;"),i("ellipse;whiteSpace=wrap;html=1;",120,80),i("rhombus;whiteSpace=wrap;html=1;",80,80),i("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),i("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),i("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),i("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),i("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),i("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80),i("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100),i("triangle;whiteSpace=wrap;html=1;",60,80),i("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),i("shape=tape;whiteSpace=wrap;html=1;",120,100),i("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),i("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80)]};EditorUi.prototype.hideShapePicker=function(a){this.shapePicker!=null&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,!a&&this.shapePickerCallback!=null&&this.shapePickerCallback(),this.shapePickerCallback=null)};EditorUi.prototype.onKeyDown=function(a){var i=this.editor.graph;a.which==9&&i.isEnabled()&&!mxEvent$1.isAltDown(a)&&(!i.isEditing()||!mxEvent$1.isShiftDown(a))&&(i.isEditing()?i.stopEditing(!1):i.selectCell(!mxEvent$1.isShiftDown(a)),mxEvent$1.consume(a))};EditorUi.prototype.onKeyPress=function(a){var i=this.editor.graph;if(this.isImmediateEditingEvent(a)&&!i.isEditing()&&!i.isSelectionEmpty()&&a.which!==0&&a.which!==27&&!mxEvent$1.isAltDown(a)&&!mxEvent$1.isControlDown(a)&&!mxEvent$1.isMetaDown(a)&&(i.escape(),i.startEditing(),mxClient.IS_FF)){var t=i.cellEditor;if(t.textarea!=null){t.textarea.innerHTML=String.fromCharCode(a.which);var e=document.createRange();e.selectNodeContents(t.textarea),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}}};EditorUi.prototype.isImmediateEditingEvent=function(a){return!0};EditorUi.prototype.getCssClassForMarker=function(a,i,t,e){var n="";return i=="flexArrow"?n=t!=null&&t!=mxConstants$1.NONE?"geSprite geSprite-"+a+"blocktrans":"geSprite geSprite-noarrow":t=="box"||t=="halfCircle"?n="geSprite geSvgSprite geSprite-"+t+(a=="end"?" geFlipSprite":""):t==mxConstants$1.ARROW_CLASSIC?n=e=="1"?"geSprite geSprite-"+a+"classic":"geSprite geSprite-"+a+"classictrans":t==mxConstants$1.ARROW_CLASSIC_THIN?n=e=="1"?"geSprite geSprite-"+a+"classicthin":"geSprite geSprite-"+a+"classicthintrans":t==mxConstants$1.ARROW_OPEN?n="geSprite geSprite-"+a+"open":t==mxConstants$1.ARROW_OPEN_THIN?n="geSprite geSprite-"+a+"openthin":t==mxConstants$1.ARROW_BLOCK?n=e=="1"?"geSprite geSprite-"+a+"block":"geSprite geSprite-"+a+"blocktrans":t==mxConstants$1.ARROW_BLOCK_THIN?n=e=="1"?"geSprite geSprite-"+a+"blockthin":"geSprite geSprite-"+a+"blockthintrans":t==mxConstants$1.ARROW_OVAL?n=e=="1"?"geSprite geSprite-"+a+"oval":"geSprite geSprite-"+a+"ovaltrans":t==mxConstants$1.ARROW_DIAMOND?n=e=="1"?"geSprite geSprite-"+a+"diamond":"geSprite geSprite-"+a+"diamondtrans":t==mxConstants$1.ARROW_DIAMOND_THIN?n=e=="1"?"geSprite geSprite-"+a+"thindiamond":"geSprite geSprite-"+a+"thindiamondtrans":t=="openAsync"?n="geSprite geSprite-"+a+"openasync":t=="dash"?n="geSprite geSprite-"+a+"dash":t=="cross"?n="geSprite geSprite-"+a+"cross":t=="async"?n=e=="1"?"geSprite geSprite-"+a+"async":"geSprite geSprite-"+a+"asynctrans":t=="circle"||t=="circlePlus"?n=e=="1"||t=="circle"?"geSprite geSprite-"+a+"circle":"geSprite geSprite-"+a+"circleplus":t=="ERone"?n="geSprite geSprite-"+a+"erone":t=="ERmandOne"?n="geSprite geSprite-"+a+"eronetoone":t=="ERmany"?n="geSprite geSprite-"+a+"ermany":t=="ERoneToMany"?n="geSprite geSprite-"+a+"eronetomany":t=="ERzeroToOne"?n="geSprite geSprite-"+a+"eroneopt":t=="ERzeroToMany"?n="geSprite geSprite-"+a+"ermanyopt":n="geSprite geSprite-noarrow",n};EditorUi.prototype.createMenus=function(){return null};EditorUi.prototype.updatePasteActionStates=function(){var a=this.editor.graph,i=this.actions.get("paste"),t=this.actions.get("pasteHere");i.setEnabled(this.editor.graph.cellEditor.isContentEditing()||!mxClipboard.isEmpty()&&a.isEnabled()&&!a.isCellLocked(a.getDefaultParent())),t.setEnabled(i.isEnabled())};EditorUi.prototype.initClipboard=function(){var a=this,i=mxClipboard.cut;mxClipboard.cut=function(s){s.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):i.apply(this,arguments),a.updatePasteActionStates()},mxClipboard.copy,mxClipboard.copy=function(s){var l=null;if(s.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{l=l||s.getSelectionCells(),l=s.getExportableCells(s.model.getTopmostCells(l));for(var r=new Object,o=s.createCellLookup(l),h=s.cloneCells(l,null,r),u=new mxGraphModel,d=u.getChildAt(u.getRoot(),0),m=0;m<h.length;m++){u.add(d,h[m]);var g=s.view.getState(l[m]);if(g!=null){var x=s.getCellGeometry(h[m]);x!=null&&x.relative&&!u.isEdge(l[m])&&o[mxObjectIdentity.get(u.getParent(l[m]))]==null&&(x.offset=null,x.relative=!1,x.x=g.x/g.view.scale-g.view.translate.x,x.y=g.y/g.view.scale-g.view.translate.y)}}s.updateCustomLinks(s.createCellMapping(r,o),h),mxClipboard.insertCount=1,mxClipboard.setCells(h)}return a.updatePasteActionStates(),l};var t=mxClipboard.paste;mxClipboard.paste=function(s){var l=null;return s.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):l=t.apply(this,arguments),a.updatePasteActionStates(),l};var e=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){e.apply(this,arguments),a.updatePasteActionStates()};var n=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(s,l){n.apply(this,arguments),a.updatePasteActionStates()},this.updatePasteActionStates()};EditorUi.prototype.lazyZoomDelay=20;EditorUi.prototype.wheelZoomDelay=400;EditorUi.prototype.buttonZoomDelay=600;EditorUi.prototype.initCanvas=function(){var a=this.editor.graph;a.timerAutoScroll=!0,a.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((a.container.offsetWidth-34)/a.view.scale)),Math.max(0,Math.round((a.container.offsetHeight-34)/a.view.scale)))},a.view.getBackgroundPageBounds=function(){var Y=this.graph.getPageLayout(),G=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+Y.x*G.width),this.scale*(this.translate.y+Y.y*G.height),this.scale*Y.width*G.width,this.scale*Y.height*G.height)},a.getPreferredPageSize=function(Y,G,J){var tt=this.getPageLayout(),gt=this.getPageSize();return new mxRectangle(0,0,tt.width*gt.width,tt.height*gt.height)};var i=null,t=this;if(this.editor.isChromelessView()){i=mxUtils$1.bind(this,function(Y,G,J,tt){if(a.container!=null&&!a.isViewer()){J=J??0,tt=tt??0;var gt=a.pageVisible?a.view.getBackgroundPageBounds():a.getGraphBounds(),dt=mxUtils$1.hasScrollbars(a.container),K=a.view.translate,nt=a.view.scale,ht=mxRectangle.fromRectangle(gt);ht.x=ht.x/nt-K.x,ht.y=ht.y/nt-K.y,ht.width/=nt,ht.height/=nt;var bt=a.container.scrollTop,$t=a.container.scrollLeft,Dt=mxClient.IS_QUIRKS||document.documentMode>=8?20:14;(document.documentMode==8||document.documentMode==9)&&(Dt+=3);var ct=a.container.offsetWidth-Dt,Et=a.container.offsetHeight-Dt,Ht=Y?Math.max(.3,Math.min(G||1,ct/ht.width)):nt,Ot=(ct-Ht*ht.width)/2/Ht,Nt=this.lightboxVerticalDivider==0?0:(Et-Ht*ht.height)/this.lightboxVerticalDivider/Ht;if(dt&&(Ot=Math.max(Ot,0),Nt=Math.max(Nt,0)),dt||gt.width<ct||gt.height<Et)a.view.scaleAndTranslate(Ht,Math.floor(Ot-ht.x),Math.floor(Nt-ht.y)),a.container.scrollTop=bt*Ht/nt,a.container.scrollLeft=$t*Ht/nt;else if(J!=0||tt!=0){var lt=a.view.translate;a.view.setTranslate(Math.floor(lt.x+J/nt),Math.floor(lt.y+tt/nt))}}}),this.chromelessResize=i,this.chromelessWindowResize=mxUtils$1.bind(this,function(){this.chromelessResize(!1)});var e=mxUtils$1.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent$1.addListener(window,"resize",e),this.destroyFunctions.push(function(){mxEvent$1.removeListener(window,"resize",e)}),this.editor.addListener("resetGraphView",mxUtils$1.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils$1.bind(this,function(Y){a.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils$1.bind(this,function(Y){a.zoomOut(),this.chromelessResize(!1)}),urlParams.toolbar!="0"){var n=JSON.parse(decodeURIComponent(urlParams["toolbar-config"]||"{}"));this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=a.isViewer()?"0":"50%",mxClient.IS_VML||(mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"));var s=mxUtils$1.bind(this,function(){var Y=mxUtils$1.getCurrentStyle(a.container);a.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(Y!=null?parseInt(Y["margin-bottom"]||0):0)+(this.tabContainer!=null?20+parseInt(this.tabContainer.style.height):20)+"px"});this.editor.addListener("resetGraphView",s),s();var l=mxUtils$1.bind(this,function(Y,G,J){var tt=document.createElement("span");tt.style.paddingLeft="8px",tt.style.paddingRight="8px",tt.style.cursor="pointer",mxEvent$1.addListener(tt,"click",Y),J!=null&&tt.setAttribute("title",J);var gt=document.createElement("img");return gt.setAttribute("border","0"),gt.setAttribute("src",G),tt.appendChild(gt),this.chromelessToolbar.appendChild(tt),tt});if(n.backBtn!=null&&l(mxUtils$1.bind(this,function(Y){window.location.href=n.backBtn.url,mxEvent$1.consume(Y)}),Editor$1.backLargeImage,mxResources$1.get("back",null,"Back")),this.isPagesEnabled()){var r=l(mxUtils$1.bind(this,function(Y){this.actions.get("previousPage").funct(),mxEvent$1.consume(Y)}),Editor$1.previousLargeImage,mxResources$1.get("previousPage")),o=document.createElement("div");o.style.display="inline-block",o.style.verticalAlign="top",o.style.fontFamily="Helvetica,Arial",o.style.marginTop="8px",o.style.fontSize="14px",o.style.color="#ffffff",this.chromelessToolbar.appendChild(o);var h=l(mxUtils$1.bind(this,function(Y){this.actions.get("nextPage").funct(),mxEvent$1.consume(Y)}),Editor$1.nextLargeImage,mxResources$1.get("nextPage")),u=mxUtils$1.bind(this,function(){this.pages!=null&&this.pages.length>1&&this.currentPage!=null&&(o.innerHTML="",mxUtils$1.write(o,mxUtils$1.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))});r.style.paddingLeft="0px",r.style.paddingRight="4px",h.style.paddingLeft="4px",h.style.paddingRight="0px";var d=mxUtils$1.bind(this,function(){this.pages!=null&&this.pages.length>1&&this.currentPage!=null?(h.style.display="",r.style.display="",o.style.display="inline-block"):(h.style.display="none",r.style.display="none",o.style.display="none"),u()});this.editor.addListener("resetGraphView",d),this.editor.addListener("pageSelected",u)}l(mxUtils$1.bind(this,function(Y){this.actions.get("zoomOut").funct(),mxEvent$1.consume(Y)}),Editor$1.zoomOutLargeImage,mxResources$1.get("zoomOut")+" (Alt+Mousewheel)"),l(mxUtils$1.bind(this,function(Y){this.actions.get("zoomIn").funct(),mxEvent$1.consume(Y)}),Editor$1.zoomInLargeImage,mxResources$1.get("zoomIn")+" (Alt+Mousewheel)"),l(mxUtils$1.bind(this,function(Y){a.isLightboxView()?(a.view.scale==1?this.lightboxFit():a.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent$1.consume(Y)}),Editor$1.actualSizeLargeImage,mxResources$1.get("fit"));var m=null,g=null,x=mxUtils$1.bind(this,function(Y){m!=null&&(window.clearTimeout(m),m=null),g!=null&&(window.clearTimeout(g),g=null),m=window.setTimeout(mxUtils$1.bind(this,function(){mxUtils$1.setOpacity(this.chromelessToolbar,0),m=null,g=window.setTimeout(mxUtils$1.bind(this,function(){this.chromelessToolbar.style.display="none",g=null}),600)}),Y||200)}),v=mxUtils$1.bind(this,function(Y){m!=null&&(window.clearTimeout(m),m=null),g!=null&&(window.clearTimeout(g),g=null),this.chromelessToolbar.style.display="",mxUtils$1.setOpacity(this.chromelessToolbar,Y||30)});if(urlParams.layers=="1"){this.layersDialog=null;var C=l(mxUtils$1.bind(this,function(Y){if(this.layersDialog!=null)this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null;else{this.layersDialog=a.createLayersDialog(),mxEvent$1.addListener(this.layersDialog,"mouseleave",mxUtils$1.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null}));var G=C.getBoundingClientRect();mxUtils$1.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily="Helvetica,Arial",this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.color="#ffffff",mxUtils$1.setOpacity(this.layersDialog,70),this.layersDialog.style.left=G.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px";var J=mxUtils$1.getCurrentStyle(this.editor.graph.container);this.layersDialog.style.zIndex=J.zIndex,document.body.appendChild(this.layersDialog)}mxEvent$1.consume(Y)}),Editor$1.layersLargeImage,mxResources$1.get("layers")),E=a.getModel();E.addListener(mxEvent$1.CHANGE,function(){C.style.display=E.getChildCount(E.root)>1?"":"none"})}if(urlParams.openInSameWin!="1"&&this.addChromelessToolbarItems(l),(this.editor.editButtonLink!=null||this.editor.editButtonFunc!=null)&&l(mxUtils$1.bind(this,function(Y){this.editor.editButtonFunc!=null?this.editor.editButtonFunc():this.editor.editButtonLink=="_blank"?this.editor.editAsNew(this.getEditBlankXml()):a.openLink(this.editor.editButtonLink,"editWindow"),mxEvent$1.consume(Y)}),Editor$1.editLargeImage,mxResources$1.get("edit")),this.lightboxToolbarActions!=null)for(var b=0;b<this.lightboxToolbarActions.length;b++){var w=this.lightboxToolbarActions[b];l(w.fn,w.icon,w.tooltip)}n.refreshBtn!=null&&l(mxUtils$1.bind(this,function(Y){n.refreshBtn.url?window.location.href=n.refreshBtn.url:window.location.reload(),mxEvent$1.consume(Y)}),Editor$1.refreshLargeImage,mxResources$1.get("refresh",null,"Refresh")),n.fullscreenBtn!=null&&window.self!==window.top&&l(mxUtils$1.bind(this,function(Y){n.fullscreenBtn.url?a.openLink(n.fullscreenBtn.url):a.openLink(window.location.href),mxEvent$1.consume(Y)}),Editor$1.fullscreenLargeImage,mxResources$1.get("openInNewWindow",null,"Open in New Window")),(n.closeBtn&&window.self===window.top||a.lightbox&&(urlParams.close=="1"||this.container!=document.body))&&l(mxUtils$1.bind(this,function(Y){urlParams.close=="1"||n.closeBtn?window.close():(this.destroy(),mxEvent$1.consume(Y))}),Editor$1.closeLargeImage,mxResources$1.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",a.isViewer()||mxUtils$1.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),a.container.appendChild(this.chromelessToolbar),mxEvent$1.addListener(a.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils$1.bind(this,function(Y){mxEvent$1.isTouchEvent(Y)||(mxEvent$1.isShiftDown(Y)||v(30),x())})),mxEvent$1.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(Y){mxEvent$1.consume(Y)}),mxEvent$1.addListener(this.chromelessToolbar,"mouseenter",mxUtils$1.bind(this,function(Y){mxEvent$1.isShiftDown(Y)?x():v(100)})),mxEvent$1.addListener(this.chromelessToolbar,"mousemove",mxUtils$1.bind(this,function(Y){mxEvent$1.isShiftDown(Y)?x():v(100),mxEvent$1.consume(Y)})),mxEvent$1.addListener(this.chromelessToolbar,"mouseleave",mxUtils$1.bind(this,function(Y){mxEvent$1.isTouchEvent(Y)||v(30)}));var $=a.getTolerance();a.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(Y,G){this.startX=G.getGraphX(),this.startY=G.getGraphY(),this.scrollLeft=a.container.scrollLeft,this.scrollTop=a.container.scrollTop},mouseMove:function(Y,G){},mouseUp:function(Y,G){mxEvent$1.isTouchEvent(G.getEvent())&&Math.abs(this.scrollLeft-a.container.scrollLeft)<$&&Math.abs(this.scrollTop-a.container.scrollTop)<$&&Math.abs(this.startX-G.getGraphX())<$&&Math.abs(this.startY-G.getGraphY())<$&&(parseFloat(t.chromelessToolbar.style.opacity||0)>0?x():v(30))}})}this.editor.editable||this.addChromelessClickHandler()}else if(this.editor.extendCanvas){var P=a.view.validate;if(a.view.validate=function(){if(this.graph.container!=null&&mxUtils$1.hasScrollbars(this.graph.container)){var Y=this.graph.getPagePadding(),G=this.graph.getPageSize();this.translate.x,this.translate.y,this.translate.x=Y.x-(this.x0||0)*G.width,this.translate.y=Y.y-(this.y0||0)*G.height}P.apply(this,arguments)},!a.isViewer()){var M=a.sizeDidChange;a.sizeDidChange=function(){if(this.container!=null&&mxUtils$1.hasScrollbars(this.container)){var Y=this.getPageLayout(),G=this.getPagePadding(),J=this.getPageSize(),tt=Math.ceil(2*G.x+Y.width*J.width),gt=Math.ceil(2*G.y+Y.height*J.height),dt=a.minimumGraphSize;(dt==null||dt.width!=tt||dt.height!=gt)&&(a.minimumGraphSize=new mxRectangle(0,0,tt,gt));var K=G.x-Y.x*J.width,nt=G.y-Y.y*J.height;if(!this.autoTranslate&&(this.view.translate.x!=K||this.view.translate.y!=nt)){this.autoTranslate=!0,this.view.x0=Y.x,this.view.y0=Y.y;var ht=a.view.translate.x,bt=a.view.translate.y;a.view.setTranslate(K,nt),a.container.scrollLeft+=Math.round((K-ht)*a.view.scale),a.container.scrollTop+=Math.round((nt-bt)*a.view.scale),this.autoTranslate=!1;return}M.apply(this,arguments)}else this.fireEvent(new mxEventObject$1(mxEvent$1.SIZE,"bounds",this.getGraphBounds()))}}}var D=a.view.getBackgroundPane(),k=a.view.getDrawPane();a.cumulativeZoomFactor=1;var Z=null,q=null,j=null,X=null,rt=null,et=function(Y){Z!=null&&window.clearTimeout(Z),window.setTimeout(function(){(!a.isMouseDown||X)&&(Z=window.setTimeout(mxUtils$1.bind(this,function(){a.isFastZoomEnabled()&&(a.view.backgroundPageShape!=null&&a.view.backgroundPageShape.node!=null&&(mxUtils$1.setPrefixedStyle(a.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils$1.setPrefixedStyle(a.view.backgroundPageShape.node.style,"transform",null)),k.style.transformOrigin="",D.style.transformOrigin="",mxClient.IS_SF?(k.style.transform="scale(1)",D.style.transform="scale(1)",window.setTimeout(function(){k.style.transform="",D.style.transform=""},0)):(k.style.transform="",D.style.transform=""),a.view.getDecoratorPane().style.opacity="",a.view.getOverlayPane().style.opacity="");var G=new mxPoint(a.container.scrollLeft,a.container.scrollTop),J=mxUtils$1.getOffset(a.container),tt=a.view.scale,gt=0,dt=0;q!=null&&(gt=a.container.offsetWidth/2-q.x+J.x,dt=a.container.offsetHeight/2-q.y+J.y),a.zoom(a.cumulativeZoomFactor);var K=a.view.scale;K!=tt&&(j!=null&&(gt+=G.x-j.x,dt+=G.y-j.y),i!=null&&t.chromelessResize(!1,null,gt*(a.cumulativeZoomFactor-1),dt*(a.cumulativeZoomFactor-1)),mxUtils$1.hasScrollbars(a.container)&&(gt!=0||dt!=0)&&(a.container.scrollLeft-=gt*(a.cumulativeZoomFactor-1),a.container.scrollTop-=dt*(a.cumulativeZoomFactor-1))),rt!=null&&k.setAttribute("filter",rt),a.cumulativeZoomFactor=1,Z=null,j=null,q=null,X=null,rt=null}),Y??(a.isFastZoomEnabled()?t.wheelZoomDelay:t.lazyZoomDelay)))},0)};a.lazyZoom=function(Y,G,J){if(G=G||!a.scrollbars,G&&(q=new mxPoint(a.container.offsetLeft+a.container.clientWidth/2,a.container.offsetTop+a.container.clientHeight/2)),Y?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,a.isFastZoomEnabled()){rt==null&&k.getAttribute("filter")!=""&&(rt=k.getAttribute("filter"),k.removeAttribute("filter")),j=new mxPoint(a.container.scrollLeft,a.container.scrollTop);var tt=G?a.container.scrollLeft+a.container.clientWidth/2:q.x+a.container.scrollLeft-a.container.offsetLeft,gt=G?a.container.scrollTop+a.container.clientHeight/2:q.y+a.container.scrollTop-a.container.offsetTop;if(k.style.transformOrigin=tt+"px "+gt+"px",k.style.transform="scale("+this.cumulativeZoomFactor+")",D.style.transformOrigin=tt+"px "+gt+"px",D.style.transform="scale("+this.cumulativeZoomFactor+")",a.view.backgroundPageShape!=null&&a.view.backgroundPageShape.node!=null){var dt=a.view.backgroundPageShape.node;mxUtils$1.setPrefixedStyle(dt.style,"transform-origin",(G?a.container.clientWidth/2+a.container.scrollLeft-dt.offsetLeft+"px":q.x+a.container.scrollLeft-dt.offsetLeft-a.container.offsetLeft+"px")+" "+(G?a.container.clientHeight/2+a.container.scrollTop-dt.offsetTop+"px":q.y+a.container.scrollTop-dt.offsetTop-a.container.offsetTop+"px")),mxUtils$1.setPrefixedStyle(dt.style,"transform","scale("+this.cumulativeZoomFactor+")")}a.view.getDecoratorPane().style.opacity="0",a.view.getOverlayPane().style.opacity="0",t.hoverIcons!=null&&t.hoverIcons.reset()}et(J)},mxEvent$1.addGestureListeners(a.container,function(Y){Z!=null&&window.clearTimeout(Z)},null,function(Y){a.cumulativeZoomFactor!=1&&et(0)}),mxEvent$1.addListener(a.container,"scroll",function(Y){Z!=null&&!a.isMouseDown&&a.cumulativeZoomFactor!=1&&et(0)}),mxEvent$1.addMouseWheelListener(mxUtils$1.bind(this,function(Y,G,J,tt,gt){if(this.dialogs==null||this.dialogs.length==0){if(!a.scrollbars&&!J&&a.isScrollWheelEvent(Y)){var dt=a.view.getTranslate(),K=40/a.view.scale;mxEvent$1.isShiftDown(Y)?a.view.setTranslate(dt.x+(G?-K:K),dt.y):a.view.setTranslate(dt.x,dt.y+(G?K:-K))}else if(J||a.isZoomWheelEvent(Y))for(var nt=mxEvent$1.getSource(Y);nt!=null;){if(nt==a.container)return a.tooltipHandler.hideTooltip(),q=tt!=null&&gt!=null?new mxPoint(tt,gt):new mxPoint(mxEvent$1.getClientX(Y),mxEvent$1.getClientY(Y)),X=J,a.lazyZoom(G),mxEvent$1.consume(Y),!1;nt=nt.parentNode}}}),a.container),a.panningHandler.zoomGraph=function(Y){a.cumulativeZoomFactor=Y.scale,a.lazyZoom(Y.scale>0,!0),mxEvent$1.consume(Y)}};EditorUi.prototype.addChromelessToolbarItems=function(a){a(mxUtils$1.bind(this,function(i){this.actions.get("print").funct(),mxEvent$1.consume(i)}),Editor$1.printLargeImage,mxResources$1.get("print"))};EditorUi.prototype.isPagesEnabled=function(){return this.editor.editable||urlParams["hide-pages"]!="1"};EditorUi.prototype.createTemporaryGraph=function(a){var i=new Graph$1(document.createElement("div"));return i.stylesheet.styles=mxUtils$1.clone(a.styles),i.resetViewOnRootChange=!1,i.setConnectable(!1),i.gridEnabled=!1,i.autoScroll=!1,i.setTooltips(!1),i.setEnabled(!1),i.container.style.visibility="hidden",i.container.style.position="absolute",i.container.style.overflow="hidden",i.container.style.height="1px",i.container.style.width="1px",i};EditorUi.prototype.addChromelessClickHandler=function(){var a=urlParams.highlight;a!=null&&a.length>0&&(a="#"+a),this.editor.graph.addClickHandler(a)};EditorUi.prototype.toggleFormatPanel=function(a){a=a??this.formatWidth==0,this.format!=null&&(this.formatWidth=a?240:0,this.formatContainer.style.display=a?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject$1("formatWidthChanged")))};EditorUi.prototype.lightboxFit=function(a){if(this.isDiagramEmpty())this.editor.graph.view.setScale(1);else{var i=urlParams.border,t=60;i!=null&&(t=parseInt(i)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(t,null,null,null,null,null,a),this.editor.graph.maxFitScale=null}};EditorUi.prototype.isDiagramEmpty=function(){var a=this.editor.graph.getModel();return a.getChildCount(a.root)==1&&a.getChildCount(a.getChildAt(a.root,0))==0};EditorUi.prototype.isSelectionAllowed=function(a){return mxEvent$1.getSource(a).nodeName=="SELECT"||mxEvent$1.getSource(a).nodeName=="INPUT"&&mxUtils$1.isAncestorNode(this.formatContainer,mxEvent$1.getSource(a))};EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils$1.bind(this,function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()})};EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources$1.get("allChangesLost")};EditorUi.prototype.open=function(){try{window.opener!=null&&window.opener.openFile!=null&&window.opener.openFile.setConsumer(mxUtils$1.bind(this,function(a,i){try{var t=mxUtils$1.parseXml(a);this.editor.setGraphXml(t.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),i!=null&&(this.editor.setFilename(i),this.updateDocumentTitle());return}catch(e){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+e.message)}}))}catch{}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject$1("resetGraphView"))};EditorUi.prototype.showPopupMenu=function(a,i,t,e){this.editor.graph.popupMenuHandler.hideMenu();var n=new mxPopupMenu(a);n.div.className+=" geMenubarMenu",n.smartSeparators=!0,n.showDisabled=!0,n.autoExpand=!0,n.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(n,arguments),n.destroy()}),n.popup(i,t,null,e),this.setCurrentMenu(n)};EditorUi.prototype.setCurrentMenu=function(a,i){this.currentMenuElt=i,this.currentMenu=a};EditorUi.prototype.resetCurrentMenu=function(){this.currentMenuElt=null,this.currentMenu=null};EditorUi.prototype.hideCurrentMenu=function(){this.currentMenu!=null&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())};EditorUi.prototype.updateDocumentTitle=function(){var a=this.editor.getOrCreateFilename();this.editor.appName!=null&&(a+=" - "+this.editor.appName),document.title=a};EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)};EditorUi.prototype.redo=function(){try{var a=this.editor.graph;a.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch{}};EditorUi.prototype.undo=function(){try{var a=this.editor.graph;if(a.isEditing()){var i=a.cellEditor.textarea.innerHTML;document.execCommand("undo",!1,null),i==a.cellEditor.textarea.innerHTML&&(a.stopEditing(!0),this.editor.undoManager.undo())}else this.editor.undoManager.undo()}catch{}};EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()};EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()};EditorUi.prototype.getEditBlankXml=function(){return mxUtils$1.getXml(this.editor.getGraphXml())};EditorUi.prototype.getUrl=function(a){var i=a??window.location.pathname,t=i.indexOf("?")>0?1:0;for(var e in urlParams)t==0?i+="?":i+="&",i+=e+"="+urlParams[e],t++;return i};EditorUi.prototype.setScrollbars=function(a){var i=this.editor.graph,t=i.container.style.overflow;i.scrollbars=a,this.editor.updateGraphComponents(),t!=i.container.style.overflow&&(i.container.scrollTop=0,i.container.scrollLeft=0,i.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject$1("scrollbarsChanged"))};EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars};EditorUi.prototype.resetScrollbars=function(){var a=this.editor.graph;if(!this.editor.extendCanvas)a.container.scrollTop=0,a.container.scrollLeft=0,mxUtils$1.hasScrollbars(a.container)||a.view.setTranslate(0,0);else if(!this.editor.isChromelessView())if(mxUtils$1.hasScrollbars(a.container))if(a.pageVisible){var i=a.getPagePadding();a.container.scrollTop=Math.floor(i.y-this.editor.initialTopSpacing)-1,a.container.scrollLeft=Math.floor(Math.min(i.x,(a.container.scrollWidth-a.container.clientWidth)/2))-1;var t=a.getGraphBounds();t.width>0&&t.height>0&&(t.x>a.container.scrollLeft+a.container.clientWidth*.9&&(a.container.scrollLeft=Math.min(t.x+t.width-a.container.clientWidth,t.x-10)),t.y>a.container.scrollTop+a.container.clientHeight*.9&&(a.container.scrollTop=Math.min(t.y+t.height-a.container.clientHeight,t.y-10)))}else{var t=a.getGraphBounds(),e=Math.max(t.width,a.scrollTileSize.width*a.view.scale),n=Math.max(t.height,a.scrollTileSize.height*a.view.scale);a.container.scrollTop=Math.floor(Math.max(0,t.y-Math.max(20,(a.container.clientHeight-n)/4))),a.container.scrollLeft=Math.floor(Math.max(0,t.x-Math.max(0,(a.container.clientWidth-e)/2)))}else{var s=mxRectangle.fromRectangle(a.pageVisible?a.view.getBackgroundPageBounds():a.getGraphBounds()),l=a.view.translate,r=a.view.scale;s.x=s.x/r-l.x,s.y=s.y/r-l.y,s.width/=r,s.height/=r;var o=a.pageVisible?0:Math.max(0,(a.container.clientHeight-s.height)/4);a.view.setTranslate(Math.floor(Math.max(0,(a.container.clientWidth-s.width)/2)-s.x+2),Math.floor(o-s.y+1))}};EditorUi.prototype.setPageVisible=function(a){var i=this.editor.graph,t=mxUtils$1.hasScrollbars(i.container),e=0,n=0;if(t&&(e=i.view.translate.x*i.view.scale-i.container.scrollLeft,n=i.view.translate.y*i.view.scale-i.container.scrollTop),i.pageVisible=a,i.pageBreaksVisible=a,i.preferPageSize=a,i.view.validateBackground(),t){var s=i.getSelectionCells();i.clearSelection(),i.setSelectionCells(s)}i.sizeDidChange(),t&&(i.container.scrollLeft=i.view.translate.x*i.view.scale-e,i.container.scrollTop=i.view.translate.y*i.view.scale-n),this.fireEvent(new mxEventObject$1("pageViewChanged"))};function ChangeGridColor$1(a,i){this.ui=a,this.color=i}ChangeGridColor$1.prototype.execute=function(){var a=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=a};(function(){var a=new mxObjectCodec(new ChangeGridColor$1,["ui"]);mxCodecRegistry.register(a)})();function ChangePageSetup$1(a,i,t,e,n){this.ui=a,this.color=i,this.previousColor=i,this.image=t,this.previousImage=t,this.format=e,this.previousFormat=e,this.pageScale=n,this.previousPageScale=n,this.ignoreColor=!1,this.ignoreImage=!1}ChangePageSetup$1.prototype.execute=function(){var a=this.ui.editor.graph;if(!this.ignoreColor){this.color=this.previousColor;var i=a.background;this.ui.setBackgroundColor(this.previousColor),this.previousColor=i}if(!this.ignoreImage){this.image=this.previousImage;var i=a.backgroundImage;this.ui.setBackgroundImage(this.previousImage),this.previousImage=i}if(this.previousFormat!=null){this.format=this.previousFormat;var i=a.pageFormat;(this.previousFormat.width!=i.width||this.previousFormat.height!=i.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=i)}if(this.foldingEnabled!=null&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),this.previousPageScale!=null){var t=this.ui.editor.graph.pageScale;this.previousPageScale!=t&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=t)}};(function(){var a=new mxObjectCodec(new ChangePageSetup$1,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);a.afterDecode=function(i,t,e){return e.previousColor=e.color,e.previousImage=e.image,e.previousFormat=e.format,e.previousPageScale=e.pageScale,e.foldingEnabled!=null&&(e.foldingEnabled=!e.foldingEnabled),e},mxCodecRegistry.register(a)})();EditorUi.prototype.setBackgroundColor=function(a){this.editor.graph.background=a,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("backgroundColorChanged"))};EditorUi.prototype.setFoldingEnabled=function(a){this.editor.graph.foldingEnabled=a,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject$1("foldingEnabledChanged"))};EditorUi.prototype.setPageFormat=function(a){this.editor.graph.pageFormat=a,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject$1("pageFormatChanged"))};EditorUi.prototype.setPageScale=function(a){this.editor.graph.pageScale=a,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject$1("pageScaleChanged"))};EditorUi.prototype.setGridColor=function(a){this.editor.graph.view.gridColor=a,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject$1("gridColorChanged"))};EditorUi.prototype.addUndoListener=function(){var a=this.actions.get("undo"),i=this.actions.get("redo"),t=this.editor.undoManager,e=mxUtils$1.bind(this,function(){a.setEnabled(this.canUndo()),i.setEnabled(this.canRedo())});t.addListener(mxEvent$1.ADD,e),t.addListener(mxEvent$1.UNDO,e),t.addListener(mxEvent$1.REDO,e),t.addListener(mxEvent$1.CLEAR,e);var n=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){n.apply(this,arguments),e()};var s=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(l,r){s.apply(this,arguments),e()},e()};EditorUi.prototype.updateActionStates=function(){var a=this.editor.graph,i=!a.isSelectionEmpty(),t=!1,e=!1,n=!1,s=a.getSelectionCells();if(s!=null)for(var l=0;l<s.length;l++){var r=s[l];if(a.getModel().isEdge(r)&&(n=!0),a.getModel().isVertex(r)&&(t=!0,(a.getModel().getChildCount(r)>0||a.isContainer(r))&&(e=!0)),n&&t)break}for(var o=["cut","copy","bold","italic","underline","delete","duplicate","editStyle","editTooltip","editLink","backgroundColor","borderColor","edit","toFront","toBack","lockUnlock","solid","dashed","pasteSize","dotted","fillColor","gradientColor","shadow","fontColor","formattedText","rounded","toggleRounded","sharp","strokeColor"],l=0;l<o.length;l++)this.actions.get(o[l]).setEnabled(i);this.actions.get("setAsDefaultStyle").setEnabled(a.getSelectionCount()==1),this.actions.get("clearWaypoints").setEnabled(!a.isSelectionEmpty()),this.actions.get("copySize").setEnabled(a.getSelectionCount()==1),this.actions.get("turn").setEnabled(!a.isSelectionEmpty()),this.actions.get("curved").setEnabled(n),this.actions.get("rotation").setEnabled(t),this.actions.get("wordWrap").setEnabled(t),this.actions.get("autosize").setEnabled(t);var h=t&&a.getSelectionCount()==1;this.actions.get("group").setEnabled(a.getSelectionCount()>1||h&&!a.isContainer(a.getSelectionCell())),this.actions.get("ungroup").setEnabled(e),this.actions.get("removeFromGroup").setEnabled(h&&a.getModel().isVertex(a.getModel().getParent(a.getSelectionCell()))),a.view.getState(a.getSelectionCell()),this.menus.get("navigation").setEnabled(i||a.view.currentRoot!=null),this.actions.get("collapsible").setEnabled(t&&(a.isContainer(a.getSelectionCell())||a.model.getChildCount(a.getSelectionCell())>0)),this.actions.get("home").setEnabled(a.view.currentRoot!=null),this.actions.get("exitGroup").setEnabled(a.view.currentRoot!=null),this.actions.get("enterGroup").setEnabled(a.getSelectionCount()==1&&a.isValidRoot(a.getSelectionCell()));var u=a.getSelectionCount()==1&&a.isCellFoldable(a.getSelectionCell());this.actions.get("expand").setEnabled(u),this.actions.get("collapse").setEnabled(u),this.actions.get("editLink").setEnabled(a.getSelectionCount()==1),this.actions.get("openLink").setEnabled(a.getSelectionCount()==1&&a.getLinkForCell(a.getSelectionCell())!=null),this.actions.get("guides").setEnabled(a.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable);var d=a.isEnabled()&&!a.isCellLocked(a.getDefaultParent());this.menus.get("layout").setEnabled(d),this.menus.get("insert").setEnabled(d),this.menus.get("direction").setEnabled(d&&t),this.menus.get("align").setEnabled(d&&t&&a.getSelectionCount()>1),this.menus.get("distribute").setEnabled(d&&t&&a.getSelectionCount()>1),this.actions.get("selectVertices").setEnabled(d),this.actions.get("selectEdges").setEnabled(d),this.actions.get("selectAll").setEnabled(d),this.actions.get("selectNone").setEnabled(d),this.updatePasteActionStates()};EditorUi.prototype.zeroOffset=new mxPoint(0,0);EditorUi.prototype.getDiagramContainerOffset=function(){return this.zeroOffset};EditorUi.prototype.refresh=function(a){a=a??!0;var i=mxClient.IS_IE&&(document.documentMode==null||document.documentMode==5),t=this.container.clientWidth,e=this.container.clientHeight;this.container==document.body&&(t=document.body.clientWidth||document.documentElement.clientWidth,e=i&&document.body.clientHeight||document.documentElement.clientHeight);var n=0;mxClient.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(n=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0));var s=Math.max(0,Math.min(this.hsplitPosition,t-this.splitSize-20)),l=0;this.menubar!=null&&(this.menubarContainer.style.height=this.menubarHeight+"px",l+=this.menubarHeight),this.toolbar!=null&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",l+=this.toolbarHeight),l>0&&!mxClient.IS_QUIRKS&&(l+=1);var r=0;if(this.sidebarFooterContainer!=null){var o=this.footerHeight+n;r=Math.max(0,Math.min(e-l-o,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=s+"px",this.sidebarFooterContainer.style.height=r+"px",this.sidebarFooterContainer.style.bottom=o+"px"}var h=this.format!=null?this.formatWidth:0;this.sidebarContainer.style.top=l+"px",this.sidebarContainer.style.width=s+"px",this.formatContainer.style.top=l+"px",this.formatContainer.style.width=h+"px",this.formatContainer.style.display=this.format!=null?"":"none";var u=this.getDiagramContainerOffset(),d=this.hsplit.parentNode!=null?s+this.splitSize:0;if(this.diagramContainer.style.left=d+u.x+"px",this.diagramContainer.style.top=l+u.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+n+"px",this.hsplit.style.left=s+"px",this.footerContainer.style.display=this.footerHeight==0?"none":"",this.tabContainer!=null&&(this.tabContainer.style.left=d+"px"),i){this.menubarContainer.style.width=t+"px",this.toolbarContainer.style.width=this.menubarContainer.style.width;var m=Math.max(0,e-this.footerHeight-this.menubarHeight-this.toolbarHeight);this.sidebarContainer.style.height=m-r+"px",this.formatContainer.style.height=m+"px",this.diagramContainer.style.width=this.hsplit.parentNode!=null?Math.max(0,t-s-this.splitSize-h)+"px":t+"px",this.footerContainer.style.width=this.menubarContainer.style.width;var g=Math.max(0,e-this.footerHeight-this.menubarHeight-this.toolbarHeight);this.tabContainer!=null&&(this.tabContainer.style.width=this.diagramContainer.style.width,this.tabContainer.style.bottom=this.footerHeight+n+"px",g-=this.tabContainer.clientHeight),this.diagramContainer.style.height=g+"px",this.hsplit.style.height=g+"px"}else{this.footerHeight>0&&(this.footerContainer.style.bottom=n+"px"),this.diagramContainer.style.right=h+"px";var x=0;this.tabContainer!=null&&(this.tabContainer.style.bottom=this.footerHeight+n+"px",this.tabContainer.style.right=this.diagramContainer.style.right,x=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+r+n+"px",this.formatContainer.style.bottom=this.footerHeight+n+"px",this.diagramContainer.style.bottom=this.footerHeight+n+x+"px"}a&&this.editor.graph.sizeDidChange()};EditorUi.prototype.createTabContainer=function(){return null};EditorUi.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",mxResources$1.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(this.format!=null?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",this.sidebarFooterContainer=this.createSidebarFooterContainer(),this.sidebarFooterContainer&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()};EditorUi.prototype.createSidebarFooterContainer=function(){return null};EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),this.menubar!=null&&this.menubarContainer.appendChild(this.menubar.container),this.menubar!=null&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils$1.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),this.sidebar!=null&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),this.format!=null&&this.container.appendChild(this.formatContainer);var a=this.editor.chromeless?null:this.createFooter();a!=null&&(this.footerContainer.appendChild(a),this.container.appendChild(this.footerContainer)),this.sidebar!=null&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),this.container!=null&&this.tabContainer!=null&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),this.toolbar!=null&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),this.sidebar!=null&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils$1.bind(this,function(i){this.hsplitPosition=i,this.refresh()})))};EditorUi.prototype.createStatusContainer=function(){var a=document.createElement("a");return a.className="geItem geStatus",a};EditorUi.prototype.setStatusText=function(a){this.statusContainer.innerHTML=a};EditorUi.prototype.createToolbar=function(a){return new Toolbar(this,a)};EditorUi.prototype.createSidebar=function(a){return new Sidebar(this,a)};EditorUi.prototype.createFormat=function(a){return new Format(this,a)};EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")};EditorUi.prototype.createDiv=function(a){var i=document.createElement("div");return i.className=a,i};EditorUi.prototype.addSplitHandler=function(a,i,t,e){var n=null,s=null,l=!0,r=null;mxClient.IS_POINTER&&(a.style.touchAction="none");var o=mxUtils$1.bind(this,function(){var d=parseInt(i?a.style.left:a.style.bottom);return i||(d=d+t-this.footerHeight),d});function h(d){if(n!=null){var m=new mxPoint(mxEvent$1.getClientX(d),mxEvent$1.getClientY(d));e(Math.max(0,s+(i?m.x-n.x:n.y-m.y)-t)),mxEvent$1.consume(d),s!=o()&&(l=!0,r=null)}}function u(d){h(d),s=null,n=null}mxEvent$1.addGestureListeners(a,function(d){n=new mxPoint(mxEvent$1.getClientX(d),mxEvent$1.getClientY(d)),s=o(),l=!1,mxEvent$1.consume(d)}),mxEvent$1.addListener(a,"click",mxUtils$1.bind(this,function(d){if(!l&&this.hsplitClickEnabled){var m=r!=null?r-t:0;r=o(),e(m),mxEvent$1.consume(d)}})),mxEvent$1.addGestureListeners(document,null,h,u),this.destroyFunctions.push(function(){mxEvent$1.removeGestureListeners(document,null,h,u)})};EditorUi.prototype.handleError=function(a,i,t,e,n){};EditorUi.prototype.showError=function(a,i,t,e,n,s,l,r,o,h,u,d,m){var g=new ErrorDialog(this,a,i,t||mxResources$1.get("ok"),e,n,s,l,d,r,o),x=Math.ceil(i!=null?i.length/50:1);this.showDialog(g.container,h||340,u||100+x*20,!0,!1,m),g.init()};EditorUi.prototype.showDialog=function(a,i,t,e,n,s,l,r,o,h){this.editor.graph.tooltipHandler.hideTooltip(),this.dialogs==null&&(this.dialogs=[]),this.dialog=new Dialog$1(this,a,i,t,e,n,s,l,r,o,h),this.dialogs.push(this.dialog)};EditorUi.prototype.hideDialog=function(a,i){if(this.dialogs!=null&&this.dialogs.length>0){var t=this.dialogs.pop();if(t.close(a,i)==!1){this.dialogs.push(t);return}this.dialog=this.dialogs.length>0?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject$1("hideDialog")),this.dialog==null&&this.editor.graph.container.style.visibility!="hidden"&&window.setTimeout(mxUtils$1.bind(this,function(){this.editor.graph.isEditing()&&this.editor.graph.cellEditor.textarea!=null?this.editor.graph.cellEditor.textarea.focus():(mxUtils$1.clearSelection(),this.editor.graph.container.focus())}),0)}};EditorUi.prototype.ctrlEnter=function(){var a=this.editor.graph;if(a.isEnabled())try{for(var i=a.getSelectionCells(),t=new mxDictionary,e=[],n=0;n<i.length;n++){var s=a.isTableCell(i[n])?a.model.getParent(i[n]):i[n];s!=null&&!t.get(s)&&(t.put(s,!0),e.push(s))}a.setSelectionCells(a.duplicateCells(e,!1))}catch(l){this.handleError(l)}};EditorUi.prototype.pickColor=function(a,i){var t=this.editor.graph,e=t.cellEditor.saveSelection(),n=226+(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12))*17,s=new ColorDialog(this,a||"none",function(l){t.cellEditor.restoreSelection(e),i(l)},function(){t.cellEditor.restoreSelection(e)});this.showDialog(s.container,230,n,!0,!1),s.init()};EditorUi.prototype.openFile=function(){window.openFile=new OpenFile$1(mxUtils$1.bind(this,function(a){this.hideDialog(a)})),this.showDialog(new OpenDialog$1().container,Editor$1.useLocalStorage?640:320,Editor$1.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})};EditorUi.prototype.extractGraphModelFromHtml=function(a){var i=null;try{var t=a.indexOf("&lt;mxGraphModel ");if(t>=0){var e=a.lastIndexOf("&lt;/mxGraphModel&gt;");e>t&&(i=a.substring(t,e+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}}catch{}return i};EditorUi.prototype.extractGraphModelFromEvent=function(a){var i=null,t=null;if(a!=null){var e=a.dataTransfer!=null?a.dataTransfer:a.clipboardData;if(e!=null&&(document.documentMode==10||document.documentMode==11?t=e.getData("Text"):(t=mxUtils$1.indexOf(e.types,"text/html")>=0?e.getData("text/html"):null,mxUtils$1.indexOf(e.types,t==null||t.length==0)&&(t=e.getData("text/plain"))),t!=null)){t=Graph$1.zapGremlins(mxUtils$1.trim(t));var n=this.extractGraphModelFromHtml(t);n!=null&&(t=n)}}return t!=null&&this.isCompatibleString(t)&&(i=t),i};EditorUi.prototype.isCompatibleString=function(a){return!1};EditorUi.prototype.saveFile=function(a){if(!a&&this.editor.filename!=null)this.save(this.editor.getOrCreateFilename());else{var i=new FilenameDialog$1(this,this.editor.getOrCreateFilename(),mxResources$1.get("save"),mxUtils$1.bind(this,function(t){this.save(t)}),null,mxUtils$1.bind(this,function(t){return t!=null&&t.length>0?!0:(mxUtils$1.confirm(mxResources$1.get("invalidName")),!1)}));this.showDialog(i.container,300,100,!0,!0),i.init()}};EditorUi.prototype.save=function(a){if(console.log("save"),a!=null){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var i=mxUtils$1.getPrettyXml(this.editor.getGraphXml());const e=new Blob([i],{type:"text/plain"});var t=document.createElement("a");t.href=URL.createObjectURL(e),t.target="_blank",t.download=a,t.click()}};EditorUi.prototype.executeLayout=function(a,i,t){var e=this.editor.graph;if(e.isEnabled()){e.getModel().beginUpdate();try{a()}catch(s){throw s}finally{if(this.allowAnimation&&i&&(navigator.userAgent==null||navigator.userAgent.indexOf("Camino")<0)){var n=new mxMorphing(e);n.addListener(mxEvent$1.DONE,mxUtils$1.bind(this,function(){e.getModel().endUpdate(),t!=null&&t()})),n.startAnimation()}else e.getModel().endUpdate(),t!=null&&t()}}};EditorUi.prototype.showImageDialog=function(a,i,t,e){var n=this.editor.graph.cellEditor,s=n.saveSelection(),l=mxUtils$1.prompt(a,i);if(n.restoreSelection(s),l!=null&&l.length>0){var r=new Image;r.onload=function(){t(l,r.width,r.height)},r.onerror=function(){t(null),mxUtils$1.alert(mxResources.get("fileNotFound"))},r.src=l}else t(null)};EditorUi.prototype.showLinkDialog=function(a,i,t){var e=new LinkDialog(this,a,i,t);this.showDialog(e.container,420,90,!0,!0),e.init()};EditorUi.prototype.showDataDialog=function(a){if(a!=null){var i=new EditDataDialog(this,a);this.showDialog(i.container,480,420,!0,!1,null,!1),i.init()}};EditorUi.prototype.showBackgroundImageDialog=function(a,i){a=a??mxUtils$1.bind(this,function(e){var n=new ChangePageSetup$1(this,null,e);n.ignoreColor=!0,this.editor.graph.model.execute(n)});var t=mxUtils$1.prompt(mxResources$1.get("backgroundImage"),i!=null?i.src:"");if(t!=null&&t.length>0){var i=new Image;i.onload=function(){a(new mxImage(t,i.width,i.height),!1)},i.onerror=function(){a(null,!0),mxUtils$1.alert(mxResources$1.get("fileNotFound"))},i.src=t}else a(null)};EditorUi.prototype.setBackgroundImage=function(a){this.editor.graph.setBackgroundImage(a),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject$1("backgroundImageChanged"))};EditorUi.prototype.confirm=function(a,i,t){mxUtils$1.confirm(a)?i!=null&&i():t!=null&&t()};EditorUi.prototype.createOutline=function(a){var i=new mxOutline(this.editor.graph);return i.border=20,mxEvent$1.addListener(window,"resize",function(){i.update()}),this.addListener("pageFormatChanged",function(){i.update()}),i};EditorUi.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",76:"editLink",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize"};EditorUi.prototype.createKeyHandler=function(a){var i=this,t=this.editor.graph,e=new mxKeyHandler(t),n=e.isEventIgnored;e.isEventIgnored=function(m){return!(mxEvent$1.isShiftDown(m)&&m.keyCode==9)&&(!this.isControlDown(m)||mxEvent$1.isShiftDown(m)||m.keyCode!=90&&m.keyCode!=89&&m.keyCode!=188&&m.keyCode!=190&&m.keyCode!=85)&&(m.keyCode!=66&&m.keyCode!=73||!this.isControlDown(m)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&n.apply(this,arguments)},e.isEnabledForEvent=function(m){return!mxEvent$1.isConsumed(m)&&this.isGraphEvent(m)&&this.isEnabled()&&(i.dialogs==null||i.dialogs.length==0)},e.isControlDown=function(m){return mxEvent$1.isControlDown(m)||mxClient.IS_MAC&&m.metaKey};var s=[],l=null;function r(m,g,x){s.push(function(){if(!t.isSelectionEmpty()&&t.isEnabled())if(g=g??1,x){t.getModel().beginUpdate();try{for(var v=t.getSelectionCells(),C=0;C<v.length;C++)if(t.getModel().isVertex(v[C])&&t.isCellResizable(v[C])){var E=t.getCellGeometry(v[C]);E!=null&&(E=E.clone(),m==37?E.width=Math.max(0,E.width-g):m==38?E.height=Math.max(0,E.height-g):m==39?E.width+=g:m==40&&(E.height+=g),t.getModel().setGeometry(v[C],E))}}finally{t.getModel().endUpdate()}}else{var b=t.getSelectionCell(),w=t.model.getParent(b),$=null;if(t.getSelectionCount()==1&&t.model.isVertex(b)&&t.layoutManager!=null&&!t.isCellLocked(b)&&($=t.layoutManager.getLayout(w)),$!=null&&$.constructor==mxStackLayout){var P=w.getIndex(b);m==37||m==38?t.model.add(w,b,Math.max(0,P-1)):(m==39||m==40)&&t.model.add(w,b,Math.min(t.model.getChildCount(w),P+1))}else{for(var v=t.getMovableCells(t.getSelectionCells()),M=[],C=0;C<v.length;C++){var D=t.getCurrentCellStyle(v[C]);if(mxUtils$1.getValue(D,"part","0")=="1"){var w=t.model.getParent(v[C]);t.model.isVertex(w)&&mxUtils$1.indexOf(v,w)<0&&M.push(w)}else M.push(v[C])}if(M.length>0){v=M;var k=0,Z=0;m==37?k=-g:m==38?Z=-g:m==39?k=g:m==40&&(Z=g),t.moveCells(v,k,Z)}}}}),l!=null&&window.clearTimeout(l),l=window.setTimeout(function(){if(s.length>0){t.getModel().beginUpdate();try{for(var v=0;v<s.length;v++)s[v]();s=[]}finally{t.getModel().endUpdate()}}},200)}var o={37:mxConstants$1.DIRECTION_WEST,38:mxConstants$1.DIRECTION_NORTH,39:mxConstants$1.DIRECTION_EAST,40:mxConstants$1.DIRECTION_SOUTH},h=e.getFunction;mxKeyHandler.prototype.getFunction=function(m){if(t.isEnabled()){if(mxEvent$1.isShiftDown(m)&&mxEvent$1.isAltDown(m)){var g=i.actions.get(i.altShiftActions[m.keyCode]);if(g!=null)return g.funct}if(m.keyCode==9&&mxEvent$1.isAltDown(m))return t.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:mxEvent$1.isShiftDown(m)?function(){t.selectParentCell()}:function(){t.selectChildCell()};if(o[m.keyCode]!=null&&!t.isSelectionEmpty())if(!this.isControlDown(m)&&mxEvent$1.isShiftDown(m)&&mxEvent$1.isAltDown(m)){if(t.model.isVertex(t.getSelectionCell()))return function(){var x=t.connectVertex(t.getSelectionCell(),o[m.keyCode],t.defaultEdgeLength,m,!0);x!=null&&x.length>0&&(x.length==1&&t.model.isEdge(x[0])?t.setSelectionCell(t.model.getTerminal(x[0],!1)):t.setSelectionCell(x[x.length-1]),t.scrollCellToVisible(t.getSelectionCell()),i.hoverIcons!=null&&i.hoverIcons.update(t.view.getState(t.getSelectionCell())))}}else return this.isControlDown(m)?function(){r(m.keyCode,mxEvent$1.isShiftDown(m)?t.gridSize:null,!0)}:function(){r(m.keyCode,mxEvent$1.isShiftDown(m)?t.gridSize:null)}}return h.apply(this,arguments)},e.bindAction=mxUtils$1.bind(this,function(m,g,x,v){var C=this.actions.get(x);if(C!=null){var E=function(){C.isEnabled()&&C.funct()};g?v?e.bindControlShiftKey(m,E):e.bindControlKey(m,E):v?e.bindShiftKey(m,E):e.bindKey(m,E)}});var u=this,d=e.escape;return e.escape=function(m){d.apply(this,arguments)},e.enter=function(){},e.bindControlShiftKey(36,function(){t.exitGroup()}),e.bindControlShiftKey(35,function(){t.enterGroup()}),e.bindShiftKey(36,function(){t.home()}),e.bindKey(35,function(){t.refresh()}),e.bindAction(107,!0,"zoomIn"),e.bindAction(109,!0,"zoomOut"),e.bindAction(80,!0,"print"),e.bindAction(79,!0,"outline",!0),(!this.editor.chromeless||this.editor.editable)&&(e.bindControlKey(36,function(){t.isEnabled()&&t.foldCells(!0)}),e.bindControlKey(35,function(){t.isEnabled()&&t.foldCells(!1)}),e.bindControlKey(13,function(){u.ctrlEnter()}),e.bindAction(8,!1,"delete"),e.bindAction(8,!0,"deleteAll"),e.bindAction(8,!1,"deleteLabels",!0),e.bindAction(46,!1,"delete"),e.bindAction(46,!0,"deleteAll"),e.bindAction(46,!1,"deleteLabels",!0),e.bindAction(36,!1,"resetView"),e.bindAction(72,!0,"fitWindow",!0),e.bindAction(74,!0,"fitPage"),e.bindAction(74,!0,"fitTwoPages",!0),e.bindAction(48,!0,"customZoom"),e.bindAction(82,!0,"turn"),e.bindAction(82,!0,"clearDefaultStyle",!0),e.bindAction(83,!0,"save"),e.bindAction(83,!0,"saveAs",!0),e.bindAction(65,!0,"selectAll"),e.bindAction(65,!0,"selectNone",!0),e.bindAction(73,!0,"selectVertices",!0),e.bindAction(69,!0,"selectEdges",!0),e.bindAction(69,!0,"editStyle"),e.bindAction(66,!0,"bold"),e.bindAction(66,!0,"toBack",!0),e.bindAction(70,!0,"toFront",!0),e.bindAction(68,!0,"duplicate"),e.bindAction(68,!0,"setAsDefaultStyle",!0),e.bindAction(90,!0,"undo"),e.bindAction(89,!0,"autosize",!0),e.bindAction(88,!0,"cut"),e.bindAction(67,!0,"copy"),e.bindAction(86,!0,"paste"),e.bindAction(71,!0,"group"),e.bindAction(77,!0,"editData"),e.bindAction(71,!0,"grid",!0),e.bindAction(73,!0,"italic"),e.bindAction(76,!0,"lockUnlock"),e.bindAction(76,!0,"layers",!0),e.bindAction(80,!0,"formatPanel",!0),e.bindAction(85,!0,"underline"),e.bindAction(85,!0,"ungroup",!0),e.bindAction(190,!0,"superscript"),e.bindAction(188,!0,"subscript"),e.bindAction(9,!1,"indent",!0),e.bindKey(13,function(){t.isEnabled()&&t.startEditingAtCell()}),e.bindKey(113,function(){t.isEnabled()&&t.startEditingAtCell()})),mxClient.IS_WIN?e.bindAction(89,!0,"redo"):e.bindAction(90,!0,"redo",!0),e};EditorUi.prototype.destroy=function(){if(this.editor!=null&&(this.editor.destroy(),this.editor=null),this.menubar!=null&&(this.menubar.destroy(),this.menubar=null),this.toolbar!=null&&(this.toolbar.destroy(),this.toolbar=null),this.sidebar!=null&&(this.sidebar.destroy(),this.sidebar=null),this.keyHandler!=null&&(this.keyHandler.destroy(),this.keyHandler=null),this.keydownHandler!=null&&(mxEvent$1.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),this.keyupHandler!=null&&(mxEvent$1.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),this.resizeHandler!=null&&(mxEvent$1.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),this.gestureHandler!=null&&(mxEvent$1.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),this.orientationChangeHandler!=null&&(mxEvent$1.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),this.scrollHandler!=null&&(mxEvent$1.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),this.destroyFunctions!=null){for(var a=0;a<this.destroyFunctions.length;a++)this.destroyFunctions[a]();this.destroyFunctions=null}for(var i=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog],a=0;a<i.length;a++)i[a]!=null&&i[a].parentNode!=null&&i[a].parentNode.removeChild(i[a])};/**
 * jscolor, JavaScript Color Picker
 *
 * @version 1.3.13
 * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html
 * @author  Jan Odvarko, http://odvarko.cz
 * @created 2008-06-15
 * @updated 2012-01-19
 * @link    http://jscolor.com
 */const mxJSColor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){},init:function(){mxJSColor.preload()},getDir:function(){if(!mxJSColor.dir){var a=mxJSColor.detectDir();mxJSColor.dir=a!==!1?a:"jscolor/"}return mxJSColor.dir},detectDir:function(){for(var a=location.href,t=document.getElementsByTagName("base"),i=0;i<t.length;i+=1)t[i].href&&(a=t[i].href);for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i+=1)if(t[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[i].src)){var e=new mxJSColor.URI(t[i].src),n=e.toAbsolute(a);return n.path=n.path.replace(/[^\/]+$/,""),n.query=null,n.fragment=null,n.toString()}return!1},preload:function(){for(var a in mxJSColor.imgRequire)mxJSColor.imgRequire.hasOwnProperty(a)&&mxJSColor.loadImage(a)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){mxJSColor.imgRequire[a]=!0},loadImage:function(a){mxJSColor.imgLoaded[a]||(mxJSColor.imgLoaded[a]=new Image,mxJSColor.imgLoaded[a].src=mxJSColor.getDir()+a)},fetchElement:function(a){return typeof a=="string"?document.getElementById(a):a},addEvent:function(a,i,t){a.addEventListener?a.addEventListener(i,t,!1):a.attachEvent&&a.attachEvent("on"+i,t)},fireEvent:function(a,i){if(a)if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent(i,!0,!0),a.dispatchEvent(t)}else if(document.createEventObject){var t=document.createEventObject();a.fireEvent("on"+i,t)}else a["on"+i]&&a["on"+i]()},getElementPos:function(a){var i=a,t=a,e=0,n=0;if(i.offsetParent)do e+=i.offsetLeft,n+=i.offsetTop;while(i=i.offsetParent);for(;(t=t.parentNode)&&t.nodeName.toUpperCase()!=="BODY";)e-=t.scrollLeft,n-=t.scrollTop;return[e,n]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(a){var i=0,t=0;return a||(a=window.event),typeof a.offsetX=="number"?(i=a.offsetX,t=a.offsetY):typeof a.layerX=="number"&&(i=a.layerX,t=a.layerY),{x:i,y:t}},getViewPos:function(){return typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return typeof window.innerWidth=="number"?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(a){this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var t="";return this.scheme!==null&&(t=t+this.scheme+":"),this.authority!==null&&(t=t+"//"+this.authority),this.path!==null&&(t=t+this.path),this.query!==null&&(t=t+"?"+this.query),this.fragment!==null&&(t=t+"#"+this.fragment),t},this.toAbsolute=function(e){var e=new mxJSColor.URI(e),n=this,s=new mxJSColor.URI;return e.scheme===null?!1:(n.scheme!==null&&n.scheme.toLowerCase()===e.scheme.toLowerCase()&&(n.scheme=null),n.scheme!==null?(s.scheme=n.scheme,s.authority=n.authority,s.path=i(n.path),s.query=n.query):(n.authority!==null?(s.authority=n.authority,s.path=i(n.path),s.query=n.query):(n.path===""?(s.path=e.path,n.query!==null?s.query=n.query:s.query=e.query):(n.path.substr(0,1)==="/"?s.path=i(n.path):(e.authority!==null&&e.path===""?s.path="/"+n.path:s.path=e.path.replace(/[^\/]+$/,"")+n.path,s.path=i(s.path)),s.query=n.query),s.authority=e.authority),s.scheme=e.scheme),s.fragment=n.fragment,s)};function i(t){for(var e="";t;)if(t.substr(0,3)==="../"||t.substr(0,2)==="./")t=t.replace(/^\.+/,"").substr(1);else if(t.substr(0,3)==="/./"||t==="/.")t="/"+t.substr(3);else if(t.substr(0,4)==="/../"||t==="/..")t="/"+t.substr(4),e=e.replace(/\/?[^\/]*$/,"");else if(t==="."||t==="..")t="";else{var n=t.match(/^\/?[^\/]*/)[0];t=t.substr(n.length),e=e+n}return e}a&&this.parse(a)},color:function(target,prop){this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=target,this.styleElement=target,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=0,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var p in prop)prop.hasOwnProperty(p)&&(this[p]=prop[p]);this.hidePicker=function(){isPickerOwner()&&removePicker()},this.showPicker=function(){if(!isPickerOwner()){var a=mxJSColor.getElementPos(target),i=mxJSColor.getElementSize(target),t=mxJSColor.getViewPos(),e=mxJSColor.getViewSize(),n=getPickerDims(this),s,l,r;switch(this.pickerPosition.toLowerCase()){case"left":s=1,l=0,r=-1;break;case"right":s=1,l=0,r=1;break;case"top":s=0,l=1,r=-1;break;default:s=0,l=1,r=1;break}var o=(i[l]+n[l])/2;this.pickerSmartPosition?(-t[s]+a[s]+n[s]>e[s]&&-t[s]+a[s]+i[s]/2>e[s]/2&&a[s]+i[s]-n[s]>=0?a[s]+i[s]-n[s]:a[s],-t[l]+a[l]+i[l]+n[l]-o+o*r>e[l]?-t[l]+a[l]+i[l]/2>e[l]/2&&a[l]+i[l]-o-o*r>=0?a[l]+i[l]-o-o*r:a[l]+i[l]-o+o*r:a[l]+i[l]-o+o*r>=0?a[l]+i[l]-o+o*r:a[l]+i[l]-o-o*r):(a[s],a[l]+i[l]-o+o*r),drawPicker(0,0)}},this.importColor=function(){valueElement?this.adjust?!this.required&&/^\s*$/.test(valueElement.value)?(valueElement.value="",styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage,styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.fromString(valueElement.value)||this.exportColor():this.fromString(valueElement.value,leaveValue)||(styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage,styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.exportColor()},this.exportColor=function(a){if(!(a&leaveValue)&&valueElement){var i=this.toString();this.caps&&(i=i.toUpperCase()),this.hash&&(i="#"+i),valueElement.value=i}!(a&leaveStyle)&&styleElement&&(styleElement.style.backgroundImage="none",styleElement.style.backgroundColor="#"+this.toString(),styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),!(a&leavePad)&&isPickerOwner()&&redrawPad(),!(a&leaveSld)&&isPickerOwner()&&redrawSld()},this.fromHSV=function(a,i,t,e){a<0&&(a=0)||a>6&&(a=6),i<0&&(i=0)||i>1&&(i=1),t<0&&(t=0)||t>1&&(t=1),this.rgb=HSV_RGB(a===null?this.hsv[0]:this.hsv[0]=a,i===null?this.hsv[1]:this.hsv[1]=i,t===null?this.hsv[2]:this.hsv[2]=t),this.exportColor(e)},this.fromRGB=function(a,i,t,e){a<0&&(a=0)||a>1&&(a=1),i<0&&(i=0)||i>1&&(i=1),t<0&&(t=0)||t>1&&(t=1);var n=RGB_HSV(a===null?this.rgb[0]:this.rgb[0]=a,i===null?this.rgb[1]:this.rgb[1]=i,t===null?this.rgb[2]:this.rgb[2]=t);n[0]!==null&&(this.hsv[0]=n[0]),n[2]!==0&&(this.hsv[1]=n[1]),this.hsv[2]=n[2],this.exportColor(e)},this.fromString=function(a,i){var t=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return t?(t[1].length===6?this.fromRGB(parseInt(t[1].substr(0,2),16)/255,parseInt(t[1].substr(2,2),16)/255,parseInt(t[1].substr(4,2),16)/255,i):this.fromRGB(parseInt(t[1].charAt(0)+t[1].charAt(0),16)/255,parseInt(t[1].charAt(1)+t[1].charAt(1),16)/255,parseInt(t[1].charAt(2)+t[1].charAt(2),16)/255,i),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};function RGB_HSV(a,i,t){var e=Math.min(Math.min(a,i),t),n=Math.max(Math.max(a,i),t),s=n-e;if(s===0)return[null,0,n];var l=a===e?3+(t-i)/s:i===e?5+(a-t)/s:1+(i-a)/s;return[l===6?0:l,s/n,n]}function HSV_RGB(a,i,t){if(a===null)return[t,t,t];var e=Math.floor(a),n=e%2?a-e:1-(a-e),s=t*(1-i),l=t*(1-i*n);switch(e){case 6:case 0:return[t,l,s];case 1:return[l,t,s];case 2:return[s,t,l];case 3:return[s,l,t];case 4:return[l,s,t];case 5:return[t,s,l]}}function removePicker(){delete mxJSColor.picker.owner,document.getElementsByTagName("body")[0].removeChild(mxJSColor.picker.boxB)}function drawPicker(a,i){if(!mxJSColor.picker){mxJSColor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(THIS.pickerCloseText)};for(var t=0,e=4;t<mxJSColor.images.sld[1];t+=e){var n=document.createElement("div");n.style.height=e+"px",n.style.fontSize="1px",n.style.lineHeight="0",mxJSColor.picker.sld.appendChild(n)}mxJSColor.picker.sldB.appendChild(mxJSColor.picker.sld),mxJSColor.picker.box.appendChild(mxJSColor.picker.sldB),mxJSColor.picker.box.appendChild(mxJSColor.picker.sldM),mxJSColor.picker.padB.appendChild(mxJSColor.picker.pad),mxJSColor.picker.box.appendChild(mxJSColor.picker.padB),mxJSColor.picker.box.appendChild(mxJSColor.picker.padM),mxJSColor.picker.btnS.appendChild(mxJSColor.picker.btnT),mxJSColor.picker.btn.appendChild(mxJSColor.picker.btnS),mxJSColor.picker.box.appendChild(mxJSColor.picker.btn),mxJSColor.picker.boxB.appendChild(mxJSColor.picker.box)}var s=mxJSColor.picker;s.box.onmouseup=s.box.onmouseout=function(){mxClient.IS_TOUCH||target.focus()},s.box.onmousedown=function(){},s.box.onmousemove=function(h){(holdPad||holdSld)&&(holdPad&&setPad(h),holdSld&&setSld(h),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),dispatchImmediateChange())},s.padM.onmouseup=s.padM.onmouseout=function(){holdPad&&(holdPad=!1,mxJSColor.fireEvent(valueElement,"change"))},s.padM.onmousedown=function(h){switch(modeID){case 0:THIS.hsv[2]===0&&THIS.fromHSV(null,null,1);break;case 1:THIS.hsv[1]===0&&THIS.fromHSV(null,1,null);break}holdPad=!0,setPad(h),dispatchImmediateChange()},s.sldM.onmouseup=s.sldM.onmouseout=function(){holdSld&&(holdSld=!1,mxJSColor.fireEvent(valueElement,"change"))},s.sldM.onmousedown=function(h){holdSld=!0,setSld(h),dispatchImmediateChange()};var l=getPickerDims(THIS);s.box.style.width=l[0]+"px",s.box.style.height=l[1]+"px",s.boxB.style.position="absolute",s.boxB.style.clear="both",s.boxB.style.left=a+"px",s.boxB.style.top=i+"px",s.boxB.style.zIndex=THIS.pickerZIndex,s.boxB.style.border=THIS.pickerBorder+"px solid",s.boxB.style.borderColor=THIS.pickerBorderColor,s.boxB.style.background=THIS.pickerFaceColor,s.pad.style.width=mxJSColor.images.pad[0]+"px",s.pad.style.height=mxJSColor.images.pad[1]+"px",s.padB.style.position="absolute",s.padB.style.left=THIS.pickerFace+"px",s.padB.style.top=THIS.pickerFace+"px",s.padB.style.border=THIS.pickerInset+"px solid",s.padB.style.borderColor=THIS.pickerInsetColor,s.padM.style.position="absolute",s.padM.style.left="0",s.padM.style.top="0",s.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+mxJSColor.images.pad[0]+mxJSColor.images.arrow[0]+"px",s.padM.style.height=s.box.style.height,s.padM.style.cursor="crosshair",s.sld.style.overflow="hidden",s.sld.style.width=mxJSColor.images.sld[0]+"px",s.sld.style.height=mxJSColor.images.sld[1]+"px",s.sldB.style.display=THIS.slider?"block":"none",s.sldB.style.position="absolute",s.sldB.style.right=THIS.pickerFace+"px",s.sldB.style.top=THIS.pickerFace+"px",s.sldB.style.border=THIS.pickerInset+"px solid",s.sldB.style.borderColor=THIS.pickerInsetColor,s.sldM.style.display=THIS.slider?"block":"none",s.sldM.style.position="absolute",s.sldM.style.right="0",s.sldM.style.top="0",s.sldM.style.width=mxJSColor.images.sld[0]+mxJSColor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px",s.sldM.style.height=s.box.style.height;try{s.sldM.style.cursor="pointer"}catch{s.sldM.style.cursor="hand"}function r(){var h=THIS.pickerInsetColor.split(/\s+/),u=h.length<2?h[0]:h[1]+" "+h[0]+" "+h[0]+" "+h[1];s.btn.style.borderColor=u}s.btn.style.display=THIS.pickerClosable?"block":"none",s.btn.style.position="absolute",s.btn.style.left=THIS.pickerFace+"px",s.btn.style.bottom=THIS.pickerFace+"px",s.btn.style.padding="0 15px",s.btn.style.height="18px",s.btn.style.border=THIS.pickerInset+"px solid",r(),s.btn.style.color=THIS.pickerButtonColor,s.btn.style.font="12px sans-serif",s.btn.style.textAlign="center";try{s.btn.style.cursor="pointer"}catch{s.btn.style.cursor="hand"}switch(s.btn.onmousedown=function(){THIS.hidePicker()},s.btnS.style.lineHeight=s.btn.style.height,modeID){case 0:var o="hs.png";break;case 1:var o="hv.png";break}s.padM.style.backgroundImage="url('"+mxJSColor.getDir()+"cross.gif')",s.padM.style.backgroundRepeat="no-repeat",s.sldM.style.backgroundImage="url('"+mxJSColor.getDir()+"arrow.gif')",s.sldM.style.backgroundRepeat="no-repeat",s.pad.style.backgroundImage="url('"+mxJSColor.getDir()+o+"')",s.pad.style.backgroundRepeat="no-repeat",s.pad.style.backgroundPosition="0 0",redrawPad(),redrawSld(),mxJSColor.picker.owner=THIS,document.getElementsByTagName("body")[0].appendChild(s.boxB)}function getPickerDims(a){var i=[2*a.pickerInset+2*a.pickerFace+mxJSColor.images.pad[0]+(a.slider?2*a.pickerInset+2*mxJSColor.images.arrow[0]+mxJSColor.images.sld[0]:0),a.pickerClosable?4*a.pickerInset+3*a.pickerFace+mxJSColor.images.pad[1]+a.pickerButtonHeight:2*a.pickerInset+2*a.pickerFace+mxJSColor.images.pad[1]];return i}function redrawPad(){switch(modeID){case 0:var a=1;break;case 1:var a=2;break}var i=Math.round(THIS.hsv[0]/6*(mxJSColor.images.pad[0]-1)),t=Math.round((1-THIS.hsv[a])*(mxJSColor.images.pad[1]-1));mxJSColor.picker.padM.style.backgroundPosition=THIS.pickerFace+THIS.pickerInset+i-Math.floor(mxJSColor.images.cross[0]/2)+"px "+(THIS.pickerFace+THIS.pickerInset+t-Math.floor(mxJSColor.images.cross[1]/2))+"px";var e=mxJSColor.picker.sld.childNodes;switch(modeID){case 0:for(var n=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1),r=0;r<e.length;r+=1)e[r].style.backgroundColor="rgb("+n[0]*(1-r/e.length)*100+"%,"+n[1]*(1-r/e.length)*100+"%,"+n[2]*(1-r/e.length)*100+"%)";break;case 1:var n,s,l=[THIS.hsv[2],0,0],r=Math.floor(THIS.hsv[0]),o=r%2?THIS.hsv[0]-r:1-(THIS.hsv[0]-r);switch(r){case 6:case 0:n=[0,1,2];break;case 1:n=[1,0,2];break;case 2:n=[2,0,1];break;case 3:n=[2,1,0];break;case 4:n=[1,2,0];break;case 5:n=[0,2,1];break}for(var r=0;r<e.length;r+=1)s=1-1/(e.length-1)*r,l[1]=l[0]*(1-s*o),l[2]=l[0]*(1-s),e[r].style.backgroundColor="rgb("+l[n[0]]*100+"%,"+l[n[1]]*100+"%,"+l[n[2]]*100+"%)";break}}function redrawSld(){switch(modeID){case 0:var a=2;break;case 1:var a=1;break}var i=Math.round((1-THIS.hsv[a])*(mxJSColor.images.sld[1]-1));mxJSColor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+i-Math.floor(mxJSColor.images.arrow[1]/2))+"px"}function isPickerOwner(){return mxJSColor.picker&&mxJSColor.picker.owner===THIS}function blurValue(){valueElement!==target&&THIS.importColor()}function setPad(a){var i=mxJSColor.getRelMousePos(a),t=i.x-THIS.pickerFace-THIS.pickerInset,e=i.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(t*(6/(mxJSColor.images.pad[0]-1)),1-e/(mxJSColor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(t*(6/(mxJSColor.images.pad[0]-1)),null,1-e/(mxJSColor.images.pad[1]-1),leaveSld);break}}function setSld(a){var i=mxJSColor.getRelMousePos(a),t=i.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-t/(mxJSColor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-t/(mxJSColor.images.sld[1]-1),null,leavePad);break}}function dispatchImmediateChange(){THIS.onImmediateChange&&(typeof THIS.onImmediateChange=="string"?eval(THIS.onImmediateChange):THIS.onImmediateChange(THIS))}var THIS=this,modeID=this.pickerMode.toLowerCase()==="hvs"?1:0,valueElement=mxJSColor.fetchElement(this.valueElement),styleElement=mxJSColor.fetchElement(this.styleElement),holdPad=!1,holdSld=!1,leaveValue=1,leaveStyle=2,leavePad=4,leaveSld=8;if(valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue),dispatchImmediateChange()};mxJSColor.addEvent(valueElement,"keyup",updateField),mxJSColor.addEvent(valueElement,"input",updateField),mxJSColor.addEvent(valueElement,"blur",blurValue),valueElement.setAttribute("autocomplete","off")}switch(styleElement&&(styleElement.jscStyle={backgroundImage:styleElement.style.backgroundImage,backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color}),modeID){case 0:mxJSColor.requireImage("hs.png");break;case 1:mxJSColor.requireImage("hv.png");break}mxJSColor.requireImage("cross.gif"),mxJSColor.requireImage("arrow.gif"),this.importColor()}};function OpenDialog$1(){var a=document.createElement("iframe");a.style.backgroundColor="transparent",a.allowTransparency="true",a.style.borderStyle="none",a.style.borderWidth="0px",a.style.overflow="hidden",a.frameBorder="0";var i=mxClient.IS_VML&&(document.documentMode==null||document.documentMode<8)?20:0;a.setAttribute("width",(Editor$1.useLocalStorage?640:320)+i+"px"),a.setAttribute("height",(Editor$1.useLocalStorage?480:220)+i+"px"),a.setAttribute("src",OPEN_FORM),this.container=a}function ColorDialog(a,i,t,e){this.editorUi=a;var n=document.createElement("input");n.style.marginBottom="10px",n.style.width="216px",mxClient.IS_IE&&(n.style.marginTop="10px",document.body.appendChild(n));var s=t??this.createApplyFunction();function l(){var C=n.value;/(^#?[a-zA-Z0-9]*$)/.test(C)?(C!="none"&&C.charAt(0)!="#"&&(C="#"+C),ColorDialog.addRecentColor(C!="none"?C.substring(1):C,12),s(C),a.hideDialog()):a.handleError({message:mxResources$1.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||n.focus()};var r=new mxJSColor.color(n);r.pickerOnfocus=!1,r.showPicker();var o=document.createElement("div");mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",o.appendChild(mxJSColor.picker.box);var h=document.createElement("center");function u(){var C=d(ColorDialog.recentColors.length==0?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return C.style.marginBottom="8px",C}function d(C,E,b,w){E=E??12;var $=document.createElement("table");$.style.borderCollapse="collapse",$.setAttribute("cellspacing","0"),$.style.marginBottom="20px",$.style.cellSpacing="0px";var P=document.createElement("tbody");$.appendChild(P);for(var M=C.length/E,D=0;D<M;D++){for(var k=document.createElement("tr"),Z=0;Z<E;Z++)(function(j){var X=document.createElement("td");X.style.border="1px solid black",X.style.padding="0px",X.style.width="16px",X.style.height="16px",j==null&&(j=b),j=="none"?X.style.background="url('"+Dialog$1.prototype.noColorImage+"')":X.style.backgroundColor="#"+j,k.appendChild(X),j!=null&&(X.style.cursor="pointer",mxEvent$1.addListener(X,"click",function(){j=="none"?(r.fromString("ffffff"),n.value="none"):r.fromString(j)}),mxEvent$1.addListener(X,"dblclick",l))})(C[D*E+Z]);P.appendChild(k)}if(w){var q=document.createElement("td");q.setAttribute("title",mxResources$1.get("reset")),q.style.border="1px solid black",q.style.padding="0px",q.style.width="16px",q.style.height="16px",q.style.backgroundImage="url('"+Dialog$1.prototype.closeImage+"')",q.style.backgroundPosition="center center",q.style.backgroundRepeat="no-repeat",q.style.cursor="pointer",k.appendChild(q),mxEvent$1.addListener(q,"click",function(){ColorDialog.resetRecentColors(),$.parentNode.replaceChild(u(),$)})}return h.appendChild($),$}o.appendChild(n),mxUtils$1.br(o),u();var m=d(this.presetColors);m.style.marginBottom="8px",m=d(this.defaultColors),m.style.marginBottom="16px",o.appendChild(h);var g=document.createElement("div");g.style.textAlign="right",g.style.whiteSpace="nowrap";var x=mxUtils$1.button(mxResources$1.get("cancel"),function(){a.hideDialog(),e!=null&&e()});x.className="geBtn",a.editor.cancelFirst&&g.appendChild(x);var v=mxUtils$1.button(mxResources$1.get("apply"),l);v.className="geBtn gePrimaryBtn",g.appendChild(v),a.editor.cancelFirst||g.appendChild(x),i!=null&&(i=="none"?(r.fromString("ffffff"),n.value="none"):r.fromString(i)),o.appendChild(g),this.picker=r,this.colorInput=n,mxEvent$1.addListener(o,"keydown",function(C){C.keyCode==27&&(a.hideDialog(),e!=null&&e(),mxEvent$1.consume(C))}),this.container=o}ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"];ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"];ColorDialog.prototype.createApplyFunction=function(){return mxUtils$1.bind(this,function(a){var i=this.editorUi.editor.graph;i.getModel().beginUpdate();try{i.setCellStyles(this.currentColorKey,a),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[this.currentColorKey],"values",[a],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})};ColorDialog.recentColors=[];ColorDialog.addRecentColor=function(a,i){a!=null&&(mxUtils$1.remove(a,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,a),ColorDialog.recentColors.length>=i&&ColorDialog.recentColors.pop())};ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};function OutlineWindow(a,i,t,e,n){var s=a.editor.graph,l=document.createElement("div");l.style.position="absolute",l.style.width="100%",l.style.height="100%",l.style.border="1px solid whiteSmoke",l.style.overflow="hidden",this.window=new mxWindow(mxResources$1.get("outline"),l,i,t,e,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(g,x){var v=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,C=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;g=Math.max(0,Math.min(g,v-this.table.clientWidth)),x=Math.max(0,Math.min(x,C-this.table.clientHeight-48)),(this.getX()!=g||this.getY()!=x)&&mxWindow.prototype.setLocation.apply(this,arguments)};var r=mxUtils$1.bind(this,function(){var g=this.window.getX(),x=this.window.getY();this.window.setLocation(g,x)});mxEvent$1.addListener(window,"resize",r);var o=a.createOutline(this.window);this.destroy=function(){mxEvent$1.removeListener(window,"resize",r),this.window.destroy(),o.destroy()},this.window.addListener(mxEvent$1.RESIZE,mxUtils$1.bind(this,function(){o.update(!1),o.outline.sizeDidChange()})),this.window.addListener(mxEvent$1.SHOW,mxUtils$1.bind(this,function(){this.window.fit(),o.suspended=!1,o.outline.refresh(),o.update()})),this.window.addListener(mxEvent$1.HIDE,mxUtils$1.bind(this,function(){o.suspended=!0})),this.window.addListener(mxEvent$1.NORMALIZE,mxUtils$1.bind(this,function(){o.suspended=!1,o.update()})),this.window.addListener(mxEvent$1.MINIMIZE,mxUtils$1.bind(this,function(){o.suspended=!0}));var h=o.createGraph;o.createGraph=function(g){var x=h.apply(this,arguments);x.gridEnabled=!1,x.pageScale=s.pageScale,x.pageFormat=s.pageFormat,x.background=s.background==null||s.background==mxConstants$1.NONE?s.defaultPageBackgroundColor:s.background,x.pageVisible=s.pageVisible;var v=mxUtils$1.getCurrentStyle(s.container);return l.style.backgroundColor=v.backgroundColor,x};function u(){o.outline.pageScale=s.pageScale,o.outline.pageFormat=s.pageFormat,o.outline.pageVisible=s.pageVisible,o.outline.background=s.background==null||s.background==mxConstants$1.NONE?s.defaultPageBackgroundColor:s.background;var g=mxUtils$1.getCurrentStyle(s.container);l.style.backgroundColor=g.backgroundColor,s.view.backgroundPageShape!=null&&o.outline.view.backgroundPageShape!=null&&(o.outline.view.backgroundPageShape.fill=s.view.backgroundPageShape.fill),o.outline.refresh()}if(o.init(l),a.editor.addListener("resetGraphView",u),a.addListener("pageFormatChanged",u),a.addListener("backgroundColorChanged",u),a.addListener("backgroundImageChanged",u),a.addListener("pageViewChanged",function(){u(),o.update(!0)}),o.outline.dialect==mxConstants$1.DIALECT_SVG){var d=a.actions.get("zoomIn"),m=a.actions.get("zoomOut");mxEvent$1.addMouseWheelListener(function(g,x){for(var v=!1,C=mxEvent$1.getSource(g);C!=null;){if(C==o.outline.view.canvas.ownerSVGElement){v=!0;break}C=C.parentNode}v&&(x?d.funct():m.funct())})}}function LayersWindow(a,i,t,e,n){var s=a.editor.graph,l=document.createElement("div");l.style.userSelect="none",l.style.background=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,l.style.border="1px solid whiteSmoke",l.style.height="100%",l.style.marginBottom="10px",l.style.overflow="auto";var r=EditorUi.compactUi?"26px":"30px",o=document.createElement("div");o.style.backgroundColor=Dialog$1.backdropColor=="white"?"#dcdcdc":Dialog$1.backdropColor,o.style.position="absolute",o.style.overflow="auto",o.style.left="0px",o.style.right="0px",o.style.top="0px",o.style.bottom=parseInt(r)+7+"px",l.appendChild(o);var h=null,u=null;mxEvent$1.addListener(l,"dragover",function(D){D.dataTransfer.dropEffect="move",u=0,D.stopPropagation(),D.preventDefault()}),mxEvent$1.addListener(l,"drop",function(D){D.stopPropagation(),D.preventDefault()});var d=null,m=null,g=document.createElement("div");g.className="geToolbarContainer",g.style.position="absolute",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.style.height=r,g.style.overflow="hidden",g.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",g.style.backgroundColor=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,g.style.borderWidth="1px 0px 0px 0px",g.style.borderColor="#c3c3c3",g.style.borderStyle="solid",g.style.display="block",g.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(g.style.filter="none");var x=document.createElement("a");x.className="geButton",mxClient.IS_QUIRKS&&(x.style.filter="none");var v=x.cloneNode();v.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent$1.addListener(v,"click",function(D){if(s.isEnabled()){s.model.beginUpdate();try{var k=s.model.root.getIndex(m);s.removeCells([m],!1),s.model.getChildCount(s.model.root)==0?(s.model.add(s.model.root,new mxCell),s.setDefaultParent(null)):k>0&&k<=s.model.getChildCount(s.model.root)?s.setDefaultParent(s.model.getChildAt(s.model.root,k-1)):s.setDefaultParent(null)}finally{s.model.endUpdate()}}mxEvent$1.consume(D)}),s.isEnabled()||(v.className="geButton mxDisabled"),g.appendChild(v);var C=x.cloneNode();C.setAttribute("title",mxUtils$1.trim(mxResources$1.get("moveSelectionTo",["..."]))),C.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent$1.addListener(C,"click",function(D){if(s.isEnabled()&&!s.isSelectionEmpty()){var k=mxUtils$1.getOffset(C);a.showPopupMenu(mxUtils$1.bind(this,function(Z,q){for(var j=d-1;j>=0;j--)mxUtils$1.bind(this,function(X){var rt=Z.addItem(s.convertValueToString(X)||mxResources$1.get("background"),null,mxUtils$1.bind(this,function(){s.moveCells(s.getSelectionCells(),0,0,!1,X)}),q);s.getSelectionCount()==1&&s.model.isAncestor(X,s.getSelectionCell())&&Z.addCheckmark(rt,Editor$1.checkmarkImage)})(s.model.getChildAt(s.model.root,j))}),k.x,k.y+C.offsetHeight,D)}}),g.appendChild(C);var E=x.cloneNode();E.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',E.setAttribute("title",mxResources$1.get("rename")),mxEvent$1.addListener(E,"click",function(D){s.isEnabled()&&a.showDataDialog(m),mxEvent$1.consume(D)}),s.isEnabled()||(E.className="geButton mxDisabled"),g.appendChild(E);function b(D){if(s.isEnabled()&&D!=null){var k=s.convertValueToString(D),Z=new FilenameDialog(a,k||mxResources$1.get("background"),mxResources$1.get("rename"),mxUtils$1.bind(this,function(q){q!=null&&s.cellLabelChanged(D,q)}),mxResources$1.get("enterName"));a.showDialog(Z.container,300,100,!0,!0),Z.init()}}var w=x.cloneNode();w.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent$1.addListener(w,"click",function(D){if(s.isEnabled()){var k=null;s.model.beginUpdate();try{k=s.cloneCell(m),s.cellLabelChanged(k,mxResources$1.get("untitledLayer")),k.setVisible(!0),k=s.addCell(k,s.model.root),s.setDefaultParent(k)}finally{s.model.endUpdate()}k!=null&&!s.isCellLocked(k)&&s.selectAll(k)}}),s.isEnabled()||(w.className="geButton mxDisabled"),g.appendChild(w);var $=x.cloneNode();$.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',$.setAttribute("title",mxResources$1.get("addLayer")),mxEvent$1.addListener($,"click",function(D){if(s.isEnabled()){s.model.beginUpdate();try{var k=s.addCell(new mxCell(mxResources$1.get("untitledLayer")),s.model.root);s.setDefaultParent(k)}finally{s.model.endUpdate()}}mxEvent$1.consume(D)}),s.isEnabled()||($.className="geButton mxDisabled"),g.appendChild($),l.appendChild(g);function P(){d=s.model.getChildCount(s.model.root),o.innerHTML="";function D(q,j,X,rt){var et=document.createElement("div");et.className="geToolbarContainer",et.style.overflow="hidden",et.style.position="relative",et.style.padding="4px",et.style.height="22px",et.style.display="block",et.style.backgroundColor=Dialog$1.backdropColor=="white"?"whiteSmoke":Dialog$1.backdropColor,et.style.borderWidth="0px 0px 1px 0px",et.style.borderColor="#c3c3c3",et.style.borderStyle="solid",et.style.whiteSpace="nowrap",et.setAttribute("title",j);var Y=document.createElement("div");Y.style.display="inline-block",Y.style.width="100%",Y.style.textOverflow="ellipsis",Y.style.overflow="hidden",mxEvent$1.addListener(et,"dragover",function(nt){nt.dataTransfer.dropEffect="move",u=q,nt.stopPropagation(),nt.preventDefault()}),mxEvent$1.addListener(et,"dragstart",function(nt){h=et,mxClient.IS_FF&&nt.dataTransfer.setData("Text","<layer/>")}),mxEvent$1.addListener(et,"dragend",function(nt){h!=null&&u!=null&&s.addCell(X,s.model.root,u),h=null,u=null,nt.stopPropagation(),nt.preventDefault()});var G=document.createElement("img");G.setAttribute("draggable","false"),G.setAttribute("align","top"),G.setAttribute("border","0"),G.style.padding="4px",G.setAttribute("title",mxResources$1.get("lockUnlock"));var J=s.getCurrentCellStyle(X);mxUtils$1.getValue(J,"locked","0")=="1"?G.setAttribute("src",Dialog$1.prototype.lockedImage):G.setAttribute("src",Dialog$1.prototype.unlockedImage),s.isEnabled()&&(G.style.cursor="pointer"),mxEvent$1.addListener(G,"click",function(nt){if(s.isEnabled()){var ht=null;s.getModel().beginUpdate();try{ht=mxUtils$1.getValue(J,"locked","0")=="1"?null:"1",s.setCellStyles("locked",ht,[X])}finally{s.getModel().endUpdate()}ht=="1"&&s.removeSelectionCells(s.getModel().getDescendants(X)),mxEvent$1.consume(nt)}}),Y.appendChild(G);var tt=document.createElement("input");if(tt.setAttribute("type","checkbox"),tt.setAttribute("title",mxResources$1.get("hideIt",[X.value||mxResources$1.get("background")])),tt.style.marginLeft="4px",tt.style.marginRight="6px",tt.style.marginTop="4px",Y.appendChild(tt),s.model.isVisible(X)&&(tt.setAttribute("checked","checked"),tt.defaultChecked=!0),mxEvent$1.addListener(tt,"click",function(nt){s.model.setVisible(X,!s.model.isVisible(X)),mxEvent$1.consume(nt)}),mxUtils$1.write(Y,j),et.appendChild(Y),s.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10){var gt=document.createElement("div");if(gt.style.display="block",gt.style.textAlign="right",gt.style.whiteSpace="nowrap",gt.style.position="absolute",gt.style.right="6px",gt.style.top="6px",q>0){var dt=document.createElement("a");dt.setAttribute("title",mxResources$1.get("toBack")),dt.className="geButton",dt.style.cssFloat="none",dt.innerHTML="&#9660;",dt.style.width="14px",dt.style.height="14px",dt.style.fontSize="14px",dt.style.margin="0px",dt.style.marginTop="-1px",gt.appendChild(dt),mxEvent$1.addListener(dt,"click",function(nt){s.isEnabled()&&s.addCell(X,s.model.root,q-1),mxEvent$1.consume(nt)})}if(q>=0&&q<d-1){var K=document.createElement("a");K.setAttribute("title",mxResources$1.get("toFront")),K.className="geButton",K.style.cssFloat="none",K.innerHTML="&#9650;",K.style.width="14px",K.style.height="14px",K.style.fontSize="14px",K.style.margin="0px",K.style.marginTop="-1px",gt.appendChild(K),mxEvent$1.addListener(K,"click",function(nt){s.isEnabled()&&s.addCell(X,s.model.root,q+1),mxEvent$1.consume(nt)})}et.appendChild(gt)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(et.setAttribute("draggable","true"),et.style.cursor="move")}mxEvent$1.addListener(et,"dblclick",function(nt){var ht=mxEvent$1.getSource(nt).nodeName;ht!="INPUT"&&ht!="IMG"&&(b(X),mxEvent$1.consume(nt))}),s.getDefaultParent()==X?(et.style.background=Dialog$1.backdropColor=="white"?"#e6eff8":"#505759",et.style.fontWeight=s.isEnabled()?"bold":"",m=X):mxEvent$1.addListener(et,"click",function(nt){s.isEnabled()&&(s.setDefaultParent(rt),s.view.setCurrentRoot(null))}),o.appendChild(et)}for(var k=d-1;k>=0;k--)mxUtils$1.bind(this,function(q){D(k,s.convertValueToString(q)||mxResources$1.get("background"),q,q)})(s.model.getChildAt(s.model.root,k));var Z=s.convertValueToString(m)||mxResources$1.get("background");v.setAttribute("title",mxResources$1.get("removeIt",[Z])),w.setAttribute("title",mxResources$1.get("duplicateIt",[Z])),E.setAttribute("title",mxResources$1.get("editData")),s.isSelectionEmpty()&&(C.className="geButton mxDisabled")}P(),s.model.addListener(mxEvent$1.CHANGE,P),s.addListener("defaultParentChanged",P),s.selectionModel.addListener(mxEvent$1.CHANGE,function(){s.isSelectionEmpty()?C.className="geButton mxDisabled":C.className="geButton"}),this.window=new mxWindow(mxResources$1.get("layers"),l,i,t,e,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){o.scrollTop=o.scrollHeight-o.clientHeight},this.window.addListener(mxEvent$1.SHOW,mxUtils$1.bind(this,function(){this.window.fit()})),this.refreshLayers=P,this.window.setLocation=function(D,k){var Z=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,q=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;D=Math.max(0,Math.min(D,Z-this.table.clientWidth)),k=Math.max(0,Math.min(k,q-this.table.clientHeight-48)),(this.getX()!=D||this.getY()!=k)&&mxWindow.prototype.setLocation.apply(this,arguments)};var M=mxUtils$1.bind(this,function(){var D=this.window.getX(),k=this.window.getY();this.window.setLocation(D,k)});mxEvent$1.addListener(window,"resize",M),this.destroy=function(){mxEvent$1.removeListener(window,"resize",M),this.window.destroy()}}class Actions extends mxEventSource{constructor(i){super(),this.editorUi=i,this.actions=new Object,this.init()}}Actions.prototype.init=function(){var a=this.editorUi,i=a.editor,t=i.graph,e=function(){return Action.prototype.isEnabled.apply(this,arguments)&&t.isEnabled()};this.addAction("new...",function(){t.openLink(a.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",a.openFile()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils$1.bind(this,function(){a.hideDialog()})),window.openFile.setConsumer(mxUtils$1.bind(this,function(o,h){try{var u=mxUtils$1.parseXml(o);i.graph.setSelectionCells(i.graph.importGraphModel(u.documentElement))}catch(d){mxUtils$1.alert(mxResources$1.get("invalidOrMissingFile")+": "+d.message)}})),a.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=e,this.addAction("save",function(){a.saveFile(!1)},null,null,Editor$1.ctrlKey+"+S").isEnabled=e,this.addAction("saveAs...",function(){a.saveFile(!0)},null,null,Editor$1.ctrlKey+"+Shift+S").isEnabled=e,this.addAction("export...",function(){a.showDialog(new ExportDialog(a).container,300,296,!0,!0)}),this.addAction("editDiagram...",function(){var o=new EditDiagramDialog(a);a.showDialog(o.container,620,420,!0,!1),o.init()}),this.addAction("pageSetup...",function(){a.showDialog(new PageSetupDialog(a).container,320,220,!0,!0)}).isEnabled=e,this.addAction("print...",function(){a.showDialog(new PrintDialog(a).container,300,180,!0,!0)},null,"sprite-print",Editor$1.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils$1.show(t,null,10,10)}),this.addAction("undo",function(){a.undo()},null,"sprite-undo",Editor$1.ctrlKey+"+Z"),this.addAction("redo",function(){a.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor$1.ctrlKey+"+Y":Editor$1.ctrlKey+"+Shift+Z"),this.addAction("select",function(){a.select()},null,"sprite-select",null),this.addAction("pan",function(){a.pan()},null,"sprite-pan",null),this.addAction("cut",function(){mxClipboard.cut(t)},null,"sprite-cut",Editor$1.ctrlKey+"+X"),this.addAction("copy",function(){try{mxClipboard.copy(t)}catch(o){a.handleError(o)}},null,"sprite-copy",Editor$1.ctrlKey+"+C"),this.addAction("paste",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&mxClipboard.paste(t)},!1,"sprite-paste",Editor$1.ctrlKey+"+V"),this.addAction("pasteHere",function(o){if(t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())){t.getModel().beginUpdate();try{var h=mxClipboard.paste(t);if(h!=null){for(var u=!0,d=0;d<h.length&&u;d++)u=u&&t.model.isEdge(h[d]);var m=t.view.translate,g=t.view.scale,x=m.x,v=m.y,C=null;if(h.length==1&&u){var E=t.getCellGeometry(h[0]);E!=null&&(C=E.getTerminalPoint(!0))}if(C=C??t.getBoundingBoxFromGeometry(h,u),C!=null){var b=Math.round(t.snap(t.popupMenuHandler.triggerX/g-x)),w=Math.round(t.snap(t.popupMenuHandler.triggerY/g-v));t.cellsMoved(h,b-C.x,w-C.y)}}}finally{t.getModel().endUpdate()}}}),this.addAction("copySize",function(o){var h=t.getSelectionCell();if(t.isEnabled()&&h!=null&&t.getModel().isVertex(h)){var u=t.getCellGeometry(h);u!=null&&(a.copiedSize=new mxRectangle(u.x,u.y,u.width,u.height))}},null,null,"Alt+Shift+X"),this.addAction("pasteSize",function(o){if(t.isEnabled()&&!t.isSelectionEmpty()&&a.copiedSize!=null){t.getModel().beginUpdate();try{for(var h=t.getSelectionCells(),u=0;u<h.length;u++)if(t.getModel().isVertex(h[u])){var d=t.getCellGeometry(h[u]);d!=null&&(d=d.clone(),d.width=a.copiedSize.width,d.height=a.copiedSize.height,t.getModel().setGeometry(h[u],d))}}finally{t.getModel().endUpdate()}}},null,null,"Alt+Shift+V");function n(o){t.escape();var h=t.deleteCells(t.getDeletableCells(t.getSelectionCells()),o);h!=null&&t.setSelectionCells(h)}this.addAction("delete",function(o){n(o!=null&&mxEvent$1.isControlDown(o))},null,null,"Delete"),this.addAction("deleteAll",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{for(var o=t.getSelectionCells(),h=0;h<o.length;h++)t.cellLabelChanged(o[h],"")}finally{t.getModel().endUpdate()}}}),this.addAction("deleteLabels",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{for(var o=t.getSelectionCells(),h=0;h<o.length;h++)t.cellLabelChanged(o[h],"")}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{t.setSelectionCells(t.duplicateCells()),t.scrollCellToVisible(t.getSelectionCell())}catch(o){a.handleError(o)}},null,null,Editor$1.ctrlKey+"+D"),this.put("turn",new Action(mxResources$1.get("turn")+" / "+mxResources$1.get("reverse"),function(o){t.turnShapes(t.getSelectionCells(),o!=null?mxEvent$1.isShiftDown(o):!1)},null,null,Editor$1.ctrlKey+"+R")),this.addAction("selectVertices",function(){t.selectVertices(null,!0)},null,null,Editor$1.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){t.selectEdges()},null,null,Editor$1.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){t.selectAll(null,!0)},null,null,Editor$1.ctrlKey+"+A"),this.addAction("selectNone",function(){t.clearSelection()},null,null,Editor$1.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!t.isSelectionEmpty()){t.getModel().beginUpdate();try{var o=t.isCellMovable(t.getSelectionCell())?1:0;t.toggleCellStyles(mxConstants$1.STYLE_MOVABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_RESIZABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_ROTATABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_DELETABLE,o),t.toggleCellStyles(mxConstants$1.STYLE_EDITABLE,o),t.toggleCellStyles("connectable",o)}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+L"),this.addAction("home",function(){t.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){t.exitGroup()},null,null,Editor$1.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){t.enterGroup()},null,null,Editor$1.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){t.foldCells(!0)},null,null,Editor$1.ctrlKey+"+Home"),this.addAction("expand",function(){t.foldCells(!1)},null,null,Editor$1.ctrlKey+"+End"),this.addAction("toFront",function(){t.orderCells(!1)},null,null,Editor$1.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){t.orderCells(!0)},null,null,Editor$1.ctrlKey+"+Shift+B"),this.addAction("group",function(){if(t.isEnabled()){var o=mxUtils$1.sortCells(t.getSelectionCells(),!0);o.length==1&&!t.isTable(o[0])&&!t.isTableRow(o[0])?t.setCellStyles("container","1"):(o=t.getCellsForGroup(o),o.length>1&&t.setSelectionCell(t.groupCells(null,0,o)))}},null,null,Editor$1.ctrlKey+"+G"),this.addAction("ungroup",function(){if(t.isEnabled()){var o=t.getSelectionCells();t.model.beginUpdate();try{var h=t.ungroupCells();if(o!=null)for(var u=0;u<o.length;u++)t.model.contains(o[u])&&(t.model.getChildCount(o[u])==0&&t.model.isVertex(o[u])&&t.setCellStyles("container","0",[o[u]]),h.push(o[u]))}finally{t.model.endUpdate()}t.setSelectionCells(h)}},null,null,Editor$1.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(t.isEnabled()){var o=t.getSelectionCells();if(o!=null){for(var h=[],u=0;u<o.length;u++)!t.isTableRow(o[u])&&!t.isTableCell(o[u])&&h.push(o[u]);t.removeCellsFromParent(h)}}}),this.addAction("edit",function(){t.isEnabled()&&t.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var o=t.getSelectionCell()||t.getModel().getRoot();a.showDataDialog(o)},null,null,Editor$1.ctrlKey+"+M"),this.addAction("editTooltip...",function(){if(t.isEnabled()&&!t.isSelectionEmpty()){var o=t.getSelectionCell(),h="";if(mxUtils$1.isNode(o.value)){var u=null;Graph.translateDiagram&&Graph.diagramLanguage!=null&&o.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(u=o.value.getAttribute("tooltip_"+Graph.diagramLanguage)),u==null&&(u=o.value.getAttribute("tooltip")),u!=null&&(h=u)}var d=new TextareaDialog(a,mxResources$1.get("editTooltip")+":",h,function(m){t.setTooltipForCell(o,m)});a.showDialog(d.container,320,200,!0,!0),d.init()}},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var o=t.getLinkForCell(t.getSelectionCell());o!=null&&t.openLink(o)}),this.addAction("editLink...",function(){if(t.isEnabled()&&!t.isSelectionEmpty()){var o=t.getSelectionCell(),h=t.getLinkForCell(o)||"";a.showLinkDialog(h,mxResources$1.get("apply"),function(u){u=mxUtils$1.trim(u),t.setLinkForCell(o,u.length>0?u:null)})}},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources$1.get("image")+"...",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&(t.clearSelection(),a.actions.get("image").funct())})).isEnabled=e,this.put("insertLink",new Action(mxResources$1.get("link")+"...",function(){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&a.showLinkDialog("",mxResources$1.get("insert"),function(o,h){if(o=mxUtils$1.trim(o),o.length>0){var u=null,d=t.getLinkTitle(o);h!=null&&h.length>0&&(u=h[0].iconUrl,d=h[0].name||h[0].type,d=d.charAt(0).toUpperCase()+d.substring(1),d.length>30&&(d=d.substring(0,30)+"..."));var m=new mxCell(d,new mxGeometry(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(u!=null?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+u:"spacing=10;"));m.vertex=!0;var g=t.getCenterInsertPoint(t.getBoundingBoxFromGeometry([m],!0));m.geometry.x=g.x,m.geometry.y=g.y,t.setLinkForCell(m,o),t.cellSizeUpdated(m,!0),t.getModel().beginUpdate();try{m=t.addCell(m),t.fireEvent(new mxEventObject$1("cellsInserted","cells",[m]))}finally{t.getModel().endUpdate()}t.setSelectionCell(m),t.scrollCellToVisible(t.getSelectionCell())}})})).isEnabled=e,this.addAction("link...",mxUtils$1.bind(this,function(){if(t.isEnabled())if(t.cellEditor.isContentEditing()){var o=t.getSelectedElement(),h=t.getParentByName(o,"A",t.cellEditor.textarea),u="";if(h==null&&o!=null&&o.getElementsByTagName!=null)for(var d=o.getElementsByTagName("a"),m=0;m<d.length&&h==null;m++)d[m].textContent==o.textContent&&(h=d[m]);h!=null&&h.nodeName=="A"&&(u=h.getAttribute("href")||"",t.selectNode(h));var g=t.cellEditor.saveSelection();a.showLinkDialog(u,mxResources$1.get("apply"),mxUtils$1.bind(this,function(x){t.cellEditor.restoreSelection(g),x!=null&&t.insertLink(x)}))}else t.isSelectionEmpty()?this.get("insertLink").funct():this.get("editLink").funct()})).isEnabled=e,this.addAction("autosize",function(){var o=t.getSelectionCells();if(o!=null){t.getModel().beginUpdate();try{for(var h=0;h<o.length;h++){var u=o[h];if(t.getModel().getChildCount(u))t.updateGroupBounds([u],20);else{var d=t.view.getState(u),m=t.getCellGeometry(u);t.getModel().isVertex(u)&&d!=null&&d.text!=null&&m!=null&&t.isWrapping(u)?(m=m.clone(),m.height=d.text.boundingBox.height/t.view.scale,t.getModel().setGeometry(u,m)):t.updateCellSize(u)}}}finally{t.getModel().endUpdate()}}},null,null,Editor$1.ctrlKey+"+Shift+Y"),this.addAction("formattedText",function(){var o=t.getView().getState(t.getSelectionCell());if(o!=null){t.stopEditing();var h=o.style.html=="1"?null:"1";t.getModel().beginUpdate();try{for(var u=t.getSelectionCells(),d=0;d<u.length;d++)if(state=t.getView().getState(u[d]),state!=null){var m=mxUtils$1.getValue(state.style,"html","0");if(m=="1"&&h==null){var g=t.convertValueToString(state.cell);mxUtils$1.getValue(state.style,"nl2Br","1")!="0"&&(g=g.replace(/\n/g,"").replace(/<br\s*.?>/g,`
`));var x=document.createElement("div");x.innerHTML=t.sanitizeHtml(g),g=mxUtils$1.extractTextWithWhitespace(x.childNodes),t.cellLabelChanged(state.cell,g),t.setCellStyles("html",h,[u[d]])}else if(m=="0"&&h=="1"){var g=mxUtils$1.htmlEntities(t.convertValueToString(state.cell),!1);mxUtils$1.getValue(state.style,"nl2Br","1")!="0"&&(g=g.replace(/\n/g,"<br/>")),t.cellLabelChanged(state.cell,t.sanitizeHtml(g)),t.setCellStyles("html",h,[u[d]])}}a.fireEvent(new mxEventObject$1("styleChanged","keys",["html"],"values",[h??"0"],"cells",u))}finally{t.getModel().endUpdate()}}}),this.addAction("wordWrap",function(){var o=t.getView().getState(t.getSelectionCell()),h="wrap";t.stopEditing(),o!=null&&o.style[mxConstants$1.STYLE_WHITE_SPACE]=="wrap"&&(h=null),t.setCellStyles(mxConstants$1.STYLE_WHITE_SPACE,h)}),this.addAction("rotation",function(){var o="0",h=t.getView().getState(t.getSelectionCell());h!=null&&(o=h.style[mxConstants$1.STYLE_ROTATION]||o);var u=new FilenameDialog$1(a,o,mxResources$1.get("apply"),function(d){d!=null&&d.length>0&&t.setCellStyles(mxConstants$1.STYLE_ROTATION,d)},mxResources$1.get("enterValue")+" ("+mxResources$1.get("rotation")+" 0-360)");a.showDialog(u.container,375,80,!0,!0),u.init()}),this.addAction("resetView",function(){t.zoomTo(1),a.resetScrollbars()},null,null,"Home"),this.addAction("zoomIn",function(o){t.isFastZoomEnabled()?t.lazyZoom(!0,!0,a.buttonZoomDelay):t.zoomIn()},null,null,Editor$1.ctrlKey+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",function(o){t.isFastZoomEnabled()?t.lazyZoom(!1,!0,a.buttonZoomDelay):t.zoomOut()},null,null,Editor$1.ctrlKey+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",function(){var o=t.isSelectionEmpty()?t.getGraphBounds():t.getBoundingBox(t.getSelectionCells()),h=t.view.translate,u=t.view.scale;o.x=o.x/u-h.x,o.y=o.y/u-h.y,o.width/=u,o.height/=u,t.backgroundImage!=null&&o.add(new mxRectangle(0,0,t.backgroundImage.width,t.backgroundImage.height)),o.width==0||o.height==0?(t.zoomTo(1),a.resetScrollbars()):t.fitWindow(o)},null,null,Editor$1.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,u=t.container.clientWidth-10,d=t.container.clientHeight-10,m=Math.floor(20*Math.min(u/o.width/h,d/o.height/h))/20;if(t.zoomTo(m),mxUtils$1.hasScrollbars(t.container)){var g=t.getPagePadding();t.container.scrollTop=g.y*t.view.scale-1,t.container.scrollLeft=Math.min(g.x*t.view.scale,(t.container.scrollWidth-t.container.clientWidth)/2)-1}}),null,null,Editor$1.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,u=t.container.clientWidth-10,d=t.container.clientHeight-10,m=Math.floor(20*Math.min(u/(2*o.width)/h,d/o.height/h))/20;if(t.zoomTo(m),mxUtils$1.hasScrollbars(t.container)){var g=t.getPagePadding();t.container.scrollTop=Math.min(g.y,(t.container.scrollHeight-t.container.clientHeight)/2),t.container.scrollLeft=Math.min(g.x,(t.container.scrollWidth-t.container.clientWidth)/2)}}),null,null,Editor$1.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils$1.bind(this,function(){t.pageVisible||this.get("pageView").funct();var o=t.pageFormat,h=t.pageScale,u=t.container.clientWidth-10,d=Math.floor(20*u/o.width/h)/20;if(t.zoomTo(d),mxUtils$1.hasScrollbars(t.container)){var m=t.getPagePadding();t.container.scrollLeft=Math.min(m.x*t.view.scale,(t.container.scrollWidth-t.container.clientWidth)/2)}})),this.put("customZoom",new Action(mxResources$1.get("custom")+"...",mxUtils$1.bind(this,function(){var o=new FilenameDialog$1(this.editorUi,parseInt(t.getView().getScale()*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(h){var u=parseInt(h);!isNaN(u)&&u>0&&t.zoomTo(u/100)}),mxResources$1.get("zoom")+" (%)");this.editorUi.showDialog(o.container,300,80,!0,!0),o.init()}),null,null,Editor$1.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils$1.bind(this,function(){var o=new FilenameDialog$1(this.editorUi,parseInt(t.pageScale*100),mxResources$1.get("apply"),mxUtils$1.bind(this,function(h){var u=parseInt(h);if(!isNaN(u)&&u>0){var d=new ChangePageSetup(a,null,null,null,u/100);d.ignoreColor=!0,d.ignoreImage=!0,t.model.execute(d)}}),mxResources$1.get("pageScale")+" (%)");this.editorUi.showDialog(o.container,300,80,!0,!0),o.init()}));var s=null;s=this.addAction("grid",function(){t.setGridEnabled(!t.isGridEnabled()),a.fireEvent(new mxEventObject$1("gridEnabledChanged"))},null,null,Editor$1.ctrlKey+"+Shift+G"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.isGridEnabled()}),s.setEnabled(!1),s=this.addAction("guides",function(){t.graphHandler.guidesEnabled=!t.graphHandler.guidesEnabled,a.fireEvent(new mxEventObject$1("guidesEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.graphHandler.guidesEnabled}),s.setEnabled(!1),s=this.addAction("tooltips",function(){t.tooltipHandler.setEnabled(!t.tooltipHandler.isEnabled()),a.fireEvent(new mxEventObject$1("tooltipsEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.tooltipHandler.isEnabled()}),s=this.addAction("collapseExpand",function(){var o=new ChangePageSetup(a);o.ignoreColor=!0,o.ignoreImage=!0,o.foldingEnabled=!t.foldingEnabled,t.model.execute(o)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.foldingEnabled}),s.isEnabled=e,s=this.addAction("scrollbars",function(){a.setScrollbars(!a.hasScrollbars())}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.scrollbars}),s=this.addAction("pageView",mxUtils$1.bind(this,function(){a.setPageVisible(!t.pageVisible)})),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.pageVisible}),s=this.addAction("connectionArrows",function(){t.connectionArrowsEnabled=!t.connectionArrowsEnabled,a.fireEvent(new mxEventObject$1("connectionArrowsChanged"))},null,null,"Alt+Shift+A"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionArrowsEnabled}),s=this.addAction("connectionPoints",function(){t.setConnectable(!t.connectionHandler.isEnabled()),a.fireEvent(new mxEventObject$1("connectionPointsChanged"))},null,null,"Alt+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionHandler.isEnabled()}),s=this.addAction("copyConnect",function(){t.connectionHandler.setCreateTarget(!t.connectionHandler.isCreateTarget()),a.fireEvent(new mxEventObject$1("copyConnectChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.connectionHandler.isCreateTarget()}),s.isEnabled=e,s=this.addAction("autosave",function(){a.editor.setAutosave(!a.editor.autosave)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return a.editor.autosave}),s.isEnabled=e,s.visible=!1,this.addAction("help",function(){var o="";mxResources$1.isLanguageSupported(mxClient.language)&&(o="_"+mxClient.language),t.openLink(RESOURCES_PATH+"/help"+o+".html")});var l=!1;this.put("about",new Action(mxResources$1.get("about")+" Graph Editor...",function(){l||(a.showDialog(new AboutDialog(a).container,320,280,!0,!0,function(){l=!1}),l=!0)}));var r=mxUtils$1.bind(this,function(o,h,u,d){return this.addAction(o,function(){if(u!=null&&t.cellEditor.isContentEditing())u();else{t.stopEditing(!1),t.getModel().beginUpdate();try{var m=t.getSelectionCells();t.toggleCellStyleFlags(mxConstants$1.STYLE_FONTSTYLE,h,m),(h&mxConstants$1.FONT_BOLD)==mxConstants$1.FONT_BOLD?t.updateLabelElements(t.getSelectionCells(),function(x){x.style.fontWeight=null,x.nodeName=="B"&&t.replaceElement(x)}):(h&mxConstants$1.FONT_ITALIC)==mxConstants$1.FONT_ITALIC?t.updateLabelElements(t.getSelectionCells(),function(x){x.style.fontStyle=null,x.nodeName=="I"&&t.replaceElement(x)}):(h&mxConstants$1.FONT_UNDERLINE)==mxConstants$1.FONT_UNDERLINE&&t.updateLabelElements(t.getSelectionCells(),function(x){x.style.textDecoration=null,x.nodeName=="U"&&t.replaceElement(x)});for(var g=0;g<m.length;g++)t.model.getChildCount(m[g])==0&&t.autoSizeCell(m[g],!1)}finally{t.getModel().endUpdate()}}},null,null,d)});r("bold",mxConstants$1.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor$1.ctrlKey+"+B"),r("italic",mxConstants$1.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor$1.ctrlKey+"+I"),r("underline",mxConstants$1.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor$1.ctrlKey+"+U"),this.addAction("fontColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_STROKECOLOR)}),this.addAction("fillColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){a.menus.pickColor(mxConstants$1.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){a.menus.toggleStyle(mxConstants$1.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){a.menus.toggleStyle(mxConstants$1.STYLE_SHADOW)}),this.addAction("solid",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,null),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",[null,null],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("dashed",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,null),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1",null],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("dotted",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_DASHED,"1"),t.setCellStyles(mxConstants$1.STYLE_DASH_PATTERN,"1 4"),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_DASHED,mxConstants$1.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("sharp",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("rounded",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"1"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"0"),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["1","0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!t.isSelectionEmpty()&&t.isEnabled()){t.getModel().beginUpdate();try{var o=t.getSelectionCells(),h=t.getCurrentCellStyle(o[0]),u=mxUtils$1.getValue(h,mxConstants$1.STYLE_ROUNDED,"0")=="1"?"0":"1";t.setCellStyles(mxConstants$1.STYLE_ROUNDED,u),t.setCellStyles(mxConstants$1.STYLE_CURVED,null),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",[u,"0"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}}),this.addAction("curved",function(){t.getModel().beginUpdate();try{t.setCellStyles(mxConstants$1.STYLE_ROUNDED,"0"),t.setCellStyles(mxConstants$1.STYLE_CURVED,"1"),a.fireEvent(new mxEventObject$1("styleChanged","keys",[mxConstants$1.STYLE_ROUNDED,mxConstants$1.STYLE_CURVED],"values",["0","1"],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}),this.addAction("collapsible",function(){var o=t.view.getState(t.getSelectionCell()),h="1";o!=null&&t.getFoldingImage(o)!=null&&(h="0"),t.setCellStyles("collapsible",h),a.fireEvent(new mxEventObject$1("styleChanged","keys",["collapsible"],"values",[h],"cells",t.getSelectionCells()))}),this.addAction("editStyle...",mxUtils$1.bind(this,function(){var o=t.getSelectionCells();if(o!=null&&o.length>0){var h=t.getModel(),u=new TextareaDialog(this.editorUi,mxResources$1.get("editStyle")+":",h.getStyle(o[0])||"",function(d){d!=null&&t.setCellStyle(mxUtils$1.trim(d),o)},null,null,400,220);this.editorUi.showDialog(u.container,420,300,!0,!0),u.init()}}),null,null,Editor$1.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){t.isEnabled()&&!t.isSelectionEmpty()&&a.setDefaultStyle(t.getSelectionCell())},null,null,Editor$1.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){t.isEnabled()&&a.clearDefaultStyle()},null,null,Editor$1.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){var o=t.getSelectionCell();if(o!=null&&t.getModel().isEdge(o)){var h=i.graph.selectionCellsHandler.getHandler(o);if(h instanceof mxEdgeHandler){for(var u=t.view.translate,d=t.view.scale,m=u.x,g=u.y,x=t.getModel().getParent(o),v=t.getCellGeometry(x);t.getModel().isVertex(x)&&v!=null;)m+=v.x,g+=v.y,x=t.getModel().getParent(x),v=t.getCellGeometry(x);var C=Math.round(t.snap(t.popupMenuHandler.triggerX/d-m)),E=Math.round(t.snap(t.popupMenuHandler.triggerY/d-g));h.addPointAt(h.state,C,E)}}}),this.addAction("removeWaypoint",function(){var o=a.actions.get("removeWaypoint");o.handler!=null&&o.handler.removePoint(o.handler.state,o.index)}),this.addAction("clearWaypoints",function(){var o=t.getSelectionCells();if(o!=null){o=t.addAllEdges(o),t.getModel().beginUpdate();try{for(var h=0;h<o.length;h++){var u=o[h];if(t.getModel().isEdge(u)){var d=t.getCellGeometry(u);d!=null&&(d=d.clone(),d.points=null,t.getModel().setGeometry(u,d))}}}finally{t.getModel().endUpdate()}}},null,null,"Alt+Shift+C"),s=this.addAction("subscript",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor$1.ctrlKey+"+,"),s=this.addAction("superscript",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor$1.ctrlKey+"+."),s=this.addAction("indent",mxUtils$1.bind(this,function(){t.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)}),null,null,"Shift+Tab"),this.addAction("image...",function(){if(t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())){var o=mxResources$1.get("image")+" ("+mxResources$1.get("url")+"):",h=t.getView().getState(t.getSelectionCell()),u="";h!=null&&(u=h.style[mxConstants$1.STYLE_IMAGE]||u);var d=t.cellEditor.saveSelection();a.showImageDialog(o,u,function(m,g,x){if(t.cellEditor.isContentEditing())t.cellEditor.restoreSelection(d),t.insertImage(m,g,x);else{var v=t.getSelectionCells();if(m!=null&&(m.length>0||v.length>0)){var C=null;t.getModel().beginUpdate();try{if(v.length==0){v=[t.insertVertex(t.getDefaultParent(),null,"",0,0,g,x,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")];var E=t.getCenterInsertPoint(t.getBoundingBoxFromGeometry(v,!0));v[0].geometry.x=E.x,v[0].geometry.y=E.y,C=v,t.fireEvent(new mxEventObject$1("cellsInserted","cells",C))}t.setCellStyles(mxConstants$1.STYLE_IMAGE,m.length>0?m:null,v);var b=t.getCurrentCellStyle(v[0]);if(b[mxConstants$1.STYLE_SHAPE]!="image"&&b[mxConstants$1.STYLE_SHAPE]!="label"?t.setCellStyles(mxConstants$1.STYLE_SHAPE,"image",v):m.length==0&&t.setCellStyles(mxConstants$1.STYLE_SHAPE,null,v),t.getSelectionCount()==1&&g!=null&&x!=null){var w=v[0],$=t.getModel().getGeometry(w);$!=null&&($=$.clone(),$.width=g,$.height=x,t.getModel().setGeometry(w,$))}}finally{t.getModel().endUpdate()}C!=null&&(t.setSelectionCells(C),t.scrollCellToVisible(C[0]))}}},t.cellEditor.isContentEditing(),!t.cellEditor.isContentEditing())}}).isEnabled=e,s=this.addAction("layers",mxUtils$1.bind(this,function(){this.layersWindow==null?(this.layersWindow=new LayersWindow(a,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",function(){a.fireEvent(new mxEventObject$1("layers"))}),this.layersWindow.window.addListener("hide",function(){a.fireEvent(new mxEventObject$1("layers"))}),this.layersWindow.window.setVisible(!0),a.fireEvent(new mxEventObject$1("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor$1.ctrlKey+"+Shift+L"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.layersWindow!=null&&this.layersWindow.window.isVisible()})),s=this.addAction("formatPanel",mxUtils$1.bind(this,function(){a.toggleFormatPanel()}),null,null,Editor$1.ctrlKey+"+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return a.formatWidth>0})),s=this.addAction("outline",mxUtils$1.bind(this,function(){this.outlineWindow==null?(this.outlineWindow=new OutlineWindow(a,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){a.fireEvent(new mxEventObject$1("outline"))}),this.outlineWindow.window.addListener("hide",function(){a.fireEvent(new mxEventObject$1("outline"))}),this.outlineWindow.window.setVisible(!0),a.fireEvent(new mxEventObject$1("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor$1.ctrlKey+"+Shift+O"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils$1.bind(this,function(){return this.outlineWindow!=null&&this.outlineWindow.window.isVisible()}))};Actions.prototype.addAction=function(a,i,t,e,n){var s;return a.substring(a.length-3)=="..."?(a=a.substring(0,a.length-3),s=mxResources$1.get(a)+"..."):s=mxResources$1.get(a),this.put(a,new Action(s,i,t,e,n))};Actions.prototype.put=function(a,i){return this.actions[a]=i,i};Actions.prototype.get=function(a){return this.actions[a]};class Action extends mxEventSource{constructor(i,t,e,n,s){super(),this.label=i,this.funct=this.createFunction(t),this.enabled=e??!0,this.iconCls=n,this.shortcut=s,this.visible=!0}}Action.prototype.createFunction=function(a){return a};Action.prototype.setEnabled=function(a){this.enabled!=a&&(this.enabled=a,this.fireEvent(new mxEventObject$1("stateChanged")))};Action.prototype.isEnabled=function(){return this.enabled};Action.prototype.setToggleAction=function(a){this.toggleAction=a};Action.prototype.setSelectedCallback=function(a){this.selectedCallback=a};Action.prototype.isSelected=function(){return this.selectedCallback()};class Menus extends mxEventSource{constructor(i){super(),this.editorUi=i,this.menus=new Object,this.init(),mxClient.IS_SVG||(new Image().src=this.checkmarkImage)}}Menus.prototype.defaultFont="Helvetica";Menus.prototype.defaultFontSize="12";Menus.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"];Menus.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"];Menus.prototype.init=function(){var a=this.editorUi.editor.graph,i=mxUtils$1.bind(a,a.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils$1.bind(this,function(t,e){for(var n=mxUtils$1.bind(this,function(l){var r=this.styleChange(t,l,[mxConstants$1.STYLE_FONTFAMILY],[l],null,e,function(){document.execCommand("fontname",!1,l)},function(){a.updateLabelElements(a.getSelectionCells(),function(o){o.removeAttribute("face"),o.style.fontFamily=null,o.nodeName=="PRE"&&a.replaceElement(o,"div")})});r.firstChild.nextSibling.style.fontFamily=l}),s=0;s<this.defaultFonts.length;s++)n(this.defaultFonts[s]);if(t.addSeparator(e),this.customFonts.length>0){for(var s=0;s<this.customFonts.length;s++)n(this.customFonts[s]);t.addSeparator(e),t.addItem(mxResources$1.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),e),t.addSeparator(e)}this.promptChange(t,mxResources$1.get("custom")+"...","",mxConstants$1.DEFAULT_FONTFAMILY,mxConstants$1.STYLE_FONTFAMILY,e,!0,mxUtils$1.bind(this,function(l){mxUtils$1.indexOf(this.customFonts,l)<0&&(this.customFonts.push(l),this.editorUi.fireEvent(new mxEventObject$1("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils$1.bind(this,function(t,e){function n(s,l){return t.addItem(s,null,mxUtils$1.bind(this,function(){a.cellEditor.textarea!=null&&(a.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+l+">"))}),e)}n(mxResources$1.get("normal"),"p"),n("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources$1.get("heading")+" 1</h1>",n("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources$1.get("heading")+" 2</h2>",n("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources$1.get("heading")+" 3</h3>",n("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources$1.get("heading")+" 4</h4>",n("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources$1.get("heading")+" 5</h5>",n("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources$1.get("heading")+" 6</h6>",n("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources$1.get("formatted")+"</pre>",n("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources$1.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils$1.bind(this,function(t,e){for(var n=[6,8,9,10,11,12,14,18,24,36,48,72],s=mxUtils$1.bind(this,function(r){this.styleChange(t,r,[mxConstants$1.STYLE_FONTSIZE],[r],null,e,function(){if(a.cellEditor.textarea!=null){document.execCommand("fontSize",!1,"3");for(var o=a.cellEditor.textarea.getElementsByTagName("font"),h=0;h<o.length;h++)if(o[h].getAttribute("size")=="3"){o[h].removeAttribute("size"),o[h].style.fontSize=r+"px";break}}})}),l=0;l<n.length;l++)s(n[l]);if(t.addSeparator(e),this.customFontSizes.length>0){for(var l=0;l<this.customFontSizes.length;l++)s(this.customFontSizes[l]);t.addSeparator(e),t.addItem(mxResources$1.get("reset"),null,mxUtils$1.bind(this,function(){this.customFontSizes=[]}),e),t.addSeparator(e)}this.promptChange(t,mxResources$1.get("custom")+"...","(pt)","12",mxConstants$1.STYLE_FONTSIZE,e,!0,mxUtils$1.bind(this,function(r){this.customFontSizes.push(r)}))}))),this.put("direction",new Menu(mxUtils$1.bind(this,function(t,e){t.addItem(mxResources$1.get("flipH"),null,function(){a.toggleCellStyles(mxConstants$1.STYLE_FLIPH,!1)},e),t.addItem(mxResources$1.get("flipV"),null,function(){a.toggleCellStyles(mxConstants$1.STYLE_FLIPV,!1)},e),this.addMenuItems(t,["-","rotation"],e)}))),this.put("align",new Menu(mxUtils$1.bind(this,function(t,e){t.addItem(mxResources$1.get("leftAlign"),null,function(){a.alignCells(mxConstants$1.ALIGN_LEFT)},e),t.addItem(mxResources$1.get("center"),null,function(){a.alignCells(mxConstants$1.ALIGN_CENTER)},e),t.addItem(mxResources$1.get("rightAlign"),null,function(){a.alignCells(mxConstants$1.ALIGN_RIGHT)},e),t.addSeparator(e),t.addItem(mxResources$1.get("topAlign"),null,function(){a.alignCells(mxConstants$1.ALIGN_TOP)},e),t.addItem(mxResources$1.get("middle"),null,function(){a.alignCells(mxConstants$1.ALIGN_MIDDLE)},e),t.addItem(mxResources$1.get("bottomAlign"),null,function(){a.alignCells(mxConstants$1.ALIGN_BOTTOM)},e)}))),this.put("distribute",new Menu(mxUtils$1.bind(this,function(t,e){t.addItem(mxResources$1.get("horizontal"),null,function(){a.distributeCells(!0)},e),t.addItem(mxResources$1.get("vertical"),null,function(){a.distributeCells(!1)},e)}))),this.put("layout",new Menu(mxUtils$1.bind(this,function(t,e){var n=mxUtils$1.bind(this,function(s,l){var r=new FilenameDialog(this.editorUi,s,mxResources$1.get("apply"),function(o){l(parseFloat(o))},mxResources$1.get("spacing"));this.editorUi.showDialog(r.container,300,80,!0,!0),r.init()});t.addItem(mxResources$1.get("horizontalFlow"),null,mxUtils$1.bind(this,function(){var s=new mxHierarchicalLayout(a,mxConstants$1.DIRECTION_WEST);this.editorUi.executeLayout(function(){var l=a.getSelectionCells();s.execute(a.getDefaultParent(),l.length==0?null:l)},!0)}),e),t.addItem(mxResources$1.get("verticalFlow"),null,mxUtils$1.bind(this,function(){var s=new mxHierarchicalLayout(a,mxConstants$1.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var l=a.getSelectionCells();s.execute(a.getDefaultParent(),l.length==0?null:l)},!0)}),e),t.addSeparator(e),t.addItem(mxResources$1.get("horizontalTree"),null,mxUtils$1.bind(this,function(){var s=a.getSelectionCell(),l=null;if(s==null||a.getModel().getChildCount(s)==0?a.getModel().getEdgeCount(s)==0&&(l=a.findTreeRoots(a.getDefaultParent())):l=a.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var r=new mxCompactTreeLayout(a,!0);r.edgeRouting=!1,r.levelDistance=30,n(r.levelDistance,mxUtils$1.bind(this,function(o){r.levelDistance=o,this.editorUi.executeLayout(function(){r.execute(a.getDefaultParent(),s)},!0)}))}}),e),t.addItem(mxResources$1.get("verticalTree"),null,mxUtils$1.bind(this,function(){var s=a.getSelectionCell(),l=null;if(s==null||a.getModel().getChildCount(s)==0?a.getModel().getEdgeCount(s)==0&&(l=a.findTreeRoots(a.getDefaultParent())):l=a.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var r=new mxCompactTreeLayout(a,!1);r.edgeRouting=!1,r.levelDistance=30,n(r.levelDistance,mxUtils$1.bind(this,function(o){r.levelDistance=o,this.editorUi.executeLayout(function(){r.execute(a.getDefaultParent(),s)},!0)}))}}),e),t.addItem(mxResources$1.get("radialTree"),null,mxUtils$1.bind(this,function(){var s=a.getSelectionCell(),l=null;if(s==null||a.getModel().getChildCount(s)==0?a.getModel().getEdgeCount(s)==0&&(l=a.findTreeRoots(a.getDefaultParent())):l=a.findTreeRoots(s),l!=null&&l.length>0&&(s=l[0]),s!=null){var r=new mxRadialTreeLayout(a,!1);r.levelDistance=80,r.autoRadius=!0,n(r.levelDistance,mxUtils$1.bind(this,function(o){r.levelDistance=o,this.editorUi.executeLayout(function(){r.execute(a.getDefaultParent(),s),a.isSelectionEmpty()||(s=a.getModel().getParent(s),a.getModel().isVertex(s)&&a.updateGroupBounds([s],a.gridSize*2,!0))},!0)}))}}),e),t.addSeparator(e),t.addItem(mxResources$1.get("organic"),null,mxUtils$1.bind(this,function(){var s=new mxFastOrganicLayout(a);n(s.forceConstant,mxUtils$1.bind(this,function(l){s.forceConstant=l,this.editorUi.executeLayout(function(){var r=a.getSelectionCell();(r==null||a.getModel().getChildCount(r)==0)&&(r=a.getDefaultParent()),s.execute(r),a.getModel().isVertex(r)&&a.updateGroupBounds([r],a.gridSize*2,!0)},!0)}))}),e),t.addItem(mxResources$1.get("circle"),null,mxUtils$1.bind(this,function(){var s=new mxCircleLayout(a);this.editorUi.executeLayout(function(){var l=a.getSelectionCell();(l==null||a.getModel().getChildCount(l)==0)&&(l=a.getDefaultParent()),s.execute(l),a.getModel().isVertex(l)&&a.updateGroupBounds([l],a.gridSize*2,!0)},!0)}),e)}))),this.put("navigation",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["home","-","exitGroup","enterGroup","-","expand","collapse","-","collapsible"],e)}))),this.put("arrange",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["toFront","toBack","-"],e),this.addSubmenu("direction",t,e),this.addMenuItems(t,["turn","-"],e),this.addSubmenu("align",t,e),this.addSubmenu("distribute",t,e),t.addSeparator(e),this.addSubmenu("navigation",t,e),this.addSubmenu("insert",t,e),this.addSubmenu("layout",t,e),this.addMenuItems(t,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],e)}))).isEnabled=i,this.put("insert",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["insertLink","insertImage"],e)}))),this.put("view",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,(this.editorUi.format!=null?["formatPanel"]:[]).concat(["outline","layers","-","pageView","pageScale","-","scrollbars","tooltips","-","grid","guides","-","connectionArrows","connectionPoints","-","resetView","zoomIn","zoomOut"],e))}))),this.put("viewPanels",new Menu(mxUtils$1.bind(this,function(t,e){this.editorUi.format!=null&&this.addMenuItems(t,["formatPanel"],e),this.addMenuItems(t,["outline","layers"],e)}))),this.put("viewZoom",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["resetView","-"],e);for(var n=[.25,.5,.75,1,1.25,1.5,2,3,4],s=0;s<n.length;s++)(function(l){t.addItem(l*100+"%",null,function(){a.zoomTo(l)},e)})(n[s]);this.addMenuItems(t,["-","fitWindow","fitPageWidth","fitPage","fitTwoPages","-","customZoom"],e)}))),this.put("file",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["new","open","-","save","saveAs","-","import","export","-","pageSetup","print"],e)}))),this.put("edit",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-","editData","editTooltip","-","editStyle","-","edit","-","editLink","openLink","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("extras",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils$1.bind(this,function(t,e){this.addMenuItems(t,["help","-","about"])})))};Menus.prototype.put=function(a,i){return this.menus[a]=i,i};Menus.prototype.get=function(a){return this.menus[a]};Menus.prototype.addSubmenu=function(a,i,t,e){var n=this.get(a);if(n!=null){var s=n.isEnabled();if(i.showDisabled||s){var l=i.addItem(e||mxResources$1.get(a),null,null,t,null,s);this.addMenu(a,i,l)}}};Menus.prototype.addMenu=function(a,i,t){var e=this.get(a);e!=null&&(i.showDisabled||e.isEnabled())&&this.get(a).execute(i,t)};Menus.prototype.addInsertTableCellItem=function(a,i){var t=this.editorUi.editor.graph;this.addInsertTableItem(a,mxUtils$1.bind(this,function(e,n,s){var l=mxEvent$1.isControlDown(e)||mxEvent$1.isMetaDown(e)?t.createCrossFunctionalSwimlane(n,s):t.createTable(n,s,null,null,mxEvent$1.isShiftDown(e)?"Table":null),r=mxEvent$1.isAltDown(e)?t.getFreeInsertPoint():t.getCenterInsertPoint(t.getBoundingBoxFromGeometry([l],!0)),o=t.importCells([l],r.x,r.y);o!=null&&o.length>0&&(t.scrollCellToVisible(o[0]),t.setSelectionCells(o))}),i)};Menus.prototype.addInsertTableItem=function(a,i,t){i=i??mxUtils$1.bind(this,function(x,v,C){var E=this.editorUi.editor.graph,b=E.getParentByName(mxEvent$1.getSource(x),"TD");if(b!=null&&E.cellEditor.textarea!=null){E.getParentByName(b,"TR");for(var w=E.cellEditor.textarea.getElementsByTagName("table"),$=[],P=0;P<w.length;P++)$.push(w[P]);E.container.focus(),E.pasteHtmlAtCaret(l(v,C));var M=E.cellEditor.textarea.getElementsByTagName("table");if(M.length==$.length+1){for(var P=M.length-1;P>=0;P--)if(P==0||M[P]!=$[P-1]){E.selectNode(M[P].rows[0].cells[0]);break}}}});var e=this.editorUi.editor.graph,n=null,s=null;function l(x,v){for(var C=["<table>"],E=0;E<x;E++){C.push("<tr>");for(var b=0;b<v;b++)C.push("<td><br></td>");C.push("</tr>")}return C.push("</table>"),C.join("")}var r=a.addItem("",null,null,t,null,null,null,!0),o='<img src="'+mxClient.imageBasePath+'/transparent.gif" width="16" height="16"/>';function h(x,v){var C=document.createElement("table");C.setAttribute("border","1"),C.style.borderCollapse="collapse",C.style.borderStyle="solid",mxClient.IS_QUIRKS||C.setAttribute("cellPadding","8");for(var E=0;E<x;E++)for(var b=C.insertRow(E),w=0;w<v;w++){var $=b.insertCell(-1);mxClient.IS_QUIRKS&&($.innerHTML=o)}return C}function u(x,v,C){for(var E=x.rows.length;E<v;E++)for(var b=x.insertRow(E),w=0;w<x.rows[0].cells.length;w++){var $=b.insertCell(-1);mxClient.IS_QUIRKS&&($.innerHTML=o)}for(var E=0;E<x.rows.length;E++)for(var b=x.rows[E],w=b.cells.length;w<C;w++){var $=b.insertCell(-1);mxClient.IS_QUIRKS&&($.innerHTML=o)}}r.firstChild.innerHTML="";var d=h(5,5);r.firstChild.appendChild(d);var m=document.createElement("div");m.style.padding="4px",m.style.fontSize=Menus.prototype.defaultFontSize+"px",m.innerHTML="1x1",r.firstChild.appendChild(m);function g(x){s=e.getParentByName(mxEvent$1.getSource(x),"TD");var v=!1;if(s!=null){n=e.getParentByName(s,"TR");var C=mxEvent$1.isMouseEvent(x)?2:4;u(d,Math.min(20,n.sectionRowIndex+C),Math.min(20,s.cellIndex+C)),m.innerHTML=s.cellIndex+1+"x"+(n.sectionRowIndex+1);for(var E=0;E<d.rows.length;E++)for(var b=d.rows[E],w=0;w<b.cells.length;w++){var $=b.cells[w];E==n.sectionRowIndex&&w==s.cellIndex&&(v=$.style.backgroundColor=="blue"),E<=n.sectionRowIndex&&w<=s.cellIndex?$.style.backgroundColor="blue":$.style.backgroundColor="transparent"}}return mxEvent$1.consume(x),v}mxEvent$1.addGestureListeners(d,null,null,mxUtils$1.bind(this,function(x){var v=g(x);s!=null&&n!=null&&v&&(i(x,n.sectionRowIndex+1,s.cellIndex+1),window.setTimeout(mxUtils$1.bind(this,function(){this.editorUi.hideCurrentMenu()}),0))})),mxEvent$1.addListener(d,"mouseover",g)};Menus.prototype.edgeStyleChange=function(a,i,t,e,n,s,l){return a.addItem(i,null,mxUtils$1.bind(this,function(){var r=this.editorUi.editor.graph;r.stopEditing(!1),r.getModel().beginUpdate();try{for(var o=r.getSelectionCells(),h=[],u=0;u<o.length;u++){var d=o[u];if(r.getModel().isEdge(d)){if(l){var m=r.getCellGeometry(d);m!=null&&(m=m.clone(),m.points=null,r.getModel().setGeometry(d,m))}for(var g=0;g<t.length;g++)r.setCellStyles(t[g],e[g],[d]);h.push(d)}}this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",t,"values",e,"cells",h))}finally{r.getModel().endUpdate()}}),s,n)};Menus.prototype.styleChange=function(a,i,t,e,n,s,l,r){var o=this.createStyleChangeFunction(t,e);return a.addItem(i,null,mxUtils$1.bind(this,function(){var h=this.editorUi.editor.graph;l!=null&&h.cellEditor.isContentEditing()?l():o(r)}),s,n)};Menus.prototype.createStyleChangeFunction=function(a,i){return mxUtils$1.bind(this,function(t){var e=this.editorUi.editor.graph;e.stopEditing(!1),e.getModel().beginUpdate();try{for(var n=e.getSelectionCells(),s=0;s<a.length;s++)if(e.setCellStyles(a[s],i[s],n),a[s]==mxConstants$1.STYLE_ALIGN&&e.updateLabelElements(n,function(r){r.removeAttribute("align"),r.style.textAlign=null}),a[s]==mxConstants$1.STYLE_FONTFAMILY)for(var l=0;l<n.length;l++)e.model.getChildCount(n[l])==0&&e.autoSizeCell(n[l],!1);t!=null&&t(),this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",a,"values",i,"cells",n))}finally{e.getModel().endUpdate()}})};Menus.prototype.promptChange=function(a,i,t,e,n,s,l,r,o){return a.addItem(i,null,mxUtils$1.bind(this,function(){var h=this.editorUi.editor.graph,u=e,d=h.getView().getState(h.getSelectionCell());d!=null&&(u=d.style[n]||u);var m=new FilenameDialog(this.editorUi,u,mxResources$1.get("apply"),mxUtils$1.bind(this,function(g){if(g!=null&&g.length>0){h.getModel().beginUpdate();try{h.stopEditing(!1),h.setCellStyles(n,g)}finally{h.getModel().endUpdate()}r!=null&&r(g)}}),mxResources$1.get("enterValue")+(t.length>0?" "+t:""));this.editorUi.showDialog(m.container,300,80,!0,!0),m.init()}),s,o,l)};Menus.prototype.pickColor=function(a,i,t){var e=this.editorUi.editor.graph,n=226+(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12))*17;if(i!=null&&e.cellEditor.isContentEditing()){var s=e.cellEditor.saveSelection(),l=new ColorDialog(this.editorUi,t||"000000",mxUtils$1.bind(this,function(h){e.cellEditor.restoreSelection(s),document.execCommand(i,!1,h!=mxConstants$1.NONE?h:"transparent")}),function(){e.cellEditor.restoreSelection(s)});this.editorUi.showDialog(l.container,230,n,!0,!0),l.init()}else{this.colorDialog==null&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=a;var r=e.getView().getState(e.getSelectionCell()),o="none";r!=null&&(o=r.style[a]||o),o=="none"?(o="ffffff",this.colorDialog.picker.fromString("ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(o),this.editorUi.showDialog(this.colorDialog.container,230,n,!0,!0),this.colorDialog.init()}};Menus.prototype.toggleStyle=function(a,i){var t=this.editorUi.editor.graph,e=t.toggleCellStyles(a,i);this.editorUi.fireEvent(new mxEventObject$1("styleChanged","keys",[a],"values",[e],"cells",t.getSelectionCells()))};Menus.prototype.addMenuItem=function(a,i,t,e,n,s){var l=this.editorUi.actions.get(i);if(l!=null&&(a.showDisabled||l.isEnabled())&&l.visible){var r=a.addItem(s||l.label,null,function(){l.funct(e)},t,n,l.isEnabled());return l.toggleAction&&l.isSelected()&&a.addCheckmark(r,Editor.checkmarkImage),this.addShortcut(r,l),r}return null};Menus.prototype.addShortcut=function(a,i){if(i.shortcut!=null){var t=a.firstChild.nextSibling.nextSibling,e=document.createElement("span");e.style.color="gray",mxUtils$1.write(e,i.shortcut),t.appendChild(e)}};Menus.prototype.addMenuItems=function(a,i,t,e,n){for(var s=0;s<i.length;s++)i[s]=="-"?a.addSeparator(t):this.addMenuItem(a,i[s],t,e,n!=null?n[s]:null)};Menus.prototype.createPopupMenu=function(a,i,t){a.smartSeparators=!0,this.addPopupMenuHistoryItems(a,i,t),this.addPopupMenuEditItems(a,i,t),this.addPopupMenuStyleItems(a,i,t),this.addPopupMenuArrangeItems(a,i,t),this.addPopupMenuCellItems(a,i,t),this.addPopupMenuSelectionItems(a,i,t)};Menus.prototype.addPopupMenuHistoryItems=function(a,i,t){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(a,["undo","redo"],null,t)};Menus.prototype.addPopupMenuEditItems=function(a,i,t){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(a,["pasteHere"],null,t):this.addMenuItems(a,["delete","-","cut","copy","-","duplicate"],null,t)};Menus.prototype.addPopupMenuStyleItems=function(a,i,t){this.editorUi.editor.graph.getSelectionCount()==1?this.addMenuItems(a,["-","setAsDefaultStyle"],null,t):this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(a,["-","clearDefaultStyle"],null,t)};Menus.prototype.addPopupMenuArrangeItems=function(a,i,t){var e=this.editorUi.editor.graph;e.isSelectionEmpty()||this.addMenuItems(a,["-","toFront","toBack"],null,t),e.getSelectionCount()>1?this.addMenuItems(a,["-","group"],null,t):e.getSelectionCount()==1&&!e.getModel().isEdge(i)&&!e.isSwimlane(i)&&e.getModel().getChildCount(i)>0&&this.addMenuItems(a,["-","ungroup"],null,t)};Menus.prototype.addPopupMenuCellItems=function(a,i,t){var e=this.editorUi.editor.graph;i=e.getSelectionCell();var n=e.view.getState(i);if(a.addSeparator(),n!=null){var s=!1;if(e.getModel().isEdge(i)&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_EDGE,null)!="entityRelationEdgeStyle"&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_SHAPE,null)!="arrow"){var l=e.selectionCellsHandler.getHandler(i),r=!1;if(l instanceof mxEdgeHandler&&l.bends!=null&&l.bends.length>2){var o=l.getHandleForEvent(e.updateMouseEvent(new mxMouseEvent(t))),h=this.editorUi.actions.get("removeWaypoint");h.handler=l,h.index=o,r=o>0&&o<l.bends.length-1}a.addSeparator(),this.addMenuItem(a,"turn",null,t,null,mxResources$1.get("reverse")),this.addMenuItems(a,[r?"removeWaypoint":"addWaypoint"],null,t);var u=e.getModel().getGeometry(i);s=u!=null&&u.points!=null&&u.points.length>0}e.getSelectionCount()==1&&(s||e.getModel().isVertex(i)&&e.getModel().getEdgeCount(i)>0)&&this.addMenuItems(a,["-","clearWaypoints"],null,t),e.getSelectionCount()==1&&(this.addMenuItems(a,["-","editStyle","editData","editLink"],null,t),e.getModel().isVertex(i)&&mxUtils$1.getValue(n.style,mxConstants$1.STYLE_IMAGE,null)!=null&&(a.addSeparator(),this.addMenuItem(a,"image",null,t).firstChild.nextSibling.innerHTML=mxResources$1.get("editImage")+"..."))}};Menus.prototype.addPopupMenuSelectionItems=function(a,i,t){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(a,["-","selectVertices","selectEdges","selectAll"],null,t)};Menus.prototype.createMenubar=function(a){for(var i=new Menubar(this.editorUi,a),t=this.defaultMenuItems,e=0;e<t.length;e++)mxUtils$1.bind(this,function(n){var s=i.addMenu(mxResources$1.get(t[e]),mxUtils$1.bind(this,function(){n.funct.apply(this,arguments)}));this.menuCreated(n,s)})(this.get(t[e]));return i};Menus.prototype.menuCreated=function(a,i,t){i!=null&&(t=t??"geItem",a.addListener("stateChanged",function(){i.enabled=a.enabled,a.enabled?(i.className=t,document.documentMode==8&&(i.style.color="")):(i.className=t+" mxDisabled",document.documentMode==8&&(i.style.color="#c3c3c3"))}))};function Menubar(a,i){this.editorUi=a,this.container=i}Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()};Menubar.prototype.addMenu=function(a,i,t){var e=document.createElement("a");return e.className="geItem",mxUtils$1.write(e,a),this.addMenuHandler(e,i),t!=null?this.container.insertBefore(e,t):this.container.appendChild(e),e};Menubar.prototype.addMenuHandler=function(a,i){if(i!=null){var t=!0,e=mxUtils$1.bind(this,function(n){if(t&&a.enabled==null||a.enabled){this.editorUi.editor.graph.popupMenuHandler.hideMenu();var s=new mxPopupMenu(i);s.div.className+=" geMenubarMenu",s.smartSeparators=!0,s.showDisabled=!0,s.autoExpand=!0,s.hideMenu=mxUtils$1.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(s,arguments),this.editorUi.resetCurrentMenu(),s.destroy()});var l=mxUtils$1.getOffset(a);s.popup(l.x,l.y+a.offsetHeight,null,n),this.editorUi.setCurrentMenu(s,a)}mxEvent$1.consume(n)});mxEvent$1.addListener(a,"mousemove",mxUtils$1.bind(this,function(n){this.editorUi.currentMenu!=null&&this.editorUi.currentMenuElt!=a&&(this.editorUi.hideCurrentMenu(),e(n))})),mxEvent$1.addListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils$1.bind(this,function(n){t=this.currentElt!=a,n.preventDefault()})),mxEvent$1.addListener(a,"click",mxUtils$1.bind(this,function(n){e(n),t=!0}))}};Menubar.prototype.destroy=function(){};class Menu extends mxEventSource{constructor(i,t){super(),this.funct=i,this.enabled=t??!0}}Menu.prototype.isEnabled=function(){return this.enabled};Menu.prototype.setEnabled=function(a){this.enabled!=a&&(this.enabled=a,this.fireEvent(new mxEventObject$1("stateChanged")))};Menu.prototype.execute=function(a,i){this.funct(a,i)};EditorUi.prototype.createMenus=function(){return new Menus(this)};(function(){class a extends mxSwimlane{constructor(){super()}}a.prototype.getLabelBounds=function(f){var R=this.getTitleSize();return R==0?mxShape.prototype.getLabelBounds.apply(this,arguments):mxSwimlane.prototype.getLabelBounds.apply(this,arguments)},a.prototype.paintVertexShape=function(f,R,U,y,T){var L=this.getTitleSize();L==0?mxRectangleShape.prototype.paintBackground.apply(this,arguments):(mxSwimlane.prototype.paintVertexShape.apply(this,arguments),f.translate(-R,-U)),this.paintForeground(f,R,U,y,T)},a.prototype.paintForeground=function(f,R,U,y,T){if(this.state!=null){var L=this.flipH,O=this.flipV;if(this.direction==mxConstants$1.DIRECTION_NORTH||this.direction==mxConstants$1.DIRECTION_SOUTH){var Q=L;L=O,O=Q}f.rotate(-this.getShapeRotation(),L,O,R+y/2,U+T/2);var it=this.scale;R=this.bounds.x/it,U=this.bounds.y/it,y=this.bounds.width/it,T=this.bounds.height/it,this.paintTableForeground(f,R,U,y,T)}},a.prototype.paintTableForeground=function(f,R,U,y,T){var L=this.state.view.graph,O=L.getActualStartSize(this.state.cell),Q=L.model.getChildCells(this.state.cell,!0);if(Q.length>0){var it=mxUtils$1.getValue(this.state.style,"rowLines","1")!="0",pt=mxUtils$1.getValue(this.state.style,"columnLines","1")!="0";if(it)for(var H=1;H<Q.length;H++){var F=L.getCellGeometry(Q[H]);F!=null&&(f.begin(),f.moveTo(R+O.x,U+F.y),f.lineTo(R+y-O.width,U+F.y),f.end(),f.stroke())}if(pt)for(var B=L.model.getChildCells(Q[0],!0),H=1;H<B.length;H++){var F=L.getCellGeometry(B[H]);F!=null&&(f.begin(),f.moveTo(R+F.x+O.x,U+O.y),f.lineTo(R+F.x+O.x,U+T-O.height),f.end(),f.stroke())}}},mxCellRenderer.registerShape("table",a);class i extends mxCylinder{constructor(){super()}}i.prototype.size=20,i.prototype.darkOpacity=0,i.prototype.darkOpacity2=0,i.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.max(0,Math.min(y,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity)))),Q=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity2",this.darkOpacity2))));f.translate(R,U),f.begin(),f.moveTo(0,0),f.lineTo(y-L,0),f.lineTo(y,L),f.lineTo(y,T),f.lineTo(L,T),f.lineTo(0,T-L),f.lineTo(0,0),f.close(),f.end(),f.fillAndStroke(),this.outline||(f.setShadow(!1),O!=0&&(f.setFillAlpha(Math.abs(O)),f.setFillColor(O<0?"#FFFFFF":"#000000"),f.begin(),f.moveTo(0,0),f.lineTo(y-L,0),f.lineTo(y,L),f.lineTo(L,L),f.close(),f.fill()),Q!=0&&(f.setFillAlpha(Math.abs(Q)),f.setFillColor(Q<0?"#FFFFFF":"#000000"),f.begin(),f.moveTo(0,0),f.lineTo(L,L),f.lineTo(L,T),f.lineTo(0,T-L),f.close(),f.fill()),f.begin(),f.moveTo(L,T),f.lineTo(L,L),f.lineTo(0,0),f.moveTo(L,L),f.lineTo(y,L),f.end(),f.stroke())},i.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale;return new mxRectangle(R,R,0,0)}return null},mxCellRenderer.registerShape("cube",i);var t=Math.tan(mxUtils$1.toRadians(30)),e=(.5-t)/2;class n extends mxActor{constructor(){super()}}n.prototype.size=20,n.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(y,T/t);f.translate((y-L)/2,(T-L)/2+L/4),f.moveTo(0,.25*L),f.lineTo(.5*L,L*e),f.lineTo(L,.25*L),f.lineTo(.5*L,(.5-e)*L),f.lineTo(0,.25*L),f.close(),f.end()},mxCellRenderer.registerShape("isoRectangle",n);class s extends mxCylinder{constructor(){super()}}s.prototype.size=20,s.prototype.redrawPath=function(f,R,U,y,T,L){var O=Math.min(y,T/(.5+t));L?(f.moveTo(0,.25*O),f.lineTo(.5*O,(.5-e)*O),f.lineTo(O,.25*O),f.moveTo(.5*O,(.5-e)*O),f.lineTo(.5*O,(1-e)*O),f.end()):(f.translate((y-O)/2,(T-O)/2),f.moveTo(0,.25*O),f.lineTo(.5*O,O*e),f.lineTo(O,.25*O),f.lineTo(O,.75*O),f.lineTo(.5*O,(1-e)*O),f.lineTo(0,.75*O),f.close(),f.end())},mxCellRenderer.registerShape("isoCube",s);class l extends mxCylinder{constructor(){super()}}l.prototype.redrawPath=function(f,R,U,y,T,L){var O=Math.min(T/2,Math.round(T/8)+this.strokewidth-1);(L&&this.fill!=null||!L&&this.fill==null)&&(f.moveTo(0,O),f.curveTo(0,2*O,y,2*O,y,O),L||(f.stroke(),f.begin()),f.translate(0,O/2),f.moveTo(0,O),f.curveTo(0,2*O,y,2*O,y,O),L||(f.stroke(),f.begin()),f.translate(0,O/2),f.moveTo(0,O),f.curveTo(0,2*O,y,2*O,y,O),L||(f.stroke(),f.begin()),f.translate(0,-O)),L||(f.moveTo(0,O),f.curveTo(0,-O/3,y,-O/3,y,O),f.lineTo(y,T-O),f.curveTo(y,T+O/3,0,T+O/3,0,T-O),f.close())},l.prototype.getLabelMargins=function(f){return new mxRectangle(0,2.5*Math.min(f.height/2,Math.round(f.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",l);class r extends mxCylinder{constructor(){super()}}r.prototype.size=30,r.prototype.darkOpacity=0,r.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.max(0,Math.min(y,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=Math.max(-1,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"darkOpacity",this.darkOpacity))));f.translate(R,U),f.begin(),f.moveTo(0,0),f.lineTo(y-L,0),f.lineTo(y,L),f.lineTo(y,T),f.lineTo(0,T),f.lineTo(0,0),f.close(),f.end(),f.fillAndStroke(),this.outline||(f.setShadow(!1),O!=0&&(f.setFillAlpha(Math.abs(O)),f.setFillColor(O<0?"#FFFFFF":"#000000"),f.begin(),f.moveTo(y-L,0),f.lineTo(y-L,L),f.lineTo(y,L),f.close(),f.fill()),f.begin(),f.moveTo(y-L,0),f.lineTo(y-L,L),f.lineTo(y,L),f.end(),f.stroke())},mxCellRenderer.registerShape("note",r);class o extends r{constructor(){super()}}mxCellRenderer.registerShape("note2",o);class h extends mxShape{constructor(){super()}}h.prototype.isoAngle=15,h.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,O=Math.min(y*Math.tan(L),T*.5);f.translate(R,U),f.begin(),f.moveTo(y*.5,0),f.lineTo(y,O),f.lineTo(y,T-O),f.lineTo(y*.5,T),f.lineTo(0,T-O),f.lineTo(0,O),f.close(),f.fillAndStroke(),f.setShadow(!1),f.begin(),f.moveTo(0,O),f.lineTo(y*.5,2*O),f.lineTo(y,O),f.moveTo(y*.5,2*O),f.lineTo(y*.5,T),f.stroke()},mxCellRenderer.registerShape("isoCube2",h);class u extends mxShape{constructor(){super()}}u.prototype.size=15,u.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.max(0,Math.min(T*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));f.translate(R,U),L==0?(f.rect(0,0,y,T),f.fillAndStroke()):(f.begin(),f.moveTo(0,L),f.arcTo(y*.5,L,0,0,1,y*.5,0),f.arcTo(y*.5,L,0,0,1,y,L),f.lineTo(y,T-L),f.arcTo(y*.5,L,0,0,1,y*.5,T),f.arcTo(y*.5,L,0,0,1,0,T-L),f.close(),f.fillAndStroke(),f.setShadow(!1),f.begin(),f.moveTo(y,L),f.arcTo(y*.5,L,0,0,1,y*.5,2*L),f.arcTo(y*.5,L,0,0,1,0,L),f.stroke())},mxCellRenderer.registerShape("cylinder2",u);class d extends mxCylinder{constructor(R,U,y,T){super(),this.bounds=R,this.fill=U,this.stroke=y,this.strokewidth=T??1}}d.prototype.size=15,d.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.max(0,Math.min(T*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,"lid",!0);f.translate(R,U),L==0?(f.rect(0,0,y,T),f.fillAndStroke()):(f.begin(),O?(f.moveTo(0,L),f.arcTo(y*.5,L,0,0,1,y*.5,0),f.arcTo(y*.5,L,0,0,1,y,L)):(f.moveTo(0,0),f.arcTo(y*.5,L,0,0,0,y*.5,L),f.arcTo(y*.5,L,0,0,0,y,0)),f.lineTo(y,T-L),f.arcTo(y*.5,L,0,0,1,y*.5,T),f.arcTo(y*.5,L,0,0,1,0,T-L),f.close(),f.fillAndStroke(),f.setShadow(!1),O&&(f.begin(),f.moveTo(y,L),f.arcTo(y*.5,L,0,0,1,y*.5,2*L),f.arcTo(y*.5,L,0,0,1,0,L),f.stroke()))},mxCellRenderer.registerShape("cylinder3",d);class m extends mxActor{constructor(){super()}}m.prototype.redrawPath=function(f,R,U,y,T){var L=.5;f.moveTo(0,0),f.quadTo(y/2,T*L,y,0),f.quadTo(y*(1-L),T/2,y,T),f.quadTo(y/2,T*(1-L),0,T),f.quadTo(y*L,T/2,0,0),f.end()},mxCellRenderer.registerShape("switch",m);class g extends mxCylinder{constructor(){super()}}g.prototype.tabWidth=60,g.prototype.tabHeight=20,g.prototype.tabPosition="right",g.prototype.arcSize=.1,g.prototype.paintVertexShape=function(f,R,U,y,T){f.translate(R,U);var L=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),O=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),Q=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition),it=mxUtils$1.getValue(this.style,"rounded",!1),pt=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),H=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));pt||(H=Math.min(y,T)*H),H=Math.min(H,y*.5,(T-O)*.5),L=Math.max(L,H),L=Math.min(y-H,L),it||(H=0),f.begin(),Q=="left"?(f.moveTo(Math.max(H,0),O),f.lineTo(Math.max(H,0),0),f.lineTo(L,0),f.lineTo(L,O)):(f.moveTo(y-L,O),f.lineTo(y-L,0),f.lineTo(y-Math.max(H,0),0),f.lineTo(y-Math.max(H,0),O)),it?(f.moveTo(0,H+O),f.arcTo(H,H,0,0,1,H,O),f.lineTo(y-H,O),f.arcTo(H,H,0,0,1,y,H+O),f.lineTo(y,T-H),f.arcTo(H,H,0,0,1,y-H,T),f.lineTo(H,T),f.arcTo(H,H,0,0,1,0,T-H)):(f.moveTo(0,O),f.lineTo(y,O),f.lineTo(y,T),f.lineTo(0,T)),f.close(),f.fillAndStroke(),f.setShadow(!1);var F=mxUtils$1.getValue(this.style,"folderSymbol",null);F=="triangle"&&(f.begin(),f.moveTo(y-30,O+20),f.lineTo(y-20,O+10),f.lineTo(y-10,O+20),f.close(),f.stroke())},mxCellRenderer.registerShape("folder",g);class x extends mxCylinder{constructor(){super()}}x.prototype.arcSize=.1,x.prototype.paintVertexShape=function(f,R,U,y,T){f.translate(R,U);var L=mxUtils$1.getValue(this.style,"rounded",!1),O=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),Q=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize)),it=mxUtils$1.getValue(this.style,"umlStateConnection",null);O||(Q=Math.min(y,T)*Q),Q=Math.min(Q,y*.5,T*.5),L||(Q=0);var pt=0;it!=null&&(pt=10),f.begin(),f.moveTo(pt,Q),f.arcTo(Q,Q,0,0,1,pt+Q,0),f.lineTo(y-Q,0),f.arcTo(Q,Q,0,0,1,y,Q),f.lineTo(y,T-Q),f.arcTo(Q,Q,0,0,1,y-Q,T),f.lineTo(pt+Q,T),f.arcTo(Q,Q,0,0,1,pt,T-Q),f.close(),f.fillAndStroke(),f.setShadow(!1);var H=mxUtils$1.getValue(this.style,"umlStateSymbol",null);H=="collapseState"&&(f.roundrect(y-40,T-20,10,10,3,3),f.stroke(),f.roundrect(y-20,T-20,10,10,3,3),f.stroke(),f.begin(),f.moveTo(y-30,T-15),f.lineTo(y-20,T-15),f.stroke()),it=="connPointRefEntry"?(f.ellipse(0,T*.5-10,20,20),f.fillAndStroke()):it=="connPointRefExit"&&(f.ellipse(0,T*.5-10,20,20),f.fillAndStroke(),f.begin(),f.moveTo(5,T*.5-5),f.lineTo(15,T*.5+5),f.moveTo(15,T*.5-5),f.lineTo(5,T*.5+5),f.stroke())},mxCellRenderer.registerShape("umlState",x);class v extends mxActor{constructor(){super()}}v.prototype.size=30,v.prototype.isRoundable=function(){return!0},v.prototype.redrawPath=function(f,R,U,y,T){var L=Math.max(0,Math.min(y,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(L,0),new mxPoint(y,0),new mxPoint(y,T),new mxPoint(0,T),new mxPoint(0,L)],this.isRounded,O,!0),f.end()},mxCellRenderer.registerShape("card",v);class C extends mxActor{constructor(){super()}}C.prototype.size=.4,C.prototype.redrawPath=function(f,R,U,y,T){var L=T*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=1.4;f.moveTo(0,L/2),f.quadTo(y/4,L*O,y/2,L/2),f.quadTo(y*3/4,L*(1-O),y,L/2),f.lineTo(y,T-L/2),f.quadTo(y*3/4,T-L*O,y/2,T-L/2),f.quadTo(y/4,T-L*(1-O),0,T-L/2),f.lineTo(0,L/2),f.close(),f.end()},C.prototype.getLabelBounds=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"size",this.size),U=f.width,y=f.height;if(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST){var T=y*R;return new mxRectangle(f.x,f.y+T,U,y-2*T)}else{var L=U*R;return new mxRectangle(f.x+L,f.y,U-2*L,y)}}return f},mxCellRenderer.registerShape("tape",C);class E extends mxActor{constructor(){super()}}E.prototype.size=.3,E.prototype.getLabelMargins=function(f){return mxUtils$1.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*f.height):null},E.prototype.redrawPath=function(f,R,U,y,T){var L=T*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=1.4;f.moveTo(0,0),f.lineTo(y,0),f.lineTo(y,T-L/2),f.quadTo(y*3/4,T-L*O,y/2,T-L/2),f.quadTo(y/4,T-L*(1-O),0,T-L/2),f.lineTo(0,L/2),f.close(),f.end()},mxCellRenderer.registerShape("document",E);var b=mxCylinder.prototype.getCylinderSize;mxCylinder.prototype.getCylinderSize=function(f,R,U,y){var T=mxUtils$1.getValue(this.style,"size");return T!=null?y*Math.max(0,Math.min(1,T)):b.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"size",.15)*2;return new mxRectangle(0,Math.min(this.maxHeight*this.scale,f.height*R),0,0)}return null},d.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"size",15);return mxUtils$1.getValue(this.style,"lid",!0)||(R/=2),new mxRectangle(0,Math.min(f.height*this.scale,R*2*this.scale),0,Math.max(0,R*.3*this.scale))}return null},g.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale;if(mxUtils$1.getValue(this.style,"labelInHeader",!1)){var U=mxUtils$1.getValue(this.style,"tabWidth",15)*this.scale,R=mxUtils$1.getValue(this.style,"tabHeight",15)*this.scale,y=mxUtils$1.getValue(this.style,"rounded",!1),T=mxUtils$1.getValue(this.style,"absoluteArcSize",!1),L=parseFloat(mxUtils$1.getValue(this.style,"arcSize",this.arcSize));return T||(L=Math.min(f.width,f.height)*L),L=Math.min(L,f.width*.5,(f.height-R)*.5),y||(L=0),mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition)=="left"?new mxRectangle(L,0,Math.min(f.width,f.width-U),Math.min(f.height,f.height-R)):new mxRectangle(Math.min(f.width,f.width-U),0,L,Math.min(f.height,f.height-R))}else return new mxRectangle(0,Math.min(f.height,R),0,0)}return null},x.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"umlStateConnection",null);if(R!=null)return new mxRectangle(10*this.scale,0,0,0)}return null},o.prototype.getLabelMargins=function(f){if(mxUtils$1.getValue(this.style,"boundedLbl",!1)){var R=mxUtils$1.getValue(this.style,"size",15);return new mxRectangle(0,Math.min(f.height*this.scale,R*this.scale),0,Math.max(0,R*this.scale))}return null};class w extends mxActor{constructor(){super()}}w.prototype.size=.2,w.prototype.fixedSize=20,w.prototype.isRoundable=function(){return!0},w.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=L?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,T),new mxPoint(O,0),new mxPoint(y,0),new mxPoint(y-O,T)],this.isRounded,Q,!0),f.end()},mxCellRenderer.registerShape("parallelogram",w);class $ extends mxActor{constructor(){super()}}$.prototype.size=.2,$.prototype.fixedSize=20,$.prototype.isRoundable=function(){return!0},$.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=L?Math.max(0,Math.min(y*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,T),new mxPoint(O,0),new mxPoint(y-O,0),new mxPoint(y,T)],this.isRounded,Q,!0)},mxCellRenderer.registerShape("trapezoid",$);class P extends mxActor{constructor(){super()}}P.prototype.size=.5,P.prototype.redrawPath=function(f,R,U,y,T){f.setFillColor(null);var L=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(y,0),new mxPoint(L,0),new mxPoint(L,T/2),new mxPoint(0,T/2),new mxPoint(L,T/2),new mxPoint(L,T),new mxPoint(y,T)],this.isRounded,O,!1),f.end()},mxCellRenderer.registerShape("curlyBracket",P);class M extends mxActor{constructor(){super()}}M.prototype.redrawPath=function(f,R,U,y,T){f.setStrokeWidth(1),f.setFillColor(this.stroke);var L=y/5;f.rect(0,0,L,T),f.fillAndStroke(),f.rect(2*L,0,L,T),f.fillAndStroke(),f.rect(4*L,0,L,T),f.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",M);function D(f,R){this.canvas=f,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=R,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils$1.bind(this,D.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils$1.bind(this,D.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils$1.bind(this,D.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils$1.bind(this,D.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils$1.bind(this,D.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils$1.bind(this,D.prototype.arcTo)}D.prototype.moveTo=function(f,R){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=f,this.lastY=R,this.firstX=f,this.firstY=R},D.prototype.close=function(){this.firstX!=null&&this.firstY!=null&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},D.prototype.quadTo=function(f,R,U,y){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=U,this.lastY=y},D.prototype.curveTo=function(f,R,U,y,T,L){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=T,this.lastY=L},D.prototype.arcTo=function(f,R,U,y,T,L,O){this.originalArcTo.apply(this.canvas,arguments),this.lastX=L,this.lastY=O},D.prototype.lineTo=function(f,R){if(this.lastX!=null&&this.lastY!=null){let xt=function(It){return typeof It=="number"?It?It<0?-1:1:It===It?0:NaN:NaN};var vt=xt,U=Math.abs(f-this.lastX),y=Math.abs(R-this.lastY),T=Math.sqrt(U*U+y*y);if(T<2){this.originalLineTo.apply(this.canvas,arguments),this.lastX=f,this.lastY=R;return}var L=Math.round(T/10),O=this.defaultVariation;L<5&&(L=5,O/=3);for(var Q=xt(f-this.lastX)*U/L,it=xt(R-this.lastY)*y/L,pt=U/T,H=y/T,F=0;F<L;F++){var B=Q*F+this.lastX,st=it*F+this.lastY,ft=(Math.random()-.5)*O;this.originalLineTo.call(this.canvas,B-ft*H,st-ft*pt)}this.originalLineTo.call(this.canvas,f,R),this.lastX=f,this.lastY=R}else this.originalLineTo.apply(this.canvas,arguments),this.lastX=f,this.lastY=R},D.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo},mxShape.prototype.defaultJiggle=1.5;var k=mxShape.prototype.beforePaint;mxShape.prototype.beforePaint=function(f){k.apply(this,arguments),f.handJiggle==null&&(f.handJiggle=this.createHandJiggle(f))};var Z=mxShape.prototype.afterPaint;mxShape.prototype.afterPaint=function(f){Z.apply(this,arguments),f.handJiggle!=null&&(f.handJiggle.destroy(),delete f.handJiggle)},mxShape.prototype.createComicCanvas=function(f){return new D(f,mxUtils$1.getValue(this.style,"jiggle",this.defaultJiggle))},mxShape.prototype.createHandJiggle=function(f){return!this.outline&&this.style!=null&&mxUtils$1.getValue(this.style,"comic","0")!="0"?this.createComicCanvas(f):null},mxRhombus.prototype.defaultJiggle=2;var q=mxRectangleShape.prototype.isHtmlAllowed;mxRectangleShape.prototype.isHtmlAllowed=function(){return!this.outline&&(this.style==null||mxUtils$1.getValue(this.style,"comic","0")=="0"&&mxUtils$1.getValue(this.style,"sketch",urlParams.rough=="1"?"1":"0")=="0")&&q.apply(this,arguments)};var j=mxRectangleShape.prototype.paintBackground;mxRectangleShape.prototype.paintBackground=function(f,R,U,y,T){if(f.handJiggle==null||f.handJiggle.constructor!=D)j.apply(this,arguments);else{var L=!0;if(this.style!=null&&(L=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1"),L||this.fill!=null&&this.fill!=mxConstants$1.NONE||this.stroke!=null&&this.stroke!=mxConstants$1.NONE){if(!L&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(f.pointerEvents=!1),f.begin(),this.isRounded){var O=0;if(mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")O=Math.min(y/2,Math.min(T/2,mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2));else{var Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;O=Math.min(y*Q,T*Q)}f.moveTo(R+O,U),f.lineTo(R+y-O,U),f.quadTo(R+y,U,R+y,U+O),f.lineTo(R+y,U+T-O),f.quadTo(R+y,U+T,R+y-O,U+T),f.lineTo(R+O,U+T),f.quadTo(R,U+T,R,U+T-O),f.lineTo(R,U+O),f.quadTo(R,U,R+O,U)}else f.moveTo(R,U),f.lineTo(R+y,U),f.lineTo(R+y,U+T),f.lineTo(R,U+T),f.lineTo(R,U);f.close(),f.end(),f.fillAndStroke()}}};var X=mxRectangleShape.prototype.paintForeground;mxRectangleShape.prototype.paintForeground=function(f,R,U,y,T){f.handJiggle==null&&X.apply(this,arguments)};class rt extends mxRectangleShape{constructor(){super()}}rt.prototype.size=.1,rt.prototype.fixedSize=!1,rt.prototype.isHtmlAllowed=function(){return!1},rt.prototype.getLabelBounds=function(f){if(mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,!0)==(this.direction==null||this.direction==mxConstants$1.DIRECTION_EAST||this.direction==mxConstants$1.DIRECTION_WEST)){var R=f.width,U=f.height,y=new mxRectangle(f.x,f.y,R,U),T=R*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));if(this.isRounded){var L=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;T=Math.max(T,Math.min(R*L,U*L))}return y.x+=Math.round(T),y.width-=Math.round(2*T),y}return f},rt.prototype.paintForeground=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize",this.fixedSize),O=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));if(L?O=Math.max(0,Math.min(y,O)):O=y*Math.max(0,Math.min(1,O)),this.isRounded){var Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;O=Math.max(O,Math.min(y*Q,T*Q))}O=Math.round(O),f.begin(),f.moveTo(R+O,U),f.lineTo(R+O,U+T),f.moveTo(R+y-O,U),f.lineTo(R+y-O,U+T),f.end(),f.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",rt);class et extends mxRectangleShape{constructor(){super()}}et.prototype.paintBackground=function(f,R,U,y,T){f.setFillColor(mxConstants$1.NONE),f.rect(R,U,y,T),f.fill()},et.prototype.paintForeground=function(f,R,U,y,T){},mxCellRenderer.registerShape("transparent",et);class Y extends mxHexagon{constructor(){super()}}Y.prototype.size=30,Y.prototype.position=.5,Y.prototype.position2=.5,Y.prototype.base=20,Y.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale)},Y.prototype.isRoundable=function(){return!0},Y.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2,O=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position)))),it=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2)))),pt=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"base",this.base))));this.addPoints(f,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,T-O),new mxPoint(Math.min(y,Q+pt),T-O),new mxPoint(it,T),new mxPoint(Math.max(0,Q),T-O),new mxPoint(0,T-O)],this.isRounded,L,!0,[4])},mxCellRenderer.registerShape("callout",Y);class G extends mxActor{constructor(){super()}}G.prototype.size=.2,G.prototype.fixedSize=20,G.prototype.isRoundable=function(){return!0},G.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=L?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,0),new mxPoint(y-O,0),new mxPoint(y,T/2),new mxPoint(y-O,T),new mxPoint(0,T),new mxPoint(O,T/2)],this.isRounded,Q,!0),f.end()},mxCellRenderer.registerShape("step",G);class J extends mxHexagon{constructor(){super()}}J.prototype.size=.25,J.prototype.fixedSize=20,J.prototype.isRoundable=function(){return!0},J.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=L?Math.max(0,Math.min(y*.5,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(O,0),new mxPoint(y-O,0),new mxPoint(y,.5*T),new mxPoint(y-O,T),new mxPoint(O,T),new mxPoint(0,.5*T)],this.isRounded,Q,!0)},mxCellRenderer.registerShape("hexagon",J);class tt extends mxRectangleShape{constructor(){super()}}tt.prototype.isHtmlAllowed=function(){return!1},tt.prototype.paintForeground=function(f,R,U,y,T){var L=Math.min(y/5,T/5)+1;f.begin(),f.moveTo(R+y/2,U+L),f.lineTo(R+y/2,U+T-L),f.moveTo(R+L,U+T/2),f.lineTo(R+y-L,U+T/2),f.end(),f.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",tt);var gt=mxRhombus.prototype.paintVertexShape;mxRhombus.prototype.getLabelBounds=function(f){if(this.style.double==1){var R=(Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(f.x+R,f.y+R,f.width-2*R,f.height-2*R)}return f},mxRhombus.prototype.paintVertexShape=function(f,R,U,y,T){if(gt.apply(this,arguments),!this.outline&&this.style.double==1){var L=Math.max(2,this.strokewidth+1)*2+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);R+=L,U+=L,y-=2*L,T-=2*L,y>0&&T>0&&(f.setShadow(!1),gt.apply(this,[f,R,U,y,T]))}};class dt extends mxRectangleShape{constructor(){super()}}dt.prototype.isHtmlAllowed=function(){return!1},dt.prototype.getLabelBounds=function(f){if(this.style.double==1){var R=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(f.x+R,f.y+R,f.width-2*R,f.height-2*R)}return f},dt.prototype.paintForeground=function(f,R,U,y,T){if(this.style!=null){if(!this.outline&&this.style.double==1){var L=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants$1.STYLE_MARGIN]||0);R+=L,U+=L,y-=2*L,T-=2*L,y>0&&T>0&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)}f.setDashed(!1);var O=0,Q=null;do{if(Q=mxCellRenderer.defaultShapes[this.style["symbol"+O]],Q!=null){var it=this.style["symbol"+O+"Align"],pt=this.style["symbol"+O+"VerticalAlign"],H=this.style["symbol"+O+"Width"],F=this.style["symbol"+O+"Height"],B=this.style["symbol"+O+"Spacing"]||0,st=this.style["symbol"+O+"VSpacing"]||B,ft=this.style["symbol"+O+"ArcSpacing"];if(ft!=null){var vt=this.getArcSize(y+this.strokewidth,T+this.strokewidth)*ft;B+=vt,st+=vt}var xt=R,It=U;it==mxConstants$1.ALIGN_CENTER?xt+=(y-H)/2:it==mxConstants$1.ALIGN_RIGHT?xt+=y-H-B:xt+=B,pt==mxConstants$1.ALIGN_MIDDLE?It+=(T-F)/2:pt==mxConstants$1.ALIGN_BOTTOM?It+=T-F-st:It+=st,f.save();var Pt=new Q;Pt.style=this.style,Q.prototype.paintVertexShape.call(Pt,f,xt,It,H,F),f.restore()}O++}while(Q!=null)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",dt);class K extends mxCylinder{constructor(){super()}}K.prototype.redrawPath=function(f,R,U,y,T,L){L?(f.moveTo(0,0),f.lineTo(y/2,T/2),f.lineTo(y,0),f.end()):(f.moveTo(0,0),f.lineTo(y,0),f.lineTo(y,T),f.lineTo(0,T),f.close())},mxCellRenderer.registerShape("message",K);class nt extends mxShape{constructor(){super()}}nt.prototype.paintBackground=function(f,R,U,y,T){f.translate(R,U),f.ellipse(y/4,0,y/2,T/4),f.fillAndStroke(),f.begin(),f.moveTo(y/2,T/4),f.lineTo(y/2,2*T/3),f.moveTo(y/2,T/3),f.lineTo(0,T/3),f.moveTo(y/2,T/3),f.lineTo(y,T/3),f.moveTo(y/2,2*T/3),f.lineTo(0,T),f.moveTo(y/2,2*T/3),f.lineTo(y,T),f.end(),f.stroke()},mxCellRenderer.registerShape("umlActor",nt);class ht extends mxShape{constructor(){super()}}ht.prototype.getLabelMargins=function(f){return new mxRectangle(f.width/6,0,0,0)},ht.prototype.paintBackground=function(f,R,U,y,T){f.translate(R,U),f.begin(),f.moveTo(0,T/4),f.lineTo(0,T*3/4),f.end(),f.stroke(),f.begin(),f.moveTo(0,T/2),f.lineTo(y/6,T/2),f.end(),f.stroke(),f.ellipse(y/6,0,y*5/6,T),f.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",ht);class bt extends mxEllipse{constructor(){super()}}bt.prototype.paintVertexShape=function(f,R,U,y,T){mxEllipse.prototype.paintVertexShape.apply(this,arguments),f.begin(),f.moveTo(R+y/8,U+T),f.lineTo(R+y*7/8,U+T),f.end(),f.stroke()},mxCellRenderer.registerShape("umlEntity",bt);class $t extends mxShape{constructor(){super()}}$t.prototype.paintVertexShape=function(f,R,U,y,T){f.translate(R,U),f.begin(),f.moveTo(y,0),f.lineTo(0,T),f.moveTo(0,0),f.lineTo(y,T),f.end(),f.stroke()},mxCellRenderer.registerShape("umlDestroy",$t);class Dt extends mxShape{constructor(){super()}}Dt.prototype.getLabelBounds=function(f){return new mxRectangle(f.x,f.y+f.height/8,f.width,f.height*7/8)},Dt.prototype.paintBackground=function(f,R,U,y,T){f.translate(R,U),f.begin(),f.moveTo(y*3/8,T/8*1.1),f.lineTo(y*5/8,0),f.end(),f.stroke(),f.ellipse(0,T/8,y,T*7/8),f.fillAndStroke()},Dt.prototype.paintForeground=function(f,R,U,y,T){f.begin(),f.moveTo(y*3/8,T/8*1.1),f.lineTo(y*5/8,T/4),f.end(),f.stroke()},mxCellRenderer.registerShape("umlControl",Dt);class ct extends mxRectangleShape{constructor(){super()}}ct.prototype.size=40,ct.prototype.isHtmlAllowed=function(){return!1},ct.prototype.getLabelBounds=function(f){var R=Math.max(0,Math.min(f.height,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(f.x,f.y,f.width,R)},ct.prototype.paintBackground=function(f,R,U,y,T){var L=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,"participant");if(O==null||this.state==null)mxRectangleShape.prototype.paintBackground.call(this,f,R,U,y,L);else{var Q=this.state.view.graph.cellRenderer.getShape(O);if(Q!=null&&Q!=ct){var it=new Q;it.apply(this.state),f.save(),it.paintVertexShape(f,R,U,y,L),f.restore()}}L<T&&(f.setDashed(!0),f.begin(),f.moveTo(R+y/2,U+L),f.lineTo(R+y/2,U+T),f.end(),f.stroke())},ct.prototype.paintForeground=function(f,R,U,y,T){var L=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,f,R,U,y,Math.min(T,L))},mxCellRenderer.registerShape("umlLifeline",ct);class Et extends mxShape{constructor(){super()}}Et.prototype.width=60,Et.prototype.height=30,Et.prototype.corner=10,Et.prototype.getLabelMargins=function(f){return new mxRectangle(0,0,f.width-parseFloat(mxUtils$1.getValue(this.style,"width",this.width)*this.scale),f.height-parseFloat(mxUtils$1.getValue(this.style,"height",this.height)*this.scale))},Et.prototype.paintBackground=function(f,R,U,y,T){var L=this.corner,O=Math.min(y,Math.max(L,parseFloat(mxUtils$1.getValue(this.style,"width",this.width)))),Q=Math.min(T,Math.max(L*1.5,parseFloat(mxUtils$1.getValue(this.style,"height",this.height)))),it=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_SWIMLANE_FILLCOLOR,mxConstants$1.NONE);it!=mxConstants$1.NONE&&(f.setFillColor(it),f.rect(R,U,y,T),f.fill()),this.fill!=null&&this.fill!=mxConstants$1.NONE&&this.gradient&&this.gradient!=mxConstants$1.NONE?(this.getGradientBounds(f,R,U,y,T),f.setGradient(this.fill,this.gradient,R,U,y,T,this.gradientDirection)):f.setFillColor(this.fill),f.begin(),f.moveTo(R,U),f.lineTo(R+O,U),f.lineTo(R+O,U+Math.max(0,Q-L*1.5)),f.lineTo(R+Math.max(0,O-L),U+Q),f.lineTo(R,U+Q),f.close(),f.fillAndStroke(),f.begin(),f.moveTo(R+O,U),f.lineTo(R+y,U),f.lineTo(R+y,U+T),f.lineTo(R,U+T),f.lineTo(R,U+Q),f.stroke()},mxCellRenderer.registerShape("umlFrame",Et),mxPerimeter.LifelinePerimeter=function(f,R,U,y){var T=ct.prototype.size;R!=null&&(T=mxUtils$1.getValue(R.style,"size",T)*R.view.scale);var L=parseFloat(R.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*R.view.scale/2-1;return U.x<f.getCenterX()&&(L+=1,L*=-1),new mxPoint(f.getCenterX()+L,Math.min(f.y+f.height,Math.max(f.y+T,U.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(f,R,U,y){return y=!0,mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(f,R,U,y){var T=parseFloat(R.style[mxConstants$1.STYLE_STROKEWIDTH]||1)*R.view.scale/2-1;return R.style.backboneSize!=null&&(T+=parseFloat(R.style.backboneSize)*R.view.scale/2-1),R.style[mxConstants$1.STYLE_DIRECTION]=="south"||R.style[mxConstants$1.STYLE_DIRECTION]=="north"?(U.x<f.getCenterX()&&(T+=1,T*=-1),new mxPoint(f.getCenterX()+T,Math.min(f.y+f.height,Math.max(f.y,U.y)))):(U.y<f.getCenterY()&&(T+=1,T*=-1),new mxPoint(Math.min(f.x+f.width,Math.max(f.x,U.x)),f.getCenterY()+T))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(f,R,U,y){return mxPerimeter.RectanglePerimeter(mxUtils$1.getDirectedBounds(f,new mxRectangle(0,0,0,Math.max(0,Math.min(f.height,parseFloat(mxUtils$1.getValue(R.style,"size",Y.prototype.size))*R.view.scale))),R.style),R,U,y)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(f,R,U,y){var T=mxUtils$1.getValue(R.style,"fixedSize","0")!="0",L=T?w.prototype.fixedSize:w.prototype.size;R!=null&&(L=mxUtils$1.getValue(R.style,"size",L)),T&&(L*=R.view.scale);var O=f.x,Q=f.y,it=f.width,pt=f.height,H=R!=null?mxUtils$1.getValue(R.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,F=H==mxConstants$1.DIRECTION_NORTH||H==mxConstants$1.DIRECTION_SOUTH,B;if(F){var st=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));B=[new mxPoint(O,Q),new mxPoint(O+it,Q+st),new mxPoint(O+it,Q+pt),new mxPoint(O,Q+pt-st),new mxPoint(O,Q)]}else{var ft=T?Math.max(0,Math.min(it*.5,L)):it*Math.max(0,Math.min(1,L));B=[new mxPoint(O+ft,Q),new mxPoint(O+it,Q),new mxPoint(O+it-ft,Q+pt),new mxPoint(O,Q+pt),new mxPoint(O+ft,Q)]}var vt=f.getCenterX(),xt=f.getCenterY(),It=new mxPoint(vt,xt);return y&&(U.x<O||U.x>O+it?It.y=U.y:It.x=U.x),mxUtils$1.getPerimeterPoint(B,It,U)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(f,R,U,y){var T=mxUtils$1.getValue(R.style,"fixedSize","0")!="0",L=T?$.prototype.fixedSize:$.prototype.size;R!=null&&(L=mxUtils$1.getValue(R.style,"size",L)),T&&(L*=R.view.scale);var O=f.x,Q=f.y,it=f.width,pt=f.height,H=R!=null?mxUtils$1.getValue(R.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,F=[];if(H==mxConstants$1.DIRECTION_EAST){var B=T?Math.max(0,Math.min(it*.5,L)):it*Math.max(0,Math.min(1,L));F=[new mxPoint(O+B,Q),new mxPoint(O+it-B,Q),new mxPoint(O+it,Q+pt),new mxPoint(O,Q+pt),new mxPoint(O+B,Q)]}else if(H==mxConstants$1.DIRECTION_WEST){var B=T?Math.max(0,Math.min(it,L)):it*Math.max(0,Math.min(1,L));F=[new mxPoint(O,Q),new mxPoint(O+it,Q),new mxPoint(O+it-B,Q+pt),new mxPoint(O+B,Q+pt),new mxPoint(O,Q)]}else if(H==mxConstants$1.DIRECTION_NORTH){var st=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));F=[new mxPoint(O,Q+st),new mxPoint(O+it,Q),new mxPoint(O+it,Q+pt),new mxPoint(O,Q+pt-st),new mxPoint(O,Q+st)]}else{var st=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));F=[new mxPoint(O,Q),new mxPoint(O+it,Q+st),new mxPoint(O+it,Q+pt-st),new mxPoint(O,Q+pt),new mxPoint(O,Q)]}var ft=f.getCenterX(),vt=f.getCenterY(),xt=new mxPoint(ft,vt);return y&&(U.x<O||U.x>O+it?xt.y=U.y:xt.x=U.x),mxUtils$1.getPerimeterPoint(F,xt,U)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(f,R,U,y){var T=mxUtils$1.getValue(R.style,"fixedSize","0")!="0",L=T?G.prototype.fixedSize:G.prototype.size;R!=null&&(L=mxUtils$1.getValue(R.style,"size",L)),T&&(L*=R.view.scale);var O=f.x,Q=f.y,it=f.width,pt=f.height,H=f.getCenterX(),F=f.getCenterY(),B=R!=null?mxUtils$1.getValue(R.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,st;if(B==mxConstants$1.DIRECTION_EAST){var ft=T?Math.max(0,Math.min(it,L)):it*Math.max(0,Math.min(1,L));st=[new mxPoint(O,Q),new mxPoint(O+it-ft,Q),new mxPoint(O+it,F),new mxPoint(O+it-ft,Q+pt),new mxPoint(O,Q+pt),new mxPoint(O+ft,F),new mxPoint(O,Q)]}else if(B==mxConstants$1.DIRECTION_WEST){var ft=T?Math.max(0,Math.min(it,L)):it*Math.max(0,Math.min(1,L));st=[new mxPoint(O+ft,Q),new mxPoint(O+it,Q),new mxPoint(O+it-ft,F),new mxPoint(O+it,Q+pt),new mxPoint(O+ft,Q+pt),new mxPoint(O,F),new mxPoint(O+ft,Q)]}else if(B==mxConstants$1.DIRECTION_NORTH){var vt=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));st=[new mxPoint(O,Q+vt),new mxPoint(H,Q),new mxPoint(O+it,Q+vt),new mxPoint(O+it,Q+pt),new mxPoint(H,Q+pt-vt),new mxPoint(O,Q+pt),new mxPoint(O,Q+vt)]}else{var vt=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));st=[new mxPoint(O,Q),new mxPoint(H,Q+vt),new mxPoint(O+it,Q),new mxPoint(O+it,Q+pt-vt),new mxPoint(H,Q+pt),new mxPoint(O,Q+pt-vt),new mxPoint(O,Q)]}var xt=new mxPoint(H,F);return y&&(U.x<O||U.x>O+it?xt.y=U.y:xt.x=U.x),mxUtils$1.getPerimeterPoint(st,xt,U)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(f,R,U,y){var T=mxUtils$1.getValue(R.style,"fixedSize","0")!="0",L=T?J.prototype.fixedSize:J.prototype.size;R!=null&&(L=mxUtils$1.getValue(R.style,"size",L)),T&&(L*=R.view.scale);var O=f.x,Q=f.y,it=f.width,pt=f.height,H=f.getCenterX(),F=f.getCenterY(),B=R!=null?mxUtils$1.getValue(R.style,mxConstants$1.STYLE_DIRECTION,mxConstants$1.DIRECTION_EAST):mxConstants$1.DIRECTION_EAST,st=B==mxConstants$1.DIRECTION_NORTH||B==mxConstants$1.DIRECTION_SOUTH,ft;if(st){var vt=T?Math.max(0,Math.min(pt,L)):pt*Math.max(0,Math.min(1,L));ft=[new mxPoint(H,Q),new mxPoint(O+it,Q+vt),new mxPoint(O+it,Q+pt-vt),new mxPoint(H,Q+pt),new mxPoint(O,Q+pt-vt),new mxPoint(O,Q+vt),new mxPoint(H,Q)]}else{var xt=T?Math.max(0,Math.min(it,L)):it*Math.max(0,Math.min(1,L));ft=[new mxPoint(O+xt,Q),new mxPoint(O+it-xt,Q),new mxPoint(O+it,F),new mxPoint(O+it-xt,Q+pt),new mxPoint(O+xt,Q+pt),new mxPoint(O,F),new mxPoint(O+xt,Q)]}var It=new mxPoint(H,F);return y&&(U.x<O||U.x>O+it?It.y=U.y:It.x=U.x),mxUtils$1.getPerimeterPoint(ft,It,U)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2);class Ht extends mxShape{constructor(){super()}}Ht.prototype.size=10,Ht.prototype.paintBackground=function(f,R,U,y,T){var L=parseFloat(mxUtils$1.getValue(this.style,"size",this.size));f.translate(R,U),f.ellipse((y-L)/2,0,L,L),f.fillAndStroke(),f.begin(),f.moveTo(y/2,L),f.lineTo(y/2,T),f.end(),f.stroke()},mxCellRenderer.registerShape("lollipop",Ht);class Ot extends mxShape{constructor(){super()}}Ot.prototype.size=10,Ot.prototype.inset=2,Ot.prototype.paintBackground=function(f,R,U,y,T){var L=parseFloat(mxUtils$1.getValue(this.style,"size",this.size)),O=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;f.translate(R,U),f.begin(),f.moveTo(y/2,L+O),f.lineTo(y/2,T),f.end(),f.stroke(),f.begin(),f.moveTo((y-L)/2-O,L/2),f.quadTo((y-L)/2-O,L+O,y/2,L+O),f.quadTo((y+L)/2+O,L+O,(y+L)/2+O,L/2),f.end(),f.stroke()},mxCellRenderer.registerShape("requires",Ot);class Nt extends mxShape{constructor(){super()}}Nt.prototype.paintBackground=function(f,R,U,y,T){f.translate(R,U),f.begin(),f.moveTo(0,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,0,T),f.end(),f.stroke()},mxCellRenderer.registerShape("requiredInterface",Nt);class lt extends mxShape{constructor(){super()}}lt.prototype.inset=2,lt.prototype.paintBackground=function(f,R,U,y,T){var L=parseFloat(mxUtils$1.getValue(this.style,"inset",this.inset))+this.strokewidth;f.translate(R,U),f.ellipse(0,L,y-2*L,T-2*L),f.fillAndStroke(),f.begin(),f.moveTo(y/2,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,y/2,T),f.end(),f.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",lt);class yt extends mxCylinder{constructor(){super()}}yt.prototype.jettyWidth=20,yt.prototype.jettyHeight=10,yt.prototype.redrawPath=function(f,R,U,y,T,L){var O=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),Q=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),it=O/2,pt=it+O/2,H=Math.min(Q,T-Q),F=Math.min(H+2*Q,T-Q);L?(f.moveTo(it,H),f.lineTo(pt,H),f.lineTo(pt,H+Q),f.lineTo(it,H+Q),f.moveTo(it,F),f.lineTo(pt,F),f.lineTo(pt,F+Q),f.lineTo(it,F+Q),f.end()):(f.moveTo(it,0),f.lineTo(y,0),f.lineTo(y,T),f.lineTo(it,T),f.lineTo(it,F+Q),f.lineTo(0,F+Q),f.lineTo(0,F),f.lineTo(it,F),f.lineTo(it,H+Q),f.lineTo(0,H+Q),f.lineTo(0,H),f.lineTo(it,H),f.close(),f.end())},mxCellRenderer.registerShape("module",yt);class _t extends mxCylinder{constructor(){super()}}_t.prototype.jettyWidth=32,_t.prototype.jettyHeight=12,_t.prototype.redrawPath=function(f,R,U,y,T,L){var O=parseFloat(mxUtils$1.getValue(this.style,"jettyWidth",this.jettyWidth)),Q=parseFloat(mxUtils$1.getValue(this.style,"jettyHeight",this.jettyHeight)),it=O/2,pt=it+O/2,H=.3*T-Q/2,F=.7*T-Q/2;L?(f.moveTo(it,H),f.lineTo(pt,H),f.lineTo(pt,H+Q),f.lineTo(it,H+Q),f.moveTo(it,F),f.lineTo(pt,F),f.lineTo(pt,F+Q),f.lineTo(it,F+Q),f.end()):(f.moveTo(it,0),f.lineTo(y,0),f.lineTo(y,T),f.lineTo(it,T),f.lineTo(it,F+Q),f.lineTo(0,F+Q),f.lineTo(0,F),f.lineTo(it,F),f.lineTo(it,H+Q),f.lineTo(0,H+Q),f.lineTo(0,H),f.lineTo(it,H),f.close(),f.end())},mxCellRenderer.registerShape("component",_t);class Rt extends mxRectangleShape{constructor(){super()}}Rt.prototype.paintForeground=function(f,R,U,y,T){var L=y/2,O=T/2,Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;f.begin(),this.addPoints(f,[new mxPoint(R+L,U),new mxPoint(R+y,U+O),new mxPoint(R+L,U+T),new mxPoint(R,U+O)],this.isRounded,Q,!0),f.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",Rt);class Yt extends mxDoubleEllipse{constructor(){super()}}Yt.prototype.outerStroke=!0,Yt.prototype.paintVertexShape=function(f,R,U,y,T){var L=Math.min(4,Math.min(y/5,T/5));y>0&&T>0&&(f.ellipse(R+L,U+L,y-2*L,T-2*L),f.fillAndStroke()),f.setShadow(!1),this.outerStroke&&(f.ellipse(R,U,y,T),f.stroke())},mxCellRenderer.registerShape("endState",Yt);class Zt extends Yt{constructor(){super()}}Zt.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",Zt);class Qt extends mxArrowConnector{constructor(){super()}}Qt.prototype.defaultWidth=4,Qt.prototype.isOpenEnded=function(){return!0},Qt.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},Qt.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",Qt);class Wt extends mxArrowConnector{constructor(){super(),this.spacing=0}}Wt.prototype.defaultWidth=10,Wt.prototype.defaultArrowWidth=20,Wt.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"startWidth",this.defaultArrowWidth)},Wt.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils$1.getNumber(this.style,"endWidth",this.defaultArrowWidth)},Wt.prototype.getEdgeWidth=function(){return mxUtils$1.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",Wt);class Bt extends mxActor{constructor(){super()}}Bt.prototype.size=30,Bt.prototype.isRoundable=function(){return!0},Bt.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,T),new mxPoint(0,L),new mxPoint(y,0),new mxPoint(y,T)],this.isRounded,O,!0),f.end()},mxCellRenderer.registerShape("manualInput",Bt);class S extends mxRectangleShape{constructor(){super()}}S.prototype.dx=20,S.prototype.dy=20,S.prototype.isHtmlAllowed=function(){return!1},S.prototype.paintForeground=function(f,R,U,y,T){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var L=0;if(this.isRounded){var O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)/100;L=Math.max(L,Math.min(y*O,T*O))}var Q=Math.max(L,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),it=Math.max(L,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));f.begin(),f.moveTo(R,U+it),f.lineTo(R+y,U+it),f.end(),f.stroke(),f.begin(),f.moveTo(R+Q,U),f.lineTo(R+Q,U+T),f.end(),f.stroke()},mxCellRenderer.registerShape("internalStorage",S);class A extends mxActor{constructor(){super()}}A.prototype.dx=20,A.prototype.dy=20,A.prototype.redrawPath=function(f,R,U,y,T){var L=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),O=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(y/2,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,O),new mxPoint(L,O),new mxPoint(L,T),new mxPoint(0,T)],this.isRounded,Q,!0),f.end()},mxCellRenderer.registerShape("corner",A);class I extends mxActor{constructor(){super()}}I.prototype.redrawPath=function(f,R,U,y,T){f.moveTo(0,0),f.lineTo(0,T),f.end(),f.moveTo(y,0),f.lineTo(y,T),f.end(),f.moveTo(0,T/2),f.lineTo(y,T/2),f.end()},mxCellRenderer.registerShape("crossbar",I);class N extends mxActor{constructor(){super()}}N.prototype.dx=20,N.prototype.dy=20,N.prototype.redrawPath=function(f,R,U,y,T){var L=Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),O=Math.max(0,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));Math.min(y/2,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));var Q=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,O),new mxPoint((y+L)/2,O),new mxPoint((y+L)/2,T),new mxPoint((y-L)/2,T),new mxPoint((y-L)/2,O),new mxPoint(0,O)],this.isRounded,Q,!0),f.end()},mxCellRenderer.registerShape("tee",N);class _ extends mxActor{constructor(){super()}}_.prototype.arrowWidth=.3,_.prototype.arrowSize=.2,_.prototype.redrawPath=function(f,R,U,y,T){var L=T*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),O=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),Q=(T-L)/2,it=Q+L,pt=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,Q),new mxPoint(y-O,Q),new mxPoint(y-O,0),new mxPoint(y,T/2),new mxPoint(y-O,T),new mxPoint(y-O,it),new mxPoint(0,it)],this.isRounded,pt,!0),f.end()},mxCellRenderer.registerShape("singleArrow",_);class V extends mxActor{constructor(){super()}}V.prototype.redrawPath=function(f,R,U,y,T){var L=T*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",_.prototype.arrowWidth)))),O=y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",_.prototype.arrowSize)))),Q=(T-L)/2,it=Q+L,pt=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,T/2),new mxPoint(O,0),new mxPoint(O,Q),new mxPoint(y-O,Q),new mxPoint(y-O,0),new mxPoint(y,T/2),new mxPoint(y-O,T),new mxPoint(y-O,it),new mxPoint(O,it),new mxPoint(O,T)],this.isRounded,pt,!0),f.end()},mxCellRenderer.registerShape("doubleArrow",V);class W extends mxActor{constructor(){super()}}W.prototype.size=.1,W.prototype.fixedSize=20,W.prototype.redrawPath=function(f,R,U,y,T){var L=mxUtils$1.getValue(this.style,"fixedSize","0")!="0",O=L?Math.max(0,Math.min(y,parseFloat(mxUtils$1.getValue(this.style,"size",this.fixedSize)))):y*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));f.moveTo(O,0),f.lineTo(y,0),f.quadTo(y-O*2,T/2,y,T),f.lineTo(O,T),f.quadTo(O-O*2,T/2,O,0),f.close(),f.end()},mxCellRenderer.registerShape("dataStorage",W);class ot extends mxActor{constructor(){super()}}ot.prototype.redrawPath=function(f,R,U,y,T){f.moveTo(0,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,0,T),f.close(),f.end()},mxCellRenderer.registerShape("or",ot);class at extends mxActor{constructor(){super()}}at.prototype.redrawPath=function(f,R,U,y,T){f.moveTo(0,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,0,T),f.quadTo(y/2,T/2,0,0),f.close(),f.end()},mxCellRenderer.registerShape("xor",at);class mt extends mxActor{constructor(){super()}}mt.prototype.size=20,mt.prototype.isRoundable=function(){return!0},mt.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(y/2,Math.min(T,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(L,0),new mxPoint(y-L,0),new mxPoint(y,L*.8),new mxPoint(y,T),new mxPoint(0,T),new mxPoint(0,L*.8)],this.isRounded,O,!0),f.end()},mxCellRenderer.registerShape("loopLimit",mt);class Lt extends mxActor{constructor(){super()}}Lt.prototype.size=3/8,Lt.prototype.isRoundable=function(){return!0},Lt.prototype.redrawPath=function(f,R,U,y,T){var L=T*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;this.addPoints(f,[new mxPoint(0,0),new mxPoint(y,0),new mxPoint(y,T-L),new mxPoint(y/2,T),new mxPoint(0,T-L)],this.isRounded,O,!0),f.end()},mxCellRenderer.registerShape("offPageConnector",Lt);class Ct extends mxEllipse{constructor(){super()}}Ct.prototype.paintVertexShape=function(f,R,U,y,T){mxEllipse.prototype.paintVertexShape.apply(this,arguments),f.begin(),f.moveTo(R+y/2,U+T),f.lineTo(R+y,U+T),f.end(),f.stroke()},mxCellRenderer.registerShape("tapeData",Ct);class Ut extends mxEllipse{constructor(){super()}}Ut.prototype.paintVertexShape=function(f,R,U,y,T){mxEllipse.prototype.paintVertexShape.apply(this,arguments),f.setShadow(!1),f.begin(),f.moveTo(R,U+T/2),f.lineTo(R+y,U+T/2),f.end(),f.stroke(),f.begin(),f.moveTo(R+y/2,U),f.lineTo(R+y/2,U+T),f.end(),f.stroke()},mxCellRenderer.registerShape("orEllipse",Ut);class Mt extends mxEllipse{constructor(){super()}}Mt.prototype.paintVertexShape=function(f,R,U,y,T){mxEllipse.prototype.paintVertexShape.apply(this,arguments);var L=.145;f.setShadow(!1),f.begin(),f.moveTo(R+y*L,U+T*L),f.lineTo(R+y*(1-L),U+T*(1-L)),f.end(),f.stroke(),f.begin(),f.moveTo(R+y*(1-L),U+T*L),f.lineTo(R+y*L,U+T*(1-L)),f.end(),f.stroke()},mxCellRenderer.registerShape("sumEllipse",Mt);class Vt extends mxRhombus{constructor(){super()}}Vt.prototype.paintVertexShape=function(f,R,U,y,T){mxRhombus.prototype.paintVertexShape.apply(this,arguments),f.setShadow(!1),f.begin(),f.moveTo(R,U+T/2),f.lineTo(R+y,U+T/2),f.end(),f.stroke()},mxCellRenderer.registerShape("sortShape",Vt);class Kt extends mxEllipse{constructor(){super()}}Kt.prototype.paintVertexShape=function(f,R,U,y,T){f.begin(),f.moveTo(R,U),f.lineTo(R+y,U),f.lineTo(R+y/2,U+T/2),f.close(),f.fillAndStroke(),f.begin(),f.moveTo(R,U+T),f.lineTo(R+y,U+T),f.lineTo(R+y/2,U+T/2),f.close(),f.fillAndStroke()},mxCellRenderer.registerShape("collate",Kt);class Jt extends mxEllipse{constructor(){super()}}Jt.prototype.paintVertexShape=function(f,R,U,y,T){var L=10,O=U+T-L/2;f.begin(),f.moveTo(R,U),f.lineTo(R,U+T),f.moveTo(R,O),f.lineTo(R+L,O-L/2),f.moveTo(R,O),f.lineTo(R+L,O+L/2),f.moveTo(R,O),f.lineTo(R+y,O),f.moveTo(R+y,U),f.lineTo(R+y,U+T),f.moveTo(R+y,O),f.lineTo(R+y-L,O-L/2),f.moveTo(R+y,O),f.lineTo(R+y-L,O+L/2),f.end(),f.stroke()},mxCellRenderer.registerShape("dimension",Jt);class re extends mxEllipse{constructor(){super()}}re.prototype.paintVertexShape=function(f,R,U,y,T){if(this.outline||f.setStrokeColor(null),this.style!=null){var L=f.pointerEvents,O=mxUtils$1.getValue(this.style,mxConstants$1.STYLE_POINTER_EVENTS,"1")=="1";!O&&(this.fill==null||this.fill==mxConstants$1.NONE)&&(f.pointerEvents=!1),f.rect(R,U,y,T),f.fill(),f.pointerEvents=L,f.setStrokeColor(this.stroke),f.begin(),f.moveTo(R,U),this.outline||mxUtils$1.getValue(this.style,"top","1")=="1"?f.lineTo(R+y,U):f.moveTo(R+y,U),this.outline||mxUtils$1.getValue(this.style,"right","1")=="1"?f.lineTo(R+y,U+T):f.moveTo(R+y,U+T),this.outline||mxUtils$1.getValue(this.style,"bottom","1")=="1"?f.lineTo(R,U+T):f.moveTo(R,U+T),(this.outline||mxUtils$1.getValue(this.style,"left","1")=="1")&&f.lineTo(R,U),f.end(),f.stroke()}},mxCellRenderer.registerShape("partialRectangle",re);class jt extends mxEllipse{constructor(){super()}}jt.prototype.paintVertexShape=function(f,R,U,y,T){mxEllipse.prototype.paintVertexShape.apply(this,arguments),f.setShadow(!1),f.begin(),mxUtils$1.getValue(this.style,"line")=="vertical"?(f.moveTo(R+y/2,U),f.lineTo(R+y/2,U+T)):(f.moveTo(R,U+T/2),f.lineTo(R+y,U+T/2)),f.end(),f.stroke()},mxCellRenderer.registerShape("lineEllipse",jt);class ee extends mxActor{constructor(){super()}}ee.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(y,T/2);f.moveTo(0,0),f.lineTo(y-L,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,y-L,T),f.lineTo(0,T),f.close(),f.end()},mxCellRenderer.registerShape("delay",ee);class he extends mxActor{constructor(){super()}}he.prototype.size=.2,he.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(T,y),O=Math.max(0,Math.min(L,L*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),Q=(T-O)/2,it=Q+O,pt=(y-O)/2,H=pt+O;f.moveTo(0,Q),f.lineTo(pt,Q),f.lineTo(pt,0),f.lineTo(H,0),f.lineTo(H,Q),f.lineTo(y,Q),f.lineTo(y,it),f.lineTo(H,it),f.lineTo(H,T),f.lineTo(pt,T),f.lineTo(pt,it),f.lineTo(0,it),f.close(),f.end()},mxCellRenderer.registerShape("cross",he);class ae extends mxActor{constructor(){super()}}ae.prototype.size=.25,ae.prototype.redrawPath=function(f,R,U,y,T){var L=Math.min(y,T/2),O=Math.min(y-L,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*y);f.moveTo(0,T/2),f.lineTo(O,0),f.lineTo(y-L,0),f.quadTo(y,0,y,T/2),f.quadTo(y,T,y-L,T),f.lineTo(O,T),f.close(),f.end()},mxCellRenderer.registerShape("display",ae);class Xt extends mxConnector{constructor(){super()}}Xt.prototype.origPaintEdgeShape=Xt.prototype.paintEdgeShape,Xt.prototype.paintEdgeShape=function(f,R,U){for(var y=[],T=0;T<R.length;T++)y.push(mxUtils$1.clone(R[T]));var L=f.state.dashed,O=f.state.fixDash;if(Xt.prototype.origPaintEdgeShape.apply(this,[f,y,U]),f.state.strokeWidth>=3){var Q=mxUtils$1.getValue(this.style,"fillColor",null);Q!=null&&(f.setStrokeColor(Q),f.setStrokeWidth(f.state.strokeWidth-2),f.setDashed(L,O),Xt.prototype.origPaintEdgeShape.apply(this,[f,R,U]))}},mxCellRenderer.registerShape("filledEdge",Xt),typeof StyleFormatPanel<"u"&&function(){var f=StyleFormatPanel.prototype.getCustomColors;StyleFormatPanel.prototype.getCustomColors=function(){var R=this.format.getSelectionState(),U=f.apply(this,arguments);return R.style.shape=="umlFrame"&&U.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),U}}(),mxMarker.addMarker("dash",function(f,R,U,y,T,L,O,Q,it,pt){var H=T*(O+it+1),F=L*(O+it+1);return function(){f.begin(),f.moveTo(y.x-H/2-F/2,y.y-F/2+H/2),f.lineTo(y.x+F/2-3*H/2,y.y-3*F/2-H/2),f.stroke()}}),mxMarker.addMarker("box",function(f,R,U,y,T,L,O,Q,it,pt){var H=T*(O+it+1),F=L*(O+it+1),B=y.x+H/2,st=y.y+F/2;return y.x-=H,y.y-=F,function(){f.begin(),f.moveTo(B-H/2-F/2,st-F/2+H/2),f.lineTo(B-H/2+F/2,st-F/2-H/2),f.lineTo(B+F/2-3*H/2,st-3*F/2-H/2),f.lineTo(B-F/2-3*H/2,st-3*F/2+H/2),f.close(),pt?f.fillAndStroke():f.stroke()}}),mxMarker.addMarker("cross",function(f,R,U,y,T,L,O,Q,it,pt){var H=T*(O+it+1),F=L*(O+it+1);return function(){f.begin(),f.moveTo(y.x-H/2-F/2,y.y-F/2+H/2),f.lineTo(y.x+F/2-3*H/2,y.y-3*F/2-H/2),f.moveTo(y.x-H/2+F/2,y.y-F/2-H/2),f.lineTo(y.x-F/2-3*H/2,y.y-3*F/2+H/2),f.stroke()}});function ge(f,R,U,y,T,L,H,Q,it,pt){var H=H+it,F=y.clone();return y.x-=T*(2*H+it),y.y-=L*(2*H+it),T=T*(H+it),L=L*(H+it),function(){f.ellipse(F.x-T-H,F.y-L-H,2*H,2*H),pt?f.fillAndStroke():f.stroke()}}mxMarker.addMarker("circle",ge),mxMarker.addMarker("circlePlus",function(f,R,U,y,T,L,O,Q,it,pt){var H=y.clone(),F=ge.apply(this,arguments),B=T*(O+2*it),st=L*(O+2*it);return function(){F.apply(this,arguments),f.begin(),f.moveTo(H.x-T*it,H.y-L*it),f.lineTo(H.x-2*B+T*it,H.y-2*st+L*it),f.moveTo(H.x-B-st+L*it,H.y-st+B-T*it),f.lineTo(H.x+st-B-L*it,H.y-st-B+T*it),f.stroke()}}),mxMarker.addMarker("halfCircle",function(f,R,U,y,T,L,O,Q,it,pt){var H=T*(O+it+1),F=L*(O+it+1),B=y.clone();return y.x-=H,y.y-=F,function(){f.begin(),f.moveTo(B.x-F,B.y+H),f.quadTo(y.x-F,y.y+H,y.x,y.y),f.quadTo(y.x+F,y.y-H,B.x+F,B.y-H),f.stroke()}}),mxMarker.addMarker("async",function(f,R,U,y,T,L,O,Q,it,pt){var H=T*it*1.118,F=L*it*1.118;T=T*(O+it),L=L*(O+it);var B=y.clone();B.x-=H,B.y-=F;var st=1;return y.x+=-T*st-H,y.y+=-L*st-F,function(){f.begin(),f.moveTo(B.x,B.y),Q?f.lineTo(B.x-T-L/2,B.y-L+T/2):f.lineTo(B.x+L/2-T,B.y-L-T/2),f.lineTo(B.x-T,B.y-L),f.close(),pt?f.fillAndStroke():f.stroke()}});function Ee(f){return f=f??2,function(R,U,y,T,L,O,Q,it,pt,H){L=L*(Q+pt),O=O*(Q+pt);var F=T.clone();return function(){R.begin(),R.moveTo(F.x,F.y),it?R.lineTo(F.x-L-O/f,F.y-O+L/f):R.lineTo(F.x+O/f-L,F.y-O-L/f),R.stroke()}}}if(mxMarker.addMarker("openAsync",Ee(2)),typeof mxVertexHandler<"u"){let f=function(H,F,B,st,ft,vt,xt){var It=new mxHandle(H,null,mxVertexHandler.prototype.secondaryHandleImage);if(It.execute=function(zt){for(var le=0;le<F.length;le++)this.copyStyle(F[le]);xt&&xt(zt)},It.getPosition=B,It.setPosition=st,It.ignoreGrid=ft??!0,vt){var Pt=It.positionChanged;It.positionChanged=function(){Pt.apply(this,arguments),H.view.invalidate(this.state.cell),H.view.validate()}}return It},R=function(H,F){return f(H,[mxConstants$1.STYLE_ARCSIZE],function(B){var st=F??B.height/8;if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1"){var ft=mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;return new mxPoint(B.x+B.width-Math.min(B.width/2,ft),B.y+st)}else{var ft=Math.max(0,parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.RECTANGLE_ROUNDING_FACTOR*100)))/100;return new mxPoint(B.x+B.width-Math.min(Math.max(B.width/2,B.height/2),Math.min(B.width,B.height)*ft),B.y+st)}},function(B,st,ft){if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ABSOLUTE_ARCSIZE,0)=="1")this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(B.width,(B.x+B.width-st.x)*2)));else{var vt=Math.min(50,Math.max(0,(B.width-st.x+B.x)*100/Math.min(B.width,B.height)));this.state.style[mxConstants$1.STYLE_ARCSIZE]=Math.round(vt)}})},U=function(){return function(H){var F=[];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&F.push(R(H)),F}},y=function(H,F,B){return H=H??.5,function(st){var ft=[f(st,["size"],function(vt){var xt=B!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,It=Math.max(0,parseFloat(mxUtils$1.getValue(this.state.style,"size",xt?B:F)));return new mxPoint(vt.x+Math.min(vt.width*.75*H,It*(xt?.75:vt.width*.75)),vt.y+vt.height/4)},function(vt,xt){var It=B!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,Pt=It?xt.x-vt.x:Math.max(0,Math.min(H,(xt.x-vt.x)/vt.width*.75));this.state.style.size=Pt},!1,!0)];return mxUtils$1.getValue(st.style,mxConstants$1.STYLE_ROUNDED,!1)&&ft.push(R(st)),ft}},T=function(H,F,B,st,ft){return B=B??.5,function(vt){var xt=[f(vt,["size"],function(It){var Pt=ft!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,zt=parseFloat(mxUtils$1.getValue(this.state.style,"size",Pt?ft:H));return new mxPoint(It.x+Math.max(0,Math.min(It.width*.5,zt*(Pt?1:It.width))),It.getCenterY())},function(It,Pt,zt){var le=ft!=null?mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0":null,de=le?Pt.x-It.x:Math.max(0,Math.min(B,(Pt.x-It.x)/It.width));this.state.style.size=de},!1,st)];return F&&mxUtils$1.getValue(vt.style,mxConstants$1.STYLE_ROUNDED,!1)&&xt.push(R(vt)),xt}},L=function(H,F,B){return function(st){var ft=[f(st,["size"],function(vt){var xt=Math.max(0,Math.min(vt.width,Math.min(vt.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",F)))))*H;return new mxPoint(vt.x+xt,vt.y+xt)},function(vt,xt){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(vt.width,xt.x-vt.x),Math.min(vt.height,xt.y-vt.y)))/H)},!1)];return B&&mxUtils$1.getValue(st.style,mxConstants$1.STYLE_ROUNDED,!1)&&ft.push(R(st)),ft}},O=function(H){return function(F){return[f(F,["size"],function(B){var st=Math.max(0,Math.min(B.height*.5,parseFloat(mxUtils$1.getValue(this.state.style,"size",H))));return new mxPoint(B.x,B.y+st)},function(B,st){this.state.style.size=Math.max(0,st.y-B.y)},!0)]}},Q=function(H){return function(F){return[f(F,["arrowWidth","arrowSize"],function(B){var st=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"arrowWidth",_.prototype.arrowWidth))),ft=Math.max(0,Math.min(H,mxUtils$1.getValue(this.state.style,"arrowSize",_.prototype.arrowSize)));return new mxPoint(B.x+(1-ft)*B.width,B.y+(1-st)*B.height/2)},function(B,st){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(B.y+B.height/2-st.y)/B.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(H,(B.x+B.width-st.x)/B.width))})]}},it=function(H,F,B,st,ft){return f(H,F,function(vt){var xt=H.absolutePoints,It=xt.length-1,Pt=H.view.translate,zt=H.view.scale,le=B?xt[0]:xt[It],de=B?xt[1]:xt[It-1],ve=de.x-le.x,pe=de.y-le.y,Ce=Math.sqrt(ve*ve+pe*pe),Ie=st.call(this,Ce,ve/Ce,pe/Ce,le,de);return new mxPoint(Ie.x/zt-Pt.x,Ie.y/zt-Pt.y)},function(vt,xt,It){var Pt=H.absolutePoints,zt=Pt.length-1,le=H.view.translate,de=H.view.scale,ve=B?Pt[0]:Pt[zt],pe=B?Pt[1]:Pt[zt-1],Ce=pe.x-ve.x,Ie=pe.y-ve.y,He=Math.sqrt(Ce*Ce+Ie*Ie);xt.x=(xt.x+le.x)*de,xt.y=(xt.y+le.y)*de,ft.call(this,He,Ce/He,Ie/He,ve,pe,xt,It)})},pt=function(H,F,B){return it(H,["width"],F,function(st,ft,vt,xt,It){var Pt=H.shape.getEdgeWidth()*H.view.scale+B;return new mxPoint(xt.x+ft*st/4+vt*Pt/2,xt.y+vt*st/4-ft*Pt/2)},function(st,ft,vt,xt,It,Pt){var zt=Math.sqrt(mxUtils$1.ptSegDistSq(xt.x,xt.y,It.x,It.y,Pt.x,Pt.y));H.style.width=Math.round(zt*2)/H.view.scale-B})};var Se=f,Le=R,_e=U,Ge=y,ke=T,Ne=L,be=O,Ae=Q,ce=it,xe=pt,fe={link:function(H){var F=10;return[pt(H,!0,F),pt(H,!1,F)]},flexArrow:function(H){var F=H.view.graph.gridSize/H.view.scale,B=[];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(B.push(it(H,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(st,ft,vt,xt,It){var Pt=(H.shape.getEdgeWidth()-H.shape.strokewidth)*H.view.scale,zt=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(xt.x+ft*(zt+H.shape.strokewidth*H.view.scale)+vt*Pt/2,xt.y+vt*(zt+H.shape.strokewidth*H.view.scale)-ft*Pt/2)},function(st,ft,vt,xt,It,Pt,zt){var le=Math.sqrt(mxUtils$1.ptSegDistSq(xt.x,xt.y,It.x,It.y,Pt.x,Pt.y)),de=mxUtils$1.ptLineDist(xt.x,xt.y,xt.x+vt,xt.y-ft,Pt.x,Pt.y);H.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((de-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.width=Math.round(le*2)/H.view.scale,mxEvent.isControlDown(zt.getEvent())&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE]),mxEvent.isAltDown(zt.getEvent())||Math.abs(parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE]))<F/6&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE])})),B.push(it(H,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!0,function(st,ft,vt,xt,It){var Pt=(H.shape.getStartArrowWidth()-H.shape.strokewidth)*H.view.scale,zt=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(xt.x+ft*(zt+H.shape.strokewidth*H.view.scale)+vt*Pt/2,xt.y+vt*(zt+H.shape.strokewidth*H.view.scale)-ft*Pt/2)},function(st,ft,vt,xt,It,Pt,zt){var le=Math.sqrt(mxUtils$1.ptSegDistSq(xt.x,xt.y,It.x,It.y,Pt.x,Pt.y)),de=mxUtils$1.ptLineDist(xt.x,xt.y,xt.x+vt,xt.y-ft,Pt.x,Pt.y);H.style[mxConstants$1.STYLE_STARTSIZE]=Math.round((de-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.startWidth=Math.max(0,Math.round(le*2)-H.shape.getEdgeWidth())/H.view.scale,mxEvent.isControlDown(zt.getEvent())&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE],H.style.endWidth=H.style.startWidth),mxEvent.isAltDown(zt.getEvent())||(Math.abs(parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE])-parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE]))<F/6&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE]),Math.abs(parseFloat(H.style.startWidth)-parseFloat(H.style.endWidth))<F&&(H.style.startWidth=H.style.endWidth))}))),mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ENDARROW,mxConstants$1.NONE)!=mxConstants$1.NONE&&(B.push(it(H,["width",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(st,ft,vt,xt,It){var Pt=(H.shape.getEdgeWidth()-H.shape.strokewidth)*H.view.scale,zt=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(xt.x+ft*(zt+H.shape.strokewidth*H.view.scale)-vt*Pt/2,xt.y+vt*(zt+H.shape.strokewidth*H.view.scale)+ft*Pt/2)},function(st,ft,vt,xt,It,Pt,zt){var le=Math.sqrt(mxUtils$1.ptSegDistSq(xt.x,xt.y,It.x,It.y,Pt.x,Pt.y)),de=mxUtils$1.ptLineDist(xt.x,xt.y,xt.x+vt,xt.y-ft,Pt.x,Pt.y);H.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((de-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.width=Math.round(le*2)/H.view.scale,mxEvent.isControlDown(zt.getEvent())&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE]),mxEvent.isAltDown(zt.getEvent())||Math.abs(parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE]))<F/6&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE])})),B.push(it(H,["startWidth","endWidth",mxConstants$1.STYLE_STARTSIZE,mxConstants$1.STYLE_ENDSIZE],!1,function(st,ft,vt,xt,It){var Pt=(H.shape.getEndArrowWidth()-H.shape.strokewidth)*H.view.scale,zt=mxUtils$1.getNumber(H.style,mxConstants$1.STYLE_ENDSIZE,mxConstants$1.ARROW_SIZE/5)*3*H.view.scale;return new mxPoint(xt.x+ft*(zt+H.shape.strokewidth*H.view.scale)-vt*Pt/2,xt.y+vt*(zt+H.shape.strokewidth*H.view.scale)+ft*Pt/2)},function(st,ft,vt,xt,It,Pt,zt){var le=Math.sqrt(mxUtils$1.ptSegDistSq(xt.x,xt.y,It.x,It.y,Pt.x,Pt.y)),de=mxUtils$1.ptLineDist(xt.x,xt.y,xt.x+vt,xt.y-ft,Pt.x,Pt.y);H.style[mxConstants$1.STYLE_ENDSIZE]=Math.round((de-H.shape.strokewidth)*100/3)/100/H.view.scale,H.style.endWidth=Math.max(0,Math.round(le*2)-H.shape.getEdgeWidth())/H.view.scale,mxEvent.isControlDown(zt.getEvent())&&(H.style[mxConstants$1.STYLE_STARTSIZE]=H.style[mxConstants$1.STYLE_ENDSIZE],H.style.startWidth=H.style.endWidth),mxEvent.isAltDown(zt.getEvent())||(Math.abs(parseFloat(H.style[mxConstants$1.STYLE_ENDSIZE])-parseFloat(H.style[mxConstants$1.STYLE_STARTSIZE]))<F/6&&(H.style[mxConstants$1.STYLE_ENDSIZE]=H.style[mxConstants$1.STYLE_STARTSIZE]),Math.abs(parseFloat(H.style.endWidth)-parseFloat(H.style.startWidth))<F&&(H.style.endWidth=H.style.startWidth))}))),B},swimlane:function(H){var F=[];if(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED)){var B=parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));F.push(R(H,B/2))}return F.push(f(H,[mxConstants$1.STYLE_STARTSIZE],function(st){var ft=parseFloat(mxUtils$1.getValue(H.style,mxConstants$1.STYLE_STARTSIZE,mxConstants$1.DEFAULT_STARTSIZE));return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?new mxPoint(st.getCenterX(),st.y+Math.max(0,Math.min(st.height,ft))):new mxPoint(st.x+Math.max(0,Math.min(st.width,ft)),st.getCenterY())},function(st,ft){H.style[mxConstants$1.STYLE_STARTSIZE]=mxUtils$1.getValue(this.state.style,mxConstants$1.STYLE_HORIZONTAL,1)==1?Math.round(Math.max(0,Math.min(st.height,ft.y-st.y))):Math.round(Math.max(0,Math.min(st.width,ft.x-st.x)))},!1,null,function(st){if(mxEvent.isControlDown(st.getEvent())){var ft=H.view.graph;if(ft.isTableRow(H.cell)||ft.isTableCell(H.cell)){for(var vt=ft.getSwimlaneDirection(H.style),xt=ft.model.getParent(H.cell),It=ft.model.getChildCells(xt,!0),Pt=[],zt=0;zt<It.length;zt++)It[zt]!=H.cell&&ft.isSwimlane(It[zt])&&ft.getSwimlaneDirection(ft.getCurrentCellStyle(It[zt]))==vt&&Pt.push(It[zt]);ft.setCellStyles(mxConstants$1.STYLE_STARTSIZE,H.style[mxConstants$1.STYLE_STARTSIZE],Pt)}}})),F},label:U(),ext:U(),rectangle:U(),triangle:U(),rhombus:U(),roundedRectangle:function(H){return[]},umlLifeline:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(F.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",ct.prototype.size))));return new mxPoint(F.getCenterX(),F.y+B)},function(F,B){this.state.style.size=Math.round(Math.max(0,Math.min(F.height,B.y-F.y)))},!1)]},umlFrame:function(H){var F=[f(H,["width","height"],function(B){var st=Math.max(Et.prototype.corner,Math.min(B.width,mxUtils$1.getValue(this.state.style,"width",Et.prototype.width))),ft=Math.max(Et.prototype.corner*1.5,Math.min(B.height,mxUtils$1.getValue(this.state.style,"height",Et.prototype.height)));return new mxPoint(B.x+st,B.y+ft)},function(B,st){this.state.style.width=Math.round(Math.max(Et.prototype.corner,Math.min(B.width,st.x-B.x))),this.state.style.height=Math.round(Math.max(Et.prototype.corner*1.5,Math.min(B.height,st.y-B.y)))},!1)];return F},process:function(H){var F=[f(H,["size"],function(B){var st=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",ft=parseFloat(mxUtils$1.getValue(this.state.style,"size",rt.prototype.size));return st?new mxPoint(B.x+ft,B.y+B.height/4):new mxPoint(B.x+B.width*ft,B.y+B.height/4)},function(B,st){var ft=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",vt=ft?Math.max(0,Math.min(B.width*.5,st.x-B.x)):Math.max(0,Math.min(.5,(st.x-B.x)/B.width));this.state.style.size=vt},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&F.push(R(H)),F},cross:function(H){return[f(H,["size"],function(F){var B=Math.min(F.width,F.height),st=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"size",he.prototype.size)))*B/2;return new mxPoint(F.getCenterX()-st,F.getCenterY()-st)},function(F,B){var st=Math.min(F.width,F.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,F.getCenterY()-B.y)/st*2,Math.max(0,F.getCenterX()-B.x)/st*2)))})]},note:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(F.width,Math.min(F.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",r.prototype.size)))));return new mxPoint(F.x+F.width-B,F.y+B)},function(F,B){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(F.width,F.x+F.width-B.x),Math.min(F.height,B.y-F.y))))})]},note2:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(F.width,Math.min(F.height,parseFloat(mxUtils$1.getValue(this.state.style,"size",o.prototype.size)))));return new mxPoint(F.x+F.width-B,F.y+B)},function(F,B){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(F.width,F.x+F.width-B.x),Math.min(F.height,B.y-F.y))))})]},manualInput:function(H){var F=[f(H,["size"],function(B){var st=Math.max(0,Math.min(B.height,mxUtils$1.getValue(this.state.style,"size",Bt.prototype.size)));return new mxPoint(B.x+B.width/4,B.y+st*3/4)},function(B,st){this.state.style.size=Math.round(Math.max(0,Math.min(B.height,(st.y-B.y)*4/3)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&F.push(R(H)),F},dataStorage:function(H){return[f(H,["size"],function(F){var B=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",st=parseFloat(mxUtils$1.getValue(this.state.style,"size",B?W.prototype.fixedSize:W.prototype.size));return new mxPoint(F.x+F.width-st*(B?1:F.width),F.getCenterY())},function(F,B){var st=mxUtils$1.getValue(this.state.style,"fixedSize","0")!="0",ft=st?Math.max(0,Math.min(F.width,F.x+F.width-B.x)):Math.max(0,Math.min(1,(F.x+F.width-B.x)/F.width));this.state.style.size=ft},!1)]},callout:function(H){var F=[f(H,["size","position"],function(B){var st=Math.max(0,Math.min(B.height,mxUtils$1.getValue(this.state.style,"size",Y.prototype.size))),ft=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Y.prototype.position)));return Math.max(0,Math.min(B.width,mxUtils$1.getValue(this.state.style,"base",Y.prototype.base))),new mxPoint(B.x+ft*B.width,B.y+B.height-st)},function(B,st){Math.max(0,Math.min(B.width,mxUtils$1.getValue(this.state.style,"base",Y.prototype.base))),this.state.style.size=Math.round(Math.max(0,Math.min(B.height,B.y+B.height-st.y))),this.state.style.position=Math.round(Math.max(0,Math.min(1,(st.x-B.x)/B.width))*100)/100},!1),f(H,["position2"],function(B){var st=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position2",Y.prototype.position2)));return new mxPoint(B.x+st*B.width,B.y+B.height)},function(B,st){this.state.style.position2=Math.round(Math.max(0,Math.min(1,(st.x-B.x)/B.width))*100)/100},!1),f(H,["base"],function(B){var st=Math.max(0,Math.min(B.height,mxUtils$1.getValue(this.state.style,"size",Y.prototype.size))),ft=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Y.prototype.position))),vt=Math.max(0,Math.min(B.width,mxUtils$1.getValue(this.state.style,"base",Y.prototype.base)));return new mxPoint(B.x+Math.min(B.width,ft*B.width+vt),B.y+B.height-st)},function(B,st){var ft=Math.max(0,Math.min(1,mxUtils$1.getValue(this.state.style,"position",Y.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(B.width,st.x-B.x-ft*B.width)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&F.push(R(H)),F},internalStorage:function(H){var F=[f(H,["dx","dy"],function(B){var st=Math.max(0,Math.min(B.width,mxUtils$1.getValue(this.state.style,"dx",S.prototype.dx))),ft=Math.max(0,Math.min(B.height,mxUtils$1.getValue(this.state.style,"dy",S.prototype.dy)));return new mxPoint(B.x+st,B.y+ft)},function(B,st){this.state.style.dx=Math.round(Math.max(0,Math.min(B.width,st.x-B.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(B.height,st.y-B.y)))},!1)];return mxUtils$1.getValue(H.style,mxConstants$1.STYLE_ROUNDED,!1)&&F.push(R(H)),F},module:function(H){var F=[f(H,["jettyWidth","jettyHeight"],function(B){var st=Math.max(0,Math.min(B.width,mxUtils$1.getValue(this.state.style,"jettyWidth",yt.prototype.jettyWidth))),ft=Math.max(0,Math.min(B.height,mxUtils$1.getValue(this.state.style,"jettyHeight",yt.prototype.jettyHeight)));return new mxPoint(B.x+st/2,B.y+ft*2)},function(B,st){this.state.style.jettyWidth=Math.round(Math.max(0,Math.min(B.width,st.x-B.x))*2),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(B.height,st.y-B.y))/2)})];return F},corner:function(H){return[f(H,["dx","dy"],function(F){var B=Math.max(0,Math.min(F.width,mxUtils$1.getValue(this.state.style,"dx",A.prototype.dx))),st=Math.max(0,Math.min(F.height,mxUtils$1.getValue(this.state.style,"dy",A.prototype.dy)));return new mxPoint(F.x+B,F.y+st)},function(F,B){this.state.style.dx=Math.round(Math.max(0,Math.min(F.width,B.x-F.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(F.height,B.y-F.y)))},!1)]},tee:function(H){return[f(H,["dx","dy"],function(F){var B=Math.max(0,Math.min(F.width,mxUtils$1.getValue(this.state.style,"dx",N.prototype.dx))),st=Math.max(0,Math.min(F.height,mxUtils$1.getValue(this.state.style,"dy",N.prototype.dy)));return new mxPoint(F.x+(F.width+B)/2,F.y+st)},function(F,B){this.state.style.dx=Math.round(Math.max(0,Math.min(F.width/2,B.x-F.x-F.width/2)*2)),this.state.style.dy=Math.round(Math.max(0,Math.min(F.height,B.y-F.y)))},!1)]},singleArrow:Q(1),doubleArrow:Q(.5),folder:function(H){return[f(H,["tabWidth","tabHeight"],function(F){var B=Math.max(0,Math.min(F.width,mxUtils$1.getValue(this.state.style,"tabWidth",g.prototype.tabWidth))),st=Math.max(0,Math.min(F.height,mxUtils$1.getValue(this.state.style,"tabHeight",g.prototype.tabHeight)));return mxUtils$1.getValue(this.state.style,"tabPosition",g.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(B=F.width-B),new mxPoint(F.x+B,F.y+st)},function(F,B){var st=Math.max(0,Math.min(F.width,B.x-F.x));mxUtils$1.getValue(this.state.style,"tabPosition",g.prototype.tabPosition)==mxConstants$1.ALIGN_RIGHT&&(st=F.width-st),this.state.style.tabWidth=Math.round(st),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(F.height,B.y-F.y)))},!1)]},document:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",E.prototype.size))));return new mxPoint(F.x+3*F.width/4,F.y+(1-B)*F.height)},function(F,B){this.state.style.size=Math.max(0,Math.min(1,(F.y+F.height-B.y)/F.height))},!1)]},tape:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",C.prototype.size))));return new mxPoint(F.getCenterX(),F.y+B*F.height/2)},function(F,B){this.state.style.size=Math.max(0,Math.min(1,(B.y-F.y)/F.height*2))},!1)]},isoCube2:function(H){return[f(H,["isoAngle"],function(F){var B=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.state.style,"isoAngle",h.isoAngle))))*Math.PI/200,st=Math.min(F.width*Math.tan(B),F.height*.5);return new mxPoint(F.x,F.y+st)},function(F,B){this.state.style.isoAngle=Math.max(0,(B.y-F.y)*50/F.height)},!0)]},cylinder2:O(u.prototype.size),cylinder3:O(d.prototype.size),offPageConnector:function(H){return[f(H,["size"],function(F){var B=Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.state.style,"size",Lt.prototype.size))));return new mxPoint(F.getCenterX(),F.y+(1-B)*F.height)},function(F,B){this.state.style.size=Math.max(0,Math.min(1,(F.y+F.height-B.y)/F.height))},!1)]},step:T(G.prototype.size,!0,null,!0,G.prototype.fixedSize),hexagon:T(J.prototype.size,!0,.5,!0,J.prototype.fixedSize),curlyBracket:T(P.prototype.size,!1),display:T(ae.prototype.size,!1),cube:L(1,i.prototype.size,!1),card:L(.5,v.prototype.size,!0),loopLimit:L(.5,mt.prototype.size,!0),trapezoid:y(.5,$.prototype.size,$.prototype.fixedSize),parallelogram:y(1,w.prototype.size,w.prototype.fixedSize)};Graph$1.createHandle=f,Graph$1.handleFactory=fe;var Gt=mxVertexHandler.prototype.createCustomHandles;mxVertexHandler.prototype.createCustomHandles=function(){var H=Gt.apply(this,arguments);if(this.graph.isCellRotatable(this.state.cell)){var F=this.state.style.shape;mxCellRenderer.defaultShapes[F]==null&&mxStencilRegistry.getStencil(F)==null?F=mxConstants$1.SHAPE_RECTANGLE:this.state.view.graph.isSwimlane(this.state.cell)&&(F=mxConstants$1.SHAPE_SWIMLANE);var B=fe[F];if(B==null&&this.state.shape!=null&&this.state.shape.isRoundable()&&(B=fe[mxConstants$1.SHAPE_RECTANGLE]),B!=null){var st=B(this.state);st!=null&&(H==null?H=st:H=H.concat(st))}}return H},mxEdgeHandler.prototype.createCustomHandles=function(){var H=this.state.style.shape;mxCellRenderer.defaultShapes[H]==null&&mxStencilRegistry.getStencil(H)==null&&(H=mxConstants$1.SHAPE_CONNECTOR);var F=fe[H];return F!=null?F(this.state):null}}else Graph$1.createHandle=function(){},Graph$1.handleFactory={};var St=new mxPoint(1,0),Ft=new mxPoint(1,0),kt=mxUtils$1.toRadians(-30),wt=Math.cos(kt),te=Math.sin(kt);St=mxUtils$1.getRotatedPoint(St,wt,te);var se=mxUtils$1.toRadians(-150),ie=Math.cos(se),ue=Math.sin(se);Ft=mxUtils$1.getRotatedPoint(Ft,ie,ue),mxEdgeStyle.IsometricConnector=function(f,R,U,y,T){var L=f.view,O=y!=null&&y.length>0?y[0]:null,Q=f.absolutePoints,it=Q[0],pt=Q[Q.length-1];O!=null&&(O=L.transformControlPoint(f,O)),it==null&&R!=null&&(it=new mxPoint(R.getCenterX(),R.getCenterY())),pt==null&&U!=null&&(pt=new mxPoint(U.getCenterX(),U.getCenterY()));var H=St.x,F=St.y,B=Ft.x,st=Ft.y,ft=mxUtils$1.getValue(f.style,"elbow","horizontal")=="horizontal";if(pt!=null&&it!=null){let It=function(Pt,zt,le){var de=Pt-vt.x,ve=zt-vt.y,pe=(st*de-B*ve)/(H*st-F*B),Ce=(F*de-H*ve)/(F*B-H*st);ft?(le&&(vt=new mxPoint(vt.x+H*pe,vt.y+F*pe),T.push(vt)),vt=new mxPoint(vt.x+B*Ce,vt.y+st*Ce),T.push(vt)):(le&&(vt=new mxPoint(vt.x+B*Ce,vt.y+st*Ce),T.push(vt)),vt=new mxPoint(vt.x+H*pe,vt.y+F*pe),T.push(vt))};var xt=It,vt=it;O==null&&(O=new mxPoint(it.x+(pt.x-it.x)/2,it.y+(pt.y-it.y)/2)),It(O.x,O.y,!0),It(pt.x,pt.y,!1)}},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector);var oe=Graph$1.prototype.createEdgeHandler;Graph$1.prototype.createEdgeHandler=function(f,R){if(R==mxEdgeStyle.IsometricConnector){var U=new mxElbowEdgeHandler(f);return U.snapToTerminals=!1,U}return oe.apply(this,arguments)},n.prototype.constraints=[],s.prototype.getConstraints=function(f,R,U){var y=[],T=Math.tan(mxUtils$1.toRadians(30)),L=(.5-T)/2,O=Math.min(R,U/(.5+T)),Q=(R-O)/2,it=(U-O)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q,it+.25*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q+.5*O,it+O*L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q+O,it+.25*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q+O,it+.75*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q+.5*O,it+(1-L)*O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,Q,it+.75*O)),y},h.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(.01,Math.min(94,parseFloat(mxUtils$1.getValue(this.style,"isoAngle",this.isoAngle))))*Math.PI/200,L=Math.min(R*Math.tan(T),U*.5);return y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,U-L)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U-L)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,L)),y},Y.prototype.getConstraints=function(f,R,U){var y=[];mxUtils$1.getValue(this.style,mxConstants$1.STYLE_ARCSIZE,mxConstants$1.LINE_ARCSIZE)/2;var T=Math.max(0,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));R*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position",this.position))));var L=R*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"position2",this.position2))));return Math.max(0,Math.min(R,parseFloat(mxUtils$1.getValue(this.style,"base",this.base)))),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.25,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.75,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U-T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,U-T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,L,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U-T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U-T)*.5)),R>=T*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],re.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,tt.prototype.constraints=mxRectangleShape.prototype.constraints,mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,r.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T*.5,T*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U+T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),R>=T*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},v.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T*.5,T*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U+T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),R>=T*2&&y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y},i.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T*.5,T*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U+T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T*.5,U-T*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U-T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U-T)*.5)),y},d.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"size",this.size))));return y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,T)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,T)),y.push(new mxConnectionConstraint(new mxPoint(1,1),!1,null,0,-T)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1,null,0,-T)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,T+(U*.5-T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,T+(U*.5-T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1,null,0,U-T-(U*.5-T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U-T-(U*.5-T)*.5)),y.push(new mxConnectionConstraint(new mxPoint(.145,0),!1,null,0,T*.29)),y.push(new mxConnectionConstraint(new mxPoint(.855,0),!1,null,0,T*.29)),y.push(new mxConnectionConstraint(new mxPoint(.855,1),!1,null,0,-T*.29)),y.push(new mxConnectionConstraint(new mxPoint(.145,1),!1,null,0,-T*.29)),y},g.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,parseFloat(mxUtils$1.getValue(this.style,"tabWidth",this.tabWidth)))),L=Math.max(0,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"tabHeight",this.tabHeight)))),O=mxUtils$1.getValue(this.style,"tabPosition",this.tabPosition);return O=="left"?(y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,L))):(y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,L))),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U-L)*.25+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U-L)*.5+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,(U-L)*.75+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U-L)*.25+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U-L)*.5+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,(U-L)*.75+L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U)),y.push(new mxConnectionConstraint(new mxPoint(.25,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(.75,1),!1)),y},S.prototype.constraints=mxRectangleShape.prototype.constraints,W.prototype.constraints=mxRectangleShape.prototype.constraints,Ct.prototype.constraints=mxEllipse.prototype.constraints,Ut.prototype.constraints=mxEllipse.prototype.constraints,Mt.prototype.constraints=mxEllipse.prototype.constraints,jt.prototype.constraints=mxEllipse.prototype.constraints,Bt.prototype.constraints=mxRectangleShape.prototype.constraints,ee.prototype.constraints=mxRectangleShape.prototype.constraints,ae.prototype.getConstraints=function(f,R,U){var y=[],T=Math.min(R,U/2),L=Math.min(R-T,Math.max(0,parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))*R);return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,L,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(L+R-T)*.5,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-T,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(L+R-T)*.5,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,L,U)),y},yt.prototype.getConstraints=function(f,R,U){var y=parseFloat(mxUtils$1.getValue(f,"jettyWidth",yt.prototype.jettyWidth))/2,T=parseFloat(mxUtils$1.getValue(f,"jettyHeight",yt.prototype.jettyHeight)),L=[new mxConnectionConstraint(new mxPoint(0,0),!1,null,y),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!1,null,y),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(U-.5*T,1.5*T)),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(U-.5*T,3.5*T))];return U>5*T&&L.push(new mxConnectionConstraint(new mxPoint(0,.75),!1,null,y)),U>8*T&&L.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null,y)),U>15*T&&L.push(new mxConnectionConstraint(new mxPoint(0,.25),!1,null,y)),L},mt.prototype.constraints=mxRectangleShape.prototype.constraints,Lt.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],nt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],_t.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],m.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],C.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],G.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],Ht.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],w.prototype.constraints=mxRectangleShape.prototype.constraints,$.prototype.constraints=mxRectangleShape.prototype.constraints,E.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,N.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),L=Math.max(0,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R*.75+T*.25,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,(U+L)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,U)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,(U+L)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-T)*.5,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R*.25-T*.25,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,L*.5)),y},A.prototype.getConstraints=function(f,R,U){var y=[],T=Math.max(0,Math.min(R,parseFloat(mxUtils$1.getValue(this.style,"dx",this.dx)))),L=Math.max(0,Math.min(U,parseFloat(mxUtils$1.getValue(this.style,"dy",this.dy))));return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+T)*.5,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,L)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,(U+L)*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,T*.5,U)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),y},I.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],_.prototype.getConstraints=function(f,R,U){var y=[],T=U*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",this.arrowWidth)))),L=R*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",this.arrowSize)))),O=(U-T)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-L)*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-L,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-L,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R-L)*.5,U-O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,U-O)),y},V.prototype.getConstraints=function(f,R,U){var y=[],T=U*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowWidth",_.prototype.arrowWidth)))),L=R*Math.max(0,Math.min(1,parseFloat(mxUtils$1.getValue(this.style,"arrowSize",_.prototype.arrowSize)))),O=(U-T)/2;return y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,L,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-L,0)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R-L,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R*.5,U-O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,L,U)),y},he.prototype.getConstraints=function(f,R,U){var y=[],T=Math.min(U,R),L=Math.max(0,Math.min(T,T*parseFloat(mxUtils$1.getValue(this.style,"size",this.size)))),O=(U-L)/2,Q=O+L,it=(R-L)/2,pt=it+L;return y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,0)),y.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,0)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,U-O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,U)),y.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,U)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,U-O*.5)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,pt,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+pt)*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,O)),y.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,R,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,(R+pt)*.5,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it*.5,O)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,O)),y.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it*.5,Q)),y.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,it,O)),y},ct.prototype.constraints=null,ot.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],at.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],Nt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],lt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]})();var urlParams$1=function(a){var i=new Object,t=a.lastIndexOf("?");if(t>0)for(var e=a.substring(t+1).split("&"),n=0;n<e.length;n++)t=e[n].indexOf("="),t>0&&(i[e[n].substring(0,t)]=e[n].substring(t+1));return i}(window.location.href);(function(){var a=EditorUi.prototype.init;EditorUi.prototype.init=function(){a.apply(this,arguments),this.actions.get("export").setEnabled(!1),this.actions.get("saveAs").setEnabled(!0)},mxResources$1.loadDefaultBundle=!1;var i=mxResources$1.getDefaultBundle(RESOURCE_BASE,void 0)||mxResources$1.getSpecialBundle(RESOURCE_BASE,void 0);mxUtils$1.getAll([i,STYLE_PATH+"/default.xml"],function(t){mxResources$1.parse(t[0].getText());var e=new Object;e[Graph$1.prototype.defaultThemeName]=t[1].getDocumentElement(),new EditorUi(new Editor$1(urlParams$1.chrome=="0",e))},function(){document.body.innerHTML='<center style="margin-top:10%;">Error loading resource files. Please check browser console.</center>'})})();(function(){window.global_a="WINDOW GGGGG"})();
